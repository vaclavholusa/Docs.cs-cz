---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/design-to-survive-failures
title: Návrh odolný proti chybám (vytváření skutečných cloudových aplikací s Azure) | Dokumentace Microsoftu
author: MikeWasson
description: Vytváření reálného světa cloudových aplikací s Azure e kniha je založená na prezentaci vypracovanou organizací cccppf Scott Guthrie. Vysvětluje 13 vzory a postupy, které se dají mu...
ms.author: riande
ms.date: 06/12/2014
ms.assetid: 364ce84e-5af8-4e08-afc9-75a512b01f84
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/design-to-survive-failures
msc.type: authoredcontent
ms.openlocfilehash: 72b26fd58866df1296d06bd9e3bc695900cfbf65
ms.sourcegitcommit: 7b4e3936feacb1a8fcea7802aab3e2ea9c8af5b4
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/04/2018
ms.locfileid: "48578468"
---
<a name="design-to-survive-failures-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="e0552-104">Návrh pro selhání (vytváření skutečných cloudových aplikací s Azure)</span><span class="sxs-lookup"><span data-stu-id="e0552-104">Design to Survive Failures (Building Real-World Cloud Apps with Azure)</span></span>
====================
<span data-ttu-id="e0552-105">podle [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Petr Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="e0552-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="e0552-106">[Stažení opravit projektu](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) nebo [stáhnout elektronickou knihu](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="e0552-106">[Download Fix It Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="e0552-107">**Vytváření reálného světa cloudových aplikací s Azure** e knihy je založena na prezentaci vypracovanou organizací cccppf Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="e0552-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="e0552-108">Vysvětluje 13 vzory a postupy, které vám pomůžou být úspěšný vývoj webových aplikací v cloudu.</span><span class="sxs-lookup"><span data-stu-id="e0552-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="e0552-109">Informace o e kniha najdete v tématu [první kapitoly](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="e0552-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>


<span data-ttu-id="e0552-110">Jednou z věcí, které mají zvážit při vytváření jakéhokoli typu aplikace, ale hlavně jeden, který se spustí v cloudu, ve kterém velké množství lidí použití, jak navrhovat aplikace tak, aby můžete elegantně zpracovat selhání a dál přinášet nemalé hodnoty je co nejvíce je to možné.</span><span class="sxs-lookup"><span data-stu-id="e0552-110">One of the things you have to think about when you build any type of application, but especially one that will run in the cloud where lots of people will be using it, is how to design the app so that it can gracefully handle failures and continue to deliver value as much as possible.</span></span> <span data-ttu-id="e0552-111">Zadaný dostatek času, co se chystáte dojde k problémům v jakémkoli prostředí nebo v každém softwarovém systému.</span><span class="sxs-lookup"><span data-stu-id="e0552-111">Given enough time, things are going to go wrong in any environment or any software system.</span></span> <span data-ttu-id="e0552-112">Způsob, jakým aplikace zpracovává tyto situace Určuje, jak nespokojený vaši zákazníci můžou získat a jak dlouho budete muset věnovat analýza a řešení problémů.</span><span class="sxs-lookup"><span data-stu-id="e0552-112">How your app handles those situations determines how upset your customers will get and how much time you have to spend analyzing and fixing problems.</span></span>

## <a name="types-of-failures"></a><span data-ttu-id="e0552-113">Typy chyb</span><span class="sxs-lookup"><span data-stu-id="e0552-113">Types of failures</span></span>

<span data-ttu-id="e0552-114">Existují dvě základní kategorie chyb, které budete chtít zpracovat jinak:</span><span class="sxs-lookup"><span data-stu-id="e0552-114">There are two basic categories of failures that you'll want to handle differently:</span></span>

- <span data-ttu-id="e0552-115">Přechodná, opravy chyb, jako jsou problémy s připojením sítě.</span><span class="sxs-lookup"><span data-stu-id="e0552-115">Transient, self-healing failures such as intermittent network connectivity issues.</span></span>
- <span data-ttu-id="e0552-116">Trvalou chyby, které vyžadují zásah.</span><span class="sxs-lookup"><span data-stu-id="e0552-116">Enduring failures that require intervention.</span></span>

<span data-ttu-id="e0552-117">Pro přechodná selhání můžete implementovat zásady opakování zajistit, že ve většině případů obnoví aplikace rychle a automaticky.</span><span class="sxs-lookup"><span data-stu-id="e0552-117">For transient failures, you can implement a retry policy to ensure that most of the time the app recovers quickly and automatically.</span></span> <span data-ttu-id="e0552-118">Může si vaši zákazníci o něco delší dobu odezvy, ale jinak nebude mít vliv.</span><span class="sxs-lookup"><span data-stu-id="e0552-118">Your customers might notice slightly longer response time, but otherwise they won't be affected.</span></span> <span data-ttu-id="e0552-119">Vám ukážeme některé způsobů zpracování těchto chyb v [zpracování přechodných chyb kapitoly](transient-fault-handling.md).</span><span class="sxs-lookup"><span data-stu-id="e0552-119">We'll show some ways to handle these errors in the [Transient Fault Handling chapter](transient-fault-handling.md).</span></span>

<span data-ttu-id="e0552-120">Pro enduring selhání, můžete implementovat monitorování a protokolování funkci, která okamžitě vás upozorní, když vzniku a, která usnadňuje analýzu původní příčiny.</span><span class="sxs-lookup"><span data-stu-id="e0552-120">For enduring failures, you can implement monitoring and logging functionality that notifies you promptly when issues arise and that facilitates root cause analysis.</span></span> <span data-ttu-id="e0552-121">Vám ukážeme některé způsoby, jak vám připněte si tyto druhy chyb v [monitorování a Telemetrie kapitoly](monitoring-and-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="e0552-121">We'll show some ways to help you stay on top of these kinds of errors in the [Monitoring and Telemetry chapter](monitoring-and-telemetry.md).</span></span>

## <a name="failure-scope"></a><span data-ttu-id="e0552-122">Rozsah selhání</span><span class="sxs-lookup"><span data-stu-id="e0552-122">Failure scope</span></span>

<span data-ttu-id="e0552-123">Taky je potřeba uvažovat o selhání oboru – ať už je vliv na jeden počítač, celou službu jako je SQL Database nebo úložiště nebo celou oblast.</span><span class="sxs-lookup"><span data-stu-id="e0552-123">You also have to think about failure scope – whether a single machine is affected, a whole service such as SQL Database or Storage, or an entire region.</span></span>

![Rozsah selhání](design-to-survive-failures/_static/image1.png)

### <a name="machine-failures"></a><span data-ttu-id="e0552-125">Selhání počítače</span><span class="sxs-lookup"><span data-stu-id="e0552-125">Machine failures</span></span>

<span data-ttu-id="e0552-126">V Azure selhání serveru je automaticky nahrazena novou a dobře navržené cloudové aplikace zotavení z tohoto typu selhání automaticky a rychle.</span><span class="sxs-lookup"><span data-stu-id="e0552-126">In Azure, a failed server is automatically replaced by a new one, and a well-designed cloud app recovers from this kind of failure automatically and quickly.</span></span> <span data-ttu-id="e0552-127">Dříve jsme zdůraznit výhod škálovatelnosti bezstavové webové vrstvy a Další výhodou statelessness je snadné zotavení ze selhání serveru.</span><span class="sxs-lookup"><span data-stu-id="e0552-127">Earlier we stressed the scalability benefits of a stateless web tier, and ease of recovery from a failed server is another benefit of statelessness.</span></span> <span data-ttu-id="e0552-128">Snadné obnovení je také jednou z výhod platforma jako služba (PaaS) funkce, jako je SQL Database a Azure App Service Web Apps.</span><span class="sxs-lookup"><span data-stu-id="e0552-128">Ease of recovery is also one of the benefits of platform-as-a-service (PaaS) features such as SQL Database and Azure App Service Web Apps.</span></span> <span data-ttu-id="e0552-129">Selhání hardwaru, které se vyskytují jen vzácně, ale pokud k nim dojde, že tyto služby je umožňují automaticky zpracovat; dokonce nemusíte psát kód pro zpracování chyb počítače, když pracujete s některou z těchto služeb.</span><span class="sxs-lookup"><span data-stu-id="e0552-129">Hardware failures are rare, but when they occur these services handle them automatically; you don't even have to write code to handle machine failures when you're using one of these services.</span></span>

### <a name="service-failures"></a><span data-ttu-id="e0552-130">Chyby služby</span><span class="sxs-lookup"><span data-stu-id="e0552-130">Service failures</span></span>

<span data-ttu-id="e0552-131">Cloudové aplikace obvykle používají více služeb.</span><span class="sxs-lookup"><span data-stu-id="e0552-131">Cloud apps typically use multiple services.</span></span> <span data-ttu-id="e0552-132">Například aplikace Fix It používá službu SQL Database, službu úložiště a webové aplikace se nasadí do služby Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="e0552-132">For example, the Fix It app uses the SQL Database service, the Storage service, and the web app is deployed to Azure App Service.</span></span> <span data-ttu-id="e0552-133">Co se vaše aplikace dělat, když dojde k selhání jednoho služby, které závisí na?</span><span class="sxs-lookup"><span data-stu-id="e0552-133">What will your app do if one of the services you depend on fails?</span></span> <span data-ttu-id="e0552-134">Pro některé služby selhání popisný "je nám líto, zkuste to znovu později" zpráva může být nejlepší, vám pomůžou.</span><span class="sxs-lookup"><span data-stu-id="e0552-134">For some service failures a friendly "sorry, try again later" message might be the best you can do.</span></span> <span data-ttu-id="e0552-135">Ale v mnoha scénářích vám pomůžou lépe.</span><span class="sxs-lookup"><span data-stu-id="e0552-135">But in many scenarios you can do better.</span></span> <span data-ttu-id="e0552-136">Například když váš back endovým datům úložiště je vypnutý, můžete přijímají vstup uživatele, zobrazit "vaše žádost byla přijata" a dočasně; ukládání vstup musí být zhruba else potom když službu, potřebujete opět v provozu, můžete načíst vstupní a zpracovat je.</span><span class="sxs-lookup"><span data-stu-id="e0552-136">For example, when your back-end data store is down, you can accept user input, display "your request has been received," and store the input someplace else temporarily; then when the service you need is operational again, you can retrieve the input and process it.</span></span>

<span data-ttu-id="e0552-137">[Vzor založený na frontě pracovní](queue-centric-work-pattern.md) kapitoly ukazuje jeden ze způsobů tímto scénářem poradit.</span><span class="sxs-lookup"><span data-stu-id="e0552-137">The [Queue-centric Work Pattern](queue-centric-work-pattern.md) chapter shows one way to handle this scenario.</span></span> <span data-ttu-id="e0552-138">Aplikace Fix It ukládá úkoly do databáze SQL, ale nemusí to přestane pracovat po SQL Database je mimo provoz.</span><span class="sxs-lookup"><span data-stu-id="e0552-138">The Fix It app stores tasks in SQL Database, but it doesn't have to quit working when SQL Database is down.</span></span> <span data-ttu-id="e0552-139">V této kapitole uvidíme, jak uložit uživatelský vstup pro úlohu ve frontě a používat pracovní proces frontě číst a aktualizovat úlohu.</span><span class="sxs-lookup"><span data-stu-id="e0552-139">In that chapter we'll see how to store user input for a task in a queue, and use a worker process to read the queue and update the task.</span></span> <span data-ttu-id="e0552-140">Pokud SQL je vypnutý, není ovlivněn; schopnost vytvářet úkoly Fix It pracovní proces může čekat a zpracovat nové úkoly v případě, že SQL Database je dostupná.</span><span class="sxs-lookup"><span data-stu-id="e0552-140">If SQL is down, the ability to create Fix It tasks is unaffected; the worker process can wait and process new tasks when SQL Database is available.</span></span>

### <a name="region-failures"></a><span data-ttu-id="e0552-141">Selhání oblasti</span><span class="sxs-lookup"><span data-stu-id="e0552-141">Region failures</span></span>

<span data-ttu-id="e0552-142">Celé oblasti může selhat.</span><span class="sxs-lookup"><span data-stu-id="e0552-142">Entire regions may fail.</span></span> <span data-ttu-id="e0552-143">Přírodní katastrofě může zničit datového centra, může získat sloučí podle meteor službě, může být snížili řádku trunk do datového centra dobytka burying krávy s rýpadlového atd. Pokud je vaše aplikace hostovaná v stricken datacenter co dělat?</span><span class="sxs-lookup"><span data-stu-id="e0552-143">A natural disaster might destroy a data center, it might get flattened by a meteor, the trunk line into the datacenter could be cut by a farmer burying a cow with a backhoe, etc. If your app is hosted in the stricken datacenter what do you do?</span></span> <span data-ttu-id="e0552-144">Je možné nastavit vaši aplikaci v Azure ke spuštění v několika oblastech současně, takže pokud nedojde k havárii v jednom, bude možné i nadále spuštěna v jiné oblasti.</span><span class="sxs-lookup"><span data-stu-id="e0552-144">It's possible to set up your app in Azure to run in multiple regions simultaneously so that if there's a disaster in one, you continue running in another region.</span></span> <span data-ttu-id="e0552-145">Tyto chyby jsou velmi vzácné výskyty a většina aplikací není přejít přes obruče nezbytné k zajištění nepřerušovaného službě přes tento typ selhání.</span><span class="sxs-lookup"><span data-stu-id="e0552-145">Such failures are extremely rare occurrences, and most apps don't jump through the hoops necessary to ensure uninterrupted service through failures of this sort.</span></span> <span data-ttu-id="e0552-146">V části prostředky na konci kapitoly informace o tom, jak vaše aplikace, klidně i prostřednictvím selhání oblasti k dispozici.</span><span class="sxs-lookup"><span data-stu-id="e0552-146">See the Resources section at the end of the chapter for information about how to keep your app available even through a region failure.</span></span>

<span data-ttu-id="e0552-147">Cílem Azure je zpracování všem těmto typům selhání mnohem jednodušší a uvidíte několik příkladů, jak vám to jde, který v následujících kapitolách.</span><span class="sxs-lookup"><span data-stu-id="e0552-147">A goal of Azure is to make handling all of these kinds of failures a lot easier, and you'll see some examples of how we're doing that in the following chapters.</span></span>

## <a name="slas"></a><span data-ttu-id="e0552-148">Smlouvy o úrovni služeb</span><span class="sxs-lookup"><span data-stu-id="e0552-148">SLAs</span></span>

<span data-ttu-id="e0552-149">Lidé často poslechněte si o smlouvy o úrovni služeb (SLA) v cloudovém prostředí.</span><span class="sxs-lookup"><span data-stu-id="e0552-149">People often hear about service-level agreements (SLAs) in the cloud environment.</span></span> <span data-ttu-id="e0552-150">V podstatě jde o příslibů, které usnadňují společností o tom, jak spolehlivé příslušnou službu.</span><span class="sxs-lookup"><span data-stu-id="e0552-150">Basically these are promises that companies make about how reliable their service is.</span></span> <span data-ttu-id="e0552-151">99,9 % smlouva SLA znamená, že jste byste očekávat, že služba funguje správně 99,9 % času.</span><span class="sxs-lookup"><span data-stu-id="e0552-151">A 99.9% SLA means you should expect the service to be working correctly 99.9% of the time.</span></span> <span data-ttu-id="e0552-152">To je poměrně Typická hodnota pro smlouvu SLA a vypadá podobně jako velmi velký počet, ale možná zjistíte, kolik času dolů. 1 % ve skutečnosti částek.</span><span class="sxs-lookup"><span data-stu-id="e0552-152">That's a fairly typical value for an SLA and it sounds like a very high number, but you might not realize how much down time .1% actually amounts to.</span></span> <span data-ttu-id="e0552-153">Tady je tabulka, která ukazuje, jak velká Doba výpadku různých procentní smlouvy SLA částka za rok, měsíc a za týden.</span><span class="sxs-lookup"><span data-stu-id="e0552-153">Here's a table that shows how much downtime various SLA percentages amount to over a year, a month, and a week.</span></span>

![Smlouva SLA tabulky](design-to-survive-failures/_static/image2.png)

<span data-ttu-id="e0552-155">Proto 99,9 % smlouva SLA znamená, že vaše služba může být mimo provoz 8.76 hodin za rok nebo 43,2 minut za měsíc.</span><span class="sxs-lookup"><span data-stu-id="e0552-155">So a 99.9% SLA means your service could be down 8.76 hours a year or 43.2 minutes a month.</span></span> <span data-ttu-id="e0552-156">To je více časové prodlevy než většina lidí realizovat.</span><span class="sxs-lookup"><span data-stu-id="e0552-156">That's more down time than most people realize.</span></span> <span data-ttu-id="e0552-157">Tak jako vývojář chcete mějte na paměti, že je možné určité množství časové prodlevy a bezproblémové způsobem ji zpracovat.</span><span class="sxs-lookup"><span data-stu-id="e0552-157">So as a developer you want to be aware that a certain amount of down time is possible and handle it in a graceful way.</span></span> <span data-ttu-id="e0552-158">V určitém okamžiku někdo se bude používat vaše aplikace a služby se to být mimo provoz a chcete minimalizovat negativní dopad, který na zákazníka.</span><span class="sxs-lookup"><span data-stu-id="e0552-158">At some point someone is going to be using your app, and a service is going to be down, and you want to minimize the negative impact of that on the customer.</span></span>

<span data-ttu-id="e0552-159">Je jedna věc, kterou byste měli vědět o SLA jakém časovém horizontu, na který odkazuje: funkci hodin získat resetování, každý týden, každý měsíc nebo každý rok?</span><span class="sxs-lookup"><span data-stu-id="e0552-159">One thing you should know about an SLA is what time-frame it refers to: does the clock get reset every week, every month, or every year?</span></span> <span data-ttu-id="e0552-160">V Azure jsme obnovit platit každý měsíc, což je pro vás lepší než roční SLA, protože roční SLA může skrýt slabé měsíce započtení s řadou dobré měsíců.</span><span class="sxs-lookup"><span data-stu-id="e0552-160">In Azure we reset the clock every month, which is better for you than a yearly SLA, since a yearly SLA could hide bad months by offsetting them with a series of good months.</span></span>

<span data-ttu-id="e0552-161">Samozřejmě vždy držet udělat lépe než SLA; Obvykle budete dolů mnohem menší než.</span><span class="sxs-lookup"><span data-stu-id="e0552-161">Of course we always aspire to do better than the SLA; usually you'll be down much less than that.</span></span> <span data-ttu-id="e0552-162">Uskutečnění je, že pokud jsme pro vás někdy dolů po dobu delší než maximální časové prodlevy můžete požádat o vrácení peněz.</span><span class="sxs-lookup"><span data-stu-id="e0552-162">The promise is that if we're ever down for longer than the maximum down time you can ask for money back.</span></span> <span data-ttu-id="e0552-163">Množství peníze, které získáte zpět pravděpodobně nebude kompenzovat plně dopad na chod firmy překročení časové prodlevy, ale tento aspekt smlouvy SLA funguje jako penále za a oznámí vám, že jsme jít velmi vážně.</span><span class="sxs-lookup"><span data-stu-id="e0552-163">The amount of money you get back probably wouldn't fully compensate you for the business impact of the excess down time, but that aspect of the SLA acts as an enforcement policy and lets you know that we do take it very seriously.</span></span>

### <a name="composite-slas"></a><span data-ttu-id="e0552-164">Složené smlouvy SLA</span><span class="sxs-lookup"><span data-stu-id="e0552-164">Composite SLAs</span></span>

<span data-ttu-id="e0552-165">Důležité zamyslet, když se díváte na smlouvy SLA je dopad pomocí několika služeb v aplikaci, přičemž každá služba má samostatné smlouvy SLA.</span><span class="sxs-lookup"><span data-stu-id="e0552-165">An important thing to think about when you're looking at SLAs is the impact of using multiple services in an app, with each service having a separate SLA.</span></span> <span data-ttu-id="e0552-166">Například aplikace Fix It používá Azure App Service Web Apps služby Azure Storage a SQL Database.</span><span class="sxs-lookup"><span data-stu-id="e0552-166">For example, the Fix It app uses Azure App Service Web Apps, Azure Storage, and SQL Database.</span></span> <span data-ttu-id="e0552-167">Tady jsou jejich čísla SLA k datu, které tato elektronická kniha se zápisem v prosinci, 2013:</span><span class="sxs-lookup"><span data-stu-id="e0552-167">Here are their SLA numbers as of the date this e-book is being written in December, 2013:</span></span>

![Smlouva SLA webové stránky, Storage, SQL Database](design-to-survive-failures/_static/image3.png)

<span data-ttu-id="e0552-169">Jaký je maximální výpadek podle vašeho očekávání pro aplikace založené na těchto smluv SLA služby?</span><span class="sxs-lookup"><span data-stu-id="e0552-169">What is the maximum down time you would expect for the app based on these service SLAs?</span></span> <span data-ttu-id="e0552-170">Si možná myslíte, že vaše dolů by se rovná nejhorší procento SLA nebo 99,9 % v tomto případě.</span><span class="sxs-lookup"><span data-stu-id="e0552-170">You might think that your down time would be equal to the worst SLA percentage, or 99.9% in this case.</span></span> <span data-ttu-id="e0552-171">Který bude mít hodnotu true, pokud všechny tři služby se nezdařilo vždy ve stejnou dobu, ale to není nutně co přesně se stane.</span><span class="sxs-lookup"><span data-stu-id="e0552-171">That would be true if all three services always failed at the same time, but that isn't necessarily what actually happens.</span></span> <span data-ttu-id="e0552-172">Každá služba může selhat nezávisle na sobě v různou dobu, abyste měli k výpočtu Složená hodnota SLA vynásobením jednotlivých čísel smlouvu SLA.</span><span class="sxs-lookup"><span data-stu-id="e0552-172">Each service may fail independently at different times, so you have to calculate the composite SLA by multiplying the individual SLA numbers.</span></span>

![Složená hodnota SLA](design-to-survive-failures/_static/image4.png)

<span data-ttu-id="e0552-174">Aby vaše aplikace může být mimo provoz nejen 43,2 minut za měsíc, ale 3násobek velikosti, 108 minut za měsíc – a v rámci smlouvy SLA pro Azure i nadále.</span><span class="sxs-lookup"><span data-stu-id="e0552-174">So your app could be down not just 43.2 minutes a month but 3 times that amount, 108 minutes a month – and still be within the Azure SLA limits.</span></span>

<span data-ttu-id="e0552-175">Tento problém není jedinečný pro Azure.</span><span class="sxs-lookup"><span data-stu-id="e0552-175">This issue is not unique to Azure.</span></span> <span data-ttu-id="e0552-176">Ve skutečnosti zajišťuje nejlepší cloud SLA kteroukoli cloudovou službu, která je k dispozici a bude nutné podobné problémy řešit, pokud používáte libovolného dodavatele cloudových služeb.</span><span class="sxs-lookup"><span data-stu-id="e0552-176">We actually provide the best cloud SLAs of any cloud service available, and you'll have similar issues to deal with if you use any vendor's cloud services.</span></span> <span data-ttu-id="e0552-177">To ukazuje je důležitost přemýšlet o tom, jak můžete navrhnout vaše aplikace pro zpracování selhání nevyhnutelné služby bez výpadku, protože může dojít dostatečně často dopad na vaše zákazníky nebo uživatele.</span><span class="sxs-lookup"><span data-stu-id="e0552-177">What this highlights is the importance of thinking about how you can design your app to handle the inevitable service failures gracefully, because they might happen often enough to impact your customers or users.</span></span>

### <a name="cloud-slas-compared-to-enterprise-down-time-experience"></a><span data-ttu-id="e0552-178">Cloud, smlouvy o úrovni služeb ve srovnání s enterprise výpadkům prostředí</span><span class="sxs-lookup"><span data-stu-id="e0552-178">Cloud SLAs compared to enterprise down-time experience</span></span>

<span data-ttu-id="e0552-179">Uživatelé někdy říct "Ve své aplikaci enterprise mám nikdy k dispozici tyto problémy."</span><span class="sxs-lookup"><span data-stu-id="e0552-179">People sometimes say, "In my enterprise app I never have these problems."</span></span> <span data-ttu-id="e0552-180">Po zadání otázky kolik výpadkům v měsíci ve skutečnosti mají, jsou obvykle například "Dobře, to se stane, čas od času."</span><span class="sxs-lookup"><span data-stu-id="e0552-180">If you ask how much down time a month they actually have, they usually say, "Well, it happens occasionally."</span></span> <span data-ttu-id="e0552-181">A po zadání otázky jak často se uznat, který "Někdy potřebujeme zálohovat nebo instalaci nového serveru nebo aktualizace softwaru."</span><span class="sxs-lookup"><span data-stu-id="e0552-181">And if you ask how often, they admit that "Sometimes we do need to back up or install a new server or update software."</span></span> <span data-ttu-id="e0552-182">Samozřejmě, které se počítá jako časové prodlevy.</span><span class="sxs-lookup"><span data-stu-id="e0552-182">Of course, that counts as down time.</span></span> <span data-ttu-id="e0552-183">Většina podnikových aplikací Pokud jsou obzvláště důležité jsou ve skutečnosti dolů déle než dovolují naše smlouvy SLA služby časového intervalu.</span><span class="sxs-lookup"><span data-stu-id="e0552-183">Most enterprise apps unless they are especially mission-critical are actually down for more than the amount of time allowed by our service SLAs.</span></span> <span data-ttu-id="e0552-184">Ale když je váš server a infrastrukturu, budete pro něj a kontrolu nad jeho budete cítit, že menší angst dolů časy.</span><span class="sxs-lookup"><span data-stu-id="e0552-184">But when it's your server and your infrastructure and you're responsible for it and in control of it, you tend to feel less angst about down times.</span></span> <span data-ttu-id="e0552-185">V cloudovém prostředí budete závisí na někdo jiný a nevíte co se děje, takže může vést k získání více obavy o něm.</span><span class="sxs-lookup"><span data-stu-id="e0552-185">In a cloud environment you're dependent on someone else and you don't know what's going on, so you might tend to get more worried about it.</span></span>

<span data-ttu-id="e0552-186">Organizace dosahuje větší procento doby provozu než získáte z cloudu smlouvy SLA, dělají to podle mnohem víc peníze výdaje na hardware.</span><span class="sxs-lookup"><span data-stu-id="e0552-186">When an enterprise achieves a greater up-time percentage than you get from a cloud SLA, they do it by spending a lot more money on hardware.</span></span> <span data-ttu-id="e0552-187">Cloudovou službu to udělat, ale byste museli mnoho dalšího pro jeho služby účtovat.</span><span class="sxs-lookup"><span data-stu-id="e0552-187">A cloud service could do that but would have to charge much more for its services.</span></span> <span data-ttu-id="e0552-188">Místo toho využít nákladově efektivní služby a návrh vašeho softwaru tak, aby nevyhnutelné selhání způsobit přerušení minimální vašim zákazníkům.</span><span class="sxs-lookup"><span data-stu-id="e0552-188">Instead, you take advantage of a cost-effective service and design your software so that the inevitable failures cause minimum disruption to your customers.</span></span> <span data-ttu-id="e0552-189">Úlohy při návrhu aplikace cloud není tak velká, aby selhání, aby se zabránilo katastrofická a můžete to udělat díky zaměření na softwaru, ne na hardware.</span><span class="sxs-lookup"><span data-stu-id="e0552-189">Your job as a cloud app designer is not so much to avoid failure as to avoid catastrophe, and you do that by focusing on software, not on hardware.</span></span> <span data-ttu-id="e0552-190">Vzhledem k tomu, přitom se snaží maximalizovat střední doby mezi poruchami podnikové aplikace, cloudové aplikace snažit minimalizovat průměrný čas potřebný k obnovení.</span><span class="sxs-lookup"><span data-stu-id="e0552-190">Whereas enterprise apps strive to maximize mean time between failures, cloud apps strive to minimize mean time to recover.</span></span>

### <a name="not-all-cloud-services-have-slas"></a><span data-ttu-id="e0552-191">Ne všechny cloudové služby mají smlouvy o úrovni služeb</span><span class="sxs-lookup"><span data-stu-id="e0552-191">Not all cloud services have SLAs</span></span>

<span data-ttu-id="e0552-192">Upozorňujeme také, že ne každé cloudové službě ještě nemá smlouvu SLA.</span><span class="sxs-lookup"><span data-stu-id="e0552-192">Be aware also that not every cloud service even has an SLA.</span></span> <span data-ttu-id="e0552-193">Pokud je vaše aplikace závislá na službě s neposkytujeme záruku doby provozu, může být mimo provoz mnohem déle, než může být imagine.</span><span class="sxs-lookup"><span data-stu-id="e0552-193">If your app is dependent on a service with no up-time guarantee, you could be down far longer than you might imagine.</span></span> <span data-ttu-id="e0552-194">Například pokud povolíte přihlašování k webu pomocí poskytovatele sociálních sítí, jako je Facebook nebo Twitter, obraťte se na poskytovatele služeb, které chcete zjistit, pokud je SLA a může pro vás tam není.</span><span class="sxs-lookup"><span data-stu-id="e0552-194">For example, if you enable log-in to your site using a social provider such as Facebook or Twitter, check with the service provider to find out if there is an SLA, and you might find out there isn't one.</span></span> <span data-ttu-id="e0552-195">Ale pokud ověřovací službu ocitne mimo provoz nebo je schopen množství žádostí, abyste vyvolali na to, které podporují, jsou zamknuté vaši zákazníci z vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="e0552-195">But if the authentication service goes down or is unable to support the volume of requests you throw at it, your customers are locked out of your app.</span></span> <span data-ttu-id="e0552-196">Dnů nebo i delší dobu, může být mimo provoz.</span><span class="sxs-lookup"><span data-stu-id="e0552-196">You could be down for days or longer.</span></span> <span data-ttu-id="e0552-197">Autoři jednu novou aplikaci očekával stovky milionů souborů ke stažení a závislá na ověřování sítě Facebook –, ale nepovedlo komunikovat s Facebooku nepřejdou za provozu a zjištěných příliš pozdě, které se žádná smlouva SLA pro tuto službu.</span><span class="sxs-lookup"><span data-stu-id="e0552-197">The creators of one new app expected hundreds of millions of downloads and took a dependency on Facebook authentication – but didn't talk to Facebook before going live and discovered too late that there was no SLA for that service.</span></span>

### <a name="not-all-downtime-counts-toward-slas"></a><span data-ttu-id="e0552-198">Ne všechny počty výpadek směrem k smlouvy o úrovni služeb</span><span class="sxs-lookup"><span data-stu-id="e0552-198">Not all downtime counts toward SLAs</span></span>

<span data-ttu-id="e0552-199">Některé cloudové služby může záměrně odepřít služby v případě, že aplikace nadměrně používá.</span><span class="sxs-lookup"><span data-stu-id="e0552-199">Some cloud services may deliberately deny service if your app over-uses them.</span></span> <span data-ttu-id="e0552-200">Tento postup se nazývá *omezování*.</span><span class="sxs-lookup"><span data-stu-id="e0552-200">This is called *throttling*.</span></span> <span data-ttu-id="e0552-201">Pokud služba má smlouvu SLA, by mělo být uvedeno podmínky, za kterých může být omezený a návrhu vaší aplikace měli vyhnout tyto podmínky a náležitě reagovat na omezení, pokud se to stane.</span><span class="sxs-lookup"><span data-stu-id="e0552-201">If a service has an SLA, it should state the conditions under which you might be throttled, and your app design should avoid those conditions and react appropriately to the throttling if it happens.</span></span> <span data-ttu-id="e0552-202">Například pokud požadavky na službu začínají selhávat po překročení určitého počtu za sekundu, chcete zajistit, aby automatické opakování pokusů nedojde tak rychle, mohou způsobit omezení pokračujte.</span><span class="sxs-lookup"><span data-stu-id="e0552-202">For example, if requests to a service start to fail when you exceed a certain number per second, you want to make sure automatic retries don't happen so fast that they cause the throttling to continue.</span></span> <span data-ttu-id="e0552-203">Budeme mít více říkají o omezování v [zpracování přechodných chyb kapitoly](transient-fault-handling.md).</span><span class="sxs-lookup"><span data-stu-id="e0552-203">We'll have more to say about throttling in the [Transient Fault Handling chapter](transient-fault-handling.md).</span></span>

## <a name="summary"></a><span data-ttu-id="e0552-204">Souhrn</span><span class="sxs-lookup"><span data-stu-id="e0552-204">Summary</span></span>

<span data-ttu-id="e0552-205">Tato kapitola nepokusí umožňují Uvědomte si, proč reálného světa cloudové aplikace má být navržena k překonání selhání bez výpadku.</span><span class="sxs-lookup"><span data-stu-id="e0552-205">This chapter has tried to help you realize why a real world cloud app has to be designed to survive failures gracefully.</span></span> <span data-ttu-id="e0552-206">Počínaje [další kapitolu](monitoring-and-telemetry.md), zbývající vzory v této sérii přejít na podrobnější informace o několik strategií, můžete to udělat:</span><span class="sxs-lookup"><span data-stu-id="e0552-206">Starting with the [next chapter](monitoring-and-telemetry.md), the remaining patterns in this series go into more detail about some strategies you can use to do that:</span></span>

- <span data-ttu-id="e0552-207">Mít kvalitní [monitorování a telemetrie](monitoring-and-telemetry.md), kde zjistíte, rychle o selhání, které vyžadují zásah, a máte dostatek informací k jejich řešení.</span><span class="sxs-lookup"><span data-stu-id="e0552-207">Have good [monitoring and telemetry](monitoring-and-telemetry.md), so that you find out quickly about failures that require intervention, and you have sufficient information to resolve them.</span></span>
- <span data-ttu-id="e0552-208">[Zpracování přechodných chyb](transient-fault-handling.md) implementací logiku opakování inteligentní, aby vaše aplikace obnoví automaticky při může a spadne zpět na [jistič](transient-fault-handling.md#circuitbreakers) logiku, když ji nelze.</span><span class="sxs-lookup"><span data-stu-id="e0552-208">[Handle transient faults](transient-fault-handling.md) by implementing intelligent retry logic, so that your app recovers automatically when it can and falls back to [circuit breaker](transient-fault-handling.md#circuitbreakers) logic when it can't.</span></span>
- <span data-ttu-id="e0552-209">Použití [distribuované ukládání do mezipaměti](distributed-caching.md) za účelem minimalizace připojení, latence a propustnosti problémy s přístupem k databázi.</span><span class="sxs-lookup"><span data-stu-id="e0552-209">Use [distributed caching](distributed-caching.md) in order to minimize throughput, latency, and connection problems with database access.</span></span>
- <span data-ttu-id="e0552-210">Volné párování prostřednictvím implementace [pracovní postup založený na frontě](queue-centric-work-pattern.md)tak, aby front-endu vaší aplikace můžete i nadále fungovat, když back-endu je mimo provoz.</span><span class="sxs-lookup"><span data-stu-id="e0552-210">Implement loose coupling via the [queue-centric work pattern](queue-centric-work-pattern.md), so that your app front end can continue to work when the back end is down.</span></span>

## <a name="resources"></a><span data-ttu-id="e0552-211">Prostředky</span><span class="sxs-lookup"><span data-stu-id="e0552-211">Resources</span></span>

<span data-ttu-id="e0552-212">Další informace najdete v dalších kapitolách tuto elektronickou příručku a následující prostředky.</span><span class="sxs-lookup"><span data-stu-id="e0552-212">For more information, see later chapters in this e-book and the following resources.</span></span>

<span data-ttu-id="e0552-213">Dokumentace ke službě:</span><span class="sxs-lookup"><span data-stu-id="e0552-213">Documentation:</span></span>

- <span data-ttu-id="e0552-214">[Bezporuchový: Pokyny, odolné cloudové architektury](https://msdn.microsoft.com/library/windowsazure/jj853352.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0552-214">[Failsafe: Guidance for Resilient Cloud Architectures](https://msdn.microsoft.com/library/windowsazure/jj853352.aspx).</span></span> <span data-ttu-id="e0552-215">Dokument White paper Marc Mercuri, Ulrich Homann a Andrew Townhill.</span><span class="sxs-lookup"><span data-stu-id="e0552-215">White paper by Marc Mercuri, Ulrich Homann, and Andrew Townhill.</span></span> <span data-ttu-id="e0552-216">Webová stránka verze bezporuchový videu z řady.</span><span class="sxs-lookup"><span data-stu-id="e0552-216">Web page version of the FailSafe video series.</span></span>
- <span data-ttu-id="e0552-217">[Osvědčené postupy pro navrhování rozsáhlých služeb v Azure Cloud Services](https://msdn.microsoft.com/library/windowsazure/jj717232.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0552-217">[Best Practices for the Design of Large-Scale Services on Azure Cloud Services](https://msdn.microsoft.com/library/windowsazure/jj717232.aspx).</span></span> <span data-ttu-id="e0552-218">Dokument White paper Mark Simms a Michael Thomassy.</span><span class="sxs-lookup"><span data-stu-id="e0552-218">White paper by Mark Simms and Michael Thomassy.</span></span>
- <span data-ttu-id="e0552-219">[Technické pokyny Azure obchodní kontinuity podnikových procesů](https://msdn.microsoft.com/library/windowsazure/hh873027.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0552-219">[Azure Business Continuity Technical Guidance](https://msdn.microsoft.com/library/windowsazure/hh873027.aspx).</span></span> <span data-ttu-id="e0552-220">Dokument White paper Patrick Wickline a Jason Roth.</span><span class="sxs-lookup"><span data-stu-id="e0552-220">White paper by Patrick Wickline and Jason Roth.</span></span>
- <span data-ttu-id="e0552-221">[Zotavení po havárii a vysoká dostupnost pro aplikace Azure](https://msdn.microsoft.com/library/windowsazure/dn251004.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0552-221">[Disaster Recovery and High Availability for Azure Applications](https://msdn.microsoft.com/library/windowsazure/dn251004.aspx).</span></span> <span data-ttu-id="e0552-222">Dokument White paper Michael McKeown, Hanu Kommalapati a Jason Roth.</span><span class="sxs-lookup"><span data-stu-id="e0552-222">White paper by Michael McKeown, Hanu Kommalapati, and Jason Roth.</span></span>
- <span data-ttu-id="e0552-223">[Microsoft Vzory a postupy – doprovodné materiály k Azure](https://msdn.microsoft.com/library/dn568099.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0552-223">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="e0552-224">Zobrazit pokyny k nasazení s více datového centra, jističe.</span><span class="sxs-lookup"><span data-stu-id="e0552-224">See Multi Data Center Deployment guidance, Circuit breaker pattern.</span></span>
- <span data-ttu-id="e0552-225">[Podpora Azure – smlouvy o úrovni služeb](https://azure.microsoft.com/support/legal/sla/).</span><span class="sxs-lookup"><span data-stu-id="e0552-225">[Azure Support - Service Level Agreements](https://azure.microsoft.com/support/legal/sla/).</span></span>
- <span data-ttu-id="e0552-226">[Kontinuita podnikových procesů ve službě Azure SQL Database](https://msdn.microsoft.com/library/windowsazure/hh852669.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0552-226">[Business Continuity in Azure SQL Database](https://msdn.microsoft.com/library/windowsazure/hh852669.aspx).</span></span> <span data-ttu-id="e0552-227">Dokumentaci ke službě SQL Database vysokou dostupnost a funkce pro obnovení.</span><span class="sxs-lookup"><span data-stu-id="e0552-227">Documentation about SQL Database high availability and disaster recovery features.</span></span>
- <span data-ttu-id="e0552-228">[Vysoká dostupnost a zotavení po havárii pro SQL Server na virtuálních počítačích Azure](https://msdn.microsoft.com/library/windowsazure/jj870962.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0552-228">[High Availability and Disaster Recovery for SQL Server in Azure Virtual Machines](https://msdn.microsoft.com/library/windowsazure/jj870962.aspx).</span></span>

<span data-ttu-id="e0552-229">Videa:</span><span class="sxs-lookup"><span data-stu-id="e0552-229">Videos:</span></span>

- <span data-ttu-id="e0552-230">[Bezporuchový: Sestavování škálovatelných, odolných cloudových služeb](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="e0552-230">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="e0552-231">Ulrich Homann, Marc Mercuri a Mark Simms devět částí série.</span><span class="sxs-lookup"><span data-stu-id="e0552-231">Nine-part series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="e0552-232">Nabídne základními koncepty a Principy architektury tak vysoce dostupné a zajímavé příběhy z prostředí Microsoft zákazníka poradní tým (CAT) se skutečným zákazníkům.</span><span class="sxs-lookup"><span data-stu-id="e0552-232">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="e0552-233">Epizody 1 a 8 pohledu do hloubky důvody pro vývoj cloudových aplikací při selhání.</span><span class="sxs-lookup"><span data-stu-id="e0552-233">Episodes 1 and 8 go in depth into the reasons for designing cloud apps to survive failures.</span></span> <span data-ttu-id="e0552-234">Další informace najdete v článku následné diskuzi o omezování v epizoda 2 počínaje 49:57 diskuzi o bodů selhání a režimů selhání v epizoda 2 počínaje 56:05 a diskuzi o jističe v epizodě 3 počínaje 40:55.</span><span class="sxs-lookup"><span data-stu-id="e0552-234">See also the follow-up discussion of throttling in episode 2 starting at 49:57, the discussion of failure points and failure modes in episode 2 starting at 56:05, and the discussion of circuit breakers in episode 3 starting at 40:55.</span></span>
- <span data-ttu-id="e0552-235">[Vytváření Big: Získané od zákazníků Azure – část II](https://channel9.msdn.com/Events/Build/2012/3-030).</span><span class="sxs-lookup"><span data-stu-id="e0552-235">[Building Big: Lessons learned from Azure customers - Part II](https://channel9.msdn.com/Events/Build/2012/3-030).</span></span> <span data-ttu-id="e0552-236">Mark Simms se hovoří o návrh pro selhání a všechno, co instrumentace.</span><span class="sxs-lookup"><span data-stu-id="e0552-236">Mark Simms talks about designing for failure and instrumenting everything.</span></span> <span data-ttu-id="e0552-237">Podobně jako řady bezporuchový ale přejde do další postupy podrobnosti.</span><span class="sxs-lookup"><span data-stu-id="e0552-237">Similar to the Failsafe series but goes into more how-to details.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="e0552-238">[Předchozí](unstructured-blob-storage.md)
> [další](monitoring-and-telemetry.md)</span><span class="sxs-lookup"><span data-stu-id="e0552-238">[Previous](unstructured-blob-storage.md)
[Next](monitoring-and-telemetry.md)</span></span>
