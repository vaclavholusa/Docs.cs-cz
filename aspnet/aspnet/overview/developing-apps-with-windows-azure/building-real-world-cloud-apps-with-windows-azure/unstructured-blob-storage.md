---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/unstructured-blob-storage
title: Nestrukturované úložiště objektů Blob (vytváření skutečných cloudových aplikací s Azure) | Dokumentace Microsoftu
author: MikeWasson
description: Vytváření reálného světa cloudových aplikací s Azure e kniha je založená na prezentaci vypracovanou organizací cccppf Scott Guthrie. Vysvětluje 13 vzory a postupy, které se dají mu...
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/30/2015
ms.topic: article
ms.assetid: 9f05ccb1-2004-4661-ad8b-c370e6c09c8e
ms.technology: ''
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/unstructured-blob-storage
msc.type: authoredcontent
ms.openlocfilehash: 1840bea3b4183838ffdfe710e987b864a05d53fb
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/03/2018
ms.locfileid: "37364181"
---
<a name="unstructured-blob-storage-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="39af2-104">Nestrukturované úložiště objektů Blob (vytváření skutečných cloudových aplikací s Azure)</span><span class="sxs-lookup"><span data-stu-id="39af2-104">Unstructured Blob Storage (Building Real-World Cloud Apps with Azure)</span></span>
====================
<span data-ttu-id="39af2-105">podle [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://github.com/Rick-Anderson), [Petr Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="39af2-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://github.com/Rick-Anderson), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="39af2-106">[Stažení opravit projektu](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) nebo [stáhnout elektronickou knihu](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="39af2-106">[Download Fix It Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="39af2-107">**Vytváření reálného světa cloudových aplikací s Azure** e knihy je založena na prezentaci vypracovanou organizací cccppf Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="39af2-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="39af2-108">Vysvětluje 13 vzory a postupy, které vám pomůžou být úspěšný vývoj webových aplikací v cloudu.</span><span class="sxs-lookup"><span data-stu-id="39af2-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="39af2-109">Informace o e kniha najdete v tématu [první kapitoly](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="39af2-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>


<span data-ttu-id="39af2-110">V předchozích kapitol jsme zvažovali schémata dělení a vysvětlení způsobu, jakým aplikace Fix It ukládá obrázky ve službě Azure Storage Blob a další data úlohy ve službě Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="39af2-110">In the previous chapter we looked at partitioning schemes and explained how the Fix It app stores images in the Azure Storage Blob service, and other task data in Azure SQL Database.</span></span> <span data-ttu-id="39af2-111">V této kapitole jsme podrobněji služby Blob service a ukazují, jak je implementován v projektu kódu Fix It.</span><span class="sxs-lookup"><span data-stu-id="39af2-111">In this chapter we go deeper into the Blob service and show how it's implemented in Fix It project code.</span></span>

## <a name="what-is-blob-storage"></a><span data-ttu-id="39af2-112">Co je služba Blob storage?</span><span class="sxs-lookup"><span data-stu-id="39af2-112">What is Blob storage?</span></span>

<span data-ttu-id="39af2-113">Služba Azure Storage Blob poskytuje způsob, jak ukládat soubory v cloudu.</span><span class="sxs-lookup"><span data-stu-id="39af2-113">The Azure Storage Blob service provides a way to store files in the cloud.</span></span> <span data-ttu-id="39af2-114">Blob service má několik výhod oproti ukládání souborů v systému souborů místní sítě:</span><span class="sxs-lookup"><span data-stu-id="39af2-114">The Blob service has a number of advantages over storing files in a local network file system:</span></span>

- <span data-ttu-id="39af2-115">Je vysoce škálovatelná.</span><span class="sxs-lookup"><span data-stu-id="39af2-115">It's highly scalable.</span></span> <span data-ttu-id="39af2-116">Jeden účet úložiště můžete ukládat [stovky terabajtů](https://msdn.microsoft.com/library/windowsazure/dn249410.aspx), a může mít více účtů úložiště.</span><span class="sxs-lookup"><span data-stu-id="39af2-116">A single Storage account can store [hundreds of terabytes](https://msdn.microsoft.com/library/windowsazure/dn249410.aspx), and you can have multiple Storage accounts.</span></span> <span data-ttu-id="39af2-117">Některé z největších zákazníkům Azure ukládat stovky petabajtů.</span><span class="sxs-lookup"><span data-stu-id="39af2-117">Some of the biggest Azure customers store hundreds of petabytes.</span></span> <span data-ttu-id="39af2-118">Aplikace Microsoft SkyDrive využívá úložiště objektů blob.</span><span class="sxs-lookup"><span data-stu-id="39af2-118">Microsoft SkyDrive uses blob storage.</span></span>
- <span data-ttu-id="39af2-119">Je trvalý.</span><span class="sxs-lookup"><span data-stu-id="39af2-119">It's durable.</span></span> <span data-ttu-id="39af2-120">Každý soubor, které ukládáte ve službě Blob service je automaticky zálohována.</span><span class="sxs-lookup"><span data-stu-id="39af2-120">Every file you store in the Blob service is automatically backed up.</span></span>
- <span data-ttu-id="39af2-121">Poskytuje vysokou dostupnost.</span><span class="sxs-lookup"><span data-stu-id="39af2-121">It provides high availability.</span></span> <span data-ttu-id="39af2-122">[Smlouva SLA pro Storage](https://go.microsoft.com/fwlink/p/?linkid=159705&amp;clcid=0x409) příslibů 99,99 % minimálně 99,9 % dostupnost, v závislosti na zvolené možnosti redundance geograficky zvolíte.</span><span class="sxs-lookup"><span data-stu-id="39af2-122">The [SLA for Storage](https://go.microsoft.com/fwlink/p/?linkid=159705&amp;clcid=0x409) promises 99.9% or 99.99% uptime, depending on which geo-redundancy option you choose.</span></span>
- <span data-ttu-id="39af2-123">Je součástí Azure, což znamená, že právě ukládání a načítání souborů, platíte pouze za skutečný objem úložiště, které používáte, platforma jako služba (PaaS) a Azure automaticky zajistí nastavovat a spravovat všechny virtuální počítače a požadované pro diskové jednotky Služba.</span><span class="sxs-lookup"><span data-stu-id="39af2-123">It's a platform-as-a-service (PaaS) feature of Azure, which means you just store and retrieve files, paying only for the actual amount of storage you use, and Azure automatically takes care of setting up and managing all of the VMs and disk drives required for the service.</span></span>
- <span data-ttu-id="39af2-124">Blob service můžete přistupovat pomocí rozhraní REST API nebo pomocí rozhraní API pro programovací jazyk.</span><span class="sxs-lookup"><span data-stu-id="39af2-124">You can access the Blob service by using a REST API or by using a programming language API.</span></span> <span data-ttu-id="39af2-125">Sady SDK jsou dostupné pro .NET, Java, Ruby a dalších.</span><span class="sxs-lookup"><span data-stu-id="39af2-125">SDKs are available for .NET, Java, Ruby, and others.</span></span>
- <span data-ttu-id="39af2-126">Při ukládání souboru ve službě Blob service můžete snadno si je veřejně dostupný přes Internet.</span><span class="sxs-lookup"><span data-stu-id="39af2-126">When you store a file in the Blob service, you can easily make it publicly available over the Internet.</span></span>
- <span data-ttu-id="39af2-127">Můžete zabezpečit soubory v objektu Blob service, můžete k přístup jenom Autorizovaní uživatelé, nebo můžete poskytnout dočasný přístup tokeny, které zpřístupní jejich někdo pouze pro omezenou dobu.</span><span class="sxs-lookup"><span data-stu-id="39af2-127">You can secure files in the Blob service so they can accessed only by authorized users, or you can provide temporary access tokens that makes them available to someone only for a limited period of time.</span></span>

<span data-ttu-id="39af2-128">Kdykoli už vytváříte aplikace pro Azure a chcete se ukládá velké množství dat, která v místním prostředí přejde v souborech – jako jsou obrázky, videa, soubory PDF, tabulky a podobně – zvažte službu Blob service.</span><span class="sxs-lookup"><span data-stu-id="39af2-128">Anytime you're building an app for Azure and you want to store a lot of data that in an on-premises environment would go in files -- such as images, videos, PDFs, spreadsheets, etc. -- consider the Blob service.</span></span>

## <a name="creating-a-storage-account"></a><span data-ttu-id="39af2-129">Vytváří se účet úložiště</span><span class="sxs-lookup"><span data-stu-id="39af2-129">Creating a Storage account</span></span>

<span data-ttu-id="39af2-130">Začínáme se službou Blob service můžete vytvořit účet úložiště v Azure.</span><span class="sxs-lookup"><span data-stu-id="39af2-130">To get started with the Blob service you create a Storage account in Azure.</span></span> <span data-ttu-id="39af2-131">Na portálu klikněte na tlačítko **nový** -- **datové služby** -- **úložiště** -- **rychlé vytvoření**, a potom zadejte adresu URL a umístěním datového centra.</span><span class="sxs-lookup"><span data-stu-id="39af2-131">In the portal, click **New** -- **Data Services** -- **Storage** -- **Quick Create**, and then enter a URL and a data center location.</span></span> <span data-ttu-id="39af2-132">Umístěním datového centra by měl být stejný jako webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="39af2-132">The data center location should be the same as your web app.</span></span>

![Vytvořit úložiště acct](unstructured-blob-storage/_static/image1.png)

<span data-ttu-id="39af2-134">Vyberte primární oblasti, ve které chcete obsah uložit, a pokud se rozhodnete [geografickou replikaci](https://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx#_Geo_Redundant_Storage) možnost, Azure vytvoří repliky svých dat v různých datových center v jiné oblasti země.</span><span class="sxs-lookup"><span data-stu-id="39af2-134">You pick the primary region where you want to store the content, and if you choose the [geo-replication](https://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx#_Geo_Redundant_Storage) option, Azure creates replicas of all your data in a different data center in another region of the country.</span></span> <span data-ttu-id="39af2-135">Například pokud se rozhodnete datové centrum západ USA, při ukládání souboru, který přejde na datové centrum západ USA, ale na pozadí Azure také zkopíruje jej do jednoho z jiných datových centrech USA.</span><span class="sxs-lookup"><span data-stu-id="39af2-135">For example, if you choose the Western US data center, when you store a file it goes to the Western US data center, but in the background Azure also copies it to one of the other US data centers.</span></span> <span data-ttu-id="39af2-136">V případě havárie v jedné oblasti země vaše data jsou stále bezpečné.</span><span class="sxs-lookup"><span data-stu-id="39af2-136">If a disaster happens in one region of the country, your data is still safe.</span></span>

<span data-ttu-id="39af2-137">Azure nebudou data replikovat napříč několika geograficky politické hranice: Pokud je vaše primární umístění v USA, vaše soubory jsou pouze replikovat do jiné oblasti v USA, Pokud je vaše primární umístění Austrálie, soubory se replikují jenom do jiného datového centra v Austrálii.</span><span class="sxs-lookup"><span data-stu-id="39af2-137">Azure won't replicate data across geo-political boundaries: if your primary location is in the U.S., your files are only replicated to another region within the U.S.; if your primary location is Australia, your files are only replicated to another data center in Australia.</span></span>

<span data-ttu-id="39af2-138">Samozřejmě můžete také vytvoříte účet úložiště spuštěním příkazů ze skriptu, jak jsme viděli dříve.</span><span class="sxs-lookup"><span data-stu-id="39af2-138">Of course, you can also create a Storage account by executing commands from a script, as we saw earlier.</span></span> <span data-ttu-id="39af2-139">Tady je příkaz prostředí Windows PowerShell k vytvoření účtu úložiště:</span><span class="sxs-lookup"><span data-stu-id="39af2-139">Here's a Windows PowerShell command to create a Storage account:</span></span>

[!code-powershell[Main](unstructured-blob-storage/samples/sample1.ps1)]

<span data-ttu-id="39af2-140">Jakmile budete mít účet úložiště, můžete okamžitě začít ukládání souborů ve službě Blob service.</span><span class="sxs-lookup"><span data-stu-id="39af2-140">Once you have a Storage account, you can immediately start storing files in the Blob service.</span></span>

## <a name="using-blob-storage-in-the-fix-it-app"></a><span data-ttu-id="39af2-141">Používání úložiště objektů Blob v aplikace Fix It</span><span class="sxs-lookup"><span data-stu-id="39af2-141">Using Blob storage in the Fix It app</span></span>

<span data-ttu-id="39af2-142">Aplikace Fix It umožňuje nahrát fotografie.</span><span class="sxs-lookup"><span data-stu-id="39af2-142">The Fix It app enables you to upload photos.</span></span>

![Vytvořte úlohu Fix It](unstructured-blob-storage/_static/image2.png)

<span data-ttu-id="39af2-144">Po kliknutí na **vytvořit automatickou**, aplikace nahraje zadaný soubor s obrázkem a ukládá ho do služby Blob service.</span><span class="sxs-lookup"><span data-stu-id="39af2-144">When you click **Create the FixIt**, the application uploads the specified image file and stores it in the Blob service.</span></span>

### <a name="set-up-the-blob-container"></a><span data-ttu-id="39af2-145">Nastavení kontejneru objektů Blob</span><span class="sxs-lookup"><span data-stu-id="39af2-145">Set up the Blob container</span></span>

<span data-ttu-id="39af2-146">Za účelem uložení souboru ve službě Blob service je nutné *kontejneru* a uložit v.</span><span class="sxs-lookup"><span data-stu-id="39af2-146">In order to store a file in the Blob service you need a *container* to store it in.</span></span> <span data-ttu-id="39af2-147">Kontejner objektů Blob služby odpovídá složku systému souborů.</span><span class="sxs-lookup"><span data-stu-id="39af2-147">A Blob service container corresponds to a file system folder.</span></span> <span data-ttu-id="39af2-148">Skriptů pro vytvoření prostředí, které jsme se zaměřili [automatizovat všechno kapitoly](automate-everything.md) vytvořit účet úložiště, ale nechcete vytvářet kontejner.</span><span class="sxs-lookup"><span data-stu-id="39af2-148">The environment creation scripts that we reviewed in the [Automate Everything chapter](automate-everything.md) create the Storage account, but they don't create a container.</span></span> <span data-ttu-id="39af2-149">Takže účel `CreateAndConfigure` metodu `PhotoService` třídy, je vytvořit kontejner, pokud ještě neexistuje.</span><span class="sxs-lookup"><span data-stu-id="39af2-149">So the purpose of the `CreateAndConfigure` method of the `PhotoService` class is to create a container if it doesn't already exist.</span></span> <span data-ttu-id="39af2-150">Tato metoda je volána z `Application_Start` metoda *Global.asax*.</span><span class="sxs-lookup"><span data-stu-id="39af2-150">This method is called from the `Application_Start` method in *Global.asax*.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample2.cs)]

<span data-ttu-id="39af2-151">Klíč název a přístup k účtu úložiště se ukládají v `appSettings` kolekce *Web.config* souborů a kódu v `StorageUtils.StorageAccount` metoda používá k sestavení připojovací řetězec a připojení těchto hodnot:</span><span class="sxs-lookup"><span data-stu-id="39af2-151">The storage account name and access key are stored in the `appSettings` collection of the *Web.config* file, and code in the `StorageUtils.StorageAccount` method uses those values to build a connection string and establish a connection:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample3.cs)]

<span data-ttu-id="39af2-152">`CreateAndConfigureAsync` Metoda pak vytvoří objekt, který představuje službu Blob service a objekt, který představuje kontejner (složka) s názvem "Image" ve službě Blob service:</span><span class="sxs-lookup"><span data-stu-id="39af2-152">The `CreateAndConfigureAsync` method then creates an object that represents the Blob service, and an object that represents a container (folder) named "images" in the Blob service:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample4.cs)]

<span data-ttu-id="39af2-153">Pokud kontejner s názvem "Image" ještě neexistuje – které budou platit při prvním spuštění aplikace proti nový účet úložiště – kód vytvoří kontejner a nastaví oprávnění, zveřejněte ji.</span><span class="sxs-lookup"><span data-stu-id="39af2-153">If a container named "images" doesn't exist yet -- which will be true the first time you run the app against a new storage account -- the code creates the container and sets permissions to make it public.</span></span> <span data-ttu-id="39af2-154">(Ve výchozím nastavení, nové kontejnery objektů blob jsou privátní a jsou přístupné pouze uživatelům, kteří mají oprávnění pro přístup k účtu úložiště.)</span><span class="sxs-lookup"><span data-stu-id="39af2-154">(By default, new blob containers are private and are accessible only to users who have permission to access your storage account.)</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample5.cs)]

### <a name="store-the-uploaded-photo-in-blob-storage"></a><span data-ttu-id="39af2-155">Store nahrané fotky v úložišti objektů Blob</span><span class="sxs-lookup"><span data-stu-id="39af2-155">Store the uploaded photo in Blob storage</span></span>

<span data-ttu-id="39af2-156">K nahrání a uložte soubor obrázku, tato aplikace používá `IPhotoService` rozhraní a implementaci rozhraní v `PhotoService` třídy.</span><span class="sxs-lookup"><span data-stu-id="39af2-156">To upload and save the image file, the app uses an `IPhotoService` interface and an implementation of the interface in the `PhotoService` class.</span></span> <span data-ttu-id="39af2-157">*PhotoService.cs* soubor obsahuje všechny kódu v Fix It aplikaci, která komunikuje se službou Blob service.</span><span class="sxs-lookup"><span data-stu-id="39af2-157">The *PhotoService.cs* file contains all of the code in the Fix It app that communicates with the Blob service.</span></span>

<span data-ttu-id="39af2-158">Následující metoda kontroleru MVC se volá, když uživatel klikne **vytvořit automatickou**.</span><span class="sxs-lookup"><span data-stu-id="39af2-158">The following MVC controller method is called when the user clicks **Create the FixIt**.</span></span> <span data-ttu-id="39af2-159">V tomto kódu `photoService` odkazuje na instanci `PhotoService` třídy, a `fixittask` odkazuje na instanci `FixItTask` třídu entity, která ukládá data pro nový úkol.</span><span class="sxs-lookup"><span data-stu-id="39af2-159">In this code, `photoService` refers to an instance of the `PhotoService` class, and `fixittask` refers to an instance of the `FixItTask` entity class that stores data for a new task.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample6.cs?highlight=8)]

<span data-ttu-id="39af2-160">`UploadPhotoAsync` Metodu `PhotoService` třídy ukládá uloženého souboru ve službě Blob service a vrátí adresu URL, která odkazuje na nový objekt blob.</span><span class="sxs-lookup"><span data-stu-id="39af2-160">The `UploadPhotoAsync` method in the `PhotoService` class stores the uploaded file in the Blob service and returns a URL that points to the new blob.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample7.cs)]

<span data-ttu-id="39af2-161">Stejně jako `CreateAndConfigure` metoda, kód se připojí k účtu úložiště a vytvoří objekt, který představuje kontejner objektů blob "Image", s výjimkou zde předpokládá kontejner již existuje.</span><span class="sxs-lookup"><span data-stu-id="39af2-161">As in the `CreateAndConfigure` method, the code connects to the storage account and creates an object that represents the "images" blob container, except here it assumes the container already exists.</span></span>

<span data-ttu-id="39af2-162">Potom vytvoří jedinečný identifikátor pro image chystáte odeslat, zřetězením novou hodnotu GUID s příponou souboru:</span><span class="sxs-lookup"><span data-stu-id="39af2-162">Then it creates a unique identifier for the image about to be uploaded, by concatenating a new GUID value with the file extension:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample8.cs)]

<span data-ttu-id="39af2-163">Potom kód používá objekt kontejneru objektů blob a nový jedinečný identifikátor pro vytvoření objektu blob, nastaví atribut k tomuto objektu označující druh souboru je a potom použije objekt blob pro uložení souboru v úložišti objektů blob.</span><span class="sxs-lookup"><span data-stu-id="39af2-163">The code then uses the blob container object and the new unique identifier to create a blob object, sets an attribute on that object indicating what kind of file it is, and then uses the blob object to store the file in blob storage.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample9.cs)]

<span data-ttu-id="39af2-164">Nakonec získá adresu URL, která odkazuje na objekt blob.</span><span class="sxs-lookup"><span data-stu-id="39af2-164">Finally, it gets a URL that references the blob.</span></span> <span data-ttu-id="39af2-165">Tato adresa URL se uloží v databázi a je možné na webových stránkách Fix It k zobrazení této odeslané image.</span><span class="sxs-lookup"><span data-stu-id="39af2-165">This URL will be stored in the database and can be used in Fix It web pages to display the uploaded image.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample10.cs)]

<span data-ttu-id="39af2-166">Tato adresa URL je uloženo v databázi jako jeden ze sloupců tabulky FixItTask.</span><span class="sxs-lookup"><span data-stu-id="39af2-166">This URL is stored in the database as one of the columns of the FixItTask table.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample11.cs?highlight=10)]

<span data-ttu-id="39af2-167">Pouze adresu URL v databázi a obrázků v úložišti objektů Blob aplikace Fix It udržuje databázi malé, škálovatelné a cenově dostupné, zatímco Image se ukládají, pokud úložiště je levná a schopnou zvládat terabajtů nebo petabajtů.</span><span class="sxs-lookup"><span data-stu-id="39af2-167">With only the URL in the database, and images in Blob storage, the Fix It app keeps the database small, scalable, and inexpensive, while the images are stored where storage is cheap and capable of handling terabytes or petabytes.</span></span> <span data-ttu-id="39af2-168">Jeden účet úložiště můžete ukládat stovky terabajtů Fix It fotografie a platíte jenom za využité.</span><span class="sxs-lookup"><span data-stu-id="39af2-168">One storage account can store hundreds of terabytes of Fix It photos, and you only pay for what you use.</span></span> <span data-ttu-id="39af2-169">Abyste mohli začít malé platební 9 centů pro první GB a přidat další Image pro pennies každý další GB.</span><span class="sxs-lookup"><span data-stu-id="39af2-169">So you can start off small paying 9 cents for the first gigabyte, and add more images for pennies per additional gigabyte.</span></span>

### <a name="display-the-uploaded-file"></a><span data-ttu-id="39af2-170">Zobrazit nahraného souboru</span><span class="sxs-lookup"><span data-stu-id="39af2-170">Display the uploaded file</span></span>

<span data-ttu-id="39af2-171">Aplikace Fix It zobrazí soubor nahraný obrázek při zobrazení podrobností úlohy.</span><span class="sxs-lookup"><span data-stu-id="39af2-171">The Fix It application displays the uploaded image file when it displays details for a task.</span></span>

![Opravte podrobnosti úlohy s fotografií](unstructured-blob-storage/_static/image3.png)

<span data-ttu-id="39af2-173">A zobrazte obrázek, všechna zobrazení MVC musí provést je zahrnout `PhotoUrl` hodnotu ve formátu HTML odesláno prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="39af2-173">To display the image, all the MVC view has to do is include the `PhotoUrl` value in the HTML sent to the browser.</span></span> <span data-ttu-id="39af2-174">Webový server a databázi nepoužívají cykly a zobrazte obrázek, pouze obsluhují až několik bajtů na adresu URL obrázku.</span><span class="sxs-lookup"><span data-stu-id="39af2-174">The web server and the database are not using cycles to display the image, they are only serving up a few bytes to the image URL.</span></span> <span data-ttu-id="39af2-175">V následujícím kódu Razor `Model` odkazuje na instanci `FixItTask` třída entity.</span><span class="sxs-lookup"><span data-stu-id="39af2-175">In the following Razor code, `Model` refers to an instance of the `FixItTask` entity class.</span></span>

[!code-cshtml[Main](unstructured-blob-storage/samples/sample12.cshtml?highlight=11)]

<span data-ttu-id="39af2-176">Když se podíváte na kód HTML stránky, která se zobrazí, se zobrazí adresa URL odkazuje přímo na image v úložišti objektů blob, podobný následujícímu:</span><span class="sxs-lookup"><span data-stu-id="39af2-176">If you look at the HTML of the page that displays, you see the URL pointing directly to the image in blob storage, something like this:</span></span>

[!code-cshtml[Main](unstructured-blob-storage/samples/sample13.cshtml?highlight=11)]

## <a name="summary"></a><span data-ttu-id="39af2-177">Souhrn</span><span class="sxs-lookup"><span data-stu-id="39af2-177">Summary</span></span>

<span data-ttu-id="39af2-178">Už víte, jak aplikace Fix It ukládá obrázky do služby Blob service a pouze adresy URL obrázků ve službě SQL database.</span><span class="sxs-lookup"><span data-stu-id="39af2-178">You've seen how the Fix It app stores images in the Blob service and only image URLs in the SQL database.</span></span> <span data-ttu-id="39af2-179">Použití služby Blob service uchovává SQL database mnohem menší, než ho jinak by umožňuje škálování až na téměř neomezené množství úloh a lze provést, aniž byste museli psát hodně kódu.</span><span class="sxs-lookup"><span data-stu-id="39af2-179">Using the Blob service keeps the SQL database much smaller than it otherwise would be, makes it possible to scale up to an almost unlimited number of tasks, and can be done without writing a lot of code.</span></span>

<span data-ttu-id="39af2-180">Stovky terabajtů může mít v účtu úložiště a náklady na úložiště jsou mnohem levnější než úložiště databáze SQL, počínaje přibližně 3 několik centů za GB měsíčně plus transakce malý poplatek.</span><span class="sxs-lookup"><span data-stu-id="39af2-180">You can have hundreds of terabytes in a storage account, and the storage cost is much less expensive than SQL Database storage, starting at about 3 cents per gigabyte per month plus a small transaction charge.</span></span> <span data-ttu-id="39af2-181">A pamatujte, že nejsou platit pro maximální kapacitu, ale pouze pro částku, kterou ve skutečnosti uložit, aby vaše aplikace je připravená pro škálování, ale nejsou platíte za všechno, dodatečnou kapacitu.</span><span class="sxs-lookup"><span data-stu-id="39af2-181">And keep in mind that you're not paying for the maximum capacity but only for the amount you actually store, so your app is ready to scale but you're not paying for all that extra capacity.</span></span>

<span data-ttu-id="39af2-182">V [další kapitolu](design-to-survive-failures.md) budeme mluvit o důležitosti vytváření cloudové aplikace zvládne elegantně zpracovat selhání.</span><span class="sxs-lookup"><span data-stu-id="39af2-182">In the [next chapter](design-to-survive-failures.md) we'll talk about the importance of making a cloud app capable of gracefully handling failures.</span></span>

## <a name="resources"></a><span data-ttu-id="39af2-183">Prostředky</span><span class="sxs-lookup"><span data-stu-id="39af2-183">Resources</span></span>

<span data-ttu-id="39af2-184">Další informace naleznete na následujících odkazech:</span><span class="sxs-lookup"><span data-stu-id="39af2-184">For more information see the following resources:</span></span>

- <span data-ttu-id="39af2-185">[Úvod do Azure BLOB Storage](https://www.simple-talk.com/cloud/cloud-data/an-introduction-to-windows-azure-blob-storage-/).</span><span class="sxs-lookup"><span data-stu-id="39af2-185">[An Introduction to Azure BLOB Storage](https://www.simple-talk.com/cloud/cloud-data/an-introduction-to-windows-azure-blob-storage-/).</span></span> <span data-ttu-id="39af2-186">Blog o Mike dřeva.</span><span class="sxs-lookup"><span data-stu-id="39af2-186">Blog by Mike Wood.</span></span>
- <span data-ttu-id="39af2-187">[Použití služby Azure Blob Storage v rozhraní .NET](https://docs.microsoft.com/azure/storage/blobs/storage-dotnet-how-to-use-blobs).</span><span class="sxs-lookup"><span data-stu-id="39af2-187">[How to use the Azure Blob Storage Service in .NET](https://docs.microsoft.com/azure/storage/blobs/storage-dotnet-how-to-use-blobs).</span></span> <span data-ttu-id="39af2-188">Oficiální dokumentaci na webu MicrosoftAzure.com.</span><span class="sxs-lookup"><span data-stu-id="39af2-188">Official documentation on the MicrosoftAzure.com site.</span></span> <span data-ttu-id="39af2-189">Stručný úvod do objektu blob úložiště, za nímž následuje příklady kódu znázorňující způsob připojení k úložišti objektů blob, vytvoření kontejnerů, nahrávání a stahování objektů BLOB a tak dál.</span><span class="sxs-lookup"><span data-stu-id="39af2-189">A brief introduction to blob storage followed by code examples showing how to connect to blob storage, create containers, upload and download blobs, etc.</span></span>
- <span data-ttu-id="39af2-190">[Bezporuchový: Sestavování škálovatelných, odolných cloudových služeb](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="39af2-190">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="39af2-191">Série videí devět částí Ulrich Homann, Marc Mercuri a Mark Simms.</span><span class="sxs-lookup"><span data-stu-id="39af2-191">Nine-part video series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="39af2-192">Nabídne základními koncepty a Principy architektury tak vysoce dostupné a zajímavé příběhy z prostředí Microsoft zákazníka poradní tým (CAT) se skutečným zákazníkům.</span><span class="sxs-lookup"><span data-stu-id="39af2-192">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="39af2-193">Informace o službě Azure Storage a objekty BLOB naleznete v tématu epizodě 5 počínaje 35:13.</span><span class="sxs-lookup"><span data-stu-id="39af2-193">For a discussion of Azure Storage service and blobs, see episode 5 starting at 35:13.</span></span>
- <span data-ttu-id="39af2-194">[Microsoft Vzory a postupy – doprovodné materiály k Azure](https://msdn.microsoft.com/library/dn568099.aspx).</span><span class="sxs-lookup"><span data-stu-id="39af2-194">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="39af2-195">Model osobního klíče najdete v tématu.</span><span class="sxs-lookup"><span data-stu-id="39af2-195">See Valet Key pattern.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="39af2-196">[Předchozí](data-partitioning-strategies.md)
> [další](design-to-survive-failures.md)</span><span class="sxs-lookup"><span data-stu-id="39af2-196">[Previous](data-partitioning-strategies.md)
[Next](design-to-survive-failures.md)</span></span>
