---
uid: single-page-application/overview/introduction/knockoutjs-template
title: 'Jednostránková aplikace: Šablona KnockoutJS | Dokumentace Microsoftu'
author: MikeWasson
description: Šablona knockout
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/30/2013
ms.topic: article
ms.assetid: f9c07af0-4b20-4b08-af8f-47fc3df169a2
ms.technology: ''
msc.legacyurl: /single-page-application/overview/introduction/knockoutjs-template
msc.type: authoredcontent
ms.openlocfilehash: 75169836d1d9a647bdd4ac3742cb1dc1f31f2a32
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/03/2018
ms.locfileid: "37377899"
---
<a name="single-page-application-knockoutjs-template"></a><span data-ttu-id="8a29d-103">Jednostránková aplikace: Šablona KnockoutJS</span><span class="sxs-lookup"><span data-stu-id="8a29d-103">Single Page Application: KnockoutJS template</span></span>
====================
<span data-ttu-id="8a29d-104">podle [Mike Wasson](https://github.com/MikeWasson)</span><span class="sxs-lookup"><span data-stu-id="8a29d-104">by [Mike Wasson](https://github.com/MikeWasson)</span></span>

> <span data-ttu-id="8a29d-105">Šablona MVC Knockout je součástí technologie ASP.NET and Web Tools 2012.2</span><span class="sxs-lookup"><span data-stu-id="8a29d-105">The Knockout MVC Template is part of ASP.NET and Web Tools 2012.2</span></span>
> 
> [<span data-ttu-id="8a29d-106">Stáhněte si ASP.NET and Web Tools 2012.2</span><span class="sxs-lookup"><span data-stu-id="8a29d-106">Download ASP.NET and Web Tools 2012.2</span></span>](https://go.microsoft.com/fwlink/?LinkId=282650)


<span data-ttu-id="8a29d-107">ASP.NET and Web Tools 2012.2 obsahuje šablona jednostránkové aplikace (SPA) pro technologii ASP.NET MVC 4.</span><span class="sxs-lookup"><span data-stu-id="8a29d-107">The ASP.NET and Web Tools 2012.2 update includes a Single-Page Application (SPA) template for ASP.NET MVC 4.</span></span> <span data-ttu-id="8a29d-108">Tato šablona slouží k vám pomůžou začít rychle vytvářet interaktivní webové klientské aplikace.</span><span class="sxs-lookup"><span data-stu-id="8a29d-108">This template is designed to get you started quickly building interactive client-side web apps.</span></span>

<span data-ttu-id="8a29d-109">"Jednostránková aplikace" (SPA) je obecný termín pro webovou aplikaci, která načte jednu stránku HTML a následně aktualizuje dynamicky, místo načtení nové stránky na stránku.</span><span class="sxs-lookup"><span data-stu-id="8a29d-109">"Single-page application" (SPA) is the general term for a web application that loads a single HTML page and then updates the page dynamically, instead of loading new pages.</span></span> <span data-ttu-id="8a29d-110">Po načtení počáteční stránky tato jednostránková aplikace komunikuje se serverem přes odesílání požadavků AJAX.</span><span class="sxs-lookup"><span data-stu-id="8a29d-110">After the initial page load, the SPA talks with the server through AJAX requests.</span></span>

![](knockoutjs-template/_static/image1.png)

<span data-ttu-id="8a29d-111">AJAX není nic nového, ale ještě dnes existují architektury JavaScriptu, které usnadňují tvorbu a udržování rozsáhlé sofistikované aplikace SPA.</span><span class="sxs-lookup"><span data-stu-id="8a29d-111">AJAX is nothing new, but today there are JavaScript frameworks that make it easier to build and maintain a large sophisticated SPA application.</span></span> <span data-ttu-id="8a29d-112">Navíc HTML 5 a CSS3 jsou to usnadňuje vytváření bohatých uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="8a29d-112">Also, HTML 5 and CSS3 are making it easier to create rich UIs.</span></span>

<span data-ttu-id="8a29d-113">Abyste mohli začít, šablona jednostránková aplikace vytvoří ukázkovou aplikaci "Seznam úkolů".</span><span class="sxs-lookup"><span data-stu-id="8a29d-113">To get you started, the SPA template creates a sample "To-do list" application.</span></span> <span data-ttu-id="8a29d-114">V tomto kurzu provedeme prohlídku s průvodcem šablony.</span><span class="sxs-lookup"><span data-stu-id="8a29d-114">In this tutorial, we'll take a guided tour of the template.</span></span> <span data-ttu-id="8a29d-115">Nejprve jsme budete podívejte se na vlastní aplikace seznamu úkolů a pak zkontrolujte částí technologie, které jí umožňují fungovat.</span><span class="sxs-lookup"><span data-stu-id="8a29d-115">First we'll look at the To-do list application itself, then examine the technology pieces that make it work.</span></span>

## <a name="create-a-new-spa-template-project"></a><span data-ttu-id="8a29d-116">Vytvoření nového projektu šablony aplikace SPA</span><span class="sxs-lookup"><span data-stu-id="8a29d-116">Create a New SPA Template Project</span></span>

<span data-ttu-id="8a29d-117">Požadavky:</span><span class="sxs-lookup"><span data-stu-id="8a29d-117">Requirements:</span></span>

- <span data-ttu-id="8a29d-118">Visual Studio 2012 nebo Visual Studio Express 2012 pro Web</span><span class="sxs-lookup"><span data-stu-id="8a29d-118">Visual Studio 2012 or Visual Studio Express 2012 for Web</span></span>
- <span data-ttu-id="8a29d-119">ASP.NET Web Tools 2012.2 update.</span><span class="sxs-lookup"><span data-stu-id="8a29d-119">ASP.NET Web Tools 2012.2 update.</span></span> <span data-ttu-id="8a29d-120">Můžete nainstalovat aktualizace [tady](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2).</span><span class="sxs-lookup"><span data-stu-id="8a29d-120">You can install the update [here](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2).</span></span>

<span data-ttu-id="8a29d-121">Spusťte sadu Visual Studio a vyberte **nový projekt** z úvodní stránky.</span><span class="sxs-lookup"><span data-stu-id="8a29d-121">Start Visual Studio and select **New Project** from the Start page.</span></span> <span data-ttu-id="8a29d-122">Nebo z **souboru** nabídce vyberte možnost **nový** a potom **projektu**.</span><span class="sxs-lookup"><span data-stu-id="8a29d-122">Or, from the **File** menu, select **New** and then **Project**.</span></span>

<span data-ttu-id="8a29d-123">V **šablony** vyberte **nainstalované šablony** a rozbalte **Visual C#** uzlu.</span><span class="sxs-lookup"><span data-stu-id="8a29d-123">In the **Templates** pane, select **Installed Templates** and expand the **Visual C#** node.</span></span> <span data-ttu-id="8a29d-124">V části **Visual C#** vyberte **webové**.</span><span class="sxs-lookup"><span data-stu-id="8a29d-124">Under **Visual C#**, select **Web**.</span></span> <span data-ttu-id="8a29d-125">V seznamu šablon projektu vyberte **webové aplikace ASP.NET MVC 4**.</span><span class="sxs-lookup"><span data-stu-id="8a29d-125">In the list of project templates, select **ASP.NET MVC 4 Web Application**.</span></span> <span data-ttu-id="8a29d-126">Pojmenujte projekt a klikněte na tlačítko **OK**.</span><span class="sxs-lookup"><span data-stu-id="8a29d-126">Name the project and click **OK**.</span></span>

![](knockoutjs-template/_static/image2.png)

<span data-ttu-id="8a29d-127">V **nový projekt** průvodce, vyberte **jednostránkové aplikace**.</span><span class="sxs-lookup"><span data-stu-id="8a29d-127">In the **New Project** wizard, select **Single Page Application**.</span></span>

![](knockoutjs-template/_static/image3.png)

<span data-ttu-id="8a29d-128">Stisknutím klávesy F5 sestavte a spusťte aplikaci.</span><span class="sxs-lookup"><span data-stu-id="8a29d-128">Press F5 to build and run the application.</span></span> <span data-ttu-id="8a29d-129">Při prvním spuštění aplikace, zobrazí přihlašovací obrazovka.</span><span class="sxs-lookup"><span data-stu-id="8a29d-129">When the application first runs, it displays a login screen.</span></span>

![](knockoutjs-template/_static/image4.png)

<span data-ttu-id="8a29d-130">Klikněte na tlačítko &quot;zaregistrovat&quot; propojit a vytvořit nového uživatele.</span><span class="sxs-lookup"><span data-stu-id="8a29d-130">Click the &quot;Sign up&quot; link and create a new user.</span></span>

![](knockoutjs-template/_static/image5.png)

<span data-ttu-id="8a29d-131">Po přihlášení se aplikace vytvoří výchozí seznam úkolů se dvěma položkami.</span><span class="sxs-lookup"><span data-stu-id="8a29d-131">After you log in, the application creates a default Todo list with two items.</span></span> <span data-ttu-id="8a29d-132">Klikněte na tlačítko "Přidat seznam úkolů" pro přidání nového seznamu.</span><span class="sxs-lookup"><span data-stu-id="8a29d-132">You can click "Add Todo list" to add a new list.</span></span>

![](knockoutjs-template/_static/image6.png)

<span data-ttu-id="8a29d-133">Přejmenovat seznamu, přidejte položky do seznamu a zkontrolujte.</span><span class="sxs-lookup"><span data-stu-id="8a29d-133">Rename the list, add items to the list, and check them off.</span></span> <span data-ttu-id="8a29d-134">Můžete také odstranit položky nebo odstranit celý seznam.</span><span class="sxs-lookup"><span data-stu-id="8a29d-134">You can also delete items or delete an entire list.</span></span> <span data-ttu-id="8a29d-135">Změny se automaticky ukládají do databáze na serveru (ve skutečnosti LocalDB v tomto okamžiku, protože aplikace je spuštěn místně).</span><span class="sxs-lookup"><span data-stu-id="8a29d-135">The changes are automatically persisted to a database on the server (actually LocalDB at this point, because you are running the application locally).</span></span>

![](knockoutjs-template/_static/image7.png)

## <a name="architecture-of-the-spa-template"></a><span data-ttu-id="8a29d-136">Architektura šablon SPA</span><span class="sxs-lookup"><span data-stu-id="8a29d-136">Architecture of the SPA Template</span></span>

<span data-ttu-id="8a29d-137">Tento diagram znázorňuje hlavní stavební bloky pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="8a29d-137">This diagram shows the main building blocks for the application.</span></span>

![](knockoutjs-template/_static/image8.png)

<span data-ttu-id="8a29d-138">ASP.NET MVC na straně serveru slouží HTML a zpracovává také ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="8a29d-138">On the server side, ASP.NET MVC serves the HTML and also handles forms-based authentication.</span></span>

<span data-ttu-id="8a29d-139">Rozhraní ASP.NET Web API zpracuje všechny žádosti, které se týkají ToDoLists a ToDoItems, včetně načítání, vytváření, aktualizace nebo odstranění.</span><span class="sxs-lookup"><span data-stu-id="8a29d-139">ASP.NET Web API handles all requests that relate to the ToDoLists and ToDoItems, including getting, creating, updating and deleting.</span></span> <span data-ttu-id="8a29d-140">Klient vyměňuje data s webovým rozhraním API ve formátu JSON.</span><span class="sxs-lookup"><span data-stu-id="8a29d-140">The client exchanges data with Web API in JSON format.</span></span>

<span data-ttu-id="8a29d-141">Entity Framework (EF) je O/RM vrstvy.</span><span class="sxs-lookup"><span data-stu-id="8a29d-141">Entity Framework (EF) is the O/RM layer.</span></span> <span data-ttu-id="8a29d-142">To zprostředkovává mezi world objektově orientované technologie ASP.NET a základní databáze.</span><span class="sxs-lookup"><span data-stu-id="8a29d-142">It mediates between the object-oriented world of ASP.NET and the underlying database.</span></span> <span data-ttu-id="8a29d-143">Databáze používá LocalDB, ale toto můžete změnit v souboru Web.config.</span><span class="sxs-lookup"><span data-stu-id="8a29d-143">The database uses LocalDB but you can change this in the Web.config file.</span></span> <span data-ttu-id="8a29d-144">Obvykle by použít databázi LocalDB pro místní vývoj a potom nasadíte do služby SQL database na serveru, pomocí migrace code first EF.</span><span class="sxs-lookup"><span data-stu-id="8a29d-144">Typically you would use LocalDB for local development and then deploy to a SQL database on the server, using EF code-first migration.</span></span>

<span data-ttu-id="8a29d-145">Na straně klienta knihovny rozhraní Knockout.js zpracovává aktualizace stránky AJAX požadavků.</span><span class="sxs-lookup"><span data-stu-id="8a29d-145">On the client side, the Knockout.js library handles page updates from AJAX requests.</span></span> <span data-ttu-id="8a29d-146">Knockout používá datové vazby k synchronizaci na stránce s nejnovější data.</span><span class="sxs-lookup"><span data-stu-id="8a29d-146">Knockout uses data binding to synchronize the page with the latest data.</span></span> <span data-ttu-id="8a29d-147">Tímto způsobem nemusíte psát žádný kód, který vás provede JSON data a aktualizace modelu DOM.</span><span class="sxs-lookup"><span data-stu-id="8a29d-147">That way, you don't have to write any of the code that walks through the JSON data and updates the DOM.</span></span> <span data-ttu-id="8a29d-148">Místo toho kam si ukládáte deklarativních atributů ve formátu HTML, který Knockout instrukce, jak data můžete prezentovat tak.</span><span class="sxs-lookup"><span data-stu-id="8a29d-148">Instead, you put declarative attributes in the HTML that tell Knockout how to present the data.</span></span>

<span data-ttu-id="8a29d-149">Velkou výhodou této architektury je, že odděluje prezentační vrstvy z aplikace logiky.</span><span class="sxs-lookup"><span data-stu-id="8a29d-149">A big advantage of this architecture is that it separates the presentation layer from the application logic.</span></span> <span data-ttu-id="8a29d-150">Můžete vytvořit části webové rozhraní API bez znalosti nic o vzhled webové stránky.</span><span class="sxs-lookup"><span data-stu-id="8a29d-150">You can create the Web API portion without knowing anything about how your web page will look.</span></span> <span data-ttu-id="8a29d-151">Na straně klienta, můžete vytvořit "model zobrazení" pro reprezentaci dat a model zobrazení Knockout používá k vytvoření vazby v kódu HTML.</span><span class="sxs-lookup"><span data-stu-id="8a29d-151">On the client side, you create a "view model" to represent that data, and the view model uses Knockout to bind to the HTML.</span></span> <span data-ttu-id="8a29d-152">Který umožňuje snadno změnit beze změny modelu zobrazení HTML.</span><span class="sxs-lookup"><span data-stu-id="8a29d-152">That lets you easily change the HTML without changing the view model.</span></span> <span data-ttu-id="8a29d-153">(Podíváme na Knockout o něco později.)</span><span class="sxs-lookup"><span data-stu-id="8a29d-153">(We'll look at Knockout a bit later.)</span></span>

## <a name="models"></a><span data-ttu-id="8a29d-154">Modely</span><span class="sxs-lookup"><span data-stu-id="8a29d-154">Models</span></span>

<span data-ttu-id="8a29d-155">V projektu sady Visual Studio obsahuje složku modely modely, které se používají na straně serveru.</span><span class="sxs-lookup"><span data-stu-id="8a29d-155">In the Visual Studio project, the Models folder contains the models that are used on the server side.</span></span> <span data-ttu-id="8a29d-156">(Na straně klienta jsou také modely; těm, které dostaneme.)</span><span class="sxs-lookup"><span data-stu-id="8a29d-156">(There are also models on the client side; we'll get to those.)</span></span>

![](knockoutjs-template/_static/image9.png)

<span data-ttu-id="8a29d-157">**TodoItem, seznamu úkolů**</span><span class="sxs-lookup"><span data-stu-id="8a29d-157">**TodoItem, TodoList**</span></span>

<span data-ttu-id="8a29d-158">Toto jsou modely databáze pro Entity Framework Code First.</span><span class="sxs-lookup"><span data-stu-id="8a29d-158">These are the database models for Entity Framework Code First.</span></span> <span data-ttu-id="8a29d-159">Všimněte si, že tyto modely mají vlastnosti, které odkazují na sebe navzájem.</span><span class="sxs-lookup"><span data-stu-id="8a29d-159">Notice that these models have properties that point to each other.</span></span> <span data-ttu-id="8a29d-160">`ToDoList` obsahuje kolekci objektů Todoitem a každý `ToDoItem` odkazuje zpět na nadřazeného seznamu úkolů.</span><span class="sxs-lookup"><span data-stu-id="8a29d-160">`ToDoList` contains a collection of ToDoItems, and each `ToDoItem` has a reference back to its parent ToDoList.</span></span> <span data-ttu-id="8a29d-161">Tyto vlastnosti se nazývají navigačních vlastností a představují vztah jeden mnoho seznam úkolů a jeho položek úkolů.</span><span class="sxs-lookup"><span data-stu-id="8a29d-161">These properties are called navigation properties, and they represent the one-to-many relation a to-do list and its to-do items.</span></span>

<span data-ttu-id="8a29d-162">`ToDoItem` Třídy také používá **[klíč ForeignKey]** atribut určíte, že `ToDoListId` je cizí klíč do `ToDoList` tabulky.</span><span class="sxs-lookup"><span data-stu-id="8a29d-162">The `ToDoItem` class also uses the **[ForeignKey]** attribute to specify that `ToDoListId` is a foreign key into the `ToDoList` table.</span></span> <span data-ttu-id="8a29d-163">To říká EF přidat omezení cizího klíče do databáze.</span><span class="sxs-lookup"><span data-stu-id="8a29d-163">This tells EF to add a foreign-key constraint to the database.</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample1.cs)]

<span data-ttu-id="8a29d-164">**TodoItemDto, TodoListDto**</span><span class="sxs-lookup"><span data-stu-id="8a29d-164">**TodoItemDto, TodoListDto**</span></span>

<span data-ttu-id="8a29d-165">Tyto třídy definují data, která se odešlou do klienta.</span><span class="sxs-lookup"><span data-stu-id="8a29d-165">These classes define the data that will be sent to the client.</span></span> <span data-ttu-id="8a29d-166">"Objekt DTO" znamená "objekt pro přenos dat."</span><span class="sxs-lookup"><span data-stu-id="8a29d-166">"DTO" stands for "data transfer object."</span></span> <span data-ttu-id="8a29d-167">Objekt DTO definuje, jak se entity serializovat do formátu JSON.</span><span class="sxs-lookup"><span data-stu-id="8a29d-167">The DTO defines how the entities will be serialized into JSON.</span></span> <span data-ttu-id="8a29d-168">Obecně platí je několik důvodů, proč používat DTO:</span><span class="sxs-lookup"><span data-stu-id="8a29d-168">In general, there are several reasons to use DTOs:</span></span>

- <span data-ttu-id="8a29d-169">K řízení vlastnosti, které se serializují.</span><span class="sxs-lookup"><span data-stu-id="8a29d-169">To control which properties are serialized.</span></span> <span data-ttu-id="8a29d-170">Objekt DTO může obsahovat podmnožinu vlastností z doménového modelu.</span><span class="sxs-lookup"><span data-stu-id="8a29d-170">The DTO can contain a subset of the properties from the domain model.</span></span> <span data-ttu-id="8a29d-171">To můžete udělat z bezpečnostních důvodů (ke skrytí citlivých dat) nebo jednoduše snížit objem dat, která odešlete.</span><span class="sxs-lookup"><span data-stu-id="8a29d-171">You might do this for security reasons (to hide sensitive data) or simply to reduce the amount of data that you send.</span></span>
- <span data-ttu-id="8a29d-172">Chcete-li změnit tvar dat – například k vyrovnání složitější datová struktura.</span><span class="sxs-lookup"><span data-stu-id="8a29d-172">To change the shape of the data – e.g. to flatten a more complex data structure.</span></span>
- <span data-ttu-id="8a29d-173">Chcete-li zachovat veškeré obchodní logiky mimo DTO (oddělení oblastí zájmu).</span><span class="sxs-lookup"><span data-stu-id="8a29d-173">To keep any business logic out of the DTO (separation of concerns).</span></span>
- <span data-ttu-id="8a29d-174">Pokud z nějakého důvodu nelze serializovat doménových modelů.</span><span class="sxs-lookup"><span data-stu-id="8a29d-174">If your domain models cannot be serialized for some reason.</span></span> <span data-ttu-id="8a29d-175">Například cyklické odkazy může způsobit potíže při serializaci objektu existují způsoby, jak zpracovat tento problém v rozhraní Web API (naleznete v tématu [zpracování cyklické odkazy objektu](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); ale pomocí objekt DTO jednoduše se vyhnete problému úplně se vynechá.</span><span class="sxs-lookup"><span data-stu-id="8a29d-175">For example, circular references can cause problems when you serialize an object There are ways to handle this problem in Web API (see [Handling Circular Object References](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); but using a DTO simply avoids the problem altogether.</span></span>

<span data-ttu-id="8a29d-176">V šabloně aplikace SPA DTO obsahuje stejná data jako doménových modelů.</span><span class="sxs-lookup"><span data-stu-id="8a29d-176">In the SPA template, the DTOs contains the same data as the domain models.</span></span> <span data-ttu-id="8a29d-177">Jsou však stále užitečná protože vyhnou cyklické odkazy z navigační vlastnosti a jejich předvedení obecný vzor objekt DTO.</span><span class="sxs-lookup"><span data-stu-id="8a29d-177">However, they are still useful because they avoid circular references from the navigation properties, and they demonstrate the general DTO pattern.</span></span>

<span data-ttu-id="8a29d-178">**AccountModels.cs**</span><span class="sxs-lookup"><span data-stu-id="8a29d-178">**AccountModels.cs**</span></span>

<span data-ttu-id="8a29d-179">Tento soubor obsahuje modely pro členství v síti.</span><span class="sxs-lookup"><span data-stu-id="8a29d-179">This file contains models for site membership.</span></span> <span data-ttu-id="8a29d-180">`UserProfile` Třída definuje schéma pro uživatelské profily v členství DB.</span><span class="sxs-lookup"><span data-stu-id="8a29d-180">The `UserProfile` class defines the schema for user profiles in the membership DB.</span></span> <span data-ttu-id="8a29d-181">(V tomto případě pouze informace je ID uživatele a uživatelské jméno.) Jiných tříd modelu v tomto souboru se používají k vytváření formulářů registrace a přihlášení uživatele.</span><span class="sxs-lookup"><span data-stu-id="8a29d-181">(In this case, the only information is the user ID and the user name.) The other model classes in this file are used to create the user registration and login forms.</span></span>

## <a name="entity-framework"></a><span data-ttu-id="8a29d-182">Entity Framework</span><span class="sxs-lookup"><span data-stu-id="8a29d-182">Entity Framework</span></span>

<span data-ttu-id="8a29d-183">Šablona jednostránková aplikace používá platforem EF Code First.</span><span class="sxs-lookup"><span data-stu-id="8a29d-183">The SPA template uses EF Code First.</span></span> <span data-ttu-id="8a29d-184">Ve vývoji Code First nejprve definovat vzorů v kódu a pak EF používá model k vytvoření databáze.</span><span class="sxs-lookup"><span data-stu-id="8a29d-184">In Code First development, you define the models first in code, and then EF uses the model to create the database.</span></span> <span data-ttu-id="8a29d-185">Můžete také použít EF s existující databází ([Database First](https://msdn.microsoft.com/data/jj206878.aspx)).</span><span class="sxs-lookup"><span data-stu-id="8a29d-185">You can also use EF with an existing database ([Database First](https://msdn.microsoft.com/data/jj206878.aspx)).</span></span>

<span data-ttu-id="8a29d-186">`TodoItemContext` Je odvozena z třídy ve složce modely **DbContext**.</span><span class="sxs-lookup"><span data-stu-id="8a29d-186">The `TodoItemContext` class in the Models folder derives from **DbContext**.</span></span> <span data-ttu-id="8a29d-187">Tato třída poskytuje "spojovací" mezi modely a EF.</span><span class="sxs-lookup"><span data-stu-id="8a29d-187">This class provides the "glue" between the models and EF.</span></span> <span data-ttu-id="8a29d-188">`TodoItemContext` Obsahuje `ToDoItem` kolekce a `TodoList` kolekce.</span><span class="sxs-lookup"><span data-stu-id="8a29d-188">The `TodoItemContext` holds a `ToDoItem` collection and a `TodoList` collection.</span></span> <span data-ttu-id="8a29d-189">K dotazování databáze, můžete jednoduše zapsat dotazu LINQ na tyto kolekce.</span><span class="sxs-lookup"><span data-stu-id="8a29d-189">To query the database, you simply write a LINQ query against these collections.</span></span> <span data-ttu-id="8a29d-190">Tady je například jak můžete vybrat všechny seznamy úkolů pro uživatel "Alice":</span><span class="sxs-lookup"><span data-stu-id="8a29d-190">For example, here is how you can select all of the to-do lists for user "Alice":</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample2.cs)]

<span data-ttu-id="8a29d-191">Můžete také přidat nové položky do kolekce, aktualizovat položky, nebo odstranit položky z kolekce a zachová tak změny do databáze.</span><span class="sxs-lookup"><span data-stu-id="8a29d-191">You can also add new items to the collection, update items, or delete items from the collection, and persist the changes to the database.</span></span>

## <a name="aspnet-web-api-controllers"></a><span data-ttu-id="8a29d-192">Kontrolery rozhraní ASP.NET Web API</span><span class="sxs-lookup"><span data-stu-id="8a29d-192">ASP.NET Web API Controllers</span></span>

<span data-ttu-id="8a29d-193">V rozhraní ASP.NET Web API řadiče jsou objekty, které zpracovávají požadavky HTTP.</span><span class="sxs-lookup"><span data-stu-id="8a29d-193">In ASP.NET Web API, controllers are objects that handle HTTP requests.</span></span> <span data-ttu-id="8a29d-194">Jak už bylo zmíněno, šablona jednostránková aplikace používá webového rozhraní API pro povolení operací CRUD na `ToDoList` a `ToDoItem` instancí.</span><span class="sxs-lookup"><span data-stu-id="8a29d-194">As mentioned, the SPA template uses Web API to enable CRUD operations on `ToDoList` and `ToDoItem` instances.</span></span> <span data-ttu-id="8a29d-195">Kontrolery jsou umístěny ve složce řadiče řešení.</span><span class="sxs-lookup"><span data-stu-id="8a29d-195">The controllers are located in the Controllers folder of the solution.</span></span>

![](knockoutjs-template/_static/image10.png)

- <span data-ttu-id="8a29d-196">`TodoController`: Zpracovává požadavky HTTP pro položky seznamu úkolů</span><span class="sxs-lookup"><span data-stu-id="8a29d-196">`TodoController`: Handles HTTP requests for to-do items</span></span>
- <span data-ttu-id="8a29d-197">`TodoListController`: Zpracovává požadavky HTTP pro seznamy úkolů.</span><span class="sxs-lookup"><span data-stu-id="8a29d-197">`TodoListController`: Handles HTTP requests for to-do lists.</span></span>

<span data-ttu-id="8a29d-198">Tyto názvy jsou důležité, protože odpovídá identifikátoru URI cestu k názvu kontroleru webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8a29d-198">These names are significant, because Web API matches the URI path to the controller name.</span></span> <span data-ttu-id="8a29d-199">(Informace o tom, jak webové rozhraní API směruje požadavky HTTP na řadiče, naleznete v tématu [směrování v rozhraní ASP.NET Web API](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span><span class="sxs-lookup"><span data-stu-id="8a29d-199">(To learn how Web API routes HTTP requests to controllers, see [Routing in ASP.NET Web API](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span></span>

<span data-ttu-id="8a29d-200">Podívejme se `ToDoListController` třídy.</span><span class="sxs-lookup"><span data-stu-id="8a29d-200">Let's look at the `ToDoListController` class.</span></span> <span data-ttu-id="8a29d-201">Obsahuje single – datový člen:</span><span class="sxs-lookup"><span data-stu-id="8a29d-201">It contains a single data member:</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample3.cs)]

<span data-ttu-id="8a29d-202">`TodoItemContext` Slouží ke komunikaci s EF, jak je popsáno výše.</span><span class="sxs-lookup"><span data-stu-id="8a29d-202">The `TodoItemContext` is used to communicate with EF, as described earlier.</span></span> <span data-ttu-id="8a29d-203">Metody v řadiči provádění operací CRUD.</span><span class="sxs-lookup"><span data-stu-id="8a29d-203">The methods on the controller implement the CRUD operations.</span></span> <span data-ttu-id="8a29d-204">Webové rozhraní API mapuje požadavky HTTP od klienta pro metody kontroleru, následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="8a29d-204">Web API maps HTTP requests from the client to controller methods, as follows:</span></span>

| <span data-ttu-id="8a29d-205">Požadavek HTTP</span><span class="sxs-lookup"><span data-stu-id="8a29d-205">HTTP Request</span></span> | <span data-ttu-id="8a29d-206">Metoda kontroleru</span><span class="sxs-lookup"><span data-stu-id="8a29d-206">Controller Method</span></span> | <span data-ttu-id="8a29d-207">Popis</span><span class="sxs-lookup"><span data-stu-id="8a29d-207">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="8a29d-208">ZÍSKAT /api/todo</span><span class="sxs-lookup"><span data-stu-id="8a29d-208">GET /api/todo</span></span> | `GetTodoLists` | <span data-ttu-id="8a29d-209">Získá kolekci seznamů úkolů.</span><span class="sxs-lookup"><span data-stu-id="8a29d-209">Gets a collection of to-do lists.</span></span> |
| <span data-ttu-id="8a29d-210">GET/webové rozhraníAPI/todo/*id*</span><span class="sxs-lookup"><span data-stu-id="8a29d-210">GET /api/todo/*id*</span></span> | `GetTodoList` | <span data-ttu-id="8a29d-211">Získá seznam úkolů podle ID</span><span class="sxs-lookup"><span data-stu-id="8a29d-211">Gets a to-do list by ID</span></span> |
| <span data-ttu-id="8a29d-212">Vložení/webové rozhraníAPI/todo/*id*</span><span class="sxs-lookup"><span data-stu-id="8a29d-212">PUT /api/todo/*id*</span></span> | `PutTodoList` | <span data-ttu-id="8a29d-213">Aktualizuje seznam úkolů.</span><span class="sxs-lookup"><span data-stu-id="8a29d-213">Updates a to-do list.</span></span> |
| <span data-ttu-id="8a29d-214">Publikovat/api/todo</span><span class="sxs-lookup"><span data-stu-id="8a29d-214">POST /api/todo</span></span> | `PostTodoList` | <span data-ttu-id="8a29d-215">Vytvoří nový seznam úkolů.</span><span class="sxs-lookup"><span data-stu-id="8a29d-215">Creates a new to-do list.</span></span> |
| <span data-ttu-id="8a29d-216">ODSTRANĚNÍ nebo webové rozhraníAPI/todo/*id*</span><span class="sxs-lookup"><span data-stu-id="8a29d-216">DELETE /api/todo/*id*</span></span> | `DeleteTodoList` | <span data-ttu-id="8a29d-217">Odstranění seznamu úkolů.</span><span class="sxs-lookup"><span data-stu-id="8a29d-217">Deletes a TODO list.</span></span> |

<span data-ttu-id="8a29d-218">Všimněte si, že identifikátory URI pro některé operace obsahovaly zástupné symboly pro hodnotu ID.</span><span class="sxs-lookup"><span data-stu-id="8a29d-218">Notice that the URIs for some operations contain placeholders for the ID value.</span></span> <span data-ttu-id="8a29d-219">Například k odstranění na seznamu s ID 42, identifikátor URI je `/api/todo/42`.</span><span class="sxs-lookup"><span data-stu-id="8a29d-219">For example, to delete a to-list with an ID of 42, the URI is `/api/todo/42`.</span></span>

<span data-ttu-id="8a29d-220">Další informace o používání webového rozhraní API pro operace CRUD najdete v tématu [této operace CRUD podporuje vytvoření webového rozhraní API](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span><span class="sxs-lookup"><span data-stu-id="8a29d-220">To learn more about using Web API for CRUD operations, see [Creating a Web API that Supports CRUD Operations](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span></span> <span data-ttu-id="8a29d-221">Kód pro tento kontroler je poměrně jednoduché.</span><span class="sxs-lookup"><span data-stu-id="8a29d-221">The code for this controller is fairly straightforward.</span></span> <span data-ttu-id="8a29d-222">Tady jsou některé zajímavé body:</span><span class="sxs-lookup"><span data-stu-id="8a29d-222">Here are some interesting points:</span></span>

- <span data-ttu-id="8a29d-223">`GetTodoLists` Metoda používá dotaz LINQ pro filtrování výsledků podle ID přihlášeného uživatele.</span><span class="sxs-lookup"><span data-stu-id="8a29d-223">The `GetTodoLists` method uses a LINQ query to filter the results by the ID of the logged-in user.</span></span> <span data-ttu-id="8a29d-224">Tímto způsobem, uživateli se zobrazí pouze data, která patří do nového zaměstnance odkázat.</span><span class="sxs-lookup"><span data-stu-id="8a29d-224">That way, a user only sees the data that belongs to him or her.</span></span> <span data-ttu-id="8a29d-225">Všimněte si také, že příkaz Select se používá k převodu `ToDoList` instance do `TodoListDto` instancí.</span><span class="sxs-lookup"><span data-stu-id="8a29d-225">Also, notice that a Select statement is used to convert the `ToDoList` instances into `TodoListDto` instances.</span></span>
- <span data-ttu-id="8a29d-226">Metody PUT a příspěvku zkontrolovat stav modelu před změnou databáze.</span><span class="sxs-lookup"><span data-stu-id="8a29d-226">The PUT and POST methods check the model state before modifying the database.</span></span> <span data-ttu-id="8a29d-227">Pokud **ModelState.IsValid** má hodnotu false, vrátí tyto metody HTTP, chybný požadavek 400.</span><span class="sxs-lookup"><span data-stu-id="8a29d-227">If **ModelState.IsValid** is false, these methods return HTTP 400, Bad Request.</span></span> <span data-ttu-id="8a29d-228">Další informace o ověření modelu v rozhraní Web API v [ověření modelu](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span><span class="sxs-lookup"><span data-stu-id="8a29d-228">Read more about model validation in Web API at [Model Validation](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span></span>
- <span data-ttu-id="8a29d-229">Třída kontroleru je doplněn také **[Authorize]** atribut.</span><span class="sxs-lookup"><span data-stu-id="8a29d-229">The controller class is also decorated with the **[Authorize]** attribute.</span></span> <span data-ttu-id="8a29d-230">Tento atribut kontroluje, zda je ověřený požadavek HTTP.</span><span class="sxs-lookup"><span data-stu-id="8a29d-230">This attribute checks whether the HTTP request is authenticated.</span></span> <span data-ttu-id="8a29d-231">Pokud požadavek nebude ověřený, obdrží klient HTTP 401 Neautorizováno.</span><span class="sxs-lookup"><span data-stu-id="8a29d-231">If the request is not authenticated, the client receives HTTP 401, Unauthorized.</span></span> <span data-ttu-id="8a29d-232">Další informace o ověřování v [ověřování a autorizace v rozhraní ASP.NET Web API](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span><span class="sxs-lookup"><span data-stu-id="8a29d-232">Read more about authentication at [Authentication and Authorization in ASP.NET Web API](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span></span>

<span data-ttu-id="8a29d-233">`TodoController` Třída je velmi podobný `TodoListController`.</span><span class="sxs-lookup"><span data-stu-id="8a29d-233">The `TodoController` class is very similar to `TodoListController`.</span></span> <span data-ttu-id="8a29d-234">Největším rozdílem je, že nedefinuje žádné metody GET, protože klient se zobrazí položky úkolů společně s každou seznam úkolů.</span><span class="sxs-lookup"><span data-stu-id="8a29d-234">The biggest difference is that it does not define any GET methods, because the client will get the to-do items along with each to-do list.</span></span>

## <a name="mvc-controllers-and-views"></a><span data-ttu-id="8a29d-235">Kontrolery a zobrazení MVC</span><span class="sxs-lookup"><span data-stu-id="8a29d-235">MVC Controllers and Views</span></span>

<span data-ttu-id="8a29d-236">Kontrolery MVC jsou také umístěny ve složce řadiče řešení.</span><span class="sxs-lookup"><span data-stu-id="8a29d-236">The MVC controllers are also located in the Controllers folder of the solution.</span></span> <span data-ttu-id="8a29d-237">`HomeController` vykreslí hlavní HTML pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="8a29d-237">`HomeController` renders the main HTML for the application.</span></span> <span data-ttu-id="8a29d-238">Zobrazení pro kontroler Home je definováno v Views/Home/Index.cshtml.</span><span class="sxs-lookup"><span data-stu-id="8a29d-238">The view for the Home controller is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="8a29d-239">Domovská stránka zobrazení vykreslí rozdílný obsah v závislosti na tom, jestli je uživatel přihlášen:</span><span class="sxs-lookup"><span data-stu-id="8a29d-239">The Home view renders different content depending on whether the user is logged in:</span></span>

[!code-cshtml[Main](knockoutjs-template/samples/sample4.cshtml)]

<span data-ttu-id="8a29d-240">Když se uživatelé přihlásí, zobrazí se jim hlavní uživatelské rozhraní.</span><span class="sxs-lookup"><span data-stu-id="8a29d-240">When users are logged in, they see the main UI.</span></span> <span data-ttu-id="8a29d-241">Zobrazí se jim v opačném případě panelu přihlášení.</span><span class="sxs-lookup"><span data-stu-id="8a29d-241">Otherwise, they see the login panel.</span></span> <span data-ttu-id="8a29d-242">Všimněte si, že se stane toto podmíněné vykreslování na straně serveru.</span><span class="sxs-lookup"><span data-stu-id="8a29d-242">Note that this conditional rendering happens on the server side.</span></span> <span data-ttu-id="8a29d-243">Nikdy se pokusí skrýt citlivý obsah na straně klienta & #8212anything odesílané v odpovědi protokolu HTTP je viditelná pro uživatele, který sleduje nezpracované zprávy HTTP.</span><span class="sxs-lookup"><span data-stu-id="8a29d-243">Never try to hide sensitive content on the client side&#8212anything that you send in an HTTP response is visible to someone who is watching the raw HTTP messages.</span></span>

## <a name="client-side-javascript-and-knockoutjs"></a><span data-ttu-id="8a29d-244">JavaScript na straně klienta a knihovnou Knockout.js</span><span class="sxs-lookup"><span data-stu-id="8a29d-244">Client-Side JavaScript and Knockout.js</span></span>

<span data-ttu-id="8a29d-245">Teď přejdeme na straně serveru do klienta aplikace.</span><span class="sxs-lookup"><span data-stu-id="8a29d-245">Now let's turn from the server side of the application to the client.</span></span> <span data-ttu-id="8a29d-246">Šablona jednostránková aplikace používá kombinaci jQuery a rozhraní Knockout.js vytvořit plynulé a na interaktivní uživatelské rozhraní.</span><span class="sxs-lookup"><span data-stu-id="8a29d-246">The SPA template uses a combination of jQuery and Knockout.js to create a smooth, interactive UI.</span></span> <span data-ttu-id="8a29d-247">Rozhraní Knockout.js je knihovna jazyka JavaScript, která umožňuje jednoduše vázat na data ve formátu HTML.</span><span class="sxs-lookup"><span data-stu-id="8a29d-247">Knockout.js is a JavaScript library that makes it easy to bind HTML to data.</span></span> <span data-ttu-id="8a29d-248">Rozhraní Knockout.js používá vzor nazývá "Model-View-ViewModel."</span><span class="sxs-lookup"><span data-stu-id="8a29d-248">Knockout.js uses a pattern called "Model-View-ViewModel."</span></span>

- <span data-ttu-id="8a29d-249">Data domény (ToDo seznamy a položky seznamu úkolů) je model.</span><span class="sxs-lookup"><span data-stu-id="8a29d-249">The model is the domain data (ToDo lists and ToDo items).</span></span>
- <span data-ttu-id="8a29d-250">Zobrazení je dokument HTML.</span><span class="sxs-lookup"><span data-stu-id="8a29d-250">The view is the HTML document.</span></span>
- <span data-ttu-id="8a29d-251">Model zobrazení je objekt jazyka JavaScript, která obsahuje data modelu.</span><span class="sxs-lookup"><span data-stu-id="8a29d-251">The view-model is a JavaScript object that holds the model data.</span></span> <span data-ttu-id="8a29d-252">Model zobrazení je abstrakce kód uživatelského rozhraní.</span><span class="sxs-lookup"><span data-stu-id="8a29d-252">The view-model is a code abstraction of the UI.</span></span> <span data-ttu-id="8a29d-253">Nemá žádné znalosti jazyka HTML představující.</span><span class="sxs-lookup"><span data-stu-id="8a29d-253">It has no knowledge of the HTML representation.</span></span> <span data-ttu-id="8a29d-254">Místo toho představuje abstraktní funkce zobrazení, jako je například "seznam položek ToDo".</span><span class="sxs-lookup"><span data-stu-id="8a29d-254">Instead, it represents abstract features of the view, such as "a list of ToDo items".</span></span>

<span data-ttu-id="8a29d-255">Zobrazení je vázán na data modelu zobrazení.</span><span class="sxs-lookup"><span data-stu-id="8a29d-255">The view is data-bound to the view-model.</span></span> <span data-ttu-id="8a29d-256">Aktualizace zobrazení modelu se automaticky projeví v zobrazení.</span><span class="sxs-lookup"><span data-stu-id="8a29d-256">Updates to the view-model are automatically reflected in the view.</span></span> <span data-ttu-id="8a29d-257">Vazby fungují opačným směrem.</span><span class="sxs-lookup"><span data-stu-id="8a29d-257">Bindings work the other direction as well.</span></span> <span data-ttu-id="8a29d-258">Události v modelu DOM (například kliknutí) jsou vázané na data na funkce na model zobrazení, která aktivuje volání AJAX.</span><span class="sxs-lookup"><span data-stu-id="8a29d-258">Events in the DOM (such as clicks) are data-bound to functions on the view model, which trigger AJAX calls.</span></span>

<span data-ttu-id="8a29d-259">Jednostránková aplikace šablony slouží k uspořádání JavaScript na straně klienta do tři vrstvy:</span><span class="sxs-lookup"><span data-stu-id="8a29d-259">The SPA template organizes the client-side JavaScript into three layers:</span></span>

- <span data-ttu-id="8a29d-260">TODO.DataContext.js: odešle žádost o AJAX.</span><span class="sxs-lookup"><span data-stu-id="8a29d-260">todo.datacontext.js: Sends AJAX requests.</span></span>
- <span data-ttu-id="8a29d-261">TODO.model.js: definuje modely.</span><span class="sxs-lookup"><span data-stu-id="8a29d-261">todo.model.js: Defines the models.</span></span>
- <span data-ttu-id="8a29d-262">TODO.ViewModel.js: definuje model zobrazení.</span><span class="sxs-lookup"><span data-stu-id="8a29d-262">todo.viewmodel.js: Defines the view model.</span></span>

![](knockoutjs-template/_static/image11.png)

<span data-ttu-id="8a29d-263">Tyto soubory skriptu jsou umístěny ve složce skripty nebo aplikace řešení.</span><span class="sxs-lookup"><span data-stu-id="8a29d-263">These script files are located in the Scripts/app folder of the solution.</span></span>

![](knockoutjs-template/_static/image12.png)

<span data-ttu-id="8a29d-264">**TODO.DataContext** zpracovává všechna volání AJAX do kontrolerů rozhraní Web API.</span><span class="sxs-lookup"><span data-stu-id="8a29d-264">**todo.datacontext** handles all AJAX calls to the Web API controllers.</span></span> <span data-ttu-id="8a29d-265">(Volání AJAX pro přihlášení je definována jinde, v ajaxlogin.js.)</span><span class="sxs-lookup"><span data-stu-id="8a29d-265">(The AJAX calls for logging in are defined elsewhere, in ajaxlogin.js.)</span></span>

<span data-ttu-id="8a29d-266">**TODO.model.js** definuje modely (prohlížeč) na straně klienta pro seznamy úkolů.</span><span class="sxs-lookup"><span data-stu-id="8a29d-266">**todo.model.js** defines the client-side (browser) models for the to-do lists.</span></span> <span data-ttu-id="8a29d-267">Existují dvě třídy modelu: todoItem a seznamu úkolů.</span><span class="sxs-lookup"><span data-stu-id="8a29d-267">There are two model classes: todoItem and todoList.</span></span>

<span data-ttu-id="8a29d-268">Mnoho vlastností ve třídách modelu jsou typu "ko.observable".</span><span class="sxs-lookup"><span data-stu-id="8a29d-268">Many of the properties in the model classes are of type "ko.observable".</span></span> <span data-ttu-id="8a29d-269">Pozorovatelné objekty jsou, jak jeho magic Knockout.</span><span class="sxs-lookup"><span data-stu-id="8a29d-269">Observables are how Knockout does its magic.</span></span> <span data-ttu-id="8a29d-270">Z [Knockout dokumentaci](http://knockoutjs.com/documentation/introduction.html): existuje zjištěný je "objekt jazyka JavaScript, který může upozornit předplatitele o změnách."</span><span class="sxs-lookup"><span data-stu-id="8a29d-270">From the [Knockout documentation](http://knockoutjs.com/documentation/introduction.html): An observable is a "JavaScript object that can notify subscribers about changes."</span></span> <span data-ttu-id="8a29d-271">Při změně hodnoty pozorovat, aktualizuje Knockout elementy HTML, které jsou vázány na těchto pozorovatelné objekty.</span><span class="sxs-lookup"><span data-stu-id="8a29d-271">When the value of an observable changes, Knockout updates any HTML elements that are bound to those observables.</span></span> <span data-ttu-id="8a29d-272">Pozorovatelné objekty pro vlastnosti název a isDone má například todoItem:</span><span class="sxs-lookup"><span data-stu-id="8a29d-272">For example, todoItem has observables for the title and isDone properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample5.js)]

<span data-ttu-id="8a29d-273">Můžete také odebírat existuje zjištěný v kódu.</span><span class="sxs-lookup"><span data-stu-id="8a29d-273">You can also subscribe to an observable in code.</span></span> <span data-ttu-id="8a29d-274">Například třída todoItem se přihlásí k odběru změn ve vlastnostech "isDone" a "title":</span><span class="sxs-lookup"><span data-stu-id="8a29d-274">For example, the todoItem class subscribes to changes in the "isDone" and "title" properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample6.js)]

<span data-ttu-id="8a29d-275">**Model zobrazení**</span><span class="sxs-lookup"><span data-stu-id="8a29d-275">**View Model**</span></span>

<span data-ttu-id="8a29d-276">Model zobrazení je definováno v todo.viewmodel.js.</span><span class="sxs-lookup"><span data-stu-id="8a29d-276">The view model is defined in todo.viewmodel.js.</span></span> <span data-ttu-id="8a29d-277">Model zobrazení je ústřední bod, kde aplikace propojena prvky stránky HTML dat domény.</span><span class="sxs-lookup"><span data-stu-id="8a29d-277">The view model is the central point where the application binds the HTML page elements to the domain data.</span></span> <span data-ttu-id="8a29d-278">V šabloně SPA obsahuje model zobrazení pozorovatelných pole todoLists.</span><span class="sxs-lookup"><span data-stu-id="8a29d-278">In the SPA template, the view model contains an observable array of todoLists.</span></span> <span data-ttu-id="8a29d-279">Následující kód v zobrazení modelu říká Knockout použít vazby:</span><span class="sxs-lookup"><span data-stu-id="8a29d-279">The following code in the view model tells Knockout to apply the bindings:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample7.js)]

## <a name="html-and-data-binding"></a><span data-ttu-id="8a29d-280">HTML a vytváření datových vazeb</span><span class="sxs-lookup"><span data-stu-id="8a29d-280">HTML and Data Binding</span></span>

<span data-ttu-id="8a29d-281">Hlavní HTML na stránce je definován v Views/Home/Index.cshtml.</span><span class="sxs-lookup"><span data-stu-id="8a29d-281">The main HTML for the page is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="8a29d-282">Vzhledem k tomu, že používáme datovou vazbu, kód HTML je jenom šablony pro co ve skutečnosti získá vykreslen.</span><span class="sxs-lookup"><span data-stu-id="8a29d-282">Because we are using data-binding, the HTML is only a template for what actually gets rendered.</span></span> <span data-ttu-id="8a29d-283">Používá knockout *deklarativní* vazby.</span><span class="sxs-lookup"><span data-stu-id="8a29d-283">Knockout uses *declarative* bindings.</span></span> <span data-ttu-id="8a29d-284">Prvky stránky lze vázat na data tak, že do elementu přidáte atribut "data-bind".</span><span class="sxs-lookup"><span data-stu-id="8a29d-284">You bind page elements to data by adding a "data-bind" attribute to the element.</span></span> <span data-ttu-id="8a29d-285">Tady je velmi jednoduchý příklad, provést v dokumentaci ke službě Knockout:</span><span class="sxs-lookup"><span data-stu-id="8a29d-285">Here is a very simple example, taken from the Knockout documentation:</span></span>

[!code-html[Main](knockoutjs-template/samples/sample8.html)]

<span data-ttu-id="8a29d-286">V tomto příkladu Knockout aktualizuje obsah **&lt;span&gt;** element s hodnotou `myItems.count()`.</span><span class="sxs-lookup"><span data-stu-id="8a29d-286">In this example, Knockout updates the contents of the **&lt;span&gt;** element with the value of `myItems.count()`.</span></span> <span data-ttu-id="8a29d-287">Pokaždé, když se tato hodnota se změní, Knockout dokument aktualizuje.</span><span class="sxs-lookup"><span data-stu-id="8a29d-287">Whenever this value changes, Knockout updates the document.</span></span>

<span data-ttu-id="8a29d-288">Knockout obsahuje několik typů jinou vazbou.</span><span class="sxs-lookup"><span data-stu-id="8a29d-288">Knockout provides a number of different binding types.</span></span> <span data-ttu-id="8a29d-289">Tady jsou některé vazby používá v šabloně jednostránková aplikace:</span><span class="sxs-lookup"><span data-stu-id="8a29d-289">Here are some of the bindings used in the SPA template:</span></span>

- <span data-ttu-id="8a29d-290">**foreach**: umožňuje iteraci smyčky a použít stejné značky pro každou položku v seznamu.</span><span class="sxs-lookup"><span data-stu-id="8a29d-290">**foreach**: Lets you iterate through a loop and apply the same markup to each item in the list.</span></span> <span data-ttu-id="8a29d-291">To slouží k vykreslení seznamy úkolů a položkami seznamu úkolů.</span><span class="sxs-lookup"><span data-stu-id="8a29d-291">This is used to render the to-do lists and to-do items.</span></span> <span data-ttu-id="8a29d-292">V rámci **foreach**, vazby jsou použity na prvky ze seznamu.</span><span class="sxs-lookup"><span data-stu-id="8a29d-292">Within the **foreach**, the bindings are applied to the elements of the list.</span></span>
- <span data-ttu-id="8a29d-293">**viditelné**: Umožňuje přepnout viditelnost.</span><span class="sxs-lookup"><span data-stu-id="8a29d-293">**visible**: Used to toggle visibility.</span></span> <span data-ttu-id="8a29d-294">Skrýt značky, pokud kolekce je prázdná nebo zviditelnit chybová zpráva.</span><span class="sxs-lookup"><span data-stu-id="8a29d-294">Hide markup when a collection is empty, or make the error message visible.</span></span>
- <span data-ttu-id="8a29d-295">**Hodnota**: použitých k naplnění hodnot formuláře.</span><span class="sxs-lookup"><span data-stu-id="8a29d-295">**value**: Used to populate form values.</span></span>
- <span data-ttu-id="8a29d-296">**Klikněte na tlačítko**: váže událost click k funkci v modelu zobrazení.</span><span class="sxs-lookup"><span data-stu-id="8a29d-296">**click**: Binds a click event to a function on the view model.</span></span>

## <a name="anti-csrf-protection"></a><span data-ttu-id="8a29d-297">Ochrana proti CSRF</span><span class="sxs-lookup"><span data-stu-id="8a29d-297">Anti-CSRF Protection</span></span>

<span data-ttu-id="8a29d-298">Padělání žádosti mezi weby (CSRF) je útok, kde škodlivý web odešle požadavek na zranitelné lokality, kde uživatel je momentálně přihlášený.</span><span class="sxs-lookup"><span data-stu-id="8a29d-298">Cross-Site Request Forgery (CSRF) is an attack where a malicious site sends a request to a vulnerable site where the user is currently logged in.</span></span> <span data-ttu-id="8a29d-299">Aby se zabránilo útokům CSRF, ASP.NET MVC používá *tokenů proti padělání*, nazývané také žádosti o ověření tokenů.</span><span class="sxs-lookup"><span data-stu-id="8a29d-299">To help prevent CSRF attacks, ASP.NET MVC uses *anti-forgery tokens*, also called request verification tokens.</span></span> <span data-ttu-id="8a29d-300">Cílem je, že server umístí náhodně vygenerovaný token do webové stránky.</span><span class="sxs-lookup"><span data-stu-id="8a29d-300">The idea is that the server puts a randomly generated token into a web page.</span></span> <span data-ttu-id="8a29d-301">Když klient odešle data na server, musí obsahovat tuto hodnotu do zprávy požadavku.</span><span class="sxs-lookup"><span data-stu-id="8a29d-301">When the client submits data to the server, it must include this value in the request message.</span></span>

<span data-ttu-id="8a29d-302">Tokenů proti padělání pracovat, protože škodlivý stránku nelze číst tokeny uživatele z důvodu zásadami stejného původu.</span><span class="sxs-lookup"><span data-stu-id="8a29d-302">Anti-forgery tokens work because the malicious page cannot read the user's tokens, due to same-origin policies.</span></span> <span data-ttu-id="8a29d-303">(Stejného zdroje kvůli zásadám dokumenty hostovaný na dvou různých lokalit v přístupu k obsahu druhé strany.)</span><span class="sxs-lookup"><span data-stu-id="8a29d-303">(Same-origin policies prevent documents hosted on two different sites from accessing each other's content.)</span></span>

<span data-ttu-id="8a29d-304">ASP.NET MVC poskytuje integrovanou podporu pro tokeny proti zfalšování, až [AntiForgery](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx) třídy a [[ValidateAntiForgeryToken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx) atribut.</span><span class="sxs-lookup"><span data-stu-id="8a29d-304">ASP.NET MVC provides built-in support for anti-forgery tokens, through the [AntiForgery](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx) class and the [[ValidateAntiForgeryToken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx) attribute.</span></span> <span data-ttu-id="8a29d-305">Tato funkce není v současné době součástí webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8a29d-305">Currently, this functionality is not built into Web API.</span></span> <span data-ttu-id="8a29d-306">Šablona SPA však zahrnuje vlastní implementaci webového rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="8a29d-306">However, the SPA template includes a custom implementation for Web API.</span></span> <span data-ttu-id="8a29d-307">Tento kód je definovaný v `ValidateHttpAntiForgeryTokenAttribute` třídy, který je umístěn ve složce filtry řešení.</span><span class="sxs-lookup"><span data-stu-id="8a29d-307">This code is defined in the `ValidateHttpAntiForgeryTokenAttribute` class, which is located in the Filters folder of the solution.</span></span> <span data-ttu-id="8a29d-308">Další informace o anti-CSRF v rozhraní Web API najdete v tématu [brání webů požádat o ÚTOKŮ Csrf útoky](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span><span class="sxs-lookup"><span data-stu-id="8a29d-308">To learn more about anti-CSRF in Web API, see [Preventing Cross-Site Request Forgery (CSRF) Attacks](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="8a29d-309">Závěr</span><span class="sxs-lookup"><span data-stu-id="8a29d-309">Conclusion</span></span>

<span data-ttu-id="8a29d-310">Jednostránková aplikace šablona je určena vám pomůžou začít rychle vytváření moderních, interaktivních webových aplikací.</span><span class="sxs-lookup"><span data-stu-id="8a29d-310">The SPA template is designed to get you started quickly writing modern, interactive web applications.</span></span> <span data-ttu-id="8a29d-311">Knihovně rozhraní Knockout.js používá k oddělení prezentaci (značka jazyka HTML) z dat a aplikací logiky.</span><span class="sxs-lookup"><span data-stu-id="8a29d-311">It uses the Knockout.js library to separate presentation (HTML markup) from the data and application logic.</span></span> <span data-ttu-id="8a29d-312">Ale Knockout není pouze knihovny JavaScriptu, která vám pomůže vytvořit SPA.</span><span class="sxs-lookup"><span data-stu-id="8a29d-312">But Knockout is not the only JavaScript library you can use to create a SPA.</span></span> <span data-ttu-id="8a29d-313">Pokud chcete prozkoumat některé další možnosti, podívejte se na [komunitou vytvořených šablon SPA](../templates/index.md).</span><span class="sxs-lookup"><span data-stu-id="8a29d-313">If you want to explore some other options, take a look at the [community-created SPA templates](../templates/index.md).</span></span>
