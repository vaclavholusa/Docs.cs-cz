---
uid: web-forms/overview/data-access/accessing-the-database-directly-from-an-aspnet-page/inserting-updating-and-deleting-data-with-the-sqldatasource-cs
title: Vkládání, aktualizaci a odstraňování dat ovládacím prvkem SqlDataSource (C#) | Dokumentace Microsoftu
author: rick-anderson
description: V předchozích kurzech jsme zjistili, jak ovládací prvek ObjectDataSource povolené pro vkládání, aktualizaci a odstraňování dat. Ovládacím prvkem SqlDataSource podporuje t...
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/20/2007
ms.topic: article
ms.assetid: a526f0ec-779e-4a2b-a476-6604090d25ce
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/data-access/accessing-the-database-directly-from-an-aspnet-page/inserting-updating-and-deleting-data-with-the-sqldatasource-cs
msc.type: authoredcontent
ms.openlocfilehash: b3037cfdc9a6b27b1f87e0b323b9ae59235cc27c
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/03/2018
ms.locfileid: "37385807"
---
<a name="inserting-updating-and-deleting-data-with-the-sqldatasource-c"></a><span data-ttu-id="7a2c3-104">Vkládání, aktualizaci a odstraňování dat ovládacím prvkem SqlDataSource (C#)</span><span class="sxs-lookup"><span data-stu-id="7a2c3-104">Inserting, Updating, and Deleting Data with the SqlDataSource (C#)</span></span>
====================
<span data-ttu-id="7a2c3-105">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="7a2c3-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="7a2c3-106">[Stáhněte si ukázkovou aplikaci](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_49_CS.exe) nebo [stahovat PDF](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/datatutorial49cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="7a2c3-106">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_49_CS.exe) or [Download PDF](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/datatutorial49cs1.pdf)</span></span>

> <span data-ttu-id="7a2c3-107">V předchozích kurzech jsme zjistili, jak ovládací prvek ObjectDataSource povolené pro vkládání, aktualizaci a odstraňování dat.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-107">In previous tutorials we learned how the ObjectDataSource control allowed for inserting, updating, and deleting of data.</span></span> <span data-ttu-id="7a2c3-108">Ovládacím prvkem SqlDataSource podporuje stejné operace, ale tento přístup se liší a tento kurz ukazuje, jak nakonfigurovat ve třídě SqlDataSource vložit, aktualizovat a odstraňovat data.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-108">The SqlDataSource control supports the same operations, but the approach is different, and this tutorial shows how to configure the SqlDataSource to insert, update, and delete data.</span></span>


## <a name="introduction"></a><span data-ttu-id="7a2c3-109">Úvod</span><span class="sxs-lookup"><span data-stu-id="7a2c3-109">Introduction</span></span>

<span data-ttu-id="7a2c3-110">Jak je popsáno v [přehled o vložení, aktualizaci a odstraňování](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), ovládací prvek GridView poskytuje integrované aktualizace a odstranění funkce, zatímco obsahovat ovládací prvky prvku DetailsView a FormView vkládání podporu spolu s úpravy a odstranění funkce.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-110">As discussed in [An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), the GridView control provides built-in updating and deleting capabilities, while the DetailsView and FormView controls include inserting support along with editing and deleting functionality.</span></span> <span data-ttu-id="7a2c3-111">Možnosti úprav těchto dat může být připojeno přímo do správy zdrojového kódu bez jediného řádku kódu by bylo potřeba zapsat data.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-111">These data modification capabilities can be plugged directly into a data source control without a line of code needing to be written.</span></span> <span data-ttu-id="7a2c3-112">[Přehled o vložení, aktualizaci a odstraňování](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) prozkoumat pomocí ObjectDataSource usnadňuje vkládání, aktualizaci a odstraňování s ovládacími prvky GridView DetailsView a FormView.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-112">[An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) examined using the ObjectDataSource to facilitate inserting, updating, and deleting with the GridView, DetailsView, and FormView controls.</span></span> <span data-ttu-id="7a2c3-113">Alternativně je možné ve třídě SqlDataSource místo ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-113">Alternatively, the SqlDataSource can be used in place of the ObjectDataSource.</span></span>

<span data-ttu-id="7a2c3-114">Vzpomeňte si, že pro podporu vkládání, aktualizaci a odstraňování ovládacím prvkem ObjectDataSource jsme potřeby určují metody vrstvy objektu k vyvolání provést vložení, aktualizace nebo odstranění akce.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-114">Recall that to support inserting, updating, and deleting, with the ObjectDataSource we needed to specify the object layer methods to invoke to perform the insert, update, or delete action.</span></span> <span data-ttu-id="7a2c3-115">S ovládacím prvkem SqlDataSource potřebujeme pro poskytování `INSERT`, `UPDATE`, a `DELETE` SQL příkazy (nebo úložné procedury) ke spuštění.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-115">With the SqlDataSource, we need to provide `INSERT`, `UPDATE`, and `DELETE` SQL statements (or stored procedures) to execute.</span></span> <span data-ttu-id="7a2c3-116">Jak uvidíme v tomto kurzu, tyto příkazy lze vytvořit ručně nebo můžete být automaticky generované průvodcem knihovnou SqlDataSource s zdroj dat nakonfigurovat.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-116">As we'll see in this tutorial, these statements can be created manually or can be automatically generated by the SqlDataSource s Configure Data Source wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="7a2c3-117">Protože jsme ve již probírali vložení, úpravy a odstranění možnosti prvku GridView, DetailsView a řídí FormView, tento kurz se zaměřuje na konfiguraci ovládacím prvkem SqlDataSource pro podporu těchto operací.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-117">Since we ve already discussed the inserting, editing, and deleting capabilities of the GridView, DetailsView, and FormView controls, this tutorial will focus on configuring the SqlDataSource control to support these operations.</span></span> <span data-ttu-id="7a2c3-118">Pokud se chcete zdokonalit v implementaci těchto funkcí v rámci ovládacího prvku GridView, DetailsView a FormView, vraťte se na kurzy úpravy, vložení a odstranění dat, počínaje [přehled o vložení, aktualizaci a odstraňování](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md).</span><span class="sxs-lookup"><span data-stu-id="7a2c3-118">If you need to brush up on implementing these features within the GridView, DetailsView, and FormView, return to the Editing, Inserting, and Deleting Data tutorials, starting with [An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md).</span></span>


## <a name="step-1-specifyinginsertupdate-anddeletestatements"></a><span data-ttu-id="7a2c3-119">Krok 1: Určení`INSERT`,`UPDATE`, a`DELETE`příkazy</span><span class="sxs-lookup"><span data-stu-id="7a2c3-119">Step 1: Specifying`INSERT`,`UPDATE`, and`DELETE`Statements</span></span>

<span data-ttu-id="7a2c3-120">Jako jsme viděli v posledních dvou kurzy k načtení dat z SqlDataSource ovládací prvek, který potřebujeme ve nastavte dvě vlastnosti:</span><span class="sxs-lookup"><span data-stu-id="7a2c3-120">As we ve seen in the past two tutorials, to retrieve data from a SqlDataSource control we need to set two properties:</span></span>

1. <span data-ttu-id="7a2c3-121">`ConnectionString`, která určuje, co bude odeslán dotaz, databáze a</span><span class="sxs-lookup"><span data-stu-id="7a2c3-121">`ConnectionString`, which specifies what database to send the query to, and</span></span>
2. <span data-ttu-id="7a2c3-122">`SelectCommand`, která určuje ad-hoc příkaz SQL nebo název uložené procedury k provedení pro vrácení výsledků.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-122">`SelectCommand`, which specifies the ad-hoc SQL statement or stored procedure name to execute to return the results.</span></span>

<span data-ttu-id="7a2c3-123">Pro `SelectCommand` hodnoty parametrů, parametr hodnoty jsou specifikované prostřednictvím SqlDataSource s `SelectParameters` kolekci a může obsahovat pevně definovaných hodnot zdrojové hodnoty společných parametrů (pole řetězce dotazu, proměnné relace webové hodnoty ovládacího prvku, a tak dále), nebo je možné přiřadit prostřednictvím kódu programu.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-123">For `SelectCommand` values with parameters, the parameter values are specified via the SqlDataSource s `SelectParameters` collection and can include hard-coded values, common parameter source values (querystring fields, session variables, Web control values, and so on), or can be programmatically assigned.</span></span> <span data-ttu-id="7a2c3-124">Když ve třídě SqlDataSource řídit s `Select()` metoda vyvolat prostřednictvím kódu programu nebo automaticky pomocí dat webový ovládací prvek navázání připojení k databázi, hodnoty parametrů jsou přiřazeny k dotazu a je příkaz shuttled vypnout na databáze.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-124">When the SqlDataSource control s `Select()` method is invoked either programmatically or automatically from a data Web control a connection to the database is established, the parameter values are assigned to the query, and the command is shuttled off to the database.</span></span> <span data-ttu-id="7a2c3-125">Výsledky jsou vráceny jako datovou sadu nebo DataReader, v závislosti na hodnotě ovládacího prvku s `DataSourceMode` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-125">The results are then returned as either a DataSet or DataReader, depending on the value of the control s `DataSourceMode` property.</span></span>

<span data-ttu-id="7a2c3-126">Spolu s výběr dat ovládacím prvkem SqlDataSource slouží k vložení, aktualizace a odstranění dat zadáním `INSERT`, `UPDATE`, a `DELETE` příkazy SQL v podstatě stejným způsobem.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-126">Along with selecting data, the SqlDataSource control can be used to insert, update, and delete data by supplying `INSERT`, `UPDATE`, and `DELETE` SQL statements in much the same way.</span></span> <span data-ttu-id="7a2c3-127">Jednoduše přiřadit `InsertCommand`, `UpdateCommand`, a `DeleteCommand` vlastnosti `INSERT`, `UPDATE`, a `DELETE` SQL příkazy ke spuštění.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-127">Simply assign the `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties the `INSERT`, `UPDATE`, and `DELETE` SQL statements to execute.</span></span> <span data-ttu-id="7a2c3-128">Pokud se příkazy mají parametry (jako největší vždy), zahrňte je do `InsertParameters`, `UpdateParameters`, a `DeleteParameters` kolekce.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-128">If the statements have parameters (as they most always will), include them in the `InsertParameters`, `UpdateParameters`, and `DeleteParameters` collections.</span></span>

<span data-ttu-id="7a2c3-129">Jednou `InsertCommand`, `UpdateCommand`, nebo `DeleteCommand` byla zadána hodnota, bude k dispozici možnost Povolit vložení, povolit úpravy nebo Povolit odstranění v odpovídajících dat webové ovládací prvek s inteligentních značek.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-129">Once an `InsertCommand`, `UpdateCommand`, or `DeleteCommand` value has been specified, the Enable Inserting, Enable Editing, or Enable Deleting option in the corresponding data Web control s smart tag will become available.</span></span> <span data-ttu-id="7a2c3-130">Pro znázornění, trvat umožňují s příkladem `Querying.aspx` stránku jsme vytvořili v [dotazování na Data ovládacím prvkem SqlDataSource(VB)](querying-data-with-the-sqldatasource-control-cs.md) kurz a rozšířit tak, aby obsahovala odstranit možnosti.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-130">To illustrate this, let s take an example from the `Querying.aspx` page we created in the [Querying Data with the SqlDataSource Control](querying-data-with-the-sqldatasource-control-cs.md) tutorial and augment it to include delete capabilities.</span></span>

<span data-ttu-id="7a2c3-131">Začněte otevřením `InsertUpdateDelete.aspx` a `Querying.aspx` ze stránky `SqlDataSource` složky.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-131">Start by opening the `InsertUpdateDelete.aspx` and `Querying.aspx` pages from the `SqlDataSource` folder.</span></span> <span data-ttu-id="7a2c3-132">Z Návrháře na `Querying.aspx` stránce, vyberte v prvním příkladu SqlDataSource a ovládacího prvku GridView ( `ProductsDataSource` a `GridView1` ovládací prvky).</span><span class="sxs-lookup"><span data-stu-id="7a2c3-132">From the Designer on the `Querying.aspx` page, select the SqlDataSource and GridView from the first example (the `ProductsDataSource` and `GridView1` controls).</span></span> <span data-ttu-id="7a2c3-133">Po výběru dvou ovládacích prvků, přejděte na nabídku Úpravy a zvolte Kopírovat (nebo jenom stiskněte kombinaci kláves Ctrl + C).</span><span class="sxs-lookup"><span data-stu-id="7a2c3-133">After selecting the two controls, go to the Edit menu and choose Copy (or just hit Ctrl+C).</span></span> <span data-ttu-id="7a2c3-134">Dále přejděte na Návrhář `InsertUpdateDelete.aspx` a vložte do ovládacích prvků.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-134">Next, go to the Designer of `InsertUpdateDelete.aspx` and paste in the controls.</span></span> <span data-ttu-id="7a2c3-135">Po přesunutí dvou ovládacích prvků k `InsertUpdateDelete.aspx`, test si stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-135">After you have moved the two controls over to `InsertUpdateDelete.aspx`, test out the page in a browser.</span></span> <span data-ttu-id="7a2c3-136">Zobrazí se hodnoty `ProductID`, `ProductName`, a `UnitPrice` sloupce pro všechny záznamy v `Products` databázové tabulky.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-136">You should see the values of the `ProductID`, `ProductName`, and `UnitPrice` columns for all of the records in the `Products` database table.</span></span>


<span data-ttu-id="7a2c3-137">[![Všechny produkty jsou uvedené, seřazené podle ID produktu](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="7a2c3-137">[![All of the Products are Listed, Ordered by ProductID](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.png)</span></span>

<span data-ttu-id="7a2c3-138">**Obrázek 1**: všech produktů, které jsou uvedeny, seřazené podle `ProductID` ([kliknutím ji zobrazíte obrázek v plné velikosti](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="7a2c3-138">**Figure 1**: All of the Products are Listed, Ordered by `ProductID` ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image2.png))</span></span>


## <a name="adding-the-sqldatasource-sdeletecommandanddeleteparametersproperties"></a><span data-ttu-id="7a2c3-139">Přidání SqlDataSource s`DeleteCommand`a`DeleteParameters`vlastnosti</span><span class="sxs-lookup"><span data-stu-id="7a2c3-139">Adding the SqlDataSource s`DeleteCommand`and`DeleteParameters`Properties</span></span>

<span data-ttu-id="7a2c3-140">V tuto chvíli máme SqlDataSource, který jednoduše vrací všechny záznamy z `Products` tabulky a prvku GridView, který vykreslí tato data.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-140">At this point we have a SqlDataSource that simply returns all of the records from the `Products` table and a GridView that renders this data.</span></span> <span data-ttu-id="7a2c3-141">Naším cílem je rozšíření tohoto příkladu a umožní uživateli odstraňovat produkty prostřednictvím prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-141">Our goal is to extend this example to allow for the user to delete products via the GridView.</span></span> <span data-ttu-id="7a2c3-142">K tomu potřebujeme zadat hodnoty pro ovládacím prvkem SqlDataSource s `DeleteCommand` a `DeleteParameters` vlastnosti a pak proveďte konfiguraci GridView pro podporu odstranění.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-142">To accomplish this we need to specify values for the SqlDataSource control s `DeleteCommand` and `DeleteParameters` properties and then configure the GridView to support deleting.</span></span>

<span data-ttu-id="7a2c3-143">`DeleteCommand` a `DeleteParameters` vlastnosti lze zadat v několika způsoby:</span><span class="sxs-lookup"><span data-stu-id="7a2c3-143">The `DeleteCommand` and `DeleteParameters` properties can be specified in a number of ways:</span></span>

- <span data-ttu-id="7a2c3-144">Využijte deklarativní syntaxi</span><span class="sxs-lookup"><span data-stu-id="7a2c3-144">Through the declarative syntax</span></span>
- <span data-ttu-id="7a2c3-145">V okně Vlastnosti v Návrháři</span><span class="sxs-lookup"><span data-stu-id="7a2c3-145">From the Properties window in the Designer</span></span>
- <span data-ttu-id="7a2c3-146">Zadejte vlastní příkaz SQL nebo uloženou proceduru obrazovky v Průvodci nakonfigurujte zdroj dat</span><span class="sxs-lookup"><span data-stu-id="7a2c3-146">From the Specify a custom SQL statement or stored procedure screen in the Configure Data Source wizard</span></span>
- <span data-ttu-id="7a2c3-147">Přes tlačítko Upřesnit v zadat sloupce z tabulky obrazovka pro zobrazení v Průvodci nakonfigurujte zdroj dat, která bude ve skutečnosti automaticky generovat `DELETE` SQL příkazu a parametru kolekce používán `DeleteCommand` a `DeleteParameters` Vlastnosti</span><span class="sxs-lookup"><span data-stu-id="7a2c3-147">Via the Advanced button in the Specify columns from a table of view screen in the Configure Data Source wizard, which will actually automatically generate the `DELETE` SQL statement and parameter collection used in the `DeleteCommand` and `DeleteParameters` properties</span></span>

<span data-ttu-id="7a2c3-148">Prozkoumáme jak automaticky `DELETE` příkaz vytvořili v kroku 2.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-148">We'll examine how to automatically have the `DELETE` statement created in Step 2.</span></span> <span data-ttu-id="7a2c3-149">Prozatím umožní s použijte okno Vlastnosti v návrháři, i když Průvodce konfigurací zdroje dat nebo možnost deklarativní syntaxe by fungovat stejně dobře.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-149">For now, let s use the Properties window in the Designer, although the Configure Data Source wizard or declarative syntax option would work just as well.</span></span>

<span data-ttu-id="7a2c3-150">Z Návrháře v `InsertUpdateDelete.aspx`, klikněte na `ProductsDataSource` SqlDataSource a pak otevřete okno Vlastnosti (z nabídky Zobrazit zvolte okno Vlastnosti nebo jednoduše stiskněte tlačítko F4).</span><span class="sxs-lookup"><span data-stu-id="7a2c3-150">From the Designer in `InsertUpdateDelete.aspx`, click on the `ProductsDataSource` SqlDataSource and then bring up the Properties window (from the View menu, choose Properties window, or simply hit F4).</span></span> <span data-ttu-id="7a2c3-151">Vyberte vlastnost DeleteQuery, kterým se zobrazí sada symbol tří teček.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-151">Select the DeleteQuery property, which will bring up a set of ellipses.</span></span>


![V okně Vlastnosti vyberte vlastnost DeleteQuery](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image2.gif)

<span data-ttu-id="7a2c3-153">**Obrázek 2**: v okně Vlastnosti vyberte vlastnost DeleteQuery</span><span class="sxs-lookup"><span data-stu-id="7a2c3-153">**Figure 2**: Select the DeleteQuery Property from the Properties Window</span></span>


> [!NOTE]
> <span data-ttu-id="7a2c3-154">Kódu SqlDataSource nemá vlastnost DeleteQuery.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-154">The SqlDataSource doesn t have a DeleteQuery property.</span></span> <span data-ttu-id="7a2c3-155">Místo toho DeleteQuery je kombinací `DeleteCommand` a `DeleteParameters` vlastnosti a při zobrazení okna pomocí návrháře je pouze uvedené v okně Vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-155">Rather, DeleteQuery is a combination of the `DeleteCommand` and `DeleteParameters` properties and is only listed in the Properties window when viewing the window through the Designer.</span></span> <span data-ttu-id="7a2c3-156">Pokud chcete v okně Vlastnosti v zobrazení zdroje, najdete `DeleteCommand` vlastnost místo.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-156">If you are looking at the Properties window in the Source view, you'll find the `DeleteCommand` property instead.</span></span>


<span data-ttu-id="7a2c3-157">Klikněte na symbol tří teček v DeleteQuery vlastnost, která má vyvolat dialogové okno Editor příkazů a parametrů pole (viz obrázek 3).</span><span class="sxs-lookup"><span data-stu-id="7a2c3-157">Click the ellipses in the DeleteQuery property to bring up the Command and Parameter Editor dialog box (see Figure 3).</span></span> <span data-ttu-id="7a2c3-158">Z tohoto dialogového okna můžete zadat `DELETE` SQL příkaz a zadejte parametry.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-158">From this dialog box you can specify the `DELETE` SQL statement and specify the parameters.</span></span> <span data-ttu-id="7a2c3-159">Zadejte následující dotaz do `DELETE` TextBox – příkaz (buď ručně nebo pomocí Tvůrce dotazů, pokud dáváte přednost):</span><span class="sxs-lookup"><span data-stu-id="7a2c3-159">Enter the following query into the `DELETE` command textbox (either manually or using the Query Builder, if you prefer):</span></span>

[!code-sql[Main](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/samples/sample1.sql)]

<span data-ttu-id="7a2c3-160">Dále klikněte na tlačítko Aktualizovat parametry pro přidání `@ProductID` parametru do seznamu níže uvedené parametry.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-160">Next, click the Refresh Parameters button to add the `@ProductID` parameter to the list of parameters below.</span></span>


<span data-ttu-id="7a2c3-161">[![V okně Vlastnosti vyberte vlastnost DeleteQuery](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="7a2c3-161">[![Select the DeleteQuery Property from the Properties Window](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.png)</span></span>

<span data-ttu-id="7a2c3-162">**Obrázek 3**: v okně Vlastnosti vyberte vlastnost DeleteQuery ([kliknutím ji zobrazíte obrázek v plné velikosti](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="7a2c3-162">**Figure 3**: Select the DeleteQuery Property from the Properties Window ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.png))</span></span>


<span data-ttu-id="7a2c3-163">Proveďte *není* zadejte hodnotu pro tento parametr (Ponechte její parametr zdroj v žádné).</span><span class="sxs-lookup"><span data-stu-id="7a2c3-163">Do *not* provide a value for this parameter (leave its Parameter source at None ).</span></span> <span data-ttu-id="7a2c3-164">Po odstranění podpory přidáme do prvku GridView, prvku GridView bude tuto hodnotu Automaticky doplnit parametrů, pomocí hodnoty jeho `DataKeys` kolekce pro řádek došlo ke kliknutí na tlačítko jehož odstranit.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-164">Once we add deleting support to the GridView, the GridView will automatically supply this parameter value, using the value of its `DataKeys` collection for the row whose Delete button was clicked.</span></span>

> [!NOTE]
> <span data-ttu-id="7a2c3-165">Název parametru použitý v `DELETE` dotazu *musí* být stejný jako název `DataKeyNames` hodnotu v prvku GridView, DetailsView nebo FormView.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-165">The parameter name used in the `DELETE` query *must* be the same as the name of the `DataKeyNames` value in the GridView, DetailsView, or FormView.</span></span> <span data-ttu-id="7a2c3-166">To znamená, že parametr v `DELETE` příkazu je záměrně s názvem `@ProductID` (místo, například `@ID`), protože je název pro sloupec primárního klíče v tabulce produkty (a tedy hodnota DataKeyNames v prvku GridView) `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-166">That is, the parameter in the `DELETE` statement is purposefully named `@ProductID` (instead of, say, `@ID`), because the primary key column name in the Products table (and therefore the DataKeyNames value in the GridView) is `ProductID`.</span></span>


<span data-ttu-id="7a2c3-167">Pokud název parametru a `DataKeyNames` hodnota kódu t shodu, prvku GridView. nelze přiřadit automaticky parametr hodnotu z `DataKeys` kolekce.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-167">If the parameter name and `DataKeyNames` value doesn t match, the GridView cannot automatically assign the parameter the value from the `DataKeys` collection.</span></span>

<span data-ttu-id="7a2c3-168">Jakmile zadáte informace týkající se odstranění do dialogového okna Editor příkazů a parametrů klikněte na tlačítko OK a přejděte do zobrazení zdroje pro zjištění výsledného deklarativní:</span><span class="sxs-lookup"><span data-stu-id="7a2c3-168">After entering the delete-related information into the Command and Parameter Editor dialog box click OK and go to the Source view to examine the resulting declarative markup:</span></span>

[!code-aspx[Main](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/samples/sample2.aspx)]

<span data-ttu-id="7a2c3-169">Poznámka: přidání `DeleteCommand` vlastnost také `<DeleteParameters>` oddílu a objekt parametr s názvem `productID`.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-169">Note the addition of the `DeleteCommand` property as well as the `<DeleteParameters>` section and the Parameter object named `productID`.</span></span>

## <a name="configuring-the-gridview-for-deleting"></a><span data-ttu-id="7a2c3-170">Konfigurace ovládacího prvku GridView pro odstranění</span><span class="sxs-lookup"><span data-stu-id="7a2c3-170">Configuring the GridView for Deleting</span></span>

<span data-ttu-id="7a2c3-171">S `DeleteCommand` přidána vlastnost ovládacího prvku GridView s inteligentním teď obsahuje možnost Povolit odstranění.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-171">With the `DeleteCommand` property added, the GridView s smart tag now contains the Enable Deleting option.</span></span> <span data-ttu-id="7a2c3-172">Pokračujte a zaškrtněte toto políčko.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-172">Go ahead and check this checkbox.</span></span> <span data-ttu-id="7a2c3-173">Jak je popsáno v [přehled o vložení, aktualizaci a odstraňování](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), způsobí to, že prvku GridView. Chcete-li přidat CommandField s jeho `ShowDeleteButton` nastavenou na `true`.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-173">As discussed in [An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), this causes the GridView to add a CommandField with its `ShowDeleteButton` property set to `true`.</span></span> <span data-ttu-id="7a2c3-174">Obrázek 4 ukazuje, když je uživatel na stránce prostřednictvím prohlížeče je součástí tlačítko pro odstranění.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-174">As Figure 4 shows, when the page is visited through a browser a Delete button is included.</span></span> <span data-ttu-id="7a2c3-175">Na této stránce si otestujte tak, že odstraníte některé produkty.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-175">Test this page out by deleting some products.</span></span>


<span data-ttu-id="7a2c3-176">[![Každý řádek prvku GridView teď obsahuje tlačítko pro odstranění](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="7a2c3-176">[![Each GridView Row Now Includes a Delete Button](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image5.png)</span></span>

<span data-ttu-id="7a2c3-177">**Obrázek 4**: každý řádek prvku GridView teď obsahuje tlačítko Delete ([kliknutím ji zobrazíte obrázek v plné velikosti](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="7a2c3-177">**Figure 4**: Each GridView Row Now Includes a Delete Button ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.png))</span></span>


<span data-ttu-id="7a2c3-178">Po kliknutí na tlačítko pro odstranění, dojde k zpětné volání, přiřadí prvku GridView `ProductID` parametr hodnotu z `DataKeys` hodnota kolekce pro řádek, jehož tlačítko pro odstranění došlo ke kliknutí na a vyvolá SqlDataSource s `Delete()` metoda.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-178">Upon clicking a Delete button, a postback occurs, the GridView assigns the `ProductID` parameter the value of the `DataKeys` collection value for the row whose Delete button was clicked, and invokes the SqlDataSource s `Delete()` method.</span></span> <span data-ttu-id="7a2c3-179">Ovládacím prvkem SqlDataSource pak připojí k databázi a spustí `DELETE` příkazu.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-179">The SqlDataSource control then connects to the database and executes the `DELETE` statement.</span></span> <span data-ttu-id="7a2c3-180">Prvku GridView. potom znovu připojí k ovládacím prvkem SqlDataSource návrat a zobrazení aktuální sadu produktů (který už obsahuje záznam odstranit jenom).</span><span class="sxs-lookup"><span data-stu-id="7a2c3-180">The GridView then rebinds to the SqlDataSource, getting back and displaying the current set of products (which no longer includes the just-deleted record).</span></span>

> [!NOTE]
> <span data-ttu-id="7a2c3-181">Od prvku GridView používá jeho `DataKeys` kolekce k naplnění parametrů SqlDataSource ho s důležité, který GridView s `DataKeyNames` vlastnost nastavit na sloupce, které tvoří primární klíč a že SqlDataSource s `SelectCommand` vrátí Tyto sloupce.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-181">Since the GridView uses its `DataKeys` collection to populate the SqlDataSource parameters, it s vital that the GridView s `DataKeyNames` property be set to the column(s) that constitute the primary key and that the SqlDataSource s `SelectCommand` returns these columns.</span></span> <span data-ttu-id="7a2c3-182">Kromě toho je důležité, že parametr name ve třídě SqlDataSource s `DeleteCommand` je nastavena na `@ProductID`.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-182">Moreover, it s important that the parameter name in the SqlDataSource s `DeleteCommand` is set to `@ProductID`.</span></span> <span data-ttu-id="7a2c3-183">Pokud `DataKeyNames` vlastnost není nastavená nebo není parametr pojmenovaný `@ProductsID`, kliknutím na tlačítko Odstranit budou vyvolávají zpětné odeslání, ale získaných oproti očekávaným t skutečně odstranit kterýkoli záznam.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-183">If the `DataKeyNames` property is not set or the parameter is not named `@ProductsID`, clicking the Delete button will cause a postback, but won t actually delete any record.</span></span>


<span data-ttu-id="7a2c3-184">Obrázek 5 graficky znázorňuje tuto interakci.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-184">Figure 5 depicts this interaction graphically.</span></span> <span data-ttu-id="7a2c3-185">Vraťte se do [zkoumání události spojené s vložení, aktualizace a odstranění](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) kurz podrobnější informace o sled událostí spojených s vložením, aktualizace a odstranění dat webový ovládací prvek.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-185">Refer back to the [Examining the Events Associated with Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial for a more detailed discussion on the chain of events associated with inserting, updating, and deleting from a data Web control.</span></span>


![Kliknutím na tlačítko Odstranit v prvku GridView vyvolá metodu SqlDataSource s Delete()](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image5.gif)

<span data-ttu-id="7a2c3-187">**Obrázek 5**: Kliknutím na tlačítko Odstranit v prvku GridView vyvolá SqlDataSource s `Delete()` – metoda</span><span class="sxs-lookup"><span data-stu-id="7a2c3-187">**Figure 5**: Clicking the Delete Button in the GridView Invokes the SqlDataSource s `Delete()` Method</span></span>


## <a name="step-2-automatically-generating-theinsertupdate-anddeletestatements"></a><span data-ttu-id="7a2c3-188">Krok 2: Automatické generování`INSERT`,`UPDATE`, a`DELETE`příkazy</span><span class="sxs-lookup"><span data-stu-id="7a2c3-188">Step 2: Automatically Generating the`INSERT`,`UPDATE`, and`DELETE`Statements</span></span>

<span data-ttu-id="7a2c3-189">Krok 1 zkontrolují `INSERT`, `UPDATE`, a `DELETE` příkazů jazyka SQL je možné zadat pomocí okna vlastnosti nebo ovládací prvek s deklarativní syntaxe.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-189">As Step 1 examined, `INSERT`, `UPDATE`, and `DELETE` SQL statements can be specified through the Properties window or the control s declarative syntax.</span></span> <span data-ttu-id="7a2c3-190">Tento přístup vyžaduje, že jsme ručně vypsat příkazy SQL ručně, což může být monotónní a náchylné k chybě.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-190">However, this approach requires that we manually write out the SQL statements by hand, which can be monotonous and error-prone.</span></span> <span data-ttu-id="7a2c3-191">Naštěstí Průvodce konfigurace zdroje dat poskytuje možnost mít `INSERT`, `UPDATE`, a `DELETE` příkazy automaticky generovány při použití zadat sloupce z tabulky obrazovka pro zobrazení.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-191">Fortunately, the Configure Data Source wizard provides an option to have the `INSERT`, `UPDATE`, and `DELETE` statements automatically generated when using the Specify columns from a table of view screen.</span></span>

<span data-ttu-id="7a2c3-192">Umožní prozkoumat tuto možnost automatické generování s.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-192">Let s explore this automatic generation option.</span></span> <span data-ttu-id="7a2c3-193">Přidat do návrháře v DetailsView `InsertUpdateDelete.aspx` a nastavte jeho `ID` vlastnost `ManageProducts`.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-193">Add a DetailsView to the Designer in `InsertUpdateDelete.aspx` and set its `ID` property to `ManageProducts`.</span></span> <span data-ttu-id="7a2c3-194">Potom z inteligentních značek s prvku DetailsView. Vyberte pro vytvoření nového zdroje dat a vytvoření SqlDataSource s názvem `ManageProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-194">Next, from the DetailsView s smart tag, choose to create a new data source and create a SqlDataSource named `ManageProductsDataSource`.</span></span>


<span data-ttu-id="7a2c3-195">[![Vytvořit nový SqlDataSource s názvem ManageProductsDataSource](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="7a2c3-195">[![Create a New SqlDataSource Named ManageProductsDataSource](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.png)</span></span>

<span data-ttu-id="7a2c3-196">**Obrázek 6**: Vytvořte nový SqlDataSource s názvem `ManageProductsDataSource` ([kliknutím ji zobrazíte obrázek v plné velikosti](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="7a2c3-196">**Figure 6**: Create a New SqlDataSource Named `ManageProductsDataSource` ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image8.png))</span></span>


<span data-ttu-id="7a2c3-197">V Průvodci nakonfigurujte zdroj dat rozhodnout použít `NORTHWINDConnectionString` připojovací řetězec a klikněte na tlačítko Další.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-197">From the Configure Data Source wizard, opt to use the `NORTHWINDConnectionString` connection string and click Next.</span></span> <span data-ttu-id="7a2c3-198">Z konfigurace obrazovky příkaz Select, ponechte zadat sloupce z tabulky nebo zobrazení přepínač vybraný a vyberte si `Products` tabulku z rozevíracího seznamu.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-198">From the Configure the Select Statement screen, leave the Specify columns from a table or view radio button selected and pick the `Products` table from the drop-down list.</span></span> <span data-ttu-id="7a2c3-199">Vyberte `ProductID`, `ProductName`, `UnitPrice`, a `Discontinued` sloupce ze seznamu zaškrtávací políčko.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-199">Select the `ProductID`, `ProductName`, `UnitPrice`, and `Discontinued` columns from the checkbox list.</span></span>


<span data-ttu-id="7a2c3-200">[![Pomocí tabulky produktů, vrátí ProductID, ProductName, UnitPrice a již nepoužívané sloupce](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="7a2c3-200">[![Using the Products Table, Return the ProductID, ProductName, UnitPrice, and Discontinued Columns](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.png)</span></span>

<span data-ttu-id="7a2c3-201">**Obrázek 7**: použití `Products` tabulky, vraťte se `ProductID`, `ProductName`, `UnitPrice`, a `Discontinued` sloupce ([kliknutím ji zobrazíte obrázek v plné velikosti](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="7a2c3-201">**Figure 7**: Using the `Products` Table, Return the `ProductID`, `ProductName`, `UnitPrice`, and `Discontinued` Columns ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image10.png))</span></span>


<span data-ttu-id="7a2c3-202">Automaticky generovat `INSERT`, `UPDATE`, a `DELETE` příkazy na základě vybrané tabulky a sloupce, klikněte na tlačítko Upřesnit a zkontrolujte generovat `INSERT`, `UPDATE`, a `DELETE` příkazy zaškrtávací políčko.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-202">To automatically generate `INSERT`, `UPDATE`, and `DELETE` statements based on the selected table and columns, click the Advanced button and check the Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox.</span></span>


![Zkontrolujte příkazy Generovat INSERT, UPDATE a DELETE zaškrtávací políčko](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image8.gif)

<span data-ttu-id="7a2c3-204">**Obrázek 8**: Zkontrolujte, generování `INSERT`, `UPDATE`, a `DELETE` příkazy zaškrtávací políčko</span><span class="sxs-lookup"><span data-stu-id="7a2c3-204">**Figure 8**: Check the Generate `INSERT`, `UPDATE`, and `DELETE` statements Checkbox</span></span>


<span data-ttu-id="7a2c3-205">Generovat `INSERT`, `UPDATE`, a `DELETE` příkazy zaškrtávací políčko bude pouze kontrolovatelné Pokud primární klíč má vybranou tabulku a sloupec primárního klíče (nebo sloupce) jsou zahrnuty v seznamu vrácené sloupce.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-205">The Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox will only be checkable if the table selected has a primary key and the primary key column (or columns) are included in the list of returned columns.</span></span> <span data-ttu-id="7a2c3-206">Zaškrtávací políčko optimistického řízení souběžnosti používá stane volitelných jednou generovat `INSERT`, `UPDATE`, a `DELETE` po kontrole příkazy zaškrtávacího políčka se rozšířit `WHERE` ustanovení výsledný `UPDATE` a `DELETE` příkazy k poskytování optimistického řízení souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-206">The Use optimistic concurrency checkbox, which becomes selectable once the Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox has been checked, will augment the `WHERE` clauses in the resulting `UPDATE` and `DELETE` statements to provide optimistic concurrency control.</span></span> <span data-ttu-id="7a2c3-207">Prozatím ponechejte zaškrtnuté políčko; Toto zaškrtávací políčko prozkoumáme optimistického řízení souběžnosti ovládacím prvkem SqlDataSource(VB) v dalším kurzu.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-207">For now, leave this checkbox unchecked; we'll examine optimistic concurrency with the SqlDataSource control in the next tutorial.</span></span>

<span data-ttu-id="7a2c3-208">Po kontrole generovat `INSERT`, `UPDATE`, a `DELETE` příkazy zaškrtávací políčko, klikněte na tlačítko OK vraťte na obrazovku Konfigurace příkazu Select a pak klikněte na tlačítko Další a pak dokončete, dokončete průvodce pro zdroj dat nakonfigurovat.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-208">After checking the Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox, click OK to return to the Configure Select Statement screen, then click Next, and then Finish, to complete the Configure Data Source wizard.</span></span> <span data-ttu-id="7a2c3-209">Po dokončení průvodce bude Visual Studio přidá BoundFields do ovládacího prvku DetailsView pro `ProductID`, `ProductName`, a `UnitPrice` sloupce a třídě CheckBoxField pro `Discontinued` sloupce.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-209">Upon completing the wizard, Visual Studio will add BoundFields to the DetailsView for the `ProductID`, `ProductName`, and `UnitPrice` columns and a CheckBoxField for the `Discontinued` column.</span></span> <span data-ttu-id="7a2c3-210">Z inteligentních značek prvek DetailsView s zaškrtněte možnost Povolit stránkování tak, aby uživatel na této stránce můžete krokovat produktů.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-210">From the DetailsView s smart tag, check the Enable Paging option so that the user visiting this page can step through the products.</span></span> <span data-ttu-id="7a2c3-211">Také smažte prvek DetailsView s `Width` a `Height` vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-211">Also clear out the DetailsView s `Width` and `Height` properties.</span></span>

<span data-ttu-id="7a2c3-212">Všimněte si, že se inteligentní značky možnosti Povolit vložení, povolit úpravy a Povolit odstranění, které jsou k dispozici.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-212">Notice that the smart tag has the Enable Inserting, Enable Editing, and Enable Deleting options available.</span></span> <span data-ttu-id="7a2c3-213">Důvodem je, že ve třídě SqlDataSource obsahuje hodnoty pro jeho `InsertCommand`, `UpdateCommand`, a `DeleteCommand`, jak ukazuje následující deklarativní syntaxe:</span><span class="sxs-lookup"><span data-stu-id="7a2c3-213">This is because the SqlDataSource contains values for its `InsertCommand`, `UpdateCommand`, and `DeleteCommand`, as the following declarative syntax shows:</span></span>

[!code-aspx[Main](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/samples/sample3.aspx)]

<span data-ttu-id="7a2c3-214">Všimněte si, jak ovládacím prvkem SqlDataSource zaznamenala hodnoty automaticky nastaví pro jeho `InsertCommand`, `UpdateCommand`, a `DeleteCommand` vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-214">Note how the SqlDataSource control has had values automatically set for its `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties.</span></span> <span data-ttu-id="7a2c3-215">Sadu sloupců, které odkazuje `InsertCommand` a `UpdateCommand` vlastnosti jsou podle toho, které v `SELECT` příkaz.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-215">The set of columns referenced in the `InsertCommand` and `UpdateCommand` properties are based on those in the `SELECT` statement.</span></span> <span data-ttu-id="7a2c3-216">To znamená místo generování *každý* produkty sloupec v `InsertCommand` a `UpdateCommand`, existují pouze sloupce, podle `SelectCommand` (méně `ProductID`, což je vynechána, protože ho s [ `IDENTITY` sloupec](http://www.sqlteam.com/item.asp?ItemID=102), jehož hodnota nemůže být změněna při úpravách a které se automaticky přiřazují při vkládání).</span><span class="sxs-lookup"><span data-stu-id="7a2c3-216">That is, rather than having *every* Products column in the `InsertCommand` and `UpdateCommand`, there are only those columns specified in the `SelectCommand` (less `ProductID`, which is omitted because it s an [`IDENTITY` column](http://www.sqlteam.com/item.asp?ItemID=102), whose value cannot be changed when edited and which is automatically assigned when inserting).</span></span> <span data-ttu-id="7a2c3-217">Kromě toho pro každý parametr `InsertCommand`, `UpdateCommand`, a `DeleteCommand` vlastnosti jsou odpovídajícím parametrům in v `InsertParameters`, `UpdateParameters`, a `DeleteParameters` kolekce.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-217">Moreover, for each parameter in the `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties there are corresponding parameters in the `InsertParameters`, `UpdateParameters`, and `DeleteParameters` collections.</span></span>

<span data-ttu-id="7a2c3-218">Úpravy funkce DetailsView s dat zapnout, zkontrolujte Povolit vložení, povolit úpravy a Povolit odstranění možnosti v její inteligentních značek.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-218">To turn on the DetailsView s data modification features, check the Enable Inserting, Enable Editing, and Enable Deleting options in its smart tag.</span></span> <span data-ttu-id="7a2c3-219">Tento postup přidá CommandField s jeho `ShowInsertButton`, `ShowEditButton`, a `ShowDeleteButton` nastaveny `true`.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-219">This adds a CommandField with its `ShowInsertButton`, `ShowEditButton`, and `ShowDeleteButton` properties set to `true`.</span></span>

<span data-ttu-id="7a2c3-220">Na stránce v prohlížeči a Všimněte si, úprava, odstranění a nová tlačítka, které jsou zahrnuté v ovládacím prvku DetailsView.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-220">Visit the page in a browser and note the Edit, Delete, and New buttons included in the DetailsView.</span></span> <span data-ttu-id="7a2c3-221">Do režimu úprav, který zobrazuje každou vlastnost BoundField kliknutím na tlačítko pro úpravy se změní na ovládacím prvku DetailsView jehož `ReadOnly` je nastavena na `false` (výchozí) jako textové pole a třídě CheckBoxField jako zaškrtávací políčko.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-221">Clicking the Edit button turns the DetailsView into edit mode, which displays each BoundField whose `ReadOnly` property is set to `false` (the default) as a TextBox, and the CheckBoxField as a checkbox.</span></span>


<span data-ttu-id="7a2c3-222">[![Prvek DetailsView s výchozí editační rozhraní](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="7a2c3-222">[![The DetailsView s Default Editing Interface](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image11.png)</span></span>

<span data-ttu-id="7a2c3-223">**Obrázek 9**: The DetailsView s výchozí rozhraní pro úpravy ([kliknutím ji zobrazíte obrázek v plné velikosti](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="7a2c3-223">**Figure 9**: The DetailsView s Default Editing Interface ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image12.png))</span></span>


<span data-ttu-id="7a2c3-224">Podobně můžete odstranit aktuálně vybraný produkt nebo přidání nového produktu do systému.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-224">Similarly, you can delete the currently selected product or add a new product to the system.</span></span> <span data-ttu-id="7a2c3-225">Protože `InsertCommand` příkaz funguje jenom s `ProductName`, `UnitPrice`, a `Discontinued` sloupce, další sloupce, které mají buď `NULL` nebo výchozí hodnoty přiřazené v databázi při vložení.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-225">Since the `InsertCommand` statement only works with the `ProductName`, `UnitPrice`, and `Discontinued` columns, the other columns have either `NULL` or their default value assigned by the database upon insert.</span></span> <span data-ttu-id="7a2c3-226">Stejně jako ovládacím prvkem ObjectDataSource, pokud `InsertCommand` neobsahuje žádné databázové tabulky, sloupce, které nejsou t povolit `NULL` s a Nepřipojovat t mají výchozí hodnotu, dojde k chybě SQL při pokusu provést `INSERT` příkazu.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-226">Just like with the ObjectDataSource, if the `InsertCommand` is missing any database table columns that don t allow `NULL` s and don t have a default value, a SQL error will occur when attempting to execute the `INSERT` statement.</span></span>

> [!NOTE]
> <span data-ttu-id="7a2c3-227">Prvek DetailsView s vkládání a úpravy rozhraní nedostatku jakýkoli druh ověření nebo vlastního nastavení.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-227">The DetailsView s inserting and editing interfaces lack any sort of customization or validation.</span></span> <span data-ttu-id="7a2c3-228">Přidání validačních ovládacích prvků nebo přizpůsobit rozhraní, musíte převést BoundFields vlastností TemplateField.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-228">To add validation controls or to customize the interfaces, you need to convert the BoundFields to TemplateFields.</span></span> <span data-ttu-id="7a2c3-229">Odkazovat [přidání validačních ovládacích prvků pro úpravy a vložení rozhraní](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) a [přizpůsobení rozhraní pro úpravu dat](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) kurzy pro další informace.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-229">Refer to the [Adding Validation Controls to the Editing and Inserting Interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) and [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorials for more information.</span></span>


<span data-ttu-id="7a2c3-230">Také vzít v úvahu, že pro aktualizaci a odstraňování, používá ovládacím prvku DetailsView. aktuální produkt s `DataKey` hodnotu, která je k dispozici pouze pokud `DataKeyNames` vlastnost je nakonfigurovaná.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-230">Also, keep in mind that for updating and deleting, the DetailsView uses the current product s `DataKey` value, which is only present if the `DataKeyNames` property is configured.</span></span> <span data-ttu-id="7a2c3-231">Pokud se zdá, že oprávnění úpravy nebo odstranění nemají žádný vliv, ujistěte se, že `DataKeyNames` je nastavena.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-231">If editing or deleting appears to have no effect, ensure that the `DataKeyNames` property is set.</span></span>

## <a name="limitations-of-automatically-generating-sql-statements"></a><span data-ttu-id="7a2c3-232">Omezení pro automatické generování SQL příkazy</span><span class="sxs-lookup"><span data-stu-id="7a2c3-232">Limitations of Automatically Generating SQL Statements</span></span>

<span data-ttu-id="7a2c3-233">Od generovat `INSERT`, `UPDATE`, a `DELETE` příkazy možnost je dostupná jenom při výběru sloupců z tabulky, pro složitější dotazy, které bude nutné napsat vlastní `INSERT`, `UPDATE`, a `DELETE` příkazy, jak jsme to udělali v kroku 1.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-233">Since the Generate `INSERT`, `UPDATE`, and `DELETE` statements option is only available when picking columns from a table, for more complex queries you will have to write your own `INSERT`, `UPDATE`, and `DELETE` statements like we did in Step 1.</span></span> <span data-ttu-id="7a2c3-234">Běžně, SQL `SELECT` příkazy používají `JOIN` s vrací do stavu zobrazení dat z jednoho nebo více vyhledávací tabulky pro účely (např. znovu připojuje zpět `Categories` tabulky s `CategoryName` pole při zobrazení informací o produktu).</span><span class="sxs-lookup"><span data-stu-id="7a2c3-234">Commonly, SQL `SELECT` statements use `JOIN` s to bring back data from one or more lookup tables for display purposes (such as bringing back the `Categories` table s `CategoryName` field when displaying product information).</span></span> <span data-ttu-id="7a2c3-235">Ve stejnou dobu může být chceme aby uživatel mohl upravit, aktualizovat nebo vložit data do tabulky core (`Products`, v tomto případě).</span><span class="sxs-lookup"><span data-stu-id="7a2c3-235">At the same time, we might want to allow the user to edit, update, or insert data into the core table (`Products`, in this case).</span></span>

<span data-ttu-id="7a2c3-236">Zatímco `INSERT`, `UPDATE`, a `DELETE` příkazy lze zadat ručně, vezměte v úvahu následující tip ušetří čas.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-236">While the `INSERT`, `UPDATE`, and `DELETE` statements can be entered manually, consider the following time-saving tip.</span></span> <span data-ttu-id="7a2c3-237">Počáteční nastavení ve třídě SqlDataSource tak, aby načte zpět data pouze z `Products` tabulky.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-237">Initially setup the SqlDataSource so that it pulls back data just from the `Products` table.</span></span> <span data-ttu-id="7a2c3-238">Použít průvodce Konfigurovat zdroj dat s zadat sloupce z tabulky nebo zobrazení obrazovky, takže můžete automaticky vygenerovat `INSERT`, `UPDATE`, a `DELETE` příkazy.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-238">Use the Configure Data Source wizard s Specify columns from a table or view screen so that you can automatically generate the `INSERT`, `UPDATE`, and `DELETE` statements.</span></span> <span data-ttu-id="7a2c3-239">Po dokončení Průvodce nakonfigurovat SelectQuery z okna Vlastnosti rozhodnete (nebo případně přejděte zpět do Průvodce konfigurací zdroje dat, ale použijte zadejte vlastní příkaz SQL nebo uloženou proceduru možnost).</span><span class="sxs-lookup"><span data-stu-id="7a2c3-239">Then, after completing the wizard, choose to configure the SelectQuery from the Properties window (or, alternatively, go back to the Configure Data Source wizard, but use the Specify a custom SQL statement or stored procedure option).</span></span> <span data-ttu-id="7a2c3-240">Pak aktualizujte `SELECT` příkazu zahrnout `JOIN` syntaxe.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-240">Then update the `SELECT` statement to include the `JOIN` syntax.</span></span> <span data-ttu-id="7a2c3-241">Tento postup nabízí výhody ušetří čas automaticky generované příkazů SQL a umožňuje více přizpůsobit `SELECT` příkazu.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-241">This technique offers the time-saving benefits of the automatically generated SQL statements and allows for a more customized `SELECT` statement.</span></span>

<span data-ttu-id="7a2c3-242">Další omezení automatického generování `INSERT`, `UPDATE`, a `DELETE` příkazech je to, že sloupce v `INSERT` a `UPDATE` příkazy jsou založeny na sloupcích vrácené `SELECT` příkazu.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-242">Another limitation of automatically generating the `INSERT`, `UPDATE`, and `DELETE` statements is that the columns in the `INSERT` and `UPDATE` statements are based on the columns returned by the `SELECT` statement.</span></span> <span data-ttu-id="7a2c3-243">Budeme muset aktualizovat nebo vložit více nebo méně pole, ale.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-243">We may need to update or insert more or fewer fields, however.</span></span> <span data-ttu-id="7a2c3-244">Například v příkladu v kroku 2, možná Chceme mít `UnitPrice` Vlastnost BoundField být jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-244">For example, in the example from Step 2, maybe we want to have the `UnitPrice` BoundField be read-only.</span></span> <span data-ttu-id="7a2c3-245">V takovém případě ji joinkind nesmí obsahovat více t `UpdateCommand`.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-245">In that case, it shouldn t appear in the `UpdateCommand`.</span></span> <span data-ttu-id="7a2c3-246">Nebo může být vhodné nastavit hodnotu pole tabulky, které nejsou uvedené v prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-246">Or we may want to set the value of a table field that does not appear in the GridView.</span></span> <span data-ttu-id="7a2c3-247">Například při přidání nového záznamu může chceme `QuantityPerUnit` nastavenou TODO.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-247">For example, when adding a new record we may want the `QuantityPerUnit` value set to TODO .</span></span>

<span data-ttu-id="7a2c3-248">Pokud tyto úpravy jsou požadovány, musíte je vytvořit ručně, buď v okně Vlastnosti, zadejte vlastní příkaz SQL nebo uloženou proceduru možnost v průvodci nebo pomocí deklarativní syntaxe.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-248">If such customizations are required, you need to make them manually, either through the Properties window, the Specify a custom SQL statement or stored procedure option in the wizard, or via the declarative syntax.</span></span>

> [!NOTE]
> <span data-ttu-id="7a2c3-249">Při přidávání parametrů, které nemají odpovídající pole v datech ovládací prvek webu, mějte na paměti, s jehož hodnoty těchto parametrů musí být přiřazeny hodnoty způsobem.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-249">When adding parameters that do not have corresponding fields in the data Web control, keep in mind that these parameters values will need to be assigned values in some manner.</span></span> <span data-ttu-id="7a2c3-250">Tyto hodnoty mohou být: pevně zakódované přímo `InsertCommand` nebo `UpdateCommand`; mohou pocházet z některé předdefinované zdroje (řetězce dotazu, stav relace, webové ovládací prvky na stránce a tak dále); nebo můžete přiřadit prostřednictvím kódu programu, jako jsme viděli v předchozím kurzu.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-250">These values can be: hard-coded directly in the `InsertCommand` or `UpdateCommand`; can come from some pre-defined source (the querystring, session state, Web controls on the page, and so on); or can be assigned programmatically, as we saw in the preceding tutorial.</span></span>


## <a name="summary"></a><span data-ttu-id="7a2c3-251">Souhrn</span><span class="sxs-lookup"><span data-stu-id="7a2c3-251">Summary</span></span>

<span data-ttu-id="7a2c3-252">V pořadí dat webové ovládací prvky využívat jejich vkládání předdefinovaných, úpravy a odstranění funkce musí ovládací prvek zdroje dat, které jsou vázány na nabízí tyto funkce.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-252">In order for the data Web controls to utilize their built-in inserting, editing, and deleting capabilities, the data source control they are bound to must offer such functionality.</span></span> <span data-ttu-id="7a2c3-253">Pro ovládacím prvkem SqlDataSource, to znamená, že `INSERT`, `UPDATE`, a `DELETE` příkazy SQL, musíte být přiřazeni k `InsertCommand`, `UpdateCommand`, a `DeleteCommand` vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-253">For the SqlDataSource, this means that `INSERT`, `UPDATE`, and `DELETE` SQL statements must be assigned to the `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties.</span></span> <span data-ttu-id="7a2c3-254">Tyto vlastnosti a odpovídající parametry kolekce, můžete přidat ručně nebo prostřednictvím Průvodce konfigurace zdroje dat, vygenerovaný automaticky.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-254">These properties, and the corresponding parameters collections, can be added manually or generated automatically through the Configure Data Source wizard.</span></span> <span data-ttu-id="7a2c3-255">V tomto kurzu jsme se zaměřili na obě tyto metody.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-255">In this tutorial we examined both techniques.</span></span>

<span data-ttu-id="7a2c3-256">Jsme se zaměřili na pomocí optimistického řízení souběžnosti ovládacím prvkem ObjectDataSource v [implementace optimistického řízení souběžnosti](../editing-inserting-and-deleting-data/implementing-optimistic-concurrency-cs.md) kurzu.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-256">We examined using optimistic concurrency with the ObjectDataSource in the [Implementing Optimistic Concurrency](../editing-inserting-and-deleting-data/implementing-optimistic-concurrency-cs.md) tutorial.</span></span> <span data-ttu-id="7a2c3-257">Ovládacím prvkem SqlDataSource také poskytuje podporu optimistického řízení souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-257">The SqlDataSource control also provides optimistic concurrency support.</span></span> <span data-ttu-id="7a2c3-258">Jak je uvedeno v kroku 2, při automatickém generování `INSERT`, `UPDATE`, a `DELETE` příkazy, nabízí průvodce použijte možnost optimistického řízení souběžnosti.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-258">As noted in Step 2, when automatically generating the `INSERT`, `UPDATE`, and `DELETE` statements, the wizard offers a Use optimistic concurrency option.</span></span> <span data-ttu-id="7a2c3-259">Jak uvidíme v dalším kurzu, pomocí optimistického řízení souběžnosti ovládacím prvkem SqlDataSource upraví `WHERE` ustanovení `UPDATE` a `DELETE` příkazy k zajištění, že některé hodnoty ostatních sloupců t změněna od poslední data na stránce zobrazí.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-259">As we'll see in the next tutorial, using optimistic concurrency with the SqlDataSource modifies the `WHERE` clauses in the `UPDATE` and `DELETE` statements to ensure that the values for the other columns haven t changed since the data was last displayed on the page.</span></span>

<span data-ttu-id="7a2c3-260">Všechno nejlepší programování!</span><span class="sxs-lookup"><span data-stu-id="7a2c3-260">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="7a2c3-261">O autorovi</span><span class="sxs-lookup"><span data-stu-id="7a2c3-261">About the Author</span></span>

<span data-ttu-id="7a2c3-262">[Scott Meisnerová](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor sedm ASP/ASP.NET knih a Zakladatel [4GuysFromRolla.com](http://www.4guysfromrolla.com), má práce s Microsoft webových technologiích od roku 1998.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-262">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="7a2c3-263">Scott funguje jako nezávislý konzultant, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="7a2c3-263">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="7a2c3-264">Jeho nejnovější knihy [ *Edice nakladatelství Sams naučit sami ASP.NET 2.0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="7a2c3-264">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="7a2c3-265">Může být dosáhl v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="7a2c3-265">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="7a2c3-266">nebo prostřednictvím jeho blogu, který lze nalézt v [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="7a2c3-266">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="7a2c3-267">[Předchozí](using-parameterized-queries-with-the-sqldatasource-cs.md)
> [další](implementing-optimistic-concurrency-with-the-sqldatasource-cs.md)</span><span class="sxs-lookup"><span data-stu-id="7a2c3-267">[Previous](using-parameterized-queries-with-the-sqldatasource-cs.md)
[Next](implementing-optimistic-concurrency-with-the-sqldatasource-cs.md)</span></span>
