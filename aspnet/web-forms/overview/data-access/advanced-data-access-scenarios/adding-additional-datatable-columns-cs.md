---
uid: web-forms/overview/data-access/advanced-data-access-scenarios/adding-additional-datatable-columns-cs
title: Přidávání sloupců do další tabulky DataTable (C#) | Dokumentace Microsoftu
author: rick-anderson
description: Při použití třídy TableAdapter průvodce k vytvoření datové sady typu, odpovídající objekt DataTable obsahuje sloupce vrácené dotazem hlavní databáze. Ale existovat...
ms.author: riande
ms.date: 07/18/2007
ms.assetid: 615f3361-f21f-4338-8bc1-fce8ae071de9
msc.legacyurl: /web-forms/overview/data-access/advanced-data-access-scenarios/adding-additional-datatable-columns-cs
msc.type: authoredcontent
ms.openlocfilehash: 059538d3196aaa1fe3a70d9c02565e4e7af36881
ms.sourcegitcommit: 45ac74e400f9f2b7dbded66297730f6f14a4eb25
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/16/2018
ms.locfileid: "41752508"
---
<a name="adding-additional-datatable-columns-c"></a><span data-ttu-id="5ef83-104">Přidávání sloupců do další tabulky DataTable (C#)</span><span class="sxs-lookup"><span data-stu-id="5ef83-104">Adding Additional DataTable Columns (C#)</span></span>
====================
<span data-ttu-id="5ef83-105">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="5ef83-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="5ef83-106">[Stáhněte si kód](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_70_CS.zip) nebo [stahovat PDF](adding-additional-datatable-columns-cs/_static/datatutorial70cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="5ef83-106">[Download Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_70_CS.zip) or [Download PDF](adding-additional-datatable-columns-cs/_static/datatutorial70cs1.pdf)</span></span>

> <span data-ttu-id="5ef83-107">Při použití třídy TableAdapter průvodce k vytvoření datové sady typu, odpovídající objekt DataTable obsahuje sloupce vrácené dotazem hlavní databáze.</span><span class="sxs-lookup"><span data-stu-id="5ef83-107">When using the TableAdapter Wizard to create a Typed DataSet, the corresponding DataTable contains the columns returned by the main database query.</span></span> <span data-ttu-id="5ef83-108">Existují situace, kdy objekt DataTable musí obsahovat další sloupce.</span><span class="sxs-lookup"><span data-stu-id="5ef83-108">But there are occasions when the DataTable needs to include additional columns.</span></span> <span data-ttu-id="5ef83-109">V tomto kurzu jsme dozvíte, proč se doporučuje uložené procedury, až budeme potřebovat další sloupců do tabulky DataTable.</span><span class="sxs-lookup"><span data-stu-id="5ef83-109">In this tutorial we learn why stored procedures are recommended when we need additional DataTable columns.</span></span>


## <a name="introduction"></a><span data-ttu-id="5ef83-110">Úvod</span><span class="sxs-lookup"><span data-stu-id="5ef83-110">Introduction</span></span>

<span data-ttu-id="5ef83-111">Při přidávání objektu typu TableAdapter k datové sadě zadán, odpovídající schématu s DataTable je určena s hlavním dotazu objektu TableAdapter.</span><span class="sxs-lookup"><span data-stu-id="5ef83-111">When adding a TableAdapter to a Typed DataSet, the corresponding DataTable s schema is determined by the TableAdapter s main query.</span></span> <span data-ttu-id="5ef83-112">Například, pokud hlavním dotazem datová pole *A*, *B*, a *C*, objekt DataTable bude mít tři odpovídající sloupce s názvem *A*, *B*, a *C*. Kromě jeho hlavním dotazu objektu TableAdapter může obsahovat další dotazy, které vracejí možná podmnožinu dat na základě některých parametrů.</span><span class="sxs-lookup"><span data-stu-id="5ef83-112">For example, if the main query returns data fields *A*, *B*, and *C*, the DataTable will have three corresponding columns named *A*, *B*, and *C*. In addition to its main query, a TableAdapter can include additional queries that return, perhaps, a subset of the data based on some parameter.</span></span> <span data-ttu-id="5ef83-113">Například, navíc k `ProductsTableAdapter` s hlavním dotazu, který vrací informace o všech produktů, také obsahuje metody, jako je `GetProductsByCategoryID(categoryID)` a `GetProductByProductID(productID)`, který vrací informace určitý produkt na základě zadaného parametru.</span><span class="sxs-lookup"><span data-stu-id="5ef83-113">For instance, in addition to the `ProductsTableAdapter` s main query, which returns information about all products, it also contains methods like `GetProductsByCategoryID(categoryID)` and `GetProductByProductID(productID)`, which return specific product information based on a supplied parameter.</span></span>

<span data-ttu-id="5ef83-114">Model s schématu s DataTable odrážejí s hlavním dotazu objektu TableAdapter funguje dobře v případě, že všechny metody třídy TableAdapter s vrátí stejnou nebo méně datových polí než procesory zadané v hlavním dotazu.</span><span class="sxs-lookup"><span data-stu-id="5ef83-114">The model of having the DataTable s schema reflect the TableAdapter s main query works well if all of the TableAdapter s methods return the same or fewer data fields than those specified in the main query.</span></span> <span data-ttu-id="5ef83-115">Pokud TableAdapter metoda musí vracet další datová pole, pak jsme byste rozšířit schéma objektu DataTable s odpovídajícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="5ef83-115">If a TableAdapter method needs to return additional data fields, then we should expand the DataTable s schema accordingly.</span></span> <span data-ttu-id="5ef83-116">V [Master/Detail, použití odrážkovém seznamu v hlavních záznamů s podrobnostmi v prvku DataList](../filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md) kurzu jsme přidali metodu `CategoriesTableAdapter` vrácená `CategoryID`, `CategoryName`, a `Description` datová pole, které jsou definovány v Hlavní dotaz plus `NumberOfProducts`, další datové pole, která hlásí počet produktů, které jsou spojené s každou kategorii.</span><span class="sxs-lookup"><span data-stu-id="5ef83-116">In the [Master/Detail Using a Bulleted List of Master Records with a Details DataList](../filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md) tutorial we added a method to the `CategoriesTableAdapter` that returned the `CategoryID`, `CategoryName`, and `Description` data fields defined in the main query plus `NumberOfProducts`, an additional data field that reported the number of products associated with each category.</span></span> <span data-ttu-id="5ef83-117">Přidali jsme ručně nový sloupec, `CategoriesDataTable` k zachycení `NumberOfProducts` datové pole hodnotu z této nové metody.</span><span class="sxs-lookup"><span data-stu-id="5ef83-117">We manually added a new column to the `CategoriesDataTable` in order to capture the `NumberOfProducts` data field value from this new method.</span></span>

<span data-ttu-id="5ef83-118">Jak je popsáno v [nahrávání souborů](../working-with-binary-files/uploading-files-cs.md) výukový program, skvělé třeba dávat pozor pomocí instancí TableAdapter, kde použít SQL příkazy ad-hoc a metod, jejichž datová pole nejsou přesně shodné hlavního dotazu.</span><span class="sxs-lookup"><span data-stu-id="5ef83-118">As discussed in the [Uploading Files](../working-with-binary-files/uploading-files-cs.md) tutorial, great care must be taken with TableAdapters that use ad-hoc SQL statements and have methods whose data fields do not precisely match the main query.</span></span> <span data-ttu-id="5ef83-119">Pokud je znovu spustit Průvodce konfigurací TableAdapter, bude se aktualizovat všechny metody třídy TableAdapter s tak, aby jejich seznam polí dat odpovídá hlavního dotazu.</span><span class="sxs-lookup"><span data-stu-id="5ef83-119">If the TableAdapter Configuration wizard is re-run, it will update all of the TableAdapter s methods so that their data field list matches the main query.</span></span> <span data-ttu-id="5ef83-120">Všechny metody se seznamy vlastní sloupec v důsledku toho se vrátit do seznamu sloupců hlavního dotazu s a nevrací očekávaná data.</span><span class="sxs-lookup"><span data-stu-id="5ef83-120">Consequently, any methods with customized column lists will revert to the main query s column list and not return the expected data.</span></span> <span data-ttu-id="5ef83-121">Tento problém nevzniká při použití uložených procedur.</span><span class="sxs-lookup"><span data-stu-id="5ef83-121">This issue does not arise when using stored procedures.</span></span>

<span data-ttu-id="5ef83-122">V tomto kurzu se podíváme na tom, jak rozšířit schéma objektu DataTable s zahrnout další sloupce.</span><span class="sxs-lookup"><span data-stu-id="5ef83-122">In this tutorial we will look at how to extend a DataTable s schema to include additional columns.</span></span> <span data-ttu-id="5ef83-123">Z důvodu brittleness TableAdapter při použití příkazů jazyka SQL ad-hoc v tomto kurzu budeme používat uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="5ef83-123">Due to the brittleness of the TableAdapter when using ad-hoc SQL statements, in this tutorial we will use stored procedures.</span></span> <span data-ttu-id="5ef83-124">Odkazovat [vytváří se nové uložené procedury, pro zadané datové sady s objekty TableAdapter](creating-new-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) a [použití existující uložené procedury, pro zadané datové sady s objekty TableAdapter](https://data-access/tutorials/using-existing-stored-procedures-for-the-typed-dataset-amp-rsquo-s-tableadapters-cs) kurzy pro další informace o konfigurace objektu typu TableAdapter na pouze pomocí uložených procedur.</span><span class="sxs-lookup"><span data-stu-id="5ef83-124">Refer to the [Creating New Stored Procedures for the Typed DataSet s TableAdapters](creating-new-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) and [Using Existing Stored Procedures for the Typed DataSet s TableAdapters](https://data-access/tutorials/using-existing-stored-procedures-for-the-typed-dataset-amp-rsquo-s-tableadapters-cs) tutorials for more information on configuring a TableAdapter to use stored procedures.</span></span>

## <a name="step-1-adding-apricequartilecolumn-to-theproductsdatatable"></a><span data-ttu-id="5ef83-125">Krok 1: Přidání`PriceQuartile`sloupec, který se`ProductsDataTable`</span><span class="sxs-lookup"><span data-stu-id="5ef83-125">Step 1: Adding a`PriceQuartile`Column to the`ProductsDataTable`</span></span>

<span data-ttu-id="5ef83-126">V *vytváří se nové uložené procedury, pro zadané datové sady s objekty TableAdapter* kurzu jsme vytvořili datovou sadu typu s názvem `NorthwindWithSprocs`.</span><span class="sxs-lookup"><span data-stu-id="5ef83-126">In the *Creating New Stored Procedures for the Typed DataSet s TableAdapters* tutorial we created a Typed DataSet named `NorthwindWithSprocs`.</span></span> <span data-ttu-id="5ef83-127">Tato datová sada v současné době obsahuje dva DataTables: `ProductsDataTable` a `EmployeesDataTable`.</span><span class="sxs-lookup"><span data-stu-id="5ef83-127">This DataSet currently contains two DataTables: `ProductsDataTable` and `EmployeesDataTable`.</span></span> <span data-ttu-id="5ef83-128">`ProductsTableAdapter` Má následující tři metody:</span><span class="sxs-lookup"><span data-stu-id="5ef83-128">The `ProductsTableAdapter` has the following three methods:</span></span>

- <span data-ttu-id="5ef83-129">`GetProducts` -Hlavní dotaz, který vrátí všechny záznamy z `Products` tabulky</span><span class="sxs-lookup"><span data-stu-id="5ef83-129">`GetProducts` - the main query, which returns all records from the `Products` table</span></span>
- <span data-ttu-id="5ef83-130">`GetProductsByCategoryID(categoryID)` -Vrátí všechny produkty se zadaným *categoryID*.</span><span class="sxs-lookup"><span data-stu-id="5ef83-130">`GetProductsByCategoryID(categoryID)` - returns all products with the specified *categoryID*.</span></span>
- <span data-ttu-id="5ef83-131">`GetProductByProductID(productID)` -Vrátí konkrétní produkt se zadaným *productID*.</span><span class="sxs-lookup"><span data-stu-id="5ef83-131">`GetProductByProductID(productID)` - returns the particular product with the specified *productID*.</span></span>

<span data-ttu-id="5ef83-132">Vrátí stejnou sadu datových polí, a to všech sloupců z hlavního dotazu a další dvě metody všechny `Products` tabulky.</span><span class="sxs-lookup"><span data-stu-id="5ef83-132">The main query and the two additional methods all return the same set of data fields, namely all of the columns from the `Products` table.</span></span> <span data-ttu-id="5ef83-133">Neexistují žádné korelační poddotazy nebo `JOIN` s načítání souvisejících dat ze `Categories` nebo `Suppliers` tabulky.</span><span class="sxs-lookup"><span data-stu-id="5ef83-133">There are no correlated subqueries or `JOIN` s pulling related data from the `Categories` or `Suppliers` tables.</span></span> <span data-ttu-id="5ef83-134">Proto `ProductsDataTable` nemá odpovídající sloupec pro každé pole v `Products` tabulky.</span><span class="sxs-lookup"><span data-stu-id="5ef83-134">Therefore, the `ProductsDataTable` has a corresponding column for each field in the `Products` table.</span></span>

<span data-ttu-id="5ef83-135">Pro účely tohoto kurzu vám umožňují s přidejte metodu k `ProductsTableAdapter` s názvem `GetProductsWithPriceQuartile` , který vrátí všechny produkty.</span><span class="sxs-lookup"><span data-stu-id="5ef83-135">For this tutorial, let s add a method to the `ProductsTableAdapter` named `GetProductsWithPriceQuartile` that returns all of the products.</span></span> <span data-ttu-id="5ef83-136">Kromě datových polí standardní produkty `GetProductsWithPriceQuartile` bude také obsahovat `PriceQuartile` datové pole, která určuje, za které QUARTIL cena produktu s spadá.</span><span class="sxs-lookup"><span data-stu-id="5ef83-136">In addition to the standard product data fields, `GetProductsWithPriceQuartile` will also include a `PriceQuartile` data field that indicates under which quartile the product s price falls.</span></span> <span data-ttu-id="5ef83-137">Například, budou mít tyto produkty, jejichž ceny jsou uvedeny v nejdražší 25 % `PriceQuartile` hodnotu 1, zatímco ty, jejichž ceny spadat do posledních 25 % bude mít hodnotu 4.</span><span class="sxs-lookup"><span data-stu-id="5ef83-137">For example, those products whose prices are in the most expensive 25% will have a `PriceQuartile` value of 1, while those whose prices fall in the bottom 25% will have a value of 4.</span></span> <span data-ttu-id="5ef83-138">Než jsme starat o vytvoření uložené procedury tyto informace mají vracet, ale nejprve musíte aktualizovat `ProductsDataTable` zahrnout sloupec obsahoval `PriceQuartile` výsledky při `GetProductsWithPriceQuartile` metoda se používá.</span><span class="sxs-lookup"><span data-stu-id="5ef83-138">Before we worry about creating the stored procedure to return this information, however, we first need to update the `ProductsDataTable` to include a column to hold the `PriceQuartile` results when the `GetProductsWithPriceQuartile` method is used.</span></span>

<span data-ttu-id="5ef83-139">Otevřít `NorthwindWithSprocs` datovou sadu a klikněte pravým tlačítkem na `ProductsDataTable`.</span><span class="sxs-lookup"><span data-stu-id="5ef83-139">Open the `NorthwindWithSprocs` DataSet and right-click on the `ProductsDataTable`.</span></span> <span data-ttu-id="5ef83-140">V místní nabídce zvolte možnost Přidat a pak vyberte sloupec.</span><span class="sxs-lookup"><span data-stu-id="5ef83-140">Choose Add from the context-menu and then pick Column.</span></span>


<span data-ttu-id="5ef83-141">[![Přidat nový sloupec ProductsDataTable](adding-additional-datatable-columns-cs/_static/image2.png)](adding-additional-datatable-columns-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="5ef83-141">[![Add a New Column to the ProductsDataTable](adding-additional-datatable-columns-cs/_static/image2.png)](adding-additional-datatable-columns-cs/_static/image1.png)</span></span>

<span data-ttu-id="5ef83-142">**Obrázek 1**: přidejte nový sloupec, `ProductsDataTable` ([kliknutím ji zobrazíte obrázek v plné velikosti](adding-additional-datatable-columns-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="5ef83-142">**Figure 1**: Add a New Column to the `ProductsDataTable` ([Click to view full-size image](adding-additional-datatable-columns-cs/_static/image3.png))</span></span>


<span data-ttu-id="5ef83-143">Nový sloupec se přidá do DataTable s názvem Sloupec1 typu `System.String`.</span><span class="sxs-lookup"><span data-stu-id="5ef83-143">This will add a new column to the DataTable named Column1 of type `System.String`.</span></span> <span data-ttu-id="5ef83-144">Potřebujeme aktualizovat tento sloupec s názvem PriceQuartile a jeho typ ke `System.Int32` vzhledem k tomu, že se použije k uložení číslo mezi 1 a 4.</span><span class="sxs-lookup"><span data-stu-id="5ef83-144">We need to update this column s name to PriceQuartile and its type to `System.Int32` since it will be used to hold a number between 1 and 4.</span></span> <span data-ttu-id="5ef83-145">Vyberte sloupec nově přidané `ProductsDataTable` a v okně Vlastnosti nastavte `Name` vlastnost PriceQuartile a `DataType` vlastnost `System.Int32`.</span><span class="sxs-lookup"><span data-stu-id="5ef83-145">Select the newly-added column in the `ProductsDataTable` and, from the Properties window, set the `Name` property to PriceQuartile and the `DataType` property to `System.Int32`.</span></span>


<span data-ttu-id="5ef83-146">[![Nastavte nový sloupec s název a datový typ vlastnosti](adding-additional-datatable-columns-cs/_static/image5.png)](adding-additional-datatable-columns-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="5ef83-146">[![Set the New Column s Name and DataType Properties](adding-additional-datatable-columns-cs/_static/image5.png)](adding-additional-datatable-columns-cs/_static/image4.png)</span></span>

<span data-ttu-id="5ef83-147">**Obrázek 2**: nastavte nový sloupec s `Name` a `DataType` vlastnosti ([kliknutím ji zobrazíte obrázek v plné velikosti](adding-additional-datatable-columns-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="5ef83-147">**Figure 2**: Set the New Column s `Name` and `DataType` Properties ([Click to view full-size image](adding-additional-datatable-columns-cs/_static/image6.png))</span></span>


<span data-ttu-id="5ef83-148">Jak je vidět na obrázku 2, jsou další vlastnosti, které můžete nastavit, jako jsou hodnoty ve sloupci určuje, zda musí být jedinečné, pokud sloupec je sloupec s automatickým krokem, zda databáze `NULL` hodnoty jsou povoleny a tak dále.</span><span class="sxs-lookup"><span data-stu-id="5ef83-148">As Figure 2 shows, there are additional properties that can be set, such as whether the values in the column must be unique, if the column is an auto-increment column, whether or not database `NULL` values are allowed, and so on.</span></span> <span data-ttu-id="5ef83-149">Ponechte tyto hodnoty výchozí nastavení.</span><span class="sxs-lookup"><span data-stu-id="5ef83-149">Leave these values set to their defaults.</span></span>

## <a name="step-2-creating-thegetproductswithpricequartilemethod"></a><span data-ttu-id="5ef83-150">Krok 2: Vytvoření`GetProductsWithPriceQuartile`– metoda</span><span class="sxs-lookup"><span data-stu-id="5ef83-150">Step 2: Creating the`GetProductsWithPriceQuartile`Method</span></span>

<span data-ttu-id="5ef83-151">Teď, když `ProductsDataTable` byl aktualizován na zahrnují `PriceQuartile` sloupce, budeme připravení vytvořit `GetProductsWithPriceQuartile` metoda.</span><span class="sxs-lookup"><span data-stu-id="5ef83-151">Now that the `ProductsDataTable` has been updated to include the `PriceQuartile` column, we are ready to create the `GetProductsWithPriceQuartile` method.</span></span> <span data-ttu-id="5ef83-152">Začněte tím, že pravým tlačítkem myši na TableAdapter a zvolením přidat dotaz v místní nabídce.</span><span class="sxs-lookup"><span data-stu-id="5ef83-152">Start by right-clicking on the TableAdapter and choosing Add Query from the context-menu.</span></span> <span data-ttu-id="5ef83-153">Tím se vyvolá průvodce konfigurací dotazu TableAdapter, který nejprve nám vyzve k tom, zda chceme použít SQL příkazy ad-hoc nebo nové nebo existující uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="5ef83-153">This brings up the TableAdapter Query Configuration wizard, which first prompts us as to whether we want to use ad-hoc SQL statements or a new or existing stored procedure.</span></span> <span data-ttu-id="5ef83-154">Protože jsme zadávat t ještě nemáte uložené procedury, která vrací data QUARTIL cena, umožní s povolit TableAdapter vytvořte tuto uloženou proceduru pro nás.</span><span class="sxs-lookup"><span data-stu-id="5ef83-154">Since we don t yet have a stored procedure that returns the price quartile data, let s allow the TableAdapter to create this stored procedure for us.</span></span> <span data-ttu-id="5ef83-155">Výběr možnosti vytvořit nové uložené procedury a klikněte na tlačítko Další.</span><span class="sxs-lookup"><span data-stu-id="5ef83-155">Select the Create new stored procedure option and click Next.</span></span>


<span data-ttu-id="5ef83-156">[![Dáte pokyn, aby TableAdapter průvodce k vytvoření uložené procedury pro nás](adding-additional-datatable-columns-cs/_static/image8.png)](adding-additional-datatable-columns-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="5ef83-156">[![Instruct the TableAdapter Wizard to Create the Stored Procedure For Us](adding-additional-datatable-columns-cs/_static/image8.png)](adding-additional-datatable-columns-cs/_static/image7.png)</span></span>

<span data-ttu-id="5ef83-157">**Obrázek 3**: dáte pokyn, aby průvodce TableAdapter vytvořte uložené procedury pro USA ([kliknutím ji zobrazíte obrázek v plné velikosti](adding-additional-datatable-columns-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="5ef83-157">**Figure 3**: Instruct the TableAdapter Wizard to Create the Stored Procedure For Us ([Click to view full-size image](adding-additional-datatable-columns-cs/_static/image9.png))</span></span>


<span data-ttu-id="5ef83-158">Na následující obrazovce je znázorněno na obrázku 4, zobrazí Průvodce požadavek nám jaký typ dotazu přidat.</span><span class="sxs-lookup"><span data-stu-id="5ef83-158">In the subsequent screen, shown in Figure 4, the wizard asks us what type of query to add.</span></span> <span data-ttu-id="5ef83-159">Protože `GetProductsWithPriceQuartile` metoda vrátí všechny sloupce a záznamy ze `Products` tabulku, vyberte, které vrací řádky možnost a klikněte na tlačítko Další.</span><span class="sxs-lookup"><span data-stu-id="5ef83-159">Since the `GetProductsWithPriceQuartile` method will return all columns and records from the `Products` table, select the SELECT which returns rows option and click Next.</span></span>


<span data-ttu-id="5ef83-160">[![Dotaz bude příkaz SELECT tohoto vrátí více řádků](adding-additional-datatable-columns-cs/_static/image11.png)](adding-additional-datatable-columns-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="5ef83-160">[![Our Query will be a SELECT Statement that Returns Multiple Rows](adding-additional-datatable-columns-cs/_static/image11.png)](adding-additional-datatable-columns-cs/_static/image10.png)</span></span>

<span data-ttu-id="5ef83-161">**Obrázek 4**: náš dotaz bude `SELECT` příkaz této vrátí více řádků ([kliknutím ji zobrazíte obrázek v plné velikosti](adding-additional-datatable-columns-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="5ef83-161">**Figure 4**: Our Query will be a `SELECT` Statement that Returns Multiple Rows ([Click to view full-size image](adding-additional-datatable-columns-cs/_static/image12.png))</span></span>


<span data-ttu-id="5ef83-162">Dále jsme se výzva k zadání `SELECT` dotazu.</span><span class="sxs-lookup"><span data-stu-id="5ef83-162">Next we are prompted for the `SELECT` query.</span></span> <span data-ttu-id="5ef83-163">V průvodci zadejte následující dotaz:</span><span class="sxs-lookup"><span data-stu-id="5ef83-163">Enter the following query into the wizard:</span></span>


[!code-sql[Main](adding-additional-datatable-columns-cs/samples/sample1.sql)]

<span data-ttu-id="5ef83-164">Výše uvedeném dotazu používá SQL Server 2005 s novou [ `NTILE` funkce](https://msdn.microsoft.com/library/ms175126.aspx) výsledky rozdělit do čtyř skupin, ve kterém jsou určeny skupiny `UnitPrice` hodnoty seřazeny v sestupném pořadí.</span><span class="sxs-lookup"><span data-stu-id="5ef83-164">The above query uses SQL Server 2005 s new [`NTILE` function](https://msdn.microsoft.com/library/ms175126.aspx) to divide the results into four groups where the groups are determined by the `UnitPrice` values sorted in descending order.</span></span>

<span data-ttu-id="5ef83-165">Bohužel Tvůrce dotazů není známo, jak analyzovat `OVER` – klíčové slovo a bude se zobrazovat chyby při analýze výše uvedeném dotazu.</span><span class="sxs-lookup"><span data-stu-id="5ef83-165">Unfortunately, the Query Builder does not know how to parse the `OVER` keyword and will display an error when parsing the above query.</span></span> <span data-ttu-id="5ef83-166">Proto výše uvedeném dotazu přímo do textového pole zadejte v Průvodci bez použití editoru dotazů.</span><span class="sxs-lookup"><span data-stu-id="5ef83-166">Therefore, enter the above query directly in the textbox in the wizard without using the Query Builder.</span></span>

> [!NOTE]
> <span data-ttu-id="5ef83-167">Další informace o ntile povolen a SQL Server 2005 s najdete v dalších funkcí hodnocení [vrácení seřazených výsledků s Microsoft SQL Server 2005](http://www.4guysfromrolla.com/webtech/010406-1.shtml) a [hodnocení funkce v tématu](https://msdn.microsoft.com/library/ms189798.aspx) z [SQL Server 2005 Books Online](https://msdn.microsoft.com/library/ms189798.aspx).</span><span class="sxs-lookup"><span data-stu-id="5ef83-167">For more information on NTILE and SQL Server 2005 s other ranking functions, see [Returning Ranked Results with Microsoft SQL Server 2005](http://www.4guysfromrolla.com/webtech/010406-1.shtml) and the [Ranking Functions section](https://msdn.microsoft.com/library/ms189798.aspx) from the [SQL Server 2005 Books Online](https://msdn.microsoft.com/library/ms189798.aspx).</span></span>


<span data-ttu-id="5ef83-168">Po zadání `SELECT` dotazů a kliknutí na tlačítko Další, Průvodce výzva k zadání názvu pro uloženou proceduru se vytvoří.</span><span class="sxs-lookup"><span data-stu-id="5ef83-168">After entering the `SELECT` query and clicking Next, the wizard asks us to provide a name for the stored procedure it will create.</span></span> <span data-ttu-id="5ef83-169">Pojmenujte novou úložnou proceduru `Products_SelectWithPriceQuartile` a klikněte na tlačítko Další.</span><span class="sxs-lookup"><span data-stu-id="5ef83-169">Name the new stored procedure `Products_SelectWithPriceQuartile` and click Next.</span></span>


<span data-ttu-id="5ef83-170">[![Název uložené procedury Products_SelectWithPriceQuartile](adding-additional-datatable-columns-cs/_static/image14.png)](adding-additional-datatable-columns-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="5ef83-170">[![Name the Stored Procedure Products_SelectWithPriceQuartile](adding-additional-datatable-columns-cs/_static/image14.png)](adding-additional-datatable-columns-cs/_static/image13.png)</span></span>

<span data-ttu-id="5ef83-171">**Obrázek 5**: název uložená procedura `Products_SelectWithPriceQuartile` ([kliknutím ji zobrazíte obrázek v plné velikosti](adding-additional-datatable-columns-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="5ef83-171">**Figure 5**: Name the Stored Procedure `Products_SelectWithPriceQuartile` ([Click to view full-size image](adding-additional-datatable-columns-cs/_static/image15.png))</span></span>


<span data-ttu-id="5ef83-172">Nakonec jsme se výzva k pojmenování metody TableAdapter.</span><span class="sxs-lookup"><span data-stu-id="5ef83-172">Lastly, we are prompted to name the TableAdapter methods.</span></span> <span data-ttu-id="5ef83-173">Nechte obou výplně datové tabulky a vrátí objekt DataTable zaškrtnutých políček a název metody `FillWithPriceQuartile` a `GetProductsWithPriceQuartile`.</span><span class="sxs-lookup"><span data-stu-id="5ef83-173">Leave both the Fill a DataTable and Return a DataTable checkboxes checked and name the methods `FillWithPriceQuartile` and `GetProductsWithPriceQuartile`.</span></span>


<span data-ttu-id="5ef83-174">[![Název TableAdapter s metod a klikněte na tlačítko Dokončit](adding-additional-datatable-columns-cs/_static/image17.png)](adding-additional-datatable-columns-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="5ef83-174">[![Name the TableAdapter s Methods and Click Finish](adding-additional-datatable-columns-cs/_static/image17.png)](adding-additional-datatable-columns-cs/_static/image16.png)</span></span>

<span data-ttu-id="5ef83-175">**Obrázek 6**: název třídy TableAdapter s metod a kliknutím na tlačítko Dokončit ([kliknutím ji zobrazíte obrázek v plné velikosti](adding-additional-datatable-columns-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="5ef83-175">**Figure 6**: Name the TableAdapter s Methods and Click Finish ([Click to view full-size image](adding-additional-datatable-columns-cs/_static/image18.png))</span></span>


<span data-ttu-id="5ef83-176">S `SELECT` zadaný dotaz a uložených procedur a metody třídy TableAdapter s názvem, klikněte na tlačítko Dokončit dokončete průvodce.</span><span class="sxs-lookup"><span data-stu-id="5ef83-176">With the `SELECT` query specified and the stored procedure and TableAdapter methods named, click Finish to complete the wizard.</span></span> <span data-ttu-id="5ef83-177">V tomto okamžiku se může zobrazit upozornění nebo dvě z Průvodce chci říct, že `OVER` konstrukci SQL nebo příkaz nejsou podporovány.</span><span class="sxs-lookup"><span data-stu-id="5ef83-177">At this point you may get a warning or two from the wizard saying that The `OVER` SQL construct or statement is not supported.</span></span> <span data-ttu-id="5ef83-178">Tato upozornění můžete ignorovat.</span><span class="sxs-lookup"><span data-stu-id="5ef83-178">These warnings can be ignored.</span></span>

<span data-ttu-id="5ef83-179">Po dokončení průvodce, by měl obsahovat objektu TableAdapter `FillWithPriceQuartile` a `GetProductsWithPriceQuartile` metody a databáze by měl obsahovat uložené procedury s názvem `Products_SelectWithPriceQuartile`.</span><span class="sxs-lookup"><span data-stu-id="5ef83-179">After completing the wizard, the TableAdapter should include the `FillWithPriceQuartile` and `GetProductsWithPriceQuartile` methods and the database should include a stored procedure named `Products_SelectWithPriceQuartile`.</span></span> <span data-ttu-id="5ef83-180">Za chvíli ověřte, že TableAdapter skutečně obsahují tato nová metoda a že uloženou proceduru správně přidán do databáze.</span><span class="sxs-lookup"><span data-stu-id="5ef83-180">Take a moment to verify that the TableAdapter does indeed contain this new method and that the stored procedure has been correctly added to the database.</span></span> <span data-ttu-id="5ef83-181">Při kontrole databáze, pokud se nezobrazí uloženou proceduru zkuste pravým tlačítkem myši na složku uložené procedury a vyberte aktualizovat.</span><span class="sxs-lookup"><span data-stu-id="5ef83-181">When checking the database, if you do not see the stored procedure try right-clicking on the Stored Procedures folder and choosing Refresh.</span></span>


![Ověřte, že byla přidána nová metoda do TableAdapter](adding-additional-datatable-columns-cs/_static/image19.png)

<span data-ttu-id="5ef83-183">**Obrázek 7**: Ověřte, že byla přidána nová metoda do TableAdapter</span><span class="sxs-lookup"><span data-stu-id="5ef83-183">**Figure 7**: Verify that a New Method Has Been Added to the TableAdapter</span></span>


<span data-ttu-id="5ef83-184">[![Ujistěte se, že databáze obsahuje Products_SelectWithPriceQuartile uložené procedury](adding-additional-datatable-columns-cs/_static/image21.png)](adding-additional-datatable-columns-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="5ef83-184">[![Ensure that the Database Contains the Products_SelectWithPriceQuartile Stored Procedure](adding-additional-datatable-columns-cs/_static/image21.png)](adding-additional-datatable-columns-cs/_static/image20.png)</span></span>

<span data-ttu-id="5ef83-185">**Obrázek 8**: Ujistěte se, že databáze obsahuje `Products_SelectWithPriceQuartile` uloženou proceduru ([kliknutím ji zobrazíte obrázek v plné velikosti](adding-additional-datatable-columns-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="5ef83-185">**Figure 8**: Ensure that the Database Contains the `Products_SelectWithPriceQuartile` Stored Procedure ([Click to view full-size image](adding-additional-datatable-columns-cs/_static/image22.png))</span></span>


> [!NOTE]
> <span data-ttu-id="5ef83-186">Jednou z výhod použití uložených procedur místo SQL příkazy ad-hoc je, že znovu spustíte Průvodce konfigurací TableAdapter nezmění sloupec seznamy uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="5ef83-186">One of the benefits of using stored procedures instead of ad-hoc SQL statements is that re-running the TableAdapter Configuration wizard will not modify the stored procedures column lists.</span></span> <span data-ttu-id="5ef83-187">To ověřte tak, že pravým tlačítkem myši na TableAdapter, vyberete možnost konfigurace v místní nabídce spusťte průvodce a pak kliknutím na tlačítko Dokončit k jejímu dokončení.</span><span class="sxs-lookup"><span data-stu-id="5ef83-187">Verify this by right-clicking on the TableAdapter, choosing the Configure option from the context-menu to start the wizard, and then clicking Finish to complete it.</span></span> <span data-ttu-id="5ef83-188">Dále přejděte do databáze a zobrazení `Products_SelectWithPriceQuartile` uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="5ef83-188">Next, go to the database and view the `Products_SelectWithPriceQuartile` stored procedure.</span></span> <span data-ttu-id="5ef83-189">Všimněte si, že byl změněn jeho seznamu sloupců.</span><span class="sxs-lookup"><span data-stu-id="5ef83-189">Note that its column list has not been modified.</span></span> <span data-ttu-id="5ef83-190">Měli jsme používali SQL příkazy ad-hoc, znovu spustíte Průvodce konfigurací TableAdapter by se vrátíte tento dotaz s seznam sloupců tak, aby odpovídaly hlavního dotazu seznamu sloupců, odpadne ntile povolen příkaz z dotazu použitého `GetProductsWithPriceQuartile` metody.</span><span class="sxs-lookup"><span data-stu-id="5ef83-190">Had we been using ad-hoc SQL statements, re-running the TableAdapter Configuration wizard would have reverted this query s column list to match the main query column list, thereby removing the NTILE statement from the query used by the `GetProductsWithPriceQuartile` method.</span></span>


<span data-ttu-id="5ef83-191">Když vrstvy přístupu k datům s `GetProductsWithPriceQuartile` vyvolání metody, TableAdapter provede `Products_SelectWithPriceQuartile` uložené procedury a přidá řádek do `ProductsDataTable` pro každý záznam vrátil.</span><span class="sxs-lookup"><span data-stu-id="5ef83-191">When the Data Access Layer s `GetProductsWithPriceQuartile` method is invoked, the TableAdapter executes the `Products_SelectWithPriceQuartile` stored procedure and adds a row to the `ProductsDataTable` for each returned record.</span></span> <span data-ttu-id="5ef83-192">Datová pole vrácené uložené procedury jsou namapovány na `ProductsDataTable` s sloupce.</span><span class="sxs-lookup"><span data-stu-id="5ef83-192">The data fields returned by the stored procedure are mapped to the `ProductsDataTable` s columns.</span></span> <span data-ttu-id="5ef83-193">Vzhledem k tomu, že je `PriceQuartile` data pole vrácené z uložené procedury, jeho hodnota přiřazena `ProductsDataTable` s `PriceQuartile` sloupce.</span><span class="sxs-lookup"><span data-stu-id="5ef83-193">Since there is a `PriceQuartile` data field returned from the stored procedure, its value is assigned to the `ProductsDataTable` s `PriceQuartile` column.</span></span>

<span data-ttu-id="5ef83-194">Pro tyto metody TableAdapter, jejichž dotazy nevrátí `PriceQuartile` datové pole, `PriceQuartile` sloupec s hodnotou je hodnotu zadanou pomocí jeho `DefaultValue` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="5ef83-194">For those TableAdapter methods whose queries do not return a `PriceQuartile` data field, the `PriceQuartile` column s value is the value specified by its `DefaultValue` property.</span></span> <span data-ttu-id="5ef83-195">Jak je vidět na obrázku 2, tato hodnota nastavená na `DBNull`, výchozí hodnota.</span><span class="sxs-lookup"><span data-stu-id="5ef83-195">As Figure 2 shows, this value is set to `DBNull`, the default.</span></span> <span data-ttu-id="5ef83-196">Pokud si přejete jinou výchozí hodnotu, stačí nastavit `DefaultValue` vlastnost odpovídajícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="5ef83-196">If you would prefer a different default value, simply set the `DefaultValue` property accordingly.</span></span> <span data-ttu-id="5ef83-197">Dejte pozor, který `DefaultValue` je hodnota platná zadané sloupce s `DataType` (například `System.Int32` pro `PriceQuartile` sloupec).</span><span class="sxs-lookup"><span data-stu-id="5ef83-197">Just make sure that the `DefaultValue` value is valid given the column s `DataType` (i.e., `System.Int32` for the `PriceQuartile` column).</span></span>

<span data-ttu-id="5ef83-198">V tuto chvíli jsme jste provedli kroky pro přidání dalších sloupců do DataTable.</span><span class="sxs-lookup"><span data-stu-id="5ef83-198">At this point we have performed the necessary steps for adding an additional column to a DataTable.</span></span> <span data-ttu-id="5ef83-199">Pokud chcete ověřit, že tento další sloupec funguje podle očekávání, umožní vytvořit stránku ASP.NET, která zobrazí každý produkt s názvem, ceny a cena QUARTIL s.</span><span class="sxs-lookup"><span data-stu-id="5ef83-199">To verify that this additional column works as expected, let s create an ASP.NET page that displays each product s name, price, and price quartile.</span></span> <span data-ttu-id="5ef83-200">Než to, ale nejprve musíme aktualizovat vrstvy obchodní logiky obsahovat metodu, která volá na s vrstvou DAL `GetProductsWithPriceQuartile` metody.</span><span class="sxs-lookup"><span data-stu-id="5ef83-200">Before we do that, though, we first need to update the Business Logic Layer to include a method that calls down to the DAL s `GetProductsWithPriceQuartile` method.</span></span> <span data-ttu-id="5ef83-201">Budeme aktualizovat BLL v dalším kroku v kroku 3 a pak vytvořte stránku ASP.NET v kroku 4.</span><span class="sxs-lookup"><span data-stu-id="5ef83-201">We will update the BLL next, in Step 3, and then create the ASP.NET page in Step 4.</span></span>

## <a name="step-3-augmenting-the-business-logic-layer"></a><span data-ttu-id="5ef83-202">Krok 3: Rozšíření vrstvy obchodní logiky</span><span class="sxs-lookup"><span data-stu-id="5ef83-202">Step 3: Augmenting the Business Logic Layer</span></span>

<span data-ttu-id="5ef83-203">Předtím, než jsme pomocí nové `GetProductsWithPriceQuartile` metoda od prezentační vrstvy jsme měli nejprve přidat odpovídající metody do BLL.</span><span class="sxs-lookup"><span data-stu-id="5ef83-203">Before we use the new `GetProductsWithPriceQuartile` method from the Presentation Layer, we should first add a corresponding method to the BLL.</span></span> <span data-ttu-id="5ef83-204">Otevřít `ProductsBLLWithSprocs` třídy soubor a přidejte následující kód:</span><span class="sxs-lookup"><span data-stu-id="5ef83-204">Open the `ProductsBLLWithSprocs` class file and add the following code:</span></span>


[!code-csharp[Main](adding-additional-datatable-columns-cs/samples/sample2.cs)]

<span data-ttu-id="5ef83-205">Data načtení metod v, jako jsou `ProductsBLLWithSprocs`, `GetProductsWithPriceQuartile` metoda provede jednoduché volání DAL s odpovídající `GetProductsWithPriceQuartile` metodu a vrátí jeho výsledky.</span><span class="sxs-lookup"><span data-stu-id="5ef83-205">Like the other data retrieval methods in `ProductsBLLWithSprocs`, the `GetProductsWithPriceQuartile` method simply calls the DAL s corresponding `GetProductsWithPriceQuartile` method and returns its results.</span></span>

## <a name="step-4-displaying-the-price-quartile-information-in-an-aspnet-web-page"></a><span data-ttu-id="5ef83-206">Krok 4: Zobrazení informací o QUARTIL cena na webové stránce ASP.NET</span><span class="sxs-lookup"><span data-stu-id="5ef83-206">Step 4: Displaying the Price Quartile Information in an ASP.NET Web Page</span></span>

<span data-ttu-id="5ef83-207">Přidání knihoven BLL dokončení jsme znovu připravený k vytvoření stránky technologie ASP.NET, který zobrazuje QUARTIL ceny pro každý produkt.</span><span class="sxs-lookup"><span data-stu-id="5ef83-207">With the BLL addition complete we re ready to create an ASP.NET page that shows the price quartile for each product.</span></span> <span data-ttu-id="5ef83-208">Otevřít `AddingColumns.aspx` stránku `AdvancedDAL` složky a GridView přetáhněte z panelu nástrojů do Návrháře nastavení jeho `ID` vlastnost `Products`.</span><span class="sxs-lookup"><span data-stu-id="5ef83-208">Open the `AddingColumns.aspx` page in the `AdvancedDAL` folder and drag a GridView from the Toolbox onto the Designer, setting its `ID` property to `Products`.</span></span> <span data-ttu-id="5ef83-209">Z inteligentních značek GridView s vázat na nového prvku ObjectDataSource s názvem `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="5ef83-209">From the GridView s smart tag, bind it to a new ObjectDataSource named `ProductsDataSource`.</span></span> <span data-ttu-id="5ef83-210">Konfigurace ObjectDataSource používat `ProductsBLLWithSprocs` třída s `GetProductsWithPriceQuartile` metody.</span><span class="sxs-lookup"><span data-stu-id="5ef83-210">Configure the ObjectDataSource to use the `ProductsBLLWithSprocs` class s `GetProductsWithPriceQuartile` method.</span></span> <span data-ttu-id="5ef83-211">Vzhledem k tomu, že to bude jen pro čtení mřížky, nastavte rozevírací seznamy v UPDATE, INSERT a odstranit karty na (žádný).</span><span class="sxs-lookup"><span data-stu-id="5ef83-211">Since this will be a read-only grid, set the drop-down lists in the UPDATE, INSERT, and DELETE tabs to (None) .</span></span>


<span data-ttu-id="5ef83-212">[![Konfigurace ObjectDataSource pomocí třídy ProductsBLLWithSprocs](adding-additional-datatable-columns-cs/_static/image24.png)](adding-additional-datatable-columns-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="5ef83-212">[![Configure the ObjectDataSource to Use the ProductsBLLWithSprocs Class](adding-additional-datatable-columns-cs/_static/image24.png)](adding-additional-datatable-columns-cs/_static/image23.png)</span></span>

<span data-ttu-id="5ef83-213">**Obrázek 9**: Konfigurace ObjectDataSource k použití `ProductsBLLWithSprocs` třídy ([kliknutím ji zobrazíte obrázek v plné velikosti](adding-additional-datatable-columns-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="5ef83-213">**Figure 9**: Configure the ObjectDataSource to Use the `ProductsBLLWithSprocs` Class ([Click to view full-size image](adding-additional-datatable-columns-cs/_static/image25.png))</span></span>


<span data-ttu-id="5ef83-214">[![Získávání informací o produktech z GetProductsWithPriceQuartile – metoda](adding-additional-datatable-columns-cs/_static/image27.png)](adding-additional-datatable-columns-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="5ef83-214">[![Retrieve Product Information from the GetProductsWithPriceQuartile Method](adding-additional-datatable-columns-cs/_static/image27.png)](adding-additional-datatable-columns-cs/_static/image26.png)</span></span>

<span data-ttu-id="5ef83-215">**Obrázek 10**: načíst informace o produktech z `GetProductsWithPriceQuartile` – metoda ([kliknutím ji zobrazíte obrázek v plné velikosti](adding-additional-datatable-columns-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="5ef83-215">**Figure 10**: Retrieve Product Information from the `GetProductsWithPriceQuartile` Method ([Click to view full-size image](adding-additional-datatable-columns-cs/_static/image28.png))</span></span>


<span data-ttu-id="5ef83-216">Po dokončení Průvodce nakonfigurovat zdroj dat, sada Visual Studio automaticky přidá vlastnost BoundField nebo třídě CheckBoxField do prvku GridView. pro každý vrácený metodou datová pole.</span><span class="sxs-lookup"><span data-stu-id="5ef83-216">After completing the Configure Data Source wizard, Visual Studio will automatically add a BoundField or CheckBoxField to the GridView for each of the data fields returned by the method.</span></span> <span data-ttu-id="5ef83-217">Jedním z těchto polí je `PriceQuartile`, což je sloupec přidali jsme `ProductsDataTable` v kroku 1.</span><span class="sxs-lookup"><span data-stu-id="5ef83-217">One of these data fields is `PriceQuartile`, which is the column we added to the `ProductsDataTable` in Step 1.</span></span>

<span data-ttu-id="5ef83-218">Upravit pole ovládacího prvku GridView s odebráním všech ale na `ProductName`, `UnitPrice`, a `PriceQuartile` BoundFields.</span><span class="sxs-lookup"><span data-stu-id="5ef83-218">Edit the GridView s fields, removing all but the `ProductName`, `UnitPrice`, and `PriceQuartile` BoundFields.</span></span> <span data-ttu-id="5ef83-219">Konfigurace `UnitPrice` Vlastnost BoundField a jeho hodnotu jako měnu naformátovat `UnitPrice` a `PriceQuartile` BoundFields a System center zarovnaný doprava, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="5ef83-219">Configure the `UnitPrice` BoundField to format its value as a currency and have the `UnitPrice` and `PriceQuartile` BoundFields right- and center-aligned, respectively.</span></span> <span data-ttu-id="5ef83-220">Nakonec aktualizujte zbývající BoundFields `HeaderText` vlastnosti na produkt, ceny a cena QUARTIL, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="5ef83-220">Finally, update the remaining BoundFields `HeaderText` properties to Product, Price, and Price Quartile, respectively.</span></span> <span data-ttu-id="5ef83-221">Také zaškrtněte políčko Povolit řazení z inteligentních značek s ovládacího prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="5ef83-221">Also, check the Enable Sorting checkbox from the GridView s smart tag.</span></span>

<span data-ttu-id="5ef83-222">Po změnách ovládacími prvky GridView a prvku ObjectDataSource s deklarativní by měl vypadat nějak takto:</span><span class="sxs-lookup"><span data-stu-id="5ef83-222">After these modifications, the GridView and ObjectDataSource s declarative markup should look like the following:</span></span>


[!code-aspx[Main](adding-additional-datatable-columns-cs/samples/sample3.aspx)]

<span data-ttu-id="5ef83-223">Obrázku 11 můžete vidět tuto stránku, když uživatel prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="5ef83-223">Figure 11 shows this page when visited through a browser.</span></span> <span data-ttu-id="5ef83-224">Všimněte si, že na začátku produkty jsou řazeny podle jejich cena v sestupném pořadí u každého produktu přiřazené odpovídající `PriceQuartile` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="5ef83-224">Note that, initially, the products are ordered by their price in descending order with each product assigned an appropriate `PriceQuartile` value.</span></span> <span data-ttu-id="5ef83-225">Samozřejmě tato data můžou být řada seřazena podle jiných kritérií se cena sloupec kvartil stále odráží hodnocení produktu s s ohledem na cenu (viz obrázek 12).</span><span class="sxs-lookup"><span data-stu-id="5ef83-225">Of course this data can be sorted by other criteria with the Price Quartile column value still reflecting the product s ranking with respect to price (see Figure 12).</span></span>


<span data-ttu-id="5ef83-226">[![Produkty jsou řazeny podle jejich cenu](adding-additional-datatable-columns-cs/_static/image30.png)](adding-additional-datatable-columns-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="5ef83-226">[![The Products are Ordered by their Prices](adding-additional-datatable-columns-cs/_static/image30.png)](adding-additional-datatable-columns-cs/_static/image29.png)</span></span>

<span data-ttu-id="5ef83-227">**Obrázek 11**: The produkty jsou řazeny podle jejich cenu ([kliknutím ji zobrazíte obrázek v plné velikosti](adding-additional-datatable-columns-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="5ef83-227">**Figure 11**: The Products are Ordered by their Prices ([Click to view full-size image](adding-additional-datatable-columns-cs/_static/image31.png))</span></span>


<span data-ttu-id="5ef83-228">[![Produkty jsou řazeny podle svých názvů](adding-additional-datatable-columns-cs/_static/image33.png)](adding-additional-datatable-columns-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="5ef83-228">[![The Products are Ordered by their Names](adding-additional-datatable-columns-cs/_static/image33.png)](adding-additional-datatable-columns-cs/_static/image32.png)</span></span>

<span data-ttu-id="5ef83-229">**Obrázek 12**: The produkty jsou řazeny podle svých názvů ([kliknutím ji zobrazíte obrázek v plné velikosti](adding-additional-datatable-columns-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="5ef83-229">**Figure 12**: The Products are Ordered by their Names ([Click to view full-size image](adding-additional-datatable-columns-cs/_static/image34.png))</span></span>


> [!NOTE]
> <span data-ttu-id="5ef83-230">Po zadání několika řádků kódu jsme mohli rozšířit prvku GridView tak, aby vybarvenými řádky produkt na základě jejich `PriceQuartile` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="5ef83-230">With a few lines of code we could augment the GridView so that it colored the product rows based on their `PriceQuartile` value.</span></span> <span data-ttu-id="5ef83-231">Společnost Microsoft může barva tyto produkty v první kvartil světle zelená, ve druhém QUARTIL žlutě a tak dále.</span><span class="sxs-lookup"><span data-stu-id="5ef83-231">We might color those products in the first quartile a light green, those in the second quartile a light yellow, and so forth.</span></span> <span data-ttu-id="5ef83-232">Neváhejte se za chvíli přidat tuto funkci.</span><span class="sxs-lookup"><span data-stu-id="5ef83-232">I encourage you to take a moment to add this functionality.</span></span> <span data-ttu-id="5ef83-233">Pokud potřebujete občerstvit o formátování GridView, obraťte se [vlastní formátování založené na Data](../custom-formatting/custom-formatting-based-upon-data-cs.md) kurzu.</span><span class="sxs-lookup"><span data-stu-id="5ef83-233">If you need a refresher on formatting a GridView, consult the [Custom Formatting Based Upon Data](../custom-formatting/custom-formatting-based-upon-data-cs.md) tutorial.</span></span>


## <a name="an-alternative-approach---creating-another-tableadapter"></a><span data-ttu-id="5ef83-234">Alternativním přístupem – vytváření jiné třídy TableAdapter</span><span class="sxs-lookup"><span data-stu-id="5ef83-234">An Alternative Approach - Creating Another TableAdapter</span></span>

<span data-ttu-id="5ef83-235">Jak jsme viděli v tomto kurzu se při přidání metody do třídy TableAdapter, který vrací datových polí než ty, které států hlavního dotazu, můžeme přidat odpovídající sloupce do objektu DataTable.</span><span class="sxs-lookup"><span data-stu-id="5ef83-235">As we saw in this tutorial, when adding a method to a TableAdapter that returns data fields other than those spelled out by the main query, we can add corresponding columns to the DataTable.</span></span> <span data-ttu-id="5ef83-236">Takový přístup, ale funguje dobře jenom v případě, že existují malý počet metod v TableAdapter, které vracejí různých datových polí, a pokud tato alternativní datové pole se neliší o příliš mnoho z hlavního dotazu.</span><span class="sxs-lookup"><span data-stu-id="5ef83-236">Such an approach, however, works well only if there are a small number of methods in the TableAdapter that return different data fields and if those alternate data fields do not vary too much from the main query.</span></span>

<span data-ttu-id="5ef83-237">Místo přidávání sloupců do objektu DataTable, můžete místo toho přidat jiné třídy TableAdapter do datové sady, který obsahuje metodu z první třídy TableAdapter, které vracejí různých datových polí.</span><span class="sxs-lookup"><span data-stu-id="5ef83-237">Rather than adding columns to the DataTable, you can instead add another TableAdapter to the DataSet that contains the methods from the first TableAdapter that return different data fields.</span></span> <span data-ttu-id="5ef83-238">Pro účely tohoto kurzu množstvím než přidávat `PriceQuartile` sloupec, který se `ProductsDataTable` (kde používá se pouze podle `GetProductsWithPriceQuartile` metoda), může do jsme přidali další TableAdapter datovou sadu s názvem `ProductsWithPriceQuartileTableAdapter` , který používá `Products_SelectWithPriceQuartile` uložená postup jako jeho hlavním dotazem.</span><span class="sxs-lookup"><span data-stu-id="5ef83-238">For this tutorial, rather than add the `PriceQuartile` column to the `ProductsDataTable` (where it is only used by the `GetProductsWithPriceQuartile` method), we could have added an additional TableAdapter to the DataSet named `ProductsWithPriceQuartileTableAdapter` that used the `Products_SelectWithPriceQuartile` stored procedure as its main query.</span></span> <span data-ttu-id="5ef83-239">Stránky ASP.NET, které jsou potřeba k získání informací o produktu s QUARTIL cena byste použili `ProductsWithPriceQuartileTableAdapter`, zatímco ty, které ne může pokračovat v používání `ProductsTableAdapter`.</span><span class="sxs-lookup"><span data-stu-id="5ef83-239">ASP.NET pages that needed to get product information with the price quartile would use the `ProductsWithPriceQuartileTableAdapter`, while those that did not could continue to use the `ProductsTableAdapter`.</span></span>

<span data-ttu-id="5ef83-240">Přidáním nového TableAdapter DataTables zůstanou untarnished a jejich sloupců přesně zrcadlení datová pole vrácené z metody s jejich TableAdapter.</span><span class="sxs-lookup"><span data-stu-id="5ef83-240">By adding a new TableAdapter, the DataTables remain untarnished and their columns precisely mirror the data fields returned by their TableAdapter s methods.</span></span> <span data-ttu-id="5ef83-241">Další objekty TableAdapter lze však zavést opakujících se úloh a funkcí.</span><span class="sxs-lookup"><span data-stu-id="5ef83-241">However, additional TableAdapters can introduce repetitive tasks and functionality.</span></span> <span data-ttu-id="5ef83-242">Například, pokud tyto stránky ASP.NET, která se zobrazí `PriceQuartile` sloupec také potřeba poskytnout vložení, aktualizace a odstranění podpory, `ProductsWithPriceQuartileTableAdapter` byste potřebovali mít jeho `InsertCommand`, `UpdateCommand`, a `DeleteCommand` vlastnosti správně konfigurovat.</span><span class="sxs-lookup"><span data-stu-id="5ef83-242">For example, if those ASP.NET pages that displayed the `PriceQuartile` column also needed to provide insert, update, and delete support, the `ProductsWithPriceQuartileTableAdapter` would need to have its `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties properly configured.</span></span> <span data-ttu-id="5ef83-243">Zatímco bude zrcadlit tyto vlastnosti `ProductsTableAdapter` s touto konfigurací zavádí další krok.</span><span class="sxs-lookup"><span data-stu-id="5ef83-243">While these properties would mirror the `ProductsTableAdapter` s, this configuration introduces an extra step.</span></span> <span data-ttu-id="5ef83-244">Kromě toho nyní existují dva způsoby, jak aktualizovat, odstranit nebo přidat produkt do databáze - prostřednictvím `ProductsTableAdapter` a `ProductsWithPriceQuartileTableAdapter` třídy.</span><span class="sxs-lookup"><span data-stu-id="5ef83-244">Moreover, there are now two ways to update, delete, or add a product to the database - through the `ProductsTableAdapter` and `ProductsWithPriceQuartileTableAdapter` classes.</span></span>

<span data-ttu-id="5ef83-245">Zahrnuje stažení pro účely tohoto kurzu `ProductsWithPriceQuartileTableAdapter` třídy v `NorthwindWithSprocs` datovou sadu, která tento alternativní postup znázorňuje.</span><span class="sxs-lookup"><span data-stu-id="5ef83-245">The download for this tutorial includes a `ProductsWithPriceQuartileTableAdapter` class in the `NorthwindWithSprocs` DataSet that illustrates this alternative approach.</span></span>

## <a name="summary"></a><span data-ttu-id="5ef83-246">Souhrn</span><span class="sxs-lookup"><span data-stu-id="5ef83-246">Summary</span></span>

<span data-ttu-id="5ef83-247">Ve většině scénářů si všechny metody v objektu typu TableAdapter vrátí stejnou sadu datových polí, ale existují situace, kdy konkrétní metody nebo dvou může být zapotřebí vracet další pole.</span><span class="sxs-lookup"><span data-stu-id="5ef83-247">In most scenarios, all of the methods in a TableAdapter will return the same set of data fields, but there are times when a particular method or two may need to return an additional field.</span></span> <span data-ttu-id="5ef83-248">Například v [Master/Detail, použití odrážkovém seznamu v hlavních záznamů s podrobnostmi v prvku DataList](../filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md) kurzu jsme přidali metodu `CategoriesTableAdapter` , kromě datových polí hlavního dotazu s vrátil `NumberOfProducts` pole, které hlásí počet produktů, které jsou spojené s každou kategorii.</span><span class="sxs-lookup"><span data-stu-id="5ef83-248">For example, in the [Master/Detail Using a Bulleted List of Master Records with a Details DataList](../filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md) tutorial we added a method to the `CategoriesTableAdapter` that, in addition to the main query s data fields, returned a `NumberOfProducts` field that reported the number of products associated with each category.</span></span> <span data-ttu-id="5ef83-249">V tomto kurzu jsme se podívali na přidání metody v `ProductsTableAdapter` vrácená `PriceQuartile` pole kromě hlavního dotazu s datová pole.</span><span class="sxs-lookup"><span data-stu-id="5ef83-249">In this tutorial we looked at adding a method in the `ProductsTableAdapter` that returned a `PriceQuartile` field in addition to the main query s data fields.</span></span> <span data-ttu-id="5ef83-250">K zaznamenání dat o další pole vrácené pomocí metod TableAdapter s že potřebujeme přidat odpovídající sloupce do objektu DataTable.</span><span class="sxs-lookup"><span data-stu-id="5ef83-250">To capture additional data fields returned by the TableAdapter s methods we need to add corresponding columns to the DataTable.</span></span>

<span data-ttu-id="5ef83-251">Pokud plánujete ruční přidávání sloupců do DataTable, doporučuje se, že TableAdapter pomocí uložených procedur.</span><span class="sxs-lookup"><span data-stu-id="5ef83-251">If you plan on manually adding columns to the DataTable, it is recommended that the TableAdapter use stored procedures.</span></span> <span data-ttu-id="5ef83-252">Pokud TableAdapter používá příkazy SQL ad-hoc, kdykoli TableAdapter spuštění Průvodce konfigurací všechny metody seznamů polí data obnovit datová pole vráceného hlavním dotazem.</span><span class="sxs-lookup"><span data-stu-id="5ef83-252">If the TableAdapter uses ad-hoc SQL statements, any time the TableAdapter Configuration wizard is run all of the methods data field lists revert to the data fields returned by the main query.</span></span> <span data-ttu-id="5ef83-253">Tento problém nerozšiřuje třídu na uložené procedury, což je důvod, proč se doporučují a byly použity v tomto kurzu.</span><span class="sxs-lookup"><span data-stu-id="5ef83-253">This problem does not extend to stored procedures, which is why they are recommended and were used in this tutorial.</span></span>

<span data-ttu-id="5ef83-254">Všechno nejlepší programování!</span><span class="sxs-lookup"><span data-stu-id="5ef83-254">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="5ef83-255">O autorovi</span><span class="sxs-lookup"><span data-stu-id="5ef83-255">About the Author</span></span>

<span data-ttu-id="5ef83-256">[Scott Meisnerová](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor sedm ASP/ASP.NET knih a Zakladatel [4GuysFromRolla.com](http://www.4guysfromrolla.com), má práce s Microsoft webových technologiích od roku 1998.</span><span class="sxs-lookup"><span data-stu-id="5ef83-256">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="5ef83-257">Scott funguje jako nezávislý konzultant, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="5ef83-257">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="5ef83-258">Jeho nejnovější knihy [ *Edice nakladatelství Sams naučit sami ASP.NET 2.0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="5ef83-258">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="5ef83-259">Může být dosáhl v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="5ef83-259">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="5ef83-260">nebo prostřednictvím jeho blogu, který lze nalézt v [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="5ef83-260">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="5ef83-261">Speciální k</span><span class="sxs-lookup"><span data-stu-id="5ef83-261">Special Thanks To</span></span>

<span data-ttu-id="5ef83-262">V této sérii kurzů byl recenzován uživatelem mnoho užitečných revidující.</span><span class="sxs-lookup"><span data-stu-id="5ef83-262">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="5ef83-263">Vedoucí revidující pro účely tohoto kurzu byly Randym Schmidt, Jacky Goor, Bernadette Leigh a Hilton Giesenow.</span><span class="sxs-lookup"><span data-stu-id="5ef83-263">Lead reviewers for this tutorial were Randy Schmidt, Jacky Goor, Bernadette Leigh, and Hilton Giesenow.</span></span> <span data-ttu-id="5ef83-264">Zajímat téma Moje nadcházejících článcích MSDN?</span><span class="sxs-lookup"><span data-stu-id="5ef83-264">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="5ef83-265">Pokud ano, vyřaďte mě řádek na [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="5ef83-265">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5ef83-266">[Předchozí](updating-the-tableadapter-to-use-joins-cs.md)
> [další](working-with-computed-columns-cs.md)</span><span class="sxs-lookup"><span data-stu-id="5ef83-266">[Previous](updating-the-tableadapter-to-use-joins-cs.md)
[Next](working-with-computed-columns-cs.md)</span></span>
