---
uid: web-forms/overview/data-access/caching-data/using-sql-cache-dependencies-cs
title: Použití závislostí mezipaměti SQL (C#) | Dokumentace Microsoftu
author: rick-anderson
description: Nejjednodušší strategií ukládání do mezipaměti je umožnit data uložená v mezipaměti vyprší po zadaném časovém období. Ale tento jednoduchý přístup znamená, že data uložená v mezipaměti maintai...
ms.author: riande
ms.date: 05/30/2007
ms.assetid: 0e91842c-7f10-4aed-8c23-4ee3e2774014
msc.legacyurl: /web-forms/overview/data-access/caching-data/using-sql-cache-dependencies-cs
msc.type: authoredcontent
ms.openlocfilehash: ddd0ce9e8e0f69da6f9c0f65165e4842d460f0c0
ms.sourcegitcommit: 45ac74e400f9f2b7dbded66297730f6f14a4eb25
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/16/2018
ms.locfileid: "41756886"
---
<a name="using-sql-cache-dependencies-c"></a><span data-ttu-id="a2fa2-104">Použití závislostí mezipaměti SQL (C#)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-104">Using SQL Cache Dependencies (C#)</span></span>
====================
<span data-ttu-id="a2fa2-105">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a2fa2-106">[Stáhněte si kód](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_61_CS.zip) nebo [stahovat PDF](using-sql-cache-dependencies-cs/_static/datatutorial61cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-106">[Download Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_61_CS.zip) or [Download PDF](using-sql-cache-dependencies-cs/_static/datatutorial61cs1.pdf)</span></span>

> <span data-ttu-id="a2fa2-107">Nejjednodušší strategií ukládání do mezipaměti je umožnit data uložená v mezipaměti vyprší po zadaném časovém období.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-107">The simplest caching strategy is to allow cached data to expire after a specified period of time.</span></span> <span data-ttu-id="a2fa2-108">Ale tento jednoduchý přístup znamená, že data uložená v mezipaměti udržuje žádné jejich spojení se jeho podkladového zdroje dat, výsledkem je zastaralá data, která se nachází příliš dlouhý nebo aktuální data, která je příliš brzy vypršela platnost.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-108">But this simple approach means that the cached data maintains no association with its underlying data source, resulting in stale data that is held too long or current data that is expired too soon.</span></span> <span data-ttu-id="a2fa2-109">Lepším řešením je použití třídy SqlCacheDependency tak, aby data zůstanou v mezipaměti, dokud se změnila jeho podkladová data ve službě SQL database.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-109">A better approach is to use the SqlCacheDependency class so that data remains cached until its underlying data has been modified in the SQL database.</span></span> <span data-ttu-id="a2fa2-110">V tomto kurzu se dozvíte, jak.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-110">This tutorial shows you how.</span></span>


## <a name="introduction"></a><span data-ttu-id="a2fa2-111">Úvod</span><span class="sxs-lookup"><span data-stu-id="a2fa2-111">Introduction</span></span>

<span data-ttu-id="a2fa2-112">Ukládání do mezipaměti techniky kontrolován [ukládání dat do mezipaměti ovládacím prvkem ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) a [ukládání dat do mezipaměti v architektuře](caching-data-in-the-architecture-cs.md) kurzy použít časovou synchronizací vypršení platnosti vyřazení dat z mezipaměti po zadanou období.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-112">The caching techniques examined in the [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) and [Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) tutorials used a time-based expiry to evict the data from the cache after a specified period.</span></span> <span data-ttu-id="a2fa2-113">Tento přístup je nejjednodušší způsob, jak vyvážit zvýšení výkonu ukládání do mezipaměti proti neaktuálnost data.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-113">This approach is the simplest way to balance the performance gains of caching against data staleness.</span></span> <span data-ttu-id="a2fa2-114">Výběrem doba uplynutí *x* sekund, vývojář stránky concedes mohli využívat výhody výkonu ukládání do mezipaměti pouze *x* sekund, ale můžete snadno rest, že její data nikdy budou zastaralá déle, než maximální z *x* sekund.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-114">By selecting a time expiry of *x* seconds, a page developer concedes to enjoy the performance benefits of caching for only *x* seconds, but can rest easy that her data will never be stale longer than a maximum of *x* seconds.</span></span> <span data-ttu-id="a2fa2-115">Samozřejmě pro statická data *x* je možné rozšířit na životního cyklu webové aplikace, jako je zkontrolován v [ukládání dat do mezipaměti při spuštění aplikace](caching-data-at-application-startup-cs.md) kurzu.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-115">Of course, for static data, *x* can be extended to the lifetime of the web application, as was examined in the [Caching Data at Application Startup](caching-data-at-application-startup-cs.md) tutorial.</span></span>

<span data-ttu-id="a2fa2-116">Při ukládání do mezipaměti dat z databáze, podle času vypršení platnosti je často vybrán pro jeho snadnější použití ale často je nedostatečné řešení.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-116">When caching database data, a time-based expiry is often chosen for its ease of use but is frequently an inadequate solution.</span></span> <span data-ttu-id="a2fa2-117">V ideálním případě databázových dat by zůstat v mezipaměti, dokud se změnila podkladová data v databázi. teprve pak bude vyloučeno mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-117">Ideally, the database data would remain cached until the underlying data has been modified in the database; only then would the cache be evicted.</span></span> <span data-ttu-id="a2fa2-118">Tento přístup se maximalizuje výkon výhody ukládání do mezipaměti a minimalizuje dobu trvání zastaralá data.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-118">This approach maximizes the performance benefits of caching and minimizes the duration of stale data.</span></span> <span data-ttu-id="a2fa2-119">Aby mohli využívat tyto výhody existuje musí však být některé systému, který zná při podkladová data databáze byl změněn a vyloučí odpovídající položky z mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-119">However, in order to enjoy these benefits there must be some system in place that knows when the underlying database data has been modified and evicts the corresponding items from the cache.</span></span> <span data-ttu-id="a2fa2-120">Před ASP.NET 2.0 tým byl zodpovědný za implementace tohoto systému vývojářům stránky.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-120">Prior to ASP.NET 2.0, page developers were responsible for implementing this system.</span></span>

<span data-ttu-id="a2fa2-121">Poskytuje technologie ASP.NET 2.0 [ `SqlCacheDependency` třídy](https://msdn.microsoft.com/library/system.web.caching.sqlcachedependency.aspx) a potřebnou infrastrukturu k určení, kdy došlo ke změně v databázi tak, aby odpovídající položky v mezipaměti může být vyřazena.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-121">ASP.NET 2.0 provides a [`SqlCacheDependency` class](https://msdn.microsoft.com/library/system.web.caching.sqlcachedependency.aspx) and the necessary infrastructure to determine when a change has occurred in the database so that the corresponding cached items can be evicted.</span></span> <span data-ttu-id="a2fa2-122">Existují dvě techniky pro stanovení změny podkladových dat: oznámení a dotazování.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-122">There are two techniques for determining when the underlying data has changed: notification and polling.</span></span> <span data-ttu-id="a2fa2-123">Po diskuze o rozdílech mezi oznámení a dotazování, vytvoříme infrastruktury potřebné pro podporu cyklického dotazování a pak prozkoumejte, jak používat `SqlCacheDependency` třída v deklarativní a programová scénáře.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-123">After discussing the differences between notification and polling, we'll create the infrastructure necessary to support polling and then explore how to use the `SqlCacheDependency` class in declarative and programmatically scenarios.</span></span>

## <a name="understanding-notification-and-polling"></a><span data-ttu-id="a2fa2-124">Principy upozornění a dotazování</span><span class="sxs-lookup"><span data-stu-id="a2fa2-124">Understanding Notification and Polling</span></span>

<span data-ttu-id="a2fa2-125">Existují dvě techniky, které lze použít k určení, kdy byla změněna data v databázi: oznámení a dotazování.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-125">There are two techniques that can be used to determine when the data in a database has been modified: notification and polling.</span></span> <span data-ttu-id="a2fa2-126">S oznámením databáze automaticky upozorní na modul runtime ASP.NET výsledky speciální dotaz byl změněn od naposledy spustil dotaz, v tomto okamžiku se vyřadí položek v mezipaměti přidruženou k dotazu.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-126">With notification, the database automatically alerts the ASP.NET runtime when the results of a particular query have been changed since the query was last executed, at which point the cached items associated with the query are evicted.</span></span> <span data-ttu-id="a2fa2-127">Pomocí cyklického dotazování, serveru databáze uchovává informace o když mají určité tabulky poslední aktualizace.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-127">With polling, the database server maintains information about when particular tables have last been updated.</span></span> <span data-ttu-id="a2fa2-128">Modul runtime ASP.NET pravidelně se dotazuje databáze, kterou chcete zkontrolovat, co jste změnili tabulky vzhledem k tomu, že jste zadali do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-128">The ASP.NET runtime periodically polls the database to check what tables have changed since they were entered into the cache.</span></span> <span data-ttu-id="a2fa2-129">Tyto tabulky, jejichž data se změnila mají jejich položky mezipaměti přidružené k vyloučení.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-129">Those tables whose data has been modified have their associated cache items evicted.</span></span>

<span data-ttu-id="a2fa2-130">Možnost oznámení vyžaduje méně nastavení než dotazování a je podrobnější, protože sleduje změny na úrovni dotazů, spíše než na úrovni tabulky.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-130">The notification option requires less setup than polling and is more granular since it tracks changes at the query level rather than at the table level.</span></span> <span data-ttu-id="a2fa2-131">Bohužel oznámení jsou k dispozici pouze v úplné edice Microsoft SQL Server 2005 (tedy ne Express edice).</span><span class="sxs-lookup"><span data-stu-id="a2fa2-131">Unfortunately, notifications are only available in the full editions of Microsoft SQL Server 2005 (i.e., the non-Express editions).</span></span> <span data-ttu-id="a2fa2-132">Ale možnost dotazování použít pro všechny verze systému Microsoft SQL serveru z 7.0 pro 2005.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-132">However, the polling option can be used for all versions of Microsoft SQL Server from 7.0 to 2005.</span></span> <span data-ttu-id="a2fa2-133">Protože těchto kurzů použijte edice Express systému SQL Server 2005, se zaměříme na vytváření a použití možnosti dotazování.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-133">Since these tutorials use the Express edition of SQL Server 2005, we will focus on setting up and using the polling option.</span></span> <span data-ttu-id="a2fa2-134">Na konci tohoto kurzu pro další prostředky na možnostech oznámení systému SQL Server 2005 s najdete v části Další materiály.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-134">Consult the Further Reading section at the end of this tutorial for further resources on SQL Server 2005 s notification capabilities.</span></span>

<span data-ttu-id="a2fa2-135">Pomocí cyklického dotazování, je třeba nastavit databázi zahrnout tabulku s názvem `AspNet_SqlCacheTablesForChangeNotification` , který má tři sloupce – `tableName`, `notificationCreated`, a `changeId`.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-135">With polling, the database must be configured to include a table named `AspNet_SqlCacheTablesForChangeNotification` that has three columns - `tableName`, `notificationCreated`, and `changeId`.</span></span> <span data-ttu-id="a2fa2-136">Tato tabulka obsahuje řádek pro každou tabulku, která obsahuje data, která může být nutné použít v závislosti mezipaměti SQL ve webové aplikaci.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-136">This table contains a row for each table that has data that might need to be used in a SQL cache dependency in the web application.</span></span> <span data-ttu-id="a2fa2-137">`tableName` Sloupci Určuje název tabulky při `notificationCreated` Určuje datum a čas přidání řádku do tabulky.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-137">The `tableName` column specifies the name of the table while `notificationCreated` indicates the date and time the row was added to the table.</span></span> <span data-ttu-id="a2fa2-138">`changeId` Sloupec je typu `int` a má počáteční hodnotu 0.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-138">The `changeId` column is of type `int` and has an initial value of 0.</span></span> <span data-ttu-id="a2fa2-139">Jeho hodnota se zvyšuje s každou změnu do tabulky.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-139">Its value is incremented with each modification to the table.</span></span>

<span data-ttu-id="a2fa2-140">Kromě `AspNet_SqlCacheTablesForChangeNotification` tabulky databáze také musí obsahovat aktivační události na každé z tabulek, které se mohou objevit v závislosti mezipaměti SQL.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-140">In addition to the `AspNet_SqlCacheTablesForChangeNotification` table, the database also needs to include triggers on each of the tables that may appear in a SQL cache dependency.</span></span> <span data-ttu-id="a2fa2-141">Tyto triggery jsou provedeny vždy, když je řádek vložit, aktualizovat ani odstranit a zvýšit v tabulce s `changeId` hodnota v `AspNet_SqlCacheTablesForChangeNotification`.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-141">These triggers are executed whenever a row is inserted, updated, or deleted and increment the table s `changeId` value in `AspNet_SqlCacheTablesForChangeNotification`.</span></span>

<span data-ttu-id="a2fa2-142">Modul runtime ASP.NET sleduje aktuální `changeId` pro tabulku při ukládání do mezipaměti pomocí dat `SqlCacheDependency` objektu.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-142">The ASP.NET runtime tracks the current `changeId` for a table when caching data using a `SqlCacheDependency` object.</span></span> <span data-ttu-id="a2fa2-143">Databáze se pravidelně kontroluje a jakékoli `SqlCacheDependency` objekty, jejichž `changeId` liší od hodnot v databázi se vyřadí od lišící se `changeId` hodnota značí, že došlo ke změně v tabulce od data ukládá do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-143">The database is periodically checked and any `SqlCacheDependency` objects whose `changeId` differs from the value in the database are evicted since a differing `changeId` value indicates that there has been a change to the table since the data was cached.</span></span>

## <a name="step-1-exploring-theaspnetregsqlexecommand-line-program"></a><span data-ttu-id="a2fa2-144">Krok 1: Zkoumání`aspnet_regsql.exe`Program příkazového řádku</span><span class="sxs-lookup"><span data-stu-id="a2fa2-144">Step 1: Exploring the`aspnet_regsql.exe`Command Line Program</span></span>

<span data-ttu-id="a2fa2-145">S přístupem dotazování databáze musí být nastavena tak, aby obsahovala infrastruktury popsané výše: předdefinované tabulce (`AspNet_SqlCacheTablesForChangeNotification`), několik uložených procedur a aktivačních událostí na všech tabulek, které lze použít v závislosti mezipaměti SQL na webu aplikace.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-145">With the polling approach the database must be setup to contain the infrastructure described above: a predefined table (`AspNet_SqlCacheTablesForChangeNotification`), a handful of stored procedures, and triggers on each of the tables that may be used in SQL cache dependencies in the web application.</span></span> <span data-ttu-id="a2fa2-146">Tyto tabulky, uložených procedur a aktivačních událostí je možné vytvářet přes příkazový řádek programu `aspnet_regsql.exe`, která byla nalezena v `$WINDOWS$\Microsoft.NET\Framework\version` složky.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-146">These tables, stored procedures, and triggers can be created through the command line program `aspnet_regsql.exe`, which is found in the `$WINDOWS$\Microsoft.NET\Framework\version` folder.</span></span> <span data-ttu-id="a2fa2-147">Chcete-li vytvořit `AspNet_SqlCacheTablesForChangeNotification` tabulky a přidružené uložených procedur, spusťte následující příkaz z příkazového řádku:</span><span class="sxs-lookup"><span data-stu-id="a2fa2-147">To create the `AspNet_SqlCacheTablesForChangeNotification` table and associated stored procedures, run the following from the command line:</span></span>


[!code-console[Main](using-sql-cache-dependencies-cs/samples/sample1.cmd)]

> [!NOTE]
> <span data-ttu-id="a2fa2-148">Aby se tyto příkazy přihlášení k zadané databázi musí být v [ `db_securityadmin` ](https://msdn.microsoft.com/library/ms188685.aspx) a [ `db_ddladmin` ](https://msdn.microsoft.com/library/ms190667.aspx) role.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-148">To execute these commands the specified database login must be in the [`db_securityadmin`](https://msdn.microsoft.com/library/ms188685.aspx) and [`db_ddladmin`](https://msdn.microsoft.com/library/ms190667.aspx) roles.</span></span> <span data-ttu-id="a2fa2-149">Prozkoumat odeslán do databáze pomocí jazyka T-SQL `aspnet_regsql.exe` příkazového řádku programu, přečtěte si [tomto blogu](http://scottonwriting.net/sowblog/posts/10709.aspx).</span><span class="sxs-lookup"><span data-stu-id="a2fa2-149">To examine the T-SQL sent to the database by the `aspnet_regsql.exe` command line program, refer to [this blog entry](http://scottonwriting.net/sowblog/posts/10709.aspx).</span></span>


<span data-ttu-id="a2fa2-150">Například chcete-li přidat infrastrukturu pro dotazování databáze Microsoft SQL Server s názvem `pubs` na databázovém serveru s názvem `ScottsServer` používáte ověřování Windows, přejděte do příslušného adresáře a z příkazového řádku, zadejte:</span><span class="sxs-lookup"><span data-stu-id="a2fa2-150">For example, to add the infrastructure for polling to a Microsoft SQL Server database named `pubs` on a database server named `ScottsServer` using Windows Authentication, navigate to the appropriate directory and, from the command line, enter:</span></span>


[!code-console[Main](using-sql-cache-dependencies-cs/samples/sample2.cmd)]

<span data-ttu-id="a2fa2-151">Po přidání infrastruktury na úrovni databáze, potřebujeme přidat aktivační události na těchto tabulkách, které se použijí v závislosti mezipaměti SQL.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-151">After the database-level infrastructure has been added, we need to add the triggers to those tables that will be used in SQL cache dependencies.</span></span> <span data-ttu-id="a2fa2-152">Použít `aspnet_regsql.exe` příkazového řádku program znovu, ale zadat pomocí názvu tabulky `-t` přepnout a místo `-ed` přepnout použití `-et`, takto:</span><span class="sxs-lookup"><span data-stu-id="a2fa2-152">Use the `aspnet_regsql.exe` command line program again, but specify the table name using the `-t` switch and instead of using the `-ed` switch use `-et`, like so:</span></span>


[!code-html[Main](using-sql-cache-dependencies-cs/samples/sample3.html)]

<span data-ttu-id="a2fa2-153">Chcete-li přidat aktivační události pro `authors` a `titles` tabulky na `pubs` databáze na `ScottsServer`, použijte:</span><span class="sxs-lookup"><span data-stu-id="a2fa2-153">To add the triggers to the `authors` and `titles` tables on the `pubs` database on `ScottsServer`, use:</span></span>


[!code-console[Main](using-sql-cache-dependencies-cs/samples/sample4.cmd)]

<span data-ttu-id="a2fa2-154">Pro účely tohoto kurzu přidat aktivační události na `Products`, `Categories`, a `Suppliers` tabulky.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-154">For this tutorial add the triggers to the `Products`, `Categories`, and `Suppliers` tables.</span></span> <span data-ttu-id="a2fa2-155">Podíváme se na konkrétní příkazový řádek syntaxe v kroku 3.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-155">We'll look at the particular command line syntax in Step 3.</span></span>

## <a name="step-2-referencing-a-microsoft-sql-server-2005-express-edition-database-inappdata"></a><span data-ttu-id="a2fa2-156">Krok 2: Odkazování na databáze Microsoft SQL Server 2005 Express Edition v`App_Data`</span><span class="sxs-lookup"><span data-stu-id="a2fa2-156">Step 2: Referencing a Microsoft SQL Server 2005 Express Edition Database in`App_Data`</span></span>

<span data-ttu-id="a2fa2-157">`aspnet_regsql.exe` Příkazového řádku program vyžaduje název databáze a serveru chcete-li přidat infrastruktury potřebné cyklického dotazování.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-157">The `aspnet_regsql.exe` command line program requires the database and server name in order to add the necessary polling infrastructure.</span></span> <span data-ttu-id="a2fa2-158">Jaký je název databáze a serveru pro databázi Microsoft SQL Server 2005 Express, který se nachází v, ale `App_Data` složky?</span><span class="sxs-lookup"><span data-stu-id="a2fa2-158">But what is the database and server name for a Microsoft SQL Server 2005 Express database that resides in the `App_Data` folder?</span></span> <span data-ttu-id="a2fa2-159">Místo zjistit, jaké jsou názvy databáze a serveru, můžu ve zjištěno, že je nejjednodušším přístupem připojit databázi k `localhost\SQLExpress` databáze instance a data s využitím přejmenujte [SQL Server Management Studio](https://msdn.microsoft.com/library/ms174173.aspx).</span><span class="sxs-lookup"><span data-stu-id="a2fa2-159">Rather than having to discover what the database and server names are, I ve found that the simplest approach is to attach the database to the `localhost\SQLExpress` database instance and rename the data using [SQL Server Management Studio](https://msdn.microsoft.com/library/ms174173.aspx).</span></span> <span data-ttu-id="a2fa2-160">Pokud nemáte plné verze SQL Server 2005 na vašem počítači nainstalovaný, pravděpodobně již máte v počítači nainstalovaný SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-160">If you have one of the full versions of SQL Server 2005 installed on your machine, then you likely already have SQL Server Management Studio installed on your computer.</span></span> <span data-ttu-id="a2fa2-161">Pokud máte jenom edice Express, si můžete stáhnout bezplatnou [aktualizace Microsoft SQL Server Management Studio Express Edition](https://www.microsoft.com/downloads/details.aspx?displaylang=en&amp;FamilyID=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796).</span><span class="sxs-lookup"><span data-stu-id="a2fa2-161">If you only have the Express edition, you can download the free [Microsoft SQL Server Management Studio Express Edition](https://www.microsoft.com/downloads/details.aspx?displaylang=en&amp;FamilyID=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796).</span></span>

<span data-ttu-id="a2fa2-162">Začněte tím, že zavření sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-162">Start by closing Visual Studio.</span></span> <span data-ttu-id="a2fa2-163">Dále otevřete SQL Server Management Studio a zvolte možnost pro připojení k `localhost\SQLExpress` serveru pomocí ověřování Windows.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-163">Next, open SQL Server Management Studio and choose to connect to the `localhost\SQLExpress` server using Windows Authentication.</span></span>


![Připojení k serveru localhost\SQLExpress](using-sql-cache-dependencies-cs/_static/image1.gif)

<span data-ttu-id="a2fa2-165">**Obrázek 1**: připojení k `localhost\SQLExpress` serveru</span><span class="sxs-lookup"><span data-stu-id="a2fa2-165">**Figure 1**: Attach to the `localhost\SQLExpress` Server</span></span>


<span data-ttu-id="a2fa2-166">Po připojení k serveru, bude zobrazit server Management Studio a obsahovat podsložky pro databáze, zabezpečení a tak dále.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-166">After connecting to the server, Management Studio will show the server and have subfolders for the databases, security, and so forth.</span></span> <span data-ttu-id="a2fa2-167">Klikněte pravým tlačítkem na složku databází a zvolte možnost připojení.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-167">Right-click on the Databases folder and choose the Attach option.</span></span> <span data-ttu-id="a2fa2-168">Tím se otevře dialogové okno Připojit databáze (viz obrázek 2).</span><span class="sxs-lookup"><span data-stu-id="a2fa2-168">This will bring up the Attach Databases dialog box (see Figure 2).</span></span> <span data-ttu-id="a2fa2-169">Klikněte na tlačítko Přidat a vyberte `NORTHWND.MDF` složka databáze ve vaší webové aplikace s `App_Data` složky.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-169">Click the Add button and select the `NORTHWND.MDF` database folder in your web application s `App_Data` folder.</span></span>


<span data-ttu-id="a2fa2-170">[![Připojte NORTHWND. MDF databáze ze složky App_Data](using-sql-cache-dependencies-cs/_static/image2.gif)](using-sql-cache-dependencies-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-170">[![Attach the NORTHWND.MDF Database from the App_Data Folder](using-sql-cache-dependencies-cs/_static/image2.gif)](using-sql-cache-dependencies-cs/_static/image1.png)</span></span>

<span data-ttu-id="a2fa2-171">**Obrázek 2**: připojit `NORTHWND.MDF` databáze z `App_Data` složky ([kliknutím ji zobrazíte obrázek v plné velikosti](using-sql-cache-dependencies-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="a2fa2-171">**Figure 2**: Attach the `NORTHWND.MDF` Database from the `App_Data` Folder ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image2.png))</span></span>


<span data-ttu-id="a2fa2-172">Tím přidáte databáze ke složce databáze.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-172">This will add the database to the Databases folder.</span></span> <span data-ttu-id="a2fa2-173">Název databáze může být úplná cesta k souboru databáze nebo úplnou cestu zvolený se přidá [GUID](http://en.wikipedia.org/wiki/Globally_Unique_Identifier).</span><span class="sxs-lookup"><span data-stu-id="a2fa2-173">The database name might be the full path to the database file or the full path prepended with a [GUID](http://en.wikipedia.org/wiki/Globally_Unique_Identifier).</span></span> <span data-ttu-id="a2fa2-174">Aby se nemusela zadejte tento název zdlouhavé databáze při použití aspnet\_regsql.exe nástroj příkazového řádku, přejmenovat databázi pro více lidských – popisný název kliknutím pravým tlačítkem na databázi jenom připojit a zvolíte přejmenovat.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-174">To avoid having to type in this lengthy database name when using the aspnet\_regsql.exe command line tool, rename the database to a more human-friendly name by right-clicking on database just attached and choosing Rename.</span></span> <span data-ttu-id="a2fa2-175">Můžu odebrat přejmenován na DataTutorials Moje databáze.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-175">I ve renamed my database to DataTutorials .</span></span>


![Přejmenujte připojené databázi na lidské popisný název](using-sql-cache-dependencies-cs/_static/image3.gif)

<span data-ttu-id="a2fa2-177">**Obrázek 3**: přejmenování připojené databáze více lidských – popisný název</span><span class="sxs-lookup"><span data-stu-id="a2fa2-177">**Figure 3**: Rename the Attached Database to a More Human-Friendly Name</span></span>


## <a name="step-3-adding-the-polling-infrastructure-to-the-northwind-database"></a><span data-ttu-id="a2fa2-178">Krok 3: Přidání dotazování infrastrukturu k databázi Northwind</span><span class="sxs-lookup"><span data-stu-id="a2fa2-178">Step 3: Adding the Polling Infrastructure to the Northwind Database</span></span>

<span data-ttu-id="a2fa2-179">Teď, když nám připojili `NORTHWND.MDF` databáze z `App_Data` složky, můžeme znovu připraven k přidání infrastruktury cyklického dotazování.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-179">Now that we have attached the `NORTHWND.MDF` database from the `App_Data` folder, we re ready to add the polling infrastructure.</span></span> <span data-ttu-id="a2fa2-180">Za předpokladu, že jste již přejmenovali databáze do DataTutorials, spusťte následující čtyři příkazy:</span><span class="sxs-lookup"><span data-stu-id="a2fa2-180">Assuming that you ve renamed the database to DataTutorials, run the following four commands:</span></span>


[!code-console[Main](using-sql-cache-dependencies-cs/samples/sample5.cmd)]

<span data-ttu-id="a2fa2-181">Po spuštění těchto čtyř příkazů, klikněte pravým tlačítkem na název databáze v aplikaci Management Studio, přejděte na podnabídky úkoly a zvolte Odpojit.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-181">After running these four commands, right-click on the database name in Management Studio, go to the Tasks submenu, and choose Detach.</span></span> <span data-ttu-id="a2fa2-182">Potom zavřete Management Studio a znovu otevřete Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-182">Then close Management Studio and reopen Visual Studio.</span></span>

<span data-ttu-id="a2fa2-183">Jakmile sada Visual Studio znovu otevřel, přejít k podrobnostem databáze prostřednictvím Průzkumníka serveru.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-183">Once Visual Studio has reopened, drill into the database through the Server Explorer.</span></span> <span data-ttu-id="a2fa2-184">Poznámka: Nová tabulka (`AspNet_SqlCacheTablesForChangeNotification`), nový uložených procedur a aktivačních událostí na `Products`, `Categories`, a `Suppliers` tabulky.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-184">Note the new table (`AspNet_SqlCacheTablesForChangeNotification`), the new stored procedures, and the triggers on the `Products`, `Categories`, and `Suppliers` tables.</span></span>


![Databáze nyní obsahuje nezbytné dotazování infrastruktury](using-sql-cache-dependencies-cs/_static/image4.gif)

<span data-ttu-id="a2fa2-186">**Obrázek 4**: databáze nyní obsahuje nezbytné dotazování infrastruktury</span><span class="sxs-lookup"><span data-stu-id="a2fa2-186">**Figure 4**: The Database Now Includes the Necessary Polling Infrastructure</span></span>


## <a name="step-4-configuring-the-polling-service"></a><span data-ttu-id="a2fa2-187">Krok 4: Konfigurace služby cyklického dotazování</span><span class="sxs-lookup"><span data-stu-id="a2fa2-187">Step 4: Configuring the Polling Service</span></span>

<span data-ttu-id="a2fa2-188">Po vytvoření potřebné tabulky, triggery a uložené procedury v databázi, je posledním krokem konfigurace cyklického dotazování služby, která se provádí prostřednictvím `Web.config` zadáním databázi, kterou chcete použít a frekvence cyklického dotazování v milisekundách.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-188">After creating the needed tables, triggers, and stored procedures in the database, the final step is to configure the polling service, which is done through `Web.config` by specifying the databases to use and the polling frequency in milliseconds.</span></span> <span data-ttu-id="a2fa2-189">Následující kód se dotazuje databáze Northwind jednou za sekundu.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-189">The following markup polls the Northwind database once every second.</span></span>


[!code-xml[Main](using-sql-cache-dependencies-cs/samples/sample6.xml)]

<span data-ttu-id="a2fa2-190">`name` Hodnotu `<add>` – element (NorthwindDB) přidruží popisný název s danou databází.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-190">The `name` value in the `<add>` element ( NorthwindDB ) associates a human-readable name with a particular database.</span></span> <span data-ttu-id="a2fa2-191">Při práci s závislosti mezipaměti SQL, potřebujeme k odkazování na název databáze lze tam definovat také v tabulce, které je na základě dat uložených v mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-191">When working with SQL cache dependencies, we'll need to refer to the database name defined here as well as the table that the cached data is based on.</span></span> <span data-ttu-id="a2fa2-192">Uvidíme, jak používat `SqlCacheDependency` třídy programově přidružení závislosti mezipaměti SQL s uložené v mezipaměti dat v kroku 6.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-192">We'll see how to use the `SqlCacheDependency` class to programmatically associate SQL cache dependencies with cached data in Step 6.</span></span>

<span data-ttu-id="a2fa2-193">Po vytvoření závislosti mezipaměti SQL systému dotazování se připojit k databázím definované v `<databases>` prvky každý `pollTime` milisekund a spustit `AspNet_SqlCachePollingStoredProcedure` uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-193">Once a SQL cache dependency has been established, the polling system will connect to the databases defined in the `<databases>` elements every `pollTime` milliseconds and execute the `AspNet_SqlCachePollingStoredProcedure` stored procedure.</span></span> <span data-ttu-id="a2fa2-194">Tato uložená procedura – byla přidána zpět v kroku 3 pomocí `aspnet_regsql.exe` nástroj příkazového řádku – vrátí `tableName` a `changeId` hodnoty pro každý záznam v `AspNet_SqlCacheTablesForChangeNotification`.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-194">This stored procedure - which was added back in Step 3 using the `aspnet_regsql.exe` command line tool - returns the `tableName` and `changeId` values for each record in `AspNet_SqlCacheTablesForChangeNotification`.</span></span> <span data-ttu-id="a2fa2-195">Zastaralé závislosti mezipaměti SQL se vyřadí z mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-195">Outdated SQL cache dependencies are evicted from the cache.</span></span>

<span data-ttu-id="a2fa2-196">`pollTime` Kompromis mezi výkonem a odolnost dat představuje nastavení.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-196">The `pollTime` setting introduces a tradeoff between performance and data staleness.</span></span> <span data-ttu-id="a2fa2-197">Malá `pollTime` hodnota se zvyšuje počet požadavků na databázi, ale více rychle vyloučí zastaralých dat z mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-197">A small `pollTime` value increases the number of requests to the database, but more quickly evicts stale data from the cache.</span></span> <span data-ttu-id="a2fa2-198">Větší `pollTime` hodnotu snižuje počet požadavků na databázi, ale zvyšuje zpoždění mezi při změně dat back-endu a při vyřazení mezipaměti souvisejících položek.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-198">A larger `pollTime` value reduces the number of database requests, but increases the delay between when the backend data changes and when the related cache items are evicted.</span></span> <span data-ttu-id="a2fa2-199">Naštěstí požadavek databáze provádí jednoduchou uloženou proceduru této s vrací jenom pár řádků z tabulky jednoduché, zjednodušené.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-199">Fortunately, the database request is executing a simple stored procedure that s returning just a few rows from a simple, lightweight table.</span></span> <span data-ttu-id="a2fa2-200">Ale experimentovat s různými `pollTime` hodnoty najít ideální rovnováhu mezi databáze neaktuálnost přístup a data pro vaši aplikaci.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-200">But do experiment with different `pollTime` values to find an ideal balance between database access and data staleness for your application.</span></span> <span data-ttu-id="a2fa2-201">Bude se nejmenší `pollTime` povolená hodnota je 500.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-201">The smallest `pollTime` value allowed is 500.</span></span>

> [!NOTE]
> <span data-ttu-id="a2fa2-202">Výše uvedený příklad poskytuje jedinou `pollTime` hodnota v `<sqlCacheDependency>` element, ale můžete volitelně zadat `pollTime` hodnota v `<add>` elementu.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-202">The above example provides a single `pollTime` value in the `<sqlCacheDependency>` element, but you can optionally specify the `pollTime` value in the `<add>` element.</span></span> <span data-ttu-id="a2fa2-203">To je užitečné, pokud máte více databází a chcete přizpůsobit frekvence cyklického dotazování na databázi.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-203">This is useful if you have multiple databases specified and want to customize the polling frequency per database.</span></span>


## <a name="step-5-declaratively-working-with-sql-cache-dependencies"></a><span data-ttu-id="a2fa2-204">Krok 5: Deklarativně práce s závislosti mezipaměti SQL</span><span class="sxs-lookup"><span data-stu-id="a2fa2-204">Step 5: Declaratively Working with SQL Cache Dependencies</span></span>

<span data-ttu-id="a2fa2-205">V krocích 1 až 4 jsme se podívali na nastavení infrastruktury potřebné databáze a konfigurace systému cyklického dotazování.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-205">In Steps 1 through 4 we looked at how to setup the necessary database infrastructure and configure the polling system.</span></span> <span data-ttu-id="a2fa2-206">Pomocí této infrastruktury na místě jsme teď můžete přidávat položky do datové mezipaměti přidružené závislosti mezipaměti SQL pomocí prostřednictvím kódu programu nebo deklarativní technik.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-206">With this infrastructure in place, we can now add items to the data cache with an associated SQL cache dependency using either programmatic or declarative techniques.</span></span> <span data-ttu-id="a2fa2-207">V tomto kroku prozkoumáme deklarativně práce s závislosti mezipaměti SQL.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-207">In this step we'll examine how to declaratively work with SQL cache dependencies.</span></span> <span data-ttu-id="a2fa2-208">V kroku 6 podíváme na programový přístup.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-208">In Step 6 we'll look at the programmatic approach.</span></span>

<span data-ttu-id="a2fa2-209">[Ukládání dat do mezipaměti ovládacím prvkem ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) kurzu prozkoumali deklarativních funkcí ObjectDataSource ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-209">The [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) tutorial explored the declarative caching capabilities of the ObjectDataSource.</span></span> <span data-ttu-id="a2fa2-210">Jednoduše nastavením `EnableCaching` vlastnost `true` a `CacheDuration` vlastnost některé časový interval, prvku ObjectDataSource automaticky ukládá data vrácená z jeho základní objekt pro zadaný interval.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-210">By simply setting the `EnableCaching` property to `true` and the `CacheDuration` property to some time interval, the ObjectDataSource will automatically cache the data returned from its underlying object for the specified interval.</span></span> <span data-ttu-id="a2fa2-211">Prvku ObjectDataSource můžete také použít jeden nebo více závislostí mezipaměti SQL.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-211">The ObjectDataSource can also use one or more SQL cache dependencies.</span></span>

<span data-ttu-id="a2fa2-212">Abychom si předvedli deklarativně použití závislostí mezipaměti SQL, otevřete `SqlCacheDependencies.aspx` stránku `Caching` složky a GridView přetáhněte z panelu nástrojů do návrháře.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-212">To demonstrate using SQL cache dependencies declaratively, open the `SqlCacheDependencies.aspx` page in the `Caching` folder and drag a GridView from the Toolbox onto the Designer.</span></span> <span data-ttu-id="a2fa2-213">Nastavit prvek GridView s `ID` k `ProductsDeclarative` a z inteligentních značek, vyberte a vytvořte jeho vazbu nového prvku ObjectDataSource s názvem `ProductsDataSourceDeclarative`.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-213">Set the GridView s `ID` to `ProductsDeclarative` and, from its smart tag, choose to bind it to a new ObjectDataSource named `ProductsDataSourceDeclarative`.</span></span>


<span data-ttu-id="a2fa2-214">[![Vytvoření nového prvku ObjectDataSource s názvem ProductsDataSourceDeclarative](using-sql-cache-dependencies-cs/_static/image5.gif)](using-sql-cache-dependencies-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-214">[![Create a New ObjectDataSource Named ProductsDataSourceDeclarative](using-sql-cache-dependencies-cs/_static/image5.gif)](using-sql-cache-dependencies-cs/_static/image3.png)</span></span>

<span data-ttu-id="a2fa2-215">**Obrázek 5**: vytvoření nového prvku ObjectDataSource s názvem `ProductsDataSourceDeclarative` ([kliknutím ji zobrazíte obrázek v plné velikosti](using-sql-cache-dependencies-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="a2fa2-215">**Figure 5**: Create a New ObjectDataSource Named `ProductsDataSourceDeclarative` ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image4.png))</span></span>


<span data-ttu-id="a2fa2-216">Konfigurace ObjectDataSource používat `ProductsBLL` třídy a nastavit rozevíracího seznamu vyberte kartě `GetProducts()`.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-216">Configure the ObjectDataSource to use the `ProductsBLL` class and set the drop-down list in the SELECT tab to `GetProducts()`.</span></span> <span data-ttu-id="a2fa2-217">Na kartě aktualizace, zvolte `UpdateProduct` přetížení se třemi vstupní parametry - `productName`, `unitPrice`, a `productID`.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-217">In the UPDATE tab, choose the `UpdateProduct` overload with three input parameters - `productName`, `unitPrice`, and `productID`.</span></span> <span data-ttu-id="a2fa2-218">Nastavte rozevírací seznamy na (žádný) na kartách INSERT a DELETE.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-218">Set the drop-down lists to (None) in the INSERT and DELETE tabs.</span></span>


<span data-ttu-id="a2fa2-219">[![Použijte přetížení UpdateProduct se třemi vstupní parametry](using-sql-cache-dependencies-cs/_static/image6.gif)](using-sql-cache-dependencies-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-219">[![Use the UpdateProduct Overload with Three Input Parameters](using-sql-cache-dependencies-cs/_static/image6.gif)](using-sql-cache-dependencies-cs/_static/image5.png)</span></span>

<span data-ttu-id="a2fa2-220">**Obrázek 6**: se třemi parametry vstup pomocí přetížení UpdateProduct ([kliknutím ji zobrazíte obrázek v plné velikosti](using-sql-cache-dependencies-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="a2fa2-220">**Figure 6**: Use the UpdateProduct Overload with Three Input Parameters ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image6.png))</span></span>


<span data-ttu-id="a2fa2-221">[![Nastavení rozevíracího seznamu na (žádný) pro vložení a odstranění karty](using-sql-cache-dependencies-cs/_static/image7.gif)](using-sql-cache-dependencies-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-221">[![Set the Drop-Down List to (None) for the INSERT and DELETE Tabs](using-sql-cache-dependencies-cs/_static/image7.gif)](using-sql-cache-dependencies-cs/_static/image7.png)</span></span>

<span data-ttu-id="a2fa2-222">**Obrázek 7**: Nastavte rozevírací seznam na (žádný) pro vložení a odstranění karty ([kliknutím ji zobrazíte obrázek v plné velikosti](using-sql-cache-dependencies-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="a2fa2-222">**Figure 7**: Set the Drop-Down List to (None) for the INSERT and DELETE Tabs ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image8.png))</span></span>


<span data-ttu-id="a2fa2-223">Po dokončení Průvodce nakonfigurovat zdroj dat, sada Visual Studio vytvoří BoundFields a CheckBoxFields v prvku GridView. pro každé datové pole.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-223">After completing the Configure Data Source wizard, Visual Studio will create BoundFields and CheckBoxFields in the GridView for each of the data fields.</span></span> <span data-ttu-id="a2fa2-224">Odebrat všechna pole, ale `ProductName`, `CategoryName`, a `UnitPrice`a tato pole formátu podle svých potřeb.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-224">Remove all fields but `ProductName`, `CategoryName`, and `UnitPrice`, and format these fields as you see fit.</span></span> <span data-ttu-id="a2fa2-225">Z inteligentních značek GridView s zaškrtněte zaškrtávací políčka Povolit stránkování, Povolit řazení a povolit úpravy.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-225">From the GridView s smart tag, check the Enable Paging, Enable Sorting, and Enable Editing checkboxes.</span></span> <span data-ttu-id="a2fa2-226">Visual Studio nastaví ObjectDataSource s `OldValuesParameterFormatString` vlastnost `original_{0}`.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-226">Visual Studio will set the ObjectDataSource s `OldValuesParameterFormatString` property to `original_{0}`.</span></span> <span data-ttu-id="a2fa2-227">Aby funkce úprav GridView s fungovalo správně, buď odeberte tuto vlastnost z deklarativní syntaxe nebo nastavte ji zpět na výchozí hodnotu, zcela `{0}`.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-227">In order for the GridView s edit feature to work properly, either remove this property entirely from the declarative syntax or set it back to its default value, `{0}`.</span></span>

<span data-ttu-id="a2fa2-228">Nakonec přidejte popisek webový ovládací prvek výše GridView a nastavte jeho `ID` vlastnost `ODSEvents` a jeho `EnableViewState` vlastnost `false`.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-228">Finally, add a Label Web control above the GridView and set its `ID` property to `ODSEvents` and its `EnableViewState` property to `false`.</span></span> <span data-ttu-id="a2fa2-229">Po provedení těchto změn kódu s deklarativní stránky s by měl vypadat nějak takto.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-229">After making these changes, your page s declarative markup should look similar to the following.</span></span> <span data-ttu-id="a2fa2-230">Všimněte si, které jsem ve provedli několik aesthetic přizpůsobení GridView pole, které nejsou potřebné, abychom si předvedli funkci závislosti mezipaměti SQL.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-230">Note that I ve made a number of aesthetic customizations to the GridView fields that are not necessary to demonstrate the SQL cache dependency functionality.</span></span>


[!code-aspx[Main](using-sql-cache-dependencies-cs/samples/sample7.aspx)]

<span data-ttu-id="a2fa2-231">Dále vytvořte obslužnou rutinu události pro prvek ObjectDataSource s `Selecting` událostí a v přidejte následující kód:</span><span class="sxs-lookup"><span data-stu-id="a2fa2-231">Next, create an event handler for the ObjectDataSource s `Selecting` event and in it add the following code:</span></span>


[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample8.cs)]

<span data-ttu-id="a2fa2-232">Vzpomeňte si, že ObjectDataSource s `Selecting` události dochází pouze v případě, že načítání dat z jeho základního objektu.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-232">Recall that the ObjectDataSource s `Selecting` event fires only when retrieving data from its underlying object.</span></span> <span data-ttu-id="a2fa2-233">Pokud prvku ObjectDataSource přistupuje k datům z vlastní mezipaměti, není tato událost aktivuje.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-233">If the ObjectDataSource accesses the data from its own cache, this event is not fired.</span></span>

<span data-ttu-id="a2fa2-234">Nyní navštivte tuto stránku prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-234">Now, visit this page through a browser.</span></span> <span data-ttu-id="a2fa2-235">Protože jsme ve ještě provádět žádné ukládání do mezipaměti, pokaždé, když stránku, řazení nebo upravit stránku mřížky by se zobrazit textu, výběr události vyvolané, jak ukazuje obrázek 8.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-235">Since we ve yet to implement any caching, each time you page, sort, or edit the grid the page should display the text, �Selecting event fired, as Figure 8 shows.</span></span>


<span data-ttu-id="a2fa2-236">[![Prvek ObjectDataSource s události Selecting aktivuje vždy, když je stránkování prvku GridView, upravit, nebo seřazeno](using-sql-cache-dependencies-cs/_static/image8.gif)](using-sql-cache-dependencies-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-236">[![The ObjectDataSource s Selecting Event Fires Each Time the GridView is Paged, Edited, or Sorted](using-sql-cache-dependencies-cs/_static/image8.gif)](using-sql-cache-dependencies-cs/_static/image9.png)</span></span>

<span data-ttu-id="a2fa2-237">**Obrázek 8**: prvku ObjectDataSource s `Selecting` událost je aktivována každý čas stránkování prvku GridView, upravovaný nebo seřazeno ([kliknutím ji zobrazíte obrázek v plné velikosti](using-sql-cache-dependencies-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="a2fa2-237">**Figure 8**: The ObjectDataSource s `Selecting` Event Fires Each Time the GridView is Paged, Edited, or Sorted ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image10.png))</span></span>


<span data-ttu-id="a2fa2-238">Jak jsme viděli v [ukládání dat do mezipaměti ovládacím prvkem ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) kurz nastavení `EnableCaching` vlastnost `true` způsobí, že ObjectDataSource pro ukládání do mezipaměti svá data po dobu určeného jeho `CacheDuration` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-238">As we saw in the [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) tutorial, setting the `EnableCaching` property to `true` causes the ObjectDataSource to cache its data for the duration specified by its `CacheDuration` property.</span></span> <span data-ttu-id="a2fa2-239">Prvku ObjectDataSource má také [ `SqlCacheDependency` vlastnost](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.sqlcachedependency.aspx), přidává jeden nebo více závislostí mezipaměti SQL pro data uložená v mezipaměti pomocí vzoru:</span><span class="sxs-lookup"><span data-stu-id="a2fa2-239">The ObjectDataSource also has a [`SqlCacheDependency` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.sqlcachedependency.aspx), which adds one or more SQL cache dependencies to the cached data using the pattern:</span></span>


[!code-css[Main](using-sql-cache-dependencies-cs/samples/sample9.css)]

<span data-ttu-id="a2fa2-240">Kde *databaseName* je název databáze, jak je uvedeno v `name` atribut `<add>` prvek `Web.config`, a *tableName* je název databázové tabulky.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-240">Where *databaseName* is the name of the database as specified in the `name` attribute of the `<add>` element in `Web.config`, and *tableName* is the name of the database table.</span></span> <span data-ttu-id="a2fa2-241">Například k vytvoření ObjectDataSource, který po neomezenou dobu ukládá data do mezipaměti na základě závislosti mezipaměti SQL proti Northwind s `Products` tabulky, nastavte ObjectDataSource s `EnableCaching` vlastnost `true` a jeho `SqlCacheDependency` vlastnost NorthwindDB:Products.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-241">For example, to create an ObjectDataSource that caches data indefinitely based on a SQL cache dependency against the Northwind s `Products` table, set the ObjectDataSource s `EnableCaching` property to `true` and its `SqlCacheDependency` property to NorthwindDB:Products .</span></span>

> [!NOTE]
> <span data-ttu-id="a2fa2-242">Můžete použít závislosti mezipaměti SQL *a* vypršení platnosti podle času nastavením `EnableCaching` k `true`, `CacheDuration` časový interval a `SqlCacheDependency` na názvy databáze a tabulky.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-242">You can use a SQL cache dependency *and* a time-based expiry by setting `EnableCaching` to `true`, `CacheDuration` to the time interval, and `SqlCacheDependency` to the database and table name(s).</span></span> <span data-ttu-id="a2fa2-243">Prvku ObjectDataSource vyřazení svá data po dosažení konce platnosti podle času, nebo když systém dotazování poznámky, že podkladová data databáze změnila, podle toho, co nastane dřív.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-243">The ObjectDataSource will evict its data when the time-based expiry is reached or when the polling system notes that the underlying database data has changed, whichever happens first.</span></span>


<span data-ttu-id="a2fa2-244">V prvku GridView `SqlCacheDependencies.aspx` zobrazí data ze dvou tabulek - `Products` a `Categories` (produkt s `CategoryName` prostřednictvím se načítají pole `JOIN` na `Categories`).</span><span class="sxs-lookup"><span data-stu-id="a2fa2-244">The GridView in `SqlCacheDependencies.aspx` displays data from two tables - `Products` and `Categories` (the product s `CategoryName` field is retrieved via a `JOIN` on `Categories`).</span></span> <span data-ttu-id="a2fa2-245">Proto budeme chtít zadat dvě závislosti mezipaměti SQL: NorthwindDB:Products; NorthwindDB:Categories.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-245">Therefore, we want to specify two SQL cache dependencies: NorthwindDB:Products;NorthwindDB:Categories .</span></span>


<span data-ttu-id="a2fa2-246">[![Konfigurace ObjectDataSource pro podporu ukládání do mezipaměti použití závislostí mezipaměti SQL na produkty a kategorie](using-sql-cache-dependencies-cs/_static/image9.gif)](using-sql-cache-dependencies-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-246">[![Configure the ObjectDataSource to Support Caching Using SQL Cache Dependencies on Products and Categories](using-sql-cache-dependencies-cs/_static/image9.gif)](using-sql-cache-dependencies-cs/_static/image11.png)</span></span>

<span data-ttu-id="a2fa2-247">**Obrázek 9**: Konfigurace ObjectDataSource pro podporu ukládání do mezipaměti pomocí závislosti mezipaměti SQL na `Products` a `Categories` ([kliknutím ji zobrazíte obrázek v plné velikosti](using-sql-cache-dependencies-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="a2fa2-247">**Figure 9**: Configure the ObjectDataSource to Support Caching Using SQL Cache Dependencies on `Products` and `Categories` ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image12.png))</span></span>


<span data-ttu-id="a2fa2-248">Po dokončení konfigurace ObjectDataSource pro podporu ukládání do mezipaměti, otevírat stránku prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-248">After configuring the ObjectDataSource to support caching, revisit the page through a browser.</span></span> <span data-ttu-id="a2fa2-249">Znovu aktivuje události Selecting text by se měla objevit při první návštěvě stránky, ale by měla zmizet po stránkování, řazení nebo kliknutím na tlačítko Upravit nebo zrušit.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-249">Again, the text �Selecting event fired should appear on the first page visit, but should go away when paging, sorting, or clicking the Edit or Cancel buttons.</span></span> <span data-ttu-id="a2fa2-250">Důvodem je, že po načtení dat do mezipaměti s ObjectDataSource existuje zůstává až `Products` nebo `Categories` dojde k úpravě tabulky nebo data se aktualizují pomocí prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-250">This is because after the data is loaded into the ObjectDataSource s cache, it remains there until the `Products` or `Categories` tables are modified or the data is updated through the GridView.</span></span>

<span data-ttu-id="a2fa2-251">Po vyvolání stránkování mřížky a poznamenat chybějící události Selecting text, otevřete nové okno prohlížeče a přejděte na kurz základy v úpravy, vložení a odstranění oddílu (`~/EditInsertDelete/Basics.aspx`).</span><span class="sxs-lookup"><span data-stu-id="a2fa2-251">After paging through the grid and noting the lack of the �Selecting event fired text, open a new browser window and navigate to the Basics tutorial in the Editing, Inserting, and Deleting section (`~/EditInsertDelete/Basics.aspx`).</span></span> <span data-ttu-id="a2fa2-252">Aktualizujte název nebo cena produktu.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-252">Update the name or price of a product.</span></span> <span data-ttu-id="a2fa2-253">Pak z první okna prohlížeče, zobrazte na jinou stránku dat, seřazení mřížky nebo klikněte na tlačítko Upravit řádek s.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-253">Then, from to the first browser window, view a different page of data, sort the grid, or click a row s Edit button.</span></span> <span data-ttu-id="a2fa2-254">Tentokrát, aktivuje události Selecting by měl znovu, jako jsou databáze, které byla data změny (viz obrázek 10).</span><span class="sxs-lookup"><span data-stu-id="a2fa2-254">This time, the �Selecting event fired should reappear, as the underlying database data has been modified (see Figure 10).</span></span> <span data-ttu-id="a2fa2-255">Pokud text se nezobrazí, chvíli počkejte a zkuste to znovu.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-255">If the text does not appear, wait a few moments and try again.</span></span> <span data-ttu-id="a2fa2-256">Mějte na paměti, že dotazování služby kontroluje změny `Products` tabulky každý `pollTime` milisekund, takže dochází ke zpoždění mezi při aktualizaci podkladových dat a pokud dojde k jejich vyřazení dat uložených v mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-256">Remember that the polling service is checking for changes to the `Products` table every `pollTime` milliseconds, so there is a delay between when the underlying data is updated and when the cached data is evicted.</span></span>


<span data-ttu-id="a2fa2-257">[![Změna tabulky produktů vyloučí Data produktu uložená v mezipaměti](using-sql-cache-dependencies-cs/_static/image10.gif)](using-sql-cache-dependencies-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-257">[![Modifying the Products Table Evicts the Cached Product Data](using-sql-cache-dependencies-cs/_static/image10.gif)](using-sql-cache-dependencies-cs/_static/image13.png)</span></span>

<span data-ttu-id="a2fa2-258">**Obrázek 10**: úprava tabulky produktů vyloučí produktu Data v mezipaměti ([kliknutím ji zobrazíte obrázek v plné velikosti](using-sql-cache-dependencies-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="a2fa2-258">**Figure 10**: Modifying the Products Table Evicts the Cached Product Data ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image14.png))</span></span>


## <a name="step-6-programmatically-working-with-thesqlcachedependencyclass"></a><span data-ttu-id="a2fa2-259">Krok 6: Programově pracovat`SqlCacheDependency`třídy</span><span class="sxs-lookup"><span data-stu-id="a2fa2-259">Step 6: Programmatically Working with the`SqlCacheDependency`Class</span></span>

<span data-ttu-id="a2fa2-260">[Ukládání dat do mezipaměti v architektuře](caching-data-in-the-architecture-cs.md) kurzu podívali se na výhody používání samostatné vrstvě ukládání do mezipaměti v architektuře, která na rozdíl od pevné párování ukládání do mezipaměti ovládacím prvkem ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-260">The [Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) tutorial looked at the benefits of using a separate Caching Layer in the architecture as opposed to tightly coupling the caching with the ObjectDataSource.</span></span> <span data-ttu-id="a2fa2-261">V tomto kurzu jsme vytvořili `ProductsCL` třídy k předvedení programově práci s mezipamětí data.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-261">In that tutorial we created a `ProductsCL` class to demonstrate programmatically working with the data cache.</span></span> <span data-ttu-id="a2fa2-262">Chcete-li využívají závislosti mezipaměti SQL ve vrstvě ukládání do mezipaměti, použijte `SqlCacheDependency` třídy.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-262">To utilize SQL cache dependencies in the Caching Layer, use the `SqlCacheDependency` class.</span></span>

<span data-ttu-id="a2fa2-263">Systém cyklického dotazování `SqlCacheDependency` objekt musí být spojeny s konkrétní dvojici databázi a tabulku.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-263">With the polling system, a `SqlCacheDependency` object must be associated with a particular database and table pair.</span></span> <span data-ttu-id="a2fa2-264">Následující kód například vytvoří `SqlCacheDependency` objektu podle databázi Northwind s `Products` tabulky:</span><span class="sxs-lookup"><span data-stu-id="a2fa2-264">The following code, for example, creates a `SqlCacheDependency` object based on the Northwind database s `Products` table:</span></span>


[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample10.cs)]

<span data-ttu-id="a2fa2-265">Dva vstupní parametry pro `SqlCacheDependency` konstruktor s jsou názvy databáze a tabulky v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-265">The two input parameters to the `SqlCacheDependency` s constructor are the database and table names, respectively.</span></span> <span data-ttu-id="a2fa2-266">Třeba v prvku ObjectDataSource s `SqlCacheDependency` vlastnost, použít název databáze je stejná jako hodnota určená v `name` atribut `<add>` prvek `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-266">Like with the ObjectDataSource s `SqlCacheDependency` property, the database name used is the same as the value specified in the `name` attribute of the `<add>` element in `Web.config`.</span></span> <span data-ttu-id="a2fa2-267">Název tabulky je skutečný název databázové tabulky.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-267">The table name is the actual name of the database table.</span></span>

<span data-ttu-id="a2fa2-268">Přidružení `SqlCacheDependency` s položkou přidány do datové mezipaměti, použijte jednu z `Insert` přetížení metod, které přijímá závislost.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-268">To associate a `SqlCacheDependency` with an item added to the data cache, use one of the `Insert` method overloads that accepts a dependency.</span></span> <span data-ttu-id="a2fa2-269">Následující kód přidává *hodnotu* do mezipaměti dat na neomezenou dobu, ale přidruží ji k `SqlCacheDependency` na `Products` tabulky.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-269">The following code adds *value* to the data cache for an indefinite duration, but associates it with a `SqlCacheDependency` on the `Products` table.</span></span> <span data-ttu-id="a2fa2-270">Stručně řečeno *hodnotu* zůstane v mezipaměti, dokud je vyřazena z důvodu omezení paměti, nebo protože dotazování systém zjistil, že `Products` tabulka změnila od uložení do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-270">In short, *value* will remain in the cache until it is evicted due to memory constraints or because the polling system has detected that the `Products` table has changed since it was cached.</span></span>


[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample11.cs)]

<span data-ttu-id="a2fa2-271">Ukládání do mezipaměti vrstvu s `ProductsCL` třídy aktuálně ukládá data do mezipaměti z `Products` tabulky pomocí podle času uplynutí 60 sekund.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-271">The Caching Layer s `ProductsCL` class currently caches data from the `Products` table using a time-based expiry of 60 seconds.</span></span> <span data-ttu-id="a2fa2-272">Umožní s aktualizace této třídy tak, aby místo toho používal závislosti mezipaměti SQL.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-272">Let s update this class so that it uses SQL cache dependencies instead.</span></span> <span data-ttu-id="a2fa2-273">`ProductsCL` Třída s `AddCacheItem` metodu, která je zodpovědný za přidání dat do mezipaměti, aktuálně obsahuje následující kód:</span><span class="sxs-lookup"><span data-stu-id="a2fa2-273">The `ProductsCL` class s `AddCacheItem` method, which is responsible for adding the data to the cache, currently contains the following code:</span></span>


[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample12.cs)]

<span data-ttu-id="a2fa2-274">Aktualizovat tento kód pro použití `SqlCacheDependency` místo objektu `MasterCacheKeyArray` závislost mezipaměti:</span><span class="sxs-lookup"><span data-stu-id="a2fa2-274">Update this code to use a `SqlCacheDependency` object instead of the `MasterCacheKeyArray` cache dependency:</span></span>


[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample13.cs)]

<span data-ttu-id="a2fa2-275">Pokud chcete vyzkoušet tuto funkci, přidejte na stránku pod existující GridView `ProductsDeclarative` ovládacího prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-275">To test this functionality, add a GridView to the page beneath the existing `ProductsDeclarative` GridView.</span></span> <span data-ttu-id="a2fa2-276">Nastavit tento nový prvek GridView s `ID` k `ProductsProgrammatic` a prostřednictvím inteligentních značek, jeho vazbu na nového prvku ObjectDataSource s názvem `ProductsDataSourceProgrammatic`.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-276">Set this new GridView s `ID` to `ProductsProgrammatic` and, through its smart tag, bind it to a new ObjectDataSource named `ProductsDataSourceProgrammatic`.</span></span> <span data-ttu-id="a2fa2-277">Konfigurace ObjectDataSource používat `ProductsCL` třídy nastavením rozevíracích seznamech vyberte a aktualizace karet `GetProducts` a `UpdateProduct`v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-277">Configure the ObjectDataSource to use the `ProductsCL` class, setting the drop-down lists in the SELECT and UPDATE tabs to `GetProducts` and `UpdateProduct`, respectively.</span></span>


<span data-ttu-id="a2fa2-278">[![Konfigurace ObjectDataSource pomocí třídy ProductsCL](using-sql-cache-dependencies-cs/_static/image11.gif)](using-sql-cache-dependencies-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-278">[![Configure the ObjectDataSource to Use the ProductsCL Class](using-sql-cache-dependencies-cs/_static/image11.gif)](using-sql-cache-dependencies-cs/_static/image15.png)</span></span>

<span data-ttu-id="a2fa2-279">**Obrázek 11**: Konfigurace ObjectDataSource k použití `ProductsCL` třídy ([kliknutím ji zobrazíte obrázek v plné velikosti](using-sql-cache-dependencies-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="a2fa2-279">**Figure 11**: Configure the ObjectDataSource to Use the `ProductsCL` Class ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image16.png))</span></span>


<span data-ttu-id="a2fa2-280">[![Vyberte z rozevíracího seznamu vyberte kartu s GetProducts – metoda](using-sql-cache-dependencies-cs/_static/image12.gif)](using-sql-cache-dependencies-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-280">[![Select the GetProducts Method from the SELECT Tab s Drop-Down List](using-sql-cache-dependencies-cs/_static/image12.gif)](using-sql-cache-dependencies-cs/_static/image17.png)</span></span>

<span data-ttu-id="a2fa2-281">**Obrázek 12**: vyberte `GetProducts` metodu z rozevíracího seznamu vyberte kartu s ([kliknutím ji zobrazíte obrázek v plné velikosti](using-sql-cache-dependencies-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="a2fa2-281">**Figure 12**: Select the `GetProducts` Method from the SELECT Tab s Drop-Down List ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image18.png))</span></span>


<span data-ttu-id="a2fa2-282">[![Zvolte z rozevíracího seznamu aktualizace kartu s UpdateProduct – metoda](using-sql-cache-dependencies-cs/_static/image13.gif)](using-sql-cache-dependencies-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-282">[![Choose the UpdateProduct Method from the UPDATE Tab s Drop-Down List](using-sql-cache-dependencies-cs/_static/image13.gif)](using-sql-cache-dependencies-cs/_static/image19.png)</span></span>

<span data-ttu-id="a2fa2-283">**Obrázek 13**: z kartu aktualizace s rozevíracím seznamu zvolte metodu UpdateProduct ([kliknutím ji zobrazíte obrázek v plné velikosti](using-sql-cache-dependencies-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="a2fa2-283">**Figure 13**: Choose the UpdateProduct Method from the UPDATE Tab s Drop-Down List ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image20.png))</span></span>


<span data-ttu-id="a2fa2-284">Po dokončení Průvodce nakonfigurovat zdroj dat, sada Visual Studio vytvoří BoundFields a CheckBoxFields v prvku GridView. pro každé datové pole.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-284">After completing the Configure Data Source wizard, Visual Studio will create BoundFields and CheckBoxFields in the GridView for each of the data fields.</span></span> <span data-ttu-id="a2fa2-285">Jako s prvním prvku GridView přidaných na tuto stránku, odeberte všechna pole, ale `ProductName`, `CategoryName`, a `UnitPrice`a tato pole formátu podle svých potřeb.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-285">Like with the first GridView added to this page, remove all fields but `ProductName`, `CategoryName`, and `UnitPrice`, and format these fields as you see fit.</span></span> <span data-ttu-id="a2fa2-286">Z inteligentních značek GridView s zaškrtněte zaškrtávací políčka Povolit stránkování, Povolit řazení a povolit úpravy.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-286">From the GridView s smart tag, check the Enable Paging, Enable Sorting, and Enable Editing checkboxes.</span></span> <span data-ttu-id="a2fa2-287">Stejně jako u `ProductsDataSourceDeclarative` nastaví prvek ObjectDataSource, Visual Studio `ProductsDataSourceProgrammatic` ObjectDataSource s `OldValuesParameterFormatString` vlastnost `original_{0}`.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-287">As with the `ProductsDataSourceDeclarative` ObjectDataSource, Visual Studio will set the `ProductsDataSourceProgrammatic` ObjectDataSource s `OldValuesParameterFormatString` property to `original_{0}`.</span></span> <span data-ttu-id="a2fa2-288">Aby funkce úprav GridView s správně fungovat, nastavte tuto vlastnost zpět do `{0}` (nebo zcela odebrat přiřazení vlastnosti z deklarativní syntaxe).</span><span class="sxs-lookup"><span data-stu-id="a2fa2-288">In order for the GridView s edit feature to work properly, set this property back to `{0}` (or remove the property assignment from the declarative syntax altogether).</span></span>

<span data-ttu-id="a2fa2-289">Po dokončení těchto úloh, výsledný ovládacími prvky GridView a ObjectDataSource deklarativní by měl vypadat nějak takto:</span><span class="sxs-lookup"><span data-stu-id="a2fa2-289">After completing these tasks, the resulting GridView and ObjectDataSource declarative markup should look like the following:</span></span>


[!code-aspx[Main](using-sql-cache-dependencies-cs/samples/sample14.aspx)]

<span data-ttu-id="a2fa2-290">K otestování SQL závislosti mezipaměti ve vrstvě ukládání do mezipaměti, nastavte zarážku v `ProductCL` třída s `AddCacheItem` metodu a poté spuštění ladění.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-290">To test the SQL cache dependency in the Caching Layer set a breakpoint in the `ProductCL` class s `AddCacheItem` method and then start debugging.</span></span> <span data-ttu-id="a2fa2-291">Při první návštěvě `SqlCacheDependencies.aspx`, by měla být zarážka dosažena jako data požadovaná pro první a umístí do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-291">When you first visit `SqlCacheDependencies.aspx`, the breakpoint should be hit as the data is requested for the first time and placed into the cache.</span></span> <span data-ttu-id="a2fa2-292">V dalším kroku přesunout na jinou stránku v prvku GridView nebo jeden z těchto sloupců seřadit.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-292">Next, move to another page in the GridView or sort one of the columns.</span></span> <span data-ttu-id="a2fa2-293">To způsobí, že GridView k requery svá data, ale data by měla být nalezených v mezipaměti od `Products` databázové tabulky nebyl změněn.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-293">This causes the GridView to requery its data, but the data should be found in the cache since the `Products` database table has not been modified.</span></span> <span data-ttu-id="a2fa2-294">Pokud data je opakovaně nebyl nalezen v mezipaměti, ujistěte se, že ve vašem počítači není k dispozici dostatek paměti a zkuste to znovu.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-294">If the data is repeatedly not found in the cache, make sure there is sufficient memory available on your computer and try again.</span></span>

<span data-ttu-id="a2fa2-295">Po stránkování prostřednictvím několika stránky prvku GridView, otevřete druhou okno prohlížeče a přejděte na kurz základy v úpravy, vložení a odstranění oddílu (`~/EditInsertDelete/Basics.aspx`).</span><span class="sxs-lookup"><span data-stu-id="a2fa2-295">After paging through a few pages of the GridView, open a second browser window and navigate to the Basics tutorial in the Editing, Inserting, and Deleting section (`~/EditInsertDelete/Basics.aspx`).</span></span> <span data-ttu-id="a2fa2-296">Aktualizovat záznam z tabulky produktů a pak z první okna prohlížeče, zobrazte novou stránku nebo na některou z hlaviček řazení.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-296">Update a record from the Products table and then, from the first browser window, view a new page or click on one of the sorting headers.</span></span>

<span data-ttu-id="a2fa2-297">V tomto scénáři se zobrazí jednu ze dvou akcí: buď bude dosaženo zarážkou, která udává, že data uložená v mezipaměti byl vyřazen z důvodu změny v databázi. nebo, zarážka nebude dosažena, to znamená, že `SqlCacheDependencies.aspx` se teď zobrazuje zastaralá data.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-297">In this scenario you will see one of two things: either the breakpoint will be hit, indicating that the cached data was evicted due to the change in the database; or, the breakpoint will not be hit, meaning that `SqlCacheDependencies.aspx` is now showing stale data.</span></span> <span data-ttu-id="a2fa2-298">Pokud není zarážka dosažena, je pravděpodobné, protože cyklického dotazování služby nebyla aktivována ještě od změny data.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-298">If the breakpoint is not hit, it is likely because the polling service has not yet fired since the data was changed.</span></span> <span data-ttu-id="a2fa2-299">Mějte na paměti, že dotazování služby kontroluje změny `Products` tabulky každý `pollTime` milisekund, takže dochází ke zpoždění mezi při aktualizaci podkladových dat a pokud dojde k jejich vyřazení dat uložených v mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-299">Remember that the polling service is checking for changes to the `Products` table every `pollTime` milliseconds, so there is a delay between when the underlying data is updated and when the cached data is evicted.</span></span>

> [!NOTE]
> <span data-ttu-id="a2fa2-300">Toto zpoždění je pravděpodobnější, že se zobrazí při úpravách produktů prostřednictvím GridView v `SqlCacheDependencies.aspx`.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-300">This delay is more likely to appear when editing one of the products through the GridView in `SqlCacheDependencies.aspx`.</span></span> <span data-ttu-id="a2fa2-301">V [ukládání dat do mezipaměti v architektuře](caching-data-in-the-architecture-cs.md) kurzu jsme přidali `MasterCacheKeyArray` závislosti, chcete-li zajistit dat, který právě upravujete prostřednictvím mezipaměti `ProductsCL` třída s `UpdateProduct` metoda byl vyřazen z mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-301">In the [Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) tutorial we added the `MasterCacheKeyArray` cache dependency to ensure that the data being edited through the `ProductsCL` class s `UpdateProduct` method was evicted from the cache.</span></span> <span data-ttu-id="a2fa2-302">Ale jsme tuto závislost mezipaměti nahradilo při úpravě `AddCacheItem` metoda dříve v tomto kroku a proto `ProductsCL` třídy nadále zobrazovat data uložená v mezipaměti, dokud se změna – zpráva k dotazování systému `Products` tabulky.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-302">However, we replaced this cache dependency when modifying the `AddCacheItem` method earlier in this step and therefore the `ProductsCL` class will continue to show the cached data until the polling system notes the change to the `Products` table.</span></span> <span data-ttu-id="a2fa2-303">Uvidíme, jak zavést `MasterCacheKeyArray` mezipaměti závislostí v kroku 7.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-303">We'll see how to reintroduce the `MasterCacheKeyArray` cache dependency in Step 7.</span></span>


## <a name="step-7-associating-multiple-dependencies-with-a-cached-item"></a><span data-ttu-id="a2fa2-304">Krok 7: Přiřazení více závislostí položce v mezipaměti</span><span class="sxs-lookup"><span data-stu-id="a2fa2-304">Step 7: Associating Multiple Dependencies with a Cached Item</span></span>

<span data-ttu-id="a2fa2-305">Vzpomeňte si, že `MasterCacheKeyArray` závislosti mezipaměti se používá k zajištění toho, aby *všechny* týkající se produktu data se vyřadí jako z mezipaměti, když se aktualizuje jednu položku v ní spojené.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-305">Recall that the `MasterCacheKeyArray` cache dependency is used to ensure that *all* product-related data is evicted from the cache when any single item associated within it is updated.</span></span> <span data-ttu-id="a2fa2-306">Například `GetProductsByCategoryID(categoryID)` metoda mezipamětí `ProductsDataTables` instance pro každý jedinečný *categoryID* hodnotu.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-306">For example, the `GetProductsByCategoryID(categoryID)` method caches `ProductsDataTables` instances for each unique *categoryID* value.</span></span> <span data-ttu-id="a2fa2-307">Pokud některý z těchto objektů vyřadí `MasterCacheKeyArray` závislost mezipaměti zajišťuje, že ostatní se taky odeberou.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-307">If one of these objects is evicted, the `MasterCacheKeyArray` cache dependency ensures that the others are also removed.</span></span> <span data-ttu-id="a2fa2-308">Bez této závislosti mezipaměti při změně dat uložených v mezipaměti existuje možnost, že další data v mezipaměti produktů může být zastaralá.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-308">Without this cache dependency, when the cached data is modified the possibility exists that other cached product data may be out of date.</span></span> <span data-ttu-id="a2fa2-309">V důsledku toho je důležité, že budeme udržovat `MasterCacheKeyArray` závislost mezipaměti při použití závislostí mezipaměti SQL.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-309">Consequently, it s important that we maintain the `MasterCacheKeyArray` cache dependency when using SQL cache dependencies.</span></span> <span data-ttu-id="a2fa2-310">Nicméně data do mezipaměti s `Insert` metoda povoluje jenom pro objekt jednu závislost.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-310">However, the data cache s `Insert` method only allows for a single dependency object.</span></span>

<span data-ttu-id="a2fa2-311">Kromě toho při práci s závislosti mezipaměti SQL budeme muset přidružit více databázových tabulek jako závislosti.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-311">Furthermore, when working with SQL cache dependencies we may need to associate multiple database tables as dependencies.</span></span> <span data-ttu-id="a2fa2-312">Například `ProductsDataTable` ukládají do mezipaměti `ProductsCL` třída obsahuje názvy kategorií a dodavatel pro jednotlivé produkty, ale `AddCacheItem` metoda používá pouze závislost na `Products`.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-312">For example, the `ProductsDataTable` cached in the `ProductsCL` class contains the category and supplier names for each product, but the `AddCacheItem` method only uses a dependency on `Products`.</span></span> <span data-ttu-id="a2fa2-313">V této situaci pokud uživatel aktualizuje název kategorie nebo dodavatele, data produktu uložená v mezipaměti, zůstanou v mezipaměti a být zastaralá.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-313">In this situation, if the user updates the name of a category or supplier, the cached product data will remain in the cache and be out of date.</span></span> <span data-ttu-id="a2fa2-314">Proto Chceme mít data uložená v mezipaměti produktu závisí na nejen `Products` tabulky, ale na `Categories` a `Suppliers` i tabulky.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-314">Therefore, we want to make the cached product data dependent on not only the `Products` table, but on the `Categories` and `Suppliers` tables as well.</span></span>

<span data-ttu-id="a2fa2-315">[ `AggregateCacheDependency` Třídy](https://msdn.microsoft.com/library/system.web.caching.aggregatecachedependency.aspx) poskytuje prostředky pro přidružení k položku mezipaměti více závislostí.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-315">The [`AggregateCacheDependency` class](https://msdn.microsoft.com/library/system.web.caching.aggregatecachedependency.aspx) provides a means for associating multiple dependencies with a cache item.</span></span> <span data-ttu-id="a2fa2-316">Začněte vytvořením `AggregateCacheDependency` instance.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-316">Start by creating an `AggregateCacheDependency` instance.</span></span> <span data-ttu-id="a2fa2-317">Dále přidejte sadu závislosti pomocí `AggregateCacheDependency` s `Add` metody.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-317">Next, add the set of dependencies using the `AggregateCacheDependency` s `Add` method.</span></span> <span data-ttu-id="a2fa2-318">Při vkládání položky do datové mezipaměti po tomto datu, předejte `AggregateCacheDependency` instance.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-318">When inserting the item into the data cache thereafter, pass in the `AggregateCacheDependency` instance.</span></span> <span data-ttu-id="a2fa2-319">Když *jakékoli* z `AggregateCacheDependency` změnit instanci s závislostí, bude vyloučena položku z mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-319">When *any* of the `AggregateCacheDependency` instance s dependencies change, the cached item will be evicted.</span></span>

<span data-ttu-id="a2fa2-320">Následuje ukázka aktualizovaný kód pro `ProductsCL` třída s `AddCacheItem` metody.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-320">The following shows the updated code for the `ProductsCL` class s `AddCacheItem` method.</span></span> <span data-ttu-id="a2fa2-321">Metoda vytvoří `MasterCacheKeyArray` závislosti spolu s mezipaměti `SqlCacheDependency` objekty pro `Products`, `Categories`, a `Suppliers` tabulky.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-321">The method creates the `MasterCacheKeyArray` cache dependency along with `SqlCacheDependency` objects for the `Products`, `Categories`, and `Suppliers` tables.</span></span> <span data-ttu-id="a2fa2-322">Tyto jsou všechny zkombinované do jedné `AggregateCacheDependency` objekt s názvem `aggregateDependencies`, který je poté předán `Insert` metody.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-322">These are all combined into one `AggregateCacheDependency` object named `aggregateDependencies`, which is then passed into the `Insert` method.</span></span>


[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample15.cs)]

<span data-ttu-id="a2fa2-323">Otestování tohoto nového kódu si. Nyní se změní na `Products`, `Categories`, nebo `Suppliers` tabulek způsobit, že data uložená v mezipaměti k vyloučení.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-323">Test this new code out. Now changes to the `Products`, `Categories`, or `Suppliers` tables cause the cached data to be evicted.</span></span> <span data-ttu-id="a2fa2-324">Kromě toho `ProductsCL` třída s `UpdateProduct` metodu, která je volána při úpravách produktu prostřednictvím prvku GridView, vyloučí `MasterCacheKeyArray` závislosti, což způsobí, že v mezipaměti mezipaměti `ProductsDataTable` vyřazení a data, která mají být znovu načíst následující požadavek.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-324">Moreover, the `ProductsCL` class s `UpdateProduct` method, which is called when editing a product through the GridView, evicts the `MasterCacheKeyArray` cache dependency, which causes the cached `ProductsDataTable` to be evicted and the data to be re-retrieved on the next request.</span></span>

> [!NOTE]
> <span data-ttu-id="a2fa2-325">Závislosti mezipaměti SQL, je také možné s [ukládání výstupu do mezipaměti](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/output.aspx).</span><span class="sxs-lookup"><span data-stu-id="a2fa2-325">SQL cache dependencies can also be used with [output caching](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/output.aspx).</span></span> <span data-ttu-id="a2fa2-326">Ukázku této funkce naleznete v tématu: [pomocí technologie ASP.NET ukládání výstupu do mezipaměti se systémem SQL Server](https://msdn.microsoft.com/library/e3w8402y(VS.80).aspx).</span><span class="sxs-lookup"><span data-stu-id="a2fa2-326">For a demonstration of this functionality, see: [Using ASP.NET Output Caching with SQL Server](https://msdn.microsoft.com/library/e3w8402y(VS.80).aspx).</span></span>


## <a name="summary"></a><span data-ttu-id="a2fa2-327">Souhrn</span><span class="sxs-lookup"><span data-stu-id="a2fa2-327">Summary</span></span>

<span data-ttu-id="a2fa2-328">Při ukládání do mezipaměti dat z databáze, data se v ideálním případě zůstanou v mezipaměti, dokud je změněný v databázi.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-328">When caching database data, the data will ideally remain in the cache until it is modified in the database.</span></span> <span data-ttu-id="a2fa2-329">S prostředím ASP.NET 2.0 můžete vytvořit a použít ve scénářích deklarativní a programová závislosti mezipaměti SQL.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-329">With ASP.NET 2.0, SQL cache dependencies can be created and used in both declarative and programmatic scenarios.</span></span> <span data-ttu-id="a2fa2-330">Jedním z problémů s tímto přístupem Probíhá zjišťování, když se data změnila.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-330">One of the challenges with this approach is in discovering when the data has been modified.</span></span> <span data-ttu-id="a2fa2-331">Plné verze Microsoft SQL Server 2005 poskytují možnosti oznámení, které aplikace může upozornit, když došlo ke změně výsledku dotazu.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-331">The full versions of Microsoft SQL Server 2005 provide notification capabilities that can alert an application when a query result has changed.</span></span> <span data-ttu-id="a2fa2-332">Express edici systému SQL Server 2005 a starších verzí SQL serveru systému cyklického dotazování musí použít.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-332">For the Express Edition of SQL Server 2005 and older versions of SQL Server, a polling system must be used instead.</span></span> <span data-ttu-id="a2fa2-333">Nastavení infrastruktury potřebné cyklického dotazování je naštěstí poměrně jednoduché.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-333">Fortunately, setting up the necessary polling infrastructure is fairly straightforward.</span></span>

<span data-ttu-id="a2fa2-334">Všechno nejlepší programování!</span><span class="sxs-lookup"><span data-stu-id="a2fa2-334">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="a2fa2-335">Další čtení</span><span class="sxs-lookup"><span data-stu-id="a2fa2-335">Further Reading</span></span>

<span data-ttu-id="a2fa2-336">Další informace o tématech, které jsou popsané v tomto kurzu najdete na následujících odkazech:</span><span class="sxs-lookup"><span data-stu-id="a2fa2-336">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="a2fa2-337">Použití oznámení dotazů v systému Microsoft SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="a2fa2-337">Using Query Notifications in Microsoft SQL Server 2005</span></span>](https://msdn.microsoft.com/library/ms175110.aspx)
- [<span data-ttu-id="a2fa2-338">Vytvoření oznámení dotazů</span><span class="sxs-lookup"><span data-stu-id="a2fa2-338">Creating a Query Notification</span></span>](https://msdn.microsoft.com/library/ms188669.aspx)
- <span data-ttu-id="a2fa2-339">[Ukládání do mezipaměti v ASP.NET s `SqlCacheDependency` třídy](https://msdn.microsoft.com/library/ms178604(VS.80).aspx)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-339">[Caching in ASP.NET with the `SqlCacheDependency` Class](https://msdn.microsoft.com/library/ms178604(VS.80).aspx)</span></span>
- <span data-ttu-id="a2fa2-340">[Nástroj pro registraci serveru SQL technologie ASP.NET (`aspnet_regsql.exe`)](https://msdn.microsoft.com/library/ms229862(vs.80).aspx)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-340">[ASP.NET SQL Server Registration Tool (`aspnet_regsql.exe`)](https://msdn.microsoft.com/library/ms229862(vs.80).aspx)</span></span>
- [<span data-ttu-id="a2fa2-341">Přehled `SqlCacheDependency`</span><span class="sxs-lookup"><span data-stu-id="a2fa2-341">Overview of `SqlCacheDependency`</span></span>](http://www.aspnetresources.com/blog/sql_cache_depedency_overview.aspx)

## <a name="about-the-author"></a><span data-ttu-id="a2fa2-342">O autorovi</span><span class="sxs-lookup"><span data-stu-id="a2fa2-342">About the Author</span></span>

<span data-ttu-id="a2fa2-343">[Scott Meisnerová](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor sedm ASP/ASP.NET knih a Zakladatel [4GuysFromRolla.com](http://www.4guysfromrolla.com), má práce s Microsoft webových technologiích od roku 1998.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-343">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a2fa2-344">Scott funguje jako nezávislý konzultant, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-344">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a2fa2-345">Jeho nejnovější knihy [ *Edice nakladatelství Sams naučit sami ASP.NET 2.0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="a2fa2-345">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a2fa2-346">Může být dosáhl v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-346">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="a2fa2-347">nebo prostřednictvím jeho blogu, který lze nalézt v [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="a2fa2-347">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="a2fa2-348">Speciální k</span><span class="sxs-lookup"><span data-stu-id="a2fa2-348">Special Thanks To</span></span>

<span data-ttu-id="a2fa2-349">V této sérii kurzů byl recenzován uživatelem mnoho užitečných revidující.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-349">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="a2fa2-350">Vedoucí revidující pro účely tohoto kurzu byly Marko Rangel Teresy Murphy a Hilton Giesenow.</span><span class="sxs-lookup"><span data-stu-id="a2fa2-350">Lead reviewers for this tutorial were Marko Rangel, Teresa Murphy, and Hilton Giesenow.</span></span> <span data-ttu-id="a2fa2-351">Zajímat téma Moje nadcházejících článcích MSDN?</span><span class="sxs-lookup"><span data-stu-id="a2fa2-351">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="a2fa2-352">Pokud ano, vyřaďte mě řádek na [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-352">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a2fa2-353">[Předchozí](caching-data-at-application-startup-cs.md)
> [další](caching-data-with-the-objectdatasource-vb.md)</span><span class="sxs-lookup"><span data-stu-id="a2fa2-353">[Previous](caching-data-at-application-startup-cs.md)
[Next](caching-data-with-the-objectdatasource-vb.md)</span></span>
