---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-vb
title: Přidání potvrzení na straně klienta při odstraňování (VB) | Dokumentace Microsoftu
author: rick-anderson
description: V rozhraní, která jsme dosud vytvořili uživatel může omylem odstranit data po kliknutí na tlačítko odstranit, pokud jsou určeny k klikněte na tlačítko Upravit. V tomto t...
ms.author: aspnetcontent
ms.date: 07/17/2006
ms.assetid: 6331e02e-c465-4cdf-bd3f-f07680c289d6
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-vb
msc.type: authoredcontent
ms.openlocfilehash: 2318018b20841038ebb7a6e4900cf9849057d941
ms.sourcegitcommit: b28cd0313af316c051c2ff8549865bff67f2fbb4
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/05/2018
ms.locfileid: "37802487"
---
<a name="adding-client-side-confirmation-when-deleting-vb"></a><span data-ttu-id="1b6b6-104">Přidání potvrzení na straně klienta při odstraňování (VB)</span><span class="sxs-lookup"><span data-stu-id="1b6b6-104">Adding Client-Side Confirmation When Deleting (VB)</span></span>
====================
<span data-ttu-id="1b6b6-105">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="1b6b6-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="1b6b6-106">[Stáhněte si ukázkovou aplikaci](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_22_VB.exe) nebo [stahovat PDF](adding-client-side-confirmation-when-deleting-vb/_static/datatutorial22vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="1b6b6-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_22_VB.exe) or [Download PDF](adding-client-side-confirmation-when-deleting-vb/_static/datatutorial22vb1.pdf)</span></span>

> <span data-ttu-id="1b6b6-107">V rozhraní, která jsme dosud vytvořili uživatel může omylem odstranit data po kliknutí na tlačítko odstranit, pokud jsou určeny k klikněte na tlačítko Upravit.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-107">In the interfaces we've created so far, a user can accidentally delete data by clicking the Delete button when they meant to click the Edit button.</span></span> <span data-ttu-id="1b6b6-108">V tomto kurzu přidáme dialogovému oknu potvrzení na straně klienta, který se zobrazí, když dojde ke kliknutí na tlačítko Odstranit.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-108">In this tutorial we'll add a client-side confirmation dialog box that appears when the Delete button is clicked.</span></span>


## <a name="introduction"></a><span data-ttu-id="1b6b6-109">Úvod</span><span class="sxs-lookup"><span data-stu-id="1b6b6-109">Introduction</span></span>

<span data-ttu-id="1b6b6-110">Za posledních několik kurzů jsme ve viděli, jak zajistit vložení, úpravy a odstranění možnosti použít naší aplikace architektury, ObjectDataSource a data webové ovládací prvky ve vzájemné součinnosti.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-110">Over the past several tutorials we ve seen how to use our application architecture, ObjectDataSource, and the data Web controls in concert to provide inserting, editing, and deleting capabilities.</span></span> <span data-ttu-id="1b6b6-111">Odstraňování jsme rozhraní ve prověřit, jaký se skládá z odstranění tlačítko, které při kliknutí na, vyvolá zpětné volání a vyvolá ObjectDataSource s `Delete()` metoda.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-111">The deleting interfaces we ve examined thus far have been composed of a Delete button that, when clicked, causes a postback and invokes the ObjectDataSource s `Delete()` method.</span></span> <span data-ttu-id="1b6b6-112">`Delete()` Metoda potom vyvolá metodu nakonfigurované z vrstvy obchodní logiky, která rozšíří volání do vrstvy přístupu k datům, vydávání skutečnou `DELETE` příkaz do databáze.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-112">The `Delete()` method then invokes the configured method from the Business Logic Layer, which propagates the call down to the Data Access Layer, issuing the actual `DELETE` statement to the database.</span></span>

<span data-ttu-id="1b6b6-113">Toto uživatelské rozhraní umožňuje návštěvníkům odstraňovat záznamy pomocí ovládacího prvku GridView, DetailsView nebo FormView ovládacích prvků, chybí jakýkoli druh potvrzení, když uživatel klikne na tlačítko Odstranit.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-113">While this user interface enables visitors to delete records through the GridView, DetailsView, or FormView controls, it lacks any sort of confirmation when the user clicks the Delete button.</span></span> <span data-ttu-id="1b6b6-114">Pokud uživatel klikne omylem při jejich účelem klikněte na tlačítko Upravit, bude místo toho odstranit záznam, který se má aktualizovat.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-114">If a user accidentally clicks the Delete button when they meant to click Edit, the record they meant to update will instead be deleted.</span></span> <span data-ttu-id="1b6b6-115">Chcete-li tomu zabránit, v tomto kurzu přidáme dialogovému oknu potvrzení na straně klienta, který se zobrazí, když dojde ke kliknutí na tlačítko Odstranit.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-115">To help prevent this, in this tutorial we'll add a client-side confirmation dialog box that appears when the Delete button is clicked.</span></span>

<span data-ttu-id="1b6b6-116">JavaScript `confirm(string)` funkce zobrazuje svůj parametr vstupního řetězce jako text v modální dialogové okno, které součástí jsou dvě tlačítka – OK a zrušení (viz obrázek 1).</span><span class="sxs-lookup"><span data-stu-id="1b6b6-116">The JavaScript `confirm(string)` function displays its string input parameter as the text inside a modal dialog box that comes equipped with two buttons - OK and Cancel (see Figure 1).</span></span> <span data-ttu-id="1b6b6-117">`confirm(string)` Funkce vrátí hodnotu typu Boolean v závislosti na tom, jaké je stisknuto tlačítko (`true`, pokud uživatel klikne na tlačítko OK, a `false` Pokud klikněte na tlačítko Storno).</span><span class="sxs-lookup"><span data-stu-id="1b6b6-117">The `confirm(string)` function returns a Boolean value depending on what button is clicked (`true`, if the user clicks OK, and `false` if they click Cancel).</span></span>


![JavaScript confirm(string) metoda zobrazí modální, Messagebox na straně klienta](adding-client-side-confirmation-when-deleting-vb/_static/image1.png)

<span data-ttu-id="1b6b6-119">**Obrázek 1**: JavaScript `confirm(string)` metoda zobrazí prvek Messagebox modální, na straně klienta</span><span class="sxs-lookup"><span data-stu-id="1b6b6-119">**Figure 1**: The JavaScript `confirm(string)` Method Displays a Modal, Client-Side Messagebox</span></span>


<span data-ttu-id="1b6b6-120">Při odeslání formuláře, pokud hodnota `false` vrátí obslužnou rutinu události na straně klienta a odeslání formuláře se zrušila.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-120">During a form submission, if a value of `false` is returned from a client-side event handler then the form submission is cancelled.</span></span> <span data-ttu-id="1b6b6-121">Díky této funkci můžete máme odstranění tlačítka s klientské `onclick` obslužná rutina události návratová hodnota volání `confirm("Are you sure you want to delete this product?")`.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-121">Using this feature, we can have the Delete button s client-side `onclick` event handler return the value of a call to `confirm("Are you sure you want to delete this product?")`.</span></span> <span data-ttu-id="1b6b6-122">Pokud uživatel klikne na tlačítko Storno, `confirm(string)` vrátí false, a tím způsobující odesílání formuláře zrušit.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-122">If the user clicks Cancel, `confirm(string)` will return false, thereby causing the form submission to cancel.</span></span> <span data-ttu-id="1b6b6-123">S žádné zpětné volání, jehož tlačítko pro odstranění došlo ke kliknutí na produkt vyhráli t odstranit.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-123">With no postback, the product whose Delete button was clicked won t be deleted.</span></span> <span data-ttu-id="1b6b6-124">Pokud však uživatel klikne na tlačítko OK v dialogovém okně potvrzení, zpětné volání bude dál nepokračuje a produkt se odstraní.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-124">If, however, the user clicks OK in the confirmation dialog box, the postback will continue unabated and the product will be deleted.</span></span> <span data-ttu-id="1b6b6-125">Poraďte [s využitím jazyka JavaScript `confirm()` metody k odeslání formuláře ovládacího prvku](http://www.webreference.com/programming/javascript/confirm/) Další informace o této techniky.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-125">Consult [Using JavaScript s `confirm()` Method to Control Form Submission](http://www.webreference.com/programming/javascript/confirm/) for more information on this technique.</span></span>

<span data-ttu-id="1b6b6-126">Přidání nezbytné skriptu na straně klienta při použití šablony než při použití CommandField se mírně liší.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-126">Adding the necessary client-side script differs slightly if using templates than when using a CommandField.</span></span> <span data-ttu-id="1b6b6-127">Proto se v tomto kurzu se podíváme na příklad FormView i ovládacího prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-127">Therefore, in this tutorial we will look at both a FormView and GridView example.</span></span>

> [!NOTE]
> <span data-ttu-id="1b6b6-128">Pomocí technik potvrzení na straně klienta, jako jsou popsané v tomto kurzu se předpokládá, že vaši uživatelé navštěvují v prohlížečích, které podporují jazyka JavaScript a, ke kterým mají povolen jazyk JavaScript.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-128">Using client-side confirmation techniques, like the ones discussed in this tutorial, assumes that your users are visiting with browsers that support JavaScript and that they have JavaScript enabled.</span></span> <span data-ttu-id="1b6b6-129">Pokud některý z těchto předpokladů neplatí pro konkrétního uživatele, kliknutím na tlačítko odstranit okamžitě vyvolávají zpětné odeslání (nejsou zobrazena pole messagebox potvrzení).</span><span class="sxs-lookup"><span data-stu-id="1b6b6-129">If either of these assumptions are not true for a particular user, clicking the Delete button will immediately cause a postback (not displaying a confirm messagebox).</span></span>


## <a name="step-1-creating-a-formview-that-supports-deletion"></a><span data-ttu-id="1b6b6-130">Krok 1: Vytvoření FormView, která podporuje odstranění</span><span class="sxs-lookup"><span data-stu-id="1b6b6-130">Step 1: Creating a FormView That Supports Deletion</span></span>

<span data-ttu-id="1b6b6-131">Začněte přidáním FormView k `ConfirmationOnDelete.aspx` stránku `EditInsertDelete` složku vytvoříte jejich vazbu na nový prvek ObjectDataSource, který získává informace o produktech přes zpět `ProductsBLL` třída s `GetProducts()` – metoda.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-131">Start by adding a FormView to the `ConfirmationOnDelete.aspx` page in the `EditInsertDelete` folder, binding it to a new ObjectDataSource that pulls back the product information via the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="1b6b6-132">Také nakonfigurovat prvku ObjectDataSource tak, aby `ProductsBLL` třída s `DeleteProduct(productID)` metoda je mapován na prvek ObjectDataSource s `Delete()` metody; Ujistěte se, že kartách INSERT, UPDATE a rozevírací seznamy jsou nastaveny na (žádný).</span><span class="sxs-lookup"><span data-stu-id="1b6b6-132">Also configure the ObjectDataSource so that the `ProductsBLL` class s `DeleteProduct(productID)` method is mapped to the ObjectDataSource s `Delete()` method; ensure that the INSERT and UPDATE tabs drop-down lists are set to (None).</span></span> <span data-ttu-id="1b6b6-133">A konečně zaškrtněte políčko Povolit stránkování ve třídě FormView s inteligentním.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-133">Finally, check the Enable Paging checkbox in the FormView s smart tag.</span></span>

<span data-ttu-id="1b6b6-134">Po provedení těchto kroků bude nový prvek ObjectDataSource s deklarativní vypadat nějak takto:</span><span class="sxs-lookup"><span data-stu-id="1b6b6-134">After these steps, the new ObjectDataSource s declarative markup will look like the following:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-vb/samples/sample1.aspx)]

<span data-ttu-id="1b6b6-135">Stejně jako v naší poslední příklady, které nepoužili optimistického řízení souběžnosti, věnujte chvíli smažte ObjectDataSource s `OldValuesParameterFormatString` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-135">As in our past examples that did not use optimistic concurrency, take a moment to clear out the ObjectDataSource s `OldValuesParameterFormatString` property.</span></span>

<span data-ttu-id="1b6b6-136">Protože byla svázána se ovládací prvek ObjectDataSource, který podporuje pouze odstraňuje, FormView s `ItemTemplate` nabízí jenom tlačítko odstranit, ve kterém chybí tlačítka New a Update.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-136">Since it has been bound to an ObjectDataSource control that only supports deleting, the FormView s `ItemTemplate` offers only the Delete button, lacking the New and Update buttons.</span></span> <span data-ttu-id="1b6b6-137">FormView s deklarativní, ale obsahuje nadbytečnými `EditItemTemplate` a `InsertItemTemplate`, které je možné odebrat.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-137">The FormView s declarative markup, however, includes a superfluous `EditItemTemplate` and `InsertItemTemplate`, which can be removed.</span></span> <span data-ttu-id="1b6b6-138">Využít k přizpůsobení `ItemTemplate` tak, že se zobrazuje pouze podmnožinu produktu datová pole.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-138">Take a moment to customize the `ItemTemplate` so that is shows only a subset of the product data fields.</span></span> <span data-ttu-id="1b6b6-139">Můžu uložit nakonfigurovaný dolování, aby se zobrazil název produktu s v `<h3>` záhlaví nad jeho dodavatele a kategorie názvy (spolu s tlačítko Odstranit).</span><span class="sxs-lookup"><span data-stu-id="1b6b6-139">I ve configured mine to show the product s name in an `<h3>` heading above its supplier and category names (along with the Delete button).</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-vb/samples/sample2.aspx)]

<span data-ttu-id="1b6b6-140">S těmito změnami máme plně funkční webovou stránku, která umožňuje uživatelům přepínat prostřednictvím produktů jeden najednou, s možností odstranit produkt jednoduše kliknutím na tlačítko Odstranit.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-140">With these changes, we have a fully functional web page that allows a user to toggle through the products one at a time, with the ability to delete a product by simply clicking the Delete button.</span></span> <span data-ttu-id="1b6b6-141">Obrázek 2 ukazuje snímek obrazovky náš postup doposud při prohlížení prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-141">Figure 2 shows a screen shot of our progress thus far when viewed through a browser.</span></span>


<span data-ttu-id="1b6b6-142">[![FormView s informacemi o jednoho produktu](adding-client-side-confirmation-when-deleting-vb/_static/image3.png)](adding-client-side-confirmation-when-deleting-vb/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="1b6b6-142">[![The FormView Shows Information About a Single Product](adding-client-side-confirmation-when-deleting-vb/_static/image3.png)](adding-client-side-confirmation-when-deleting-vb/_static/image2.png)</span></span>

<span data-ttu-id="1b6b6-143">**Obrázek 2**: The FormView zobrazuje informace o jeden produkt ([kliknutím ji zobrazíte obrázek v plné velikosti](adding-client-side-confirmation-when-deleting-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="1b6b6-143">**Figure 2**: The FormView Shows Information About a Single Product ([Click to view full-size image](adding-client-side-confirmation-when-deleting-vb/_static/image4.png))</span></span>


## <a name="step-2-calling-the-confirmstring-function-from-the-delete-buttons-client-side-onclick-event"></a><span data-ttu-id="1b6b6-144">Krok 2: Volání z odstranění tlačítka Client-Side onclick události confirm(string) – funkce</span><span class="sxs-lookup"><span data-stu-id="1b6b6-144">Step 2: Calling the confirm(string) Function from the Delete Buttons Client-Side onclick Event</span></span>

<span data-ttu-id="1b6b6-145">S FormView vytvořili, posledním krokem je konfigurace tlačítko odstranit takové, že ho s kliknutí návštěvníkem jazyka JavaScript `confirm(string)` vyvolání funkce.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-145">With the FormView created, the final step is to configure the Delete button such that when it s clicked by the visitor, the JavaScript `confirm(string)` function is invoked.</span></span> <span data-ttu-id="1b6b6-146">Přidání skriptu na straně klienta tlačítko, odkazem (LinkButton) nebo ImageButton s klientským `onclick` událostí lze provést prostřednictvím `OnClientClick property`, což je nová technologie ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-146">Adding client-side script to a Button, LinkButton, or ImageButton s client-side `onclick` event can be accomplished through the use of the `OnClientClick property`, which is new to ASP.NET 2.0.</span></span> <span data-ttu-id="1b6b6-147">Protože chceme hodnotu `confirm(string)` funkce vrátila, jednoduše nastavte tuto vlastnost na: `return confirm('Are you certain that you want to delete this product?');`</span><span class="sxs-lookup"><span data-stu-id="1b6b6-147">Since we want to have the value of the `confirm(string)` function returned, simply set this property to: `return confirm('Are you certain that you want to delete this product?');`</span></span>

<span data-ttu-id="1b6b6-148">Po této změně deklarativní syntaxe s odkazem (LinkButton) odstranit by měla vypadat podobně jako:</span><span class="sxs-lookup"><span data-stu-id="1b6b6-148">After this change the Delete LinkButton s declarative syntax should look something like:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-vb/samples/sample3.aspx)]

<span data-ttu-id="1b6b6-149">Všechny existuje tento s je to!</span><span class="sxs-lookup"><span data-stu-id="1b6b6-149">That s all there is to it!</span></span> <span data-ttu-id="1b6b6-150">Obrázek 3 ukazuje snímek obrazovky toto potvrzení v akci.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-150">Figure 3 shows a screen shot of this confirmation in action.</span></span> <span data-ttu-id="1b6b6-151">Kliknutím na tlačítko Odstranit zobrazí dialogové okno potvrzení.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-151">Clicking the Delete button brings up the confirm dialog box.</span></span> <span data-ttu-id="1b6b6-152">Pokud uživatel klikne na tlačítko Storno, zpětné volání se zrušila a produktu není odstraněn.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-152">If the user clicks Cancel, the postback is cancelled and the product is not deleted.</span></span> <span data-ttu-id="1b6b6-153">Zpětné volání, pokud ale uživatel klikne na tlačítko OK, pokračuje a prvku ObjectDataSource s `Delete()` je vyvolána metoda ukončené odstranění záznamu v databázi.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-153">If, however, the user clicks OK, the postback continues and the ObjectDataSource s `Delete()` method is invoked, culminating in the database record being deleted.</span></span>

> [!NOTE]
> <span data-ttu-id="1b6b6-154">Řetězec předaný do `confirm(string)` funkce JavaScript, která jsou odděleny apostrofy (spíše než uvozovky).</span><span class="sxs-lookup"><span data-stu-id="1b6b6-154">The string passed into the `confirm(string)` JavaScript function is delimited with apostrophes (rather than quotation marks).</span></span> <span data-ttu-id="1b6b6-155">V jazyce JavaScript může být oddělené řetězce buď znaku.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-155">In JavaScript, strings can be delimited using either character.</span></span> <span data-ttu-id="1b6b6-156">Apostrofy tady používáme tak, aby oddělovače pro řetězec předat do `confirm(string)` nezavádí nejednoznačnost pomocí oddělovače pro `OnClientClick` hodnotu vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-156">We use apostrophes here so that the delimiters for the string passed into `confirm(string)` do not introduce an ambiguity with the delimiters used for the `OnClientClick` property value.</span></span>


<span data-ttu-id="1b6b6-157">[![Potvrzení se teď zobrazují při kliknutím na tlačítko Odstranit](adding-client-side-confirmation-when-deleting-vb/_static/image6.png)](adding-client-side-confirmation-when-deleting-vb/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="1b6b6-157">[![A Confirmation is Now Displayed When Clicking the Delete Button](adding-client-side-confirmation-when-deleting-vb/_static/image6.png)](adding-client-side-confirmation-when-deleting-vb/_static/image5.png)</span></span>

<span data-ttu-id="1b6b6-158">**Obrázek 3**: potvrzení A je teď zobrazují při kliknutím na tlačítko Odstranit ([kliknutím ji zobrazíte obrázek v plné velikosti](adding-client-side-confirmation-when-deleting-vb/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="1b6b6-158">**Figure 3**: A Confirmation is Now Displayed When Clicking the Delete Button ([Click to view full-size image](adding-client-side-confirmation-when-deleting-vb/_static/image7.png))</span></span>


## <a name="step-3-configuring-the-onclientclick-property-for-the-delete-button-in-a-commandfield"></a><span data-ttu-id="1b6b6-159">Krok 3: Konfigurace vlastnost OnClientClick pro tlačítko Odstranit v CommandField</span><span class="sxs-lookup"><span data-stu-id="1b6b6-159">Step 3: Configuring the OnClientClick Property for the Delete Button in a CommandField</span></span>

<span data-ttu-id="1b6b6-160">Při práci s tlačítko, odkazem (LinkButton) nebo ImageButton přímo v šabloně, dialogové okno potvrzení lze přidružit ho jednoduše nakonfigurováním jeho `OnClientClick` vlastnost pro vrácení výsledků z jazyka JavaScript `confirm(string)` funkce.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-160">When working with a Button, LinkButton, or ImageButton directly in a template, a confirmation dialog box can be associated with it by simply configuring its `OnClientClick` property to return the results of the JavaScript `confirm(string)` function.</span></span> <span data-ttu-id="1b6b6-161">Ale CommandField – které přidá pole odstranit tlačítek do ovládacího prvku GridView nebo prvku DetailsView. - nemá `OnClientClick` vlastnost, která lze nastavit deklarací.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-161">However, the CommandField - which adds a field of Delete buttons to a GridView or DetailsView - does not have an `OnClientClick` property that can be set declaratively.</span></span> <span data-ttu-id="1b6b6-162">Místo toho jsme musí prostřednictvím kódu programu odkazovat na tlačítko Odstranit v prvku GridView nebo prvek DetailsView s odpovídající `DataBound` obslužná rutina události a pak nastavte jeho `OnClientClick` existuje vlastnost.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-162">Instead, we must programmatically reference the Delete button in the GridView or DetailsView s appropriate `DataBound` event handler, and then set its `OnClientClick` property there.</span></span>

> [!NOTE]
> <span data-ttu-id="1b6b6-163">Při nastavování tlačítko s `OnClientClick` vlastnost v odpovídajícím `DataBound` obslužná rutina události, máme přístup k data byla vázána na aktuální záznam.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-163">When setting the Delete button s `OnClientClick` property in the appropriate `DataBound` event handler, we have access to the data was bound to the current record.</span></span> <span data-ttu-id="1b6b6-164">To znamená, že můžeme rozšířit o potvrzení zprávy zahrnout podrobnosti o konkrétním záznamu, jako jsou například "Jste si jisti, že chcete odstranit produkt Chai?"</span><span class="sxs-lookup"><span data-stu-id="1b6b6-164">This means we can extend the confirmation message to include details about the particular record, such as, "Are you sure you want to delete the Chai product?"</span></span> <span data-ttu-id="1b6b6-165">Tato vlastní nastavení je také možné v šablonách pomocí syntaxe datové vazby.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-165">Such customization is also possible in templates using databinding syntax.</span></span>


<span data-ttu-id="1b6b6-166">Postup nastavení `OnClientClick` vlastnost tlačítkem Delete (tlačítky) v CommandField, umožňují s GridView přidat na stránku.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-166">To practice setting the `OnClientClick` property for the Delete button(s) in a CommandField, let s add a GridView to the page.</span></span> <span data-ttu-id="1b6b6-167">Konfigurace tohoto ovládacího prvku GridView používat stejný ovládací prvek ObjectDataSource, který používá FormView.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-167">Configure this GridView to use the same ObjectDataSource control that the FormView uses.</span></span> <span data-ttu-id="1b6b6-168">Také omezte GridView s BoundFields zahrnout pouze s názvem produktu, kategorie a dodavateli.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-168">Also limit the GridView s BoundFields to only include the product s name, category, and supplier.</span></span> <span data-ttu-id="1b6b6-169">A konečně zaškrtněte políčko Povolit odstranění z ovládacího prvku GridView s inteligentním.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-169">Lastly, check the Enable Deleting checkbox from the GridView s smart tag.</span></span> <span data-ttu-id="1b6b6-170">Tím přidáte CommandField GridView s `Columns` kolekce s jeho `ShowDeleteButton` nastavenou na `true`.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-170">This will add a CommandField to the GridView s `Columns` collection with its `ShowDeleteButton` property set to `true`.</span></span>

<span data-ttu-id="1b6b6-171">Po provedení těchto změn, vaše GridView s deklarativní by měl vypadat nějak takto:</span><span class="sxs-lookup"><span data-stu-id="1b6b6-171">After making these changes, your GridView s declarative markup should look like the following:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-vb/samples/sample4.aspx)]

<span data-ttu-id="1b6b6-172">CommandField obsahuje jednu instanci odstranit odkazem (LinkButton), který je možné programově přistupovat z ovládacího prvku GridView s `RowDataBound` obslužné rutiny události.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-172">The CommandField contains a single Delete LinkButton instance that can be accessed programmatically from the GridView s `RowDataBound` event handler.</span></span> <span data-ttu-id="1b6b6-173">Jakmile se odkazuje, jsme nastavili jeho `OnClientClick` vlastnost odpovídajícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-173">Once referenced, we can set its `OnClientClick` property accordingly.</span></span> <span data-ttu-id="1b6b6-174">Vytvořte obslužnou rutinu události pro `RowDataBound` události pomocí následujícího kódu:</span><span class="sxs-lookup"><span data-stu-id="1b6b6-174">Create an event handler for the `RowDataBound` event using the following code:</span></span>


[!code-vb[Main](adding-client-side-confirmation-when-deleting-vb/samples/sample5.vb)]

<span data-ttu-id="1b6b6-175">Tato obslužná rutina události funguje s řádky dat (ty, které se mají na tlačítko Odstranit) a začne programově odkazováním na tlačítko Odstranit.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-175">This event handler works with data rows (those that will have the Delete button) and begins by programmatically referencing the Delete button.</span></span> <span data-ttu-id="1b6b6-176">Obecně používají následující vzor:</span><span class="sxs-lookup"><span data-stu-id="1b6b6-176">In general use the following pattern:</span></span>


[!code-vb[Main](adding-client-side-confirmation-when-deleting-vb/samples/sample6.vb)]

<span data-ttu-id="1b6b6-177">*Má vlastnost ButtonType* se typ používá CommandField – tlačítko, odkazem (LinkButton) nebo ImageButton tlačítka.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-177">*ButtonType* is the type of button being used by the CommandField - Button, LinkButton, or ImageButton.</span></span> <span data-ttu-id="1b6b6-178">Ve výchozím nastavení, použije CommandField LinkButtons, ale to je možné přizpůsobit prostřednictvím CommandField s `ButtonType property`.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-178">By default, the CommandField uses LinkButtons, but this can be customized via the CommandField s `ButtonType property`.</span></span> <span data-ttu-id="1b6b6-179">*CommandFieldIndex* je bude index pořadových čísel CommandField v rámci ovládacího prvku GridView s `Columns` kolekce, že *controlIndex* je index na tlačítko Odstranit v rámci CommandField s `Controls` kolekce.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-179">The *commandFieldIndex* is the ordinal index of the CommandField within the GridView s `Columns` collection, whereas the *controlIndex* is the index of the Delete button within the CommandField s `Controls` collection.</span></span> <span data-ttu-id="1b6b6-180">*ControlIndex* hodnota závisí na pozici tlačítko s relativně k další tlačítka v CommandField.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-180">The *controlIndex* value depends on the button s position relative to other buttons in the CommandField.</span></span> <span data-ttu-id="1b6b6-181">Například pokud pouze tlačítka zobrazí v CommandField je tlačítko pro odstranění, použijte index 0.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-181">For example, if the only button displayed in the CommandField is the Delete button, use an index of 0.</span></span> <span data-ttu-id="1b6b6-182">Pokud však existovat s tlačítko pro úpravy, které předchází tlačítko odstranit, použijte index 2.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-182">If, however, there s an Edit button that precedes the Delete button, use an index of 2.</span></span> <span data-ttu-id="1b6b6-183">Důvod se používá index 2 totiž CommandField před tlačítko přidá dva ovládací prvky: tlačítko Upravit a LiteralControl této s použít k přidání některých mezer mezi tlačítky Edit a Delete.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-183">The reason an index of 2 is used is because two controls are added by the CommandField before the Delete button: the Edit button and a LiteralControl that s used to add some space between the Edit and Delete buttons.</span></span>

<span data-ttu-id="1b6b6-184">V našem konkrétním příkladu CommandField používá LinkButtons a pole nejvíce vlevo má *commandFieldIndex* 0.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-184">For our particular example, the CommandField uses LinkButtons and, being the left-most field, has a *commandFieldIndex* of 0.</span></span> <span data-ttu-id="1b6b6-185">Vzhledem k tomu, že neexistují žádné další tlačítka, ale tlačítko Odstranit v CommandField, používáme *controlIndex* 0.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-185">Since there are no other buttons but the Delete button in the CommandField, we use a *controlIndex* of 0.</span></span>

<span data-ttu-id="1b6b6-186">Po odkazující na tlačítko Odstranit v CommandField, jsme dále získejte informace o produktu vázána na aktuální řádek prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-186">After referencing the Delete button in the CommandField, we next grab information about the product bound to the current GridView row.</span></span> <span data-ttu-id="1b6b6-187">Nakonec nastavíme na tlačítko Odstranit s `OnClientClick` vlastnost odpovídající jazyka JavaScript, která zahrnuje název produktu s.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-187">Finally, we set the Delete button s `OnClientClick` property to the appropriate JavaScript, which includes the product s name.</span></span> <span data-ttu-id="1b6b6-188">Protože byl předán řetězec jazyka JavaScript do `confirm(string)` funkce je oddělen apostrofy jsme musíte je přeskočit všechny apostrofy, které se zobrazují v rámci názvu produktu s použitím.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-188">Since the JavaScript string passed into the `confirm(string)` function is delimited using apostrophes we must escape any apostrophes that appear within the product s name.</span></span> <span data-ttu-id="1b6b6-189">Konkrétně, jsou všechny apostrofy v názvu produktu s uvozeny řídicími znaky s "`\'`".</span><span class="sxs-lookup"><span data-stu-id="1b6b6-189">In particular, any apostrophes in the product s name are escaped with "`\'`".</span></span>

<span data-ttu-id="1b6b6-190">S těmito změnami dokončeno kliknutím na tlačítko Odstranit v zobrazení GridView přizpůsobené potvrzovací dialogové okno pole (viz obrázek 4).</span><span class="sxs-lookup"><span data-stu-id="1b6b6-190">With these changes complete, clicking on a Delete button in the GridView displays a customized confirmation dialog box (see Figure 4).</span></span> <span data-ttu-id="1b6b6-191">Jako s ovládacím prvkem messagebox potvrzení z FormView, pokud uživatel klikne na tlačítko Storno zpětného odeslání dojde ke zrušení, a tím brání odstranění proti.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-191">As with the confirmation messagebox from the FormView, if the user clicks Cancel the postback is cancelled, thereby preventing the deletion from occurring.</span></span>

> [!NOTE]
> <span data-ttu-id="1b6b6-192">Tento postup můžete použít také k programovému přístupu ke tlačítko Odstranit v CommandField v DetailsView.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-192">This technique can also be used to programmatically access the Delete button in the CommandField in a DetailsView.</span></span> <span data-ttu-id="1b6b6-193">Prvku DetailsView, ale d vytvořit obslužnou rutinu události pro `DataBound` událost, protože nemá žádné ovládacím prvku DetailsView `RowDataBound` událostí.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-193">For the DetailsView, however, you d create an event handler for the `DataBound` event, since the DetailsView does not have a `RowDataBound` event.</span></span>


<span data-ttu-id="1b6b6-194">[![Kliknutím na tlačítko Odstranit prvek GridView s zobrazí dialogové okno Vlastní potvrzení](adding-client-side-confirmation-when-deleting-vb/_static/image9.png)](adding-client-side-confirmation-when-deleting-vb/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="1b6b6-194">[![Clicking the GridView s Delete Button Displays a Customized Confirmation Dialog Box](adding-client-side-confirmation-when-deleting-vb/_static/image9.png)](adding-client-side-confirmation-when-deleting-vb/_static/image8.png)</span></span>

<span data-ttu-id="1b6b6-195">**Obrázek 4**: kliknutí na prvek GridView s tlačítko pro odstranění zobrazí přizpůsobit potvrzovací dialogové okno ([kliknutím ji zobrazíte obrázek v plné velikosti](adding-client-side-confirmation-when-deleting-vb/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="1b6b6-195">**Figure 4**: Clicking the GridView s Delete Button Displays a Customized Confirmation Dialog Box ([Click to view full-size image](adding-client-side-confirmation-when-deleting-vb/_static/image10.png))</span></span>


## <a name="using-templatefields"></a><span data-ttu-id="1b6b6-196">Použití vlastností TemplateField</span><span class="sxs-lookup"><span data-stu-id="1b6b6-196">Using TemplateFields</span></span>

<span data-ttu-id="1b6b6-197">Jednu z nevýhod CommandField je, že jeho tlačítka je možný přes indexování a zda výsledný objekt musí být přetypovat na typ odpovídající tlačítka (Button, odkazem (LinkButton) nebo ImageButton).</span><span class="sxs-lookup"><span data-stu-id="1b6b6-197">One of the disadvantages of the CommandField is that its buttons must be accessed through indexing and that the resulting object must be cast to the appropriate button type (Button, LinkButton, or ImageButton).</span></span> <span data-ttu-id="1b6b6-198">Použití "čísla magic" a pevně zakódované typy vyzývá problémy, které nejde zjistit až do modulu runtime.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-198">Using "magic numbers" and hard-coded types invites problems that cannot be discovered until runtime.</span></span> <span data-ttu-id="1b6b6-199">Například pokud se vám nebo jiným vývojářem, přidat nová tlačítka na CommandField v určitém okamžiku v budoucnu (jako je například tlačítko pro úpravy) nebo změny `ButtonType` vlastnosti existujícího kódu se stále zkompiluje bez chyb, ale na stránce může způsobit výjimku nebo neočekávané chování v závislosti na tom, jak byla zapsána váš kód a jaké změny byly provedeny.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-199">For example, if you, or another developer, adds new buttons to the CommandField at some point in the future (such as an Edit button) or changes the `ButtonType` property, the existing code will still compile without error, but visiting the page may cause an exception or unexpected behavior, depending on how your code was written and what changes were made.</span></span>

<span data-ttu-id="1b6b6-200">Alternativním přístupem je převést s ovládacími prvky GridView a DetailsView CommandFields vlastností TemplateField.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-200">An alternative approach is to convert the GridView and DetailsView s CommandFields into TemplateFields.</span></span> <span data-ttu-id="1b6b6-201">Tím se vygeneruje TemplateField s `ItemTemplate` pro jednotlivá tlačítka CommandField, který má odkazem (LinkButton) (nebo tlačítko nebo ImageButton).</span><span class="sxs-lookup"><span data-stu-id="1b6b6-201">This will generate a TemplateField with an `ItemTemplate` that has a LinkButton (or Button or ImageButton) for each button in the CommandField.</span></span> <span data-ttu-id="1b6b6-202">Tato tlačítka `OnClientClick` vlastnosti je možné přiřadit deklarativně, jako jsme viděli s FormView, nebo můžete programově přistupovat do příslušné `DataBound` obslužné rutiny události pomocí následujícího vzorce:</span><span class="sxs-lookup"><span data-stu-id="1b6b6-202">These buttons `OnClientClick` properties can be assigned declaratively, as we saw with the FormView, or can be programmatically accessed in the appropriate `DataBound` event handler using the following pattern:</span></span>


[!code-vb[Main](adding-client-side-confirmation-when-deleting-vb/samples/sample7.vb)]

<span data-ttu-id="1b6b6-203">Kde *controlID* je hodnota tlačítko s `ID` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-203">Where *controlID* is the value of the button s `ID` property.</span></span> <span data-ttu-id="1b6b6-204">Přestože tento vzor vyžaduje stále pevně zakódované typ pro přetypování, je už není nutné indexování, umožňující rozložení změnit, aniž by výsledkem je chyba za běhu.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-204">While this pattern still requires a hard-coded type for the cast, it removes the need for indexing, allowing for the layout to change without resulting in a runtime error.</span></span>

## <a name="summary"></a><span data-ttu-id="1b6b6-205">Souhrn</span><span class="sxs-lookup"><span data-stu-id="1b6b6-205">Summary</span></span>

<span data-ttu-id="1b6b6-206">JavaScript `confirm(string)` funkce je technika běžně používaných pro řízení pracovního postupu odeslání formuláře.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-206">The JavaScript `confirm(string)` function is a commonly used technique for controlling form submission workflow.</span></span> <span data-ttu-id="1b6b6-207">Při spuštění, zobrazí funkce na straně klienta, modální dialogové okno, které obsahuje dvě tlačítka OK a zrušit.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-207">When executed, the function displays a modal, client-side dialog box that includes two buttons, OK and Cancel.</span></span> <span data-ttu-id="1b6b6-208">Pokud uživatel klikne na tlačítko OK, `confirm(string)` vrací funkce `true`; klepnutím na tlačítko Storno vrátí `false`.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-208">If the user clicks OK, the `confirm(string)` function returns `true`; clicking Cancel returns `false`.</span></span> <span data-ttu-id="1b6b6-209">Tato funkce doplňuje chování prohlížeče s obslužnou rutinu události během procesu odesílání vrátí-li zrušit odeslání formuláře `false`, lze použít k zobrazení pole messagebox potvrzení při odstraňování záznamu.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-209">This functionality, coupled with a browser s behavior to cancel a form submission if an event handler during the submission process returns `false`, can be used to display a confirmation messagebox when deleting a record.</span></span>

<span data-ttu-id="1b6b6-210">`confirm(string)` Funkce můžou být spojené s tlačítko webového ovládacího prvku s klientský `onclick` obslužné rutiny události pomocí ovládacího prvku s `OnClientClick` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-210">The `confirm(string)` function can be associated with a Button Web control s client-side `onclick` event handler through the control s `OnClientClick` property.</span></span> <span data-ttu-id="1b6b6-211">Při práci s tlačítko Odstranit v šabloně – buď v některé ze šablon s FormView nebo TemplateField v prvku DetailsView nebo GridView - tuto vlastnost lze nastavit pomocí deklarace nebo prostřednictvím kódu programu, jako jsme viděli v tomto kurzu.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-211">When working with a Delete button in a template - either in one of the FormView s templates or in a TemplateField in the DetailsView or GridView - this property can be set either declaratively or programmatically, as we saw in this tutorial.</span></span>

<span data-ttu-id="1b6b6-212">Všechno nejlepší programování!</span><span class="sxs-lookup"><span data-stu-id="1b6b6-212">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="1b6b6-213">O autorovi</span><span class="sxs-lookup"><span data-stu-id="1b6b6-213">About the Author</span></span>

<span data-ttu-id="1b6b6-214">[Scott Meisnerová](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor sedm ASP/ASP.NET knih a Zakladatel [4GuysFromRolla.com](http://www.4guysfromrolla.com), má práce s Microsoft webových technologiích od roku 1998.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-214">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="1b6b6-215">Scott funguje jako nezávislý konzultant, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="1b6b6-215">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="1b6b6-216">Jeho nejnovější knihy [ *Edice nakladatelství Sams naučit sami ASP.NET 2.0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="1b6b6-216">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="1b6b6-217">Může být dosáhl v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="1b6b6-217">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="1b6b6-218">nebo prostřednictvím jeho blogu, který lze nalézt v [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="1b6b6-218">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="1b6b6-219">[Předchozí](implementing-optimistic-concurrency-vb.md)
> [další](limiting-data-modification-functionality-based-on-the-user-vb.md)</span><span class="sxs-lookup"><span data-stu-id="1b6b6-219">[Previous](implementing-optimistic-concurrency-vb.md)
[Next](limiting-data-modification-functionality-based-on-the-user-vb.md)</span></span>
