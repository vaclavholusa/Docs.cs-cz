---
uid: web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
title: Řazení dat v prvku DataList nebo Repeater (C#) | Dokumentace Microsoftu
author: rick-anderson
description: V tomto kurzu prozkoumáme způsob řazení podpory v ovládacích prvcích DataList a Repeater, jakož i jak sestavit DataList nebo Repeater, jejichž data můžete...
ms.author: aspnetcontent
manager: wpickett
ms.date: 11/13/2006
ms.topic: article
ms.assetid: f52c302a-1b7c-46fe-8a13-8412c95cbf6d
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
msc.type: authoredcontent
ms.openlocfilehash: 85b59040cce266165353fe1627ffd983473bdcb6
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/03/2018
ms.locfileid: "37371636"
---
<a name="sorting-data-in-a-datalist-or-repeater-control-c"></a><span data-ttu-id="c7089-103">Řazení dat v prvku DataList nebo Repeater (C#)</span><span class="sxs-lookup"><span data-stu-id="c7089-103">Sorting Data in a DataList or Repeater Control (C#)</span></span>
====================
<span data-ttu-id="c7089-104">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="c7089-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="c7089-105">[Stáhněte si ukázkovou aplikaci](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe) nebo [stahovat PDF](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="c7089-105">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe) or [Download PDF](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span></span>

> <span data-ttu-id="c7089-106">V tomto kurzu prozkoumáme způsob řazení podpory v ovládacích prvcích DataList a Repeater, jakož i jak sestavit DataList nebo Repeater, jehož data můžete stránkování a řazení.</span><span class="sxs-lookup"><span data-stu-id="c7089-106">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>


## <a name="introduction"></a><span data-ttu-id="c7089-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="c7089-107">Introduction</span></span>

<span data-ttu-id="c7089-108">V [předchozí kurz o službě](paging-report-data-in-a-datalist-or-repeater-control-cs.md) jsme se zaměřili na tom, jak přidat podporu stránkování a v prvku DataList.</span><span class="sxs-lookup"><span data-stu-id="c7089-108">In the [previous tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to add paging support to a DataList.</span></span> <span data-ttu-id="c7089-109">Jsme vytvořili novou metodu v `ProductsBLL` třídy (`GetProductsAsPagedDataSource`), který se vrátil `PagedDataSource` objektu.</span><span class="sxs-lookup"><span data-stu-id="c7089-109">We created a new method in the `ProductsBLL` class (`GetProductsAsPagedDataSource`) that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="c7089-110">Při vázání na ovládacích prvcích DataList nebo Repeater, DataList nebo Repeater zobrazí jenom požadovanou stránku.</span><span class="sxs-lookup"><span data-stu-id="c7089-110">When bound to a DataList or Repeater, the DataList or Repeater would display just the requested page of data.</span></span> <span data-ttu-id="c7089-111">Tento postup je podobný co se používá interně ovládacími prvky GridView DetailsView a FormView k zajištění jejich integrované výchozí funkce stránkování.</span><span class="sxs-lookup"><span data-stu-id="c7089-111">This technique is similar to what is used internally by the GridView, DetailsView, and FormView controls to provide their built-in default paging functionality.</span></span>

<span data-ttu-id="c7089-112">Kromě nabízí podporu stránkování prvku GridView. obsahuje i mimo pole řazení podpory.</span><span class="sxs-lookup"><span data-stu-id="c7089-112">In addition to offering paging support, the GridView also includes out of the box sorting support.</span></span> <span data-ttu-id="c7089-113">DataList ani Repeater poskytuje integrovanou funkci řazení; řazení funkce však mohou být přidány pomocí bitového kódu.</span><span class="sxs-lookup"><span data-stu-id="c7089-113">Neither the DataList nor Repeater provides built-in sorting functionality; however, sorting features can be added with a bit of code.</span></span> <span data-ttu-id="c7089-114">V tomto kurzu prozkoumáme způsob řazení podpory v ovládacích prvcích DataList a Repeater, jakož i jak sestavit DataList nebo Repeater, jehož data můžete stránkování a řazení.</span><span class="sxs-lookup"><span data-stu-id="c7089-114">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>

## <a name="a-review-of-sorting"></a><span data-ttu-id="c7089-115">Přehled řazení</span><span class="sxs-lookup"><span data-stu-id="c7089-115">A Review of Sorting</span></span>

<span data-ttu-id="c7089-116">Jak jsme viděli v [stránkování a řazení dat sestavy](../paging-and-sorting/paging-and-sorting-report-data-cs.md) kurz, obsahuje prvek GridView mimo pole řazení podporu.</span><span class="sxs-lookup"><span data-stu-id="c7089-116">As we saw in the [Paging and Sorting Report Data](../paging-and-sorting/paging-and-sorting-report-data-cs.md) tutorial, the GridView control provides out of the box sorting support.</span></span> <span data-ttu-id="c7089-117">Každé pole ovládacího prvku GridView může mít přidruženou `SortExpression`, což znamená datové pole, podle kterého chcete data seřadit.</span><span class="sxs-lookup"><span data-stu-id="c7089-117">Each GridView field can have an associated `SortExpression`, which indicates the data field by which to sort the data.</span></span> <span data-ttu-id="c7089-118">Při GridView s `AllowSorting` je nastavena na `true`, každé pole ovládacího prvku GridView, které má `SortExpression` záhlaví se vykresluje jako odkazem (LinkButton) má hodnotu vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="c7089-118">When the GridView s `AllowSorting` property is set to `true`, each GridView field that has a `SortExpression` property value has its header rendered as a LinkButton.</span></span> <span data-ttu-id="c7089-119">Když uživatel klikne na konkrétní hlavičku s pole ovládacího prvku GridView, dojde k postbacku a data seřadí podle kliknutí na pole s `SortExpression`.</span><span class="sxs-lookup"><span data-stu-id="c7089-119">When a user clicks a particular GridView field s header, a postback occurs and the data is sorted according to the clicked field s `SortExpression`.</span></span>

<span data-ttu-id="c7089-120">Ovládací prvek GridView `SortExpression` , vlastnost, která ukládá `SortExpression` pole ovládacího prvku GridView data seřadí podle.</span><span class="sxs-lookup"><span data-stu-id="c7089-120">The GridView control has a `SortExpression` property as well, which stores the `SortExpression` of the GridView field the data is sorted by.</span></span> <span data-ttu-id="c7089-121">Kromě toho `SortDirection` vlastnost označuje, zda se v datech který se má seřadit v vzestupném nebo sestupném pořadí (Pokud uživatel klikne přepínat konkrétní odkaz záhlaví pole s GridView dvakrát za sebou, pořadí řazení).</span><span class="sxs-lookup"><span data-stu-id="c7089-121">Additionally, a `SortDirection` property indicates whether the data is to be sorted in ascending or descending order (if a user clicks a particular GridView field s header link twice in succession, the sort order is toggled).</span></span>

<span data-ttu-id="c7089-122">Když prvku GridView je vázán na jeho ovládací prvek zdroje dat, se předá jeho `SortExpression` a `SortDirection` vlastnosti, které chcete data správy zdrojového kódu.</span><span class="sxs-lookup"><span data-stu-id="c7089-122">When the GridView is bound to its data source control, it hands off its `SortExpression` and `SortDirection` properties to the data source control.</span></span> <span data-ttu-id="c7089-123">Ovládací prvek zdroje dat načte data a pak ho seřadí podle zadané `SortExpression` a `SortDirection` vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="c7089-123">The data source control retrieves the data and then sorts it according to the supplied `SortExpression` and `SortDirection` properties.</span></span> <span data-ttu-id="c7089-124">Po seřazení dat, ovládací prvek zdroje dat vrátí ji do prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="c7089-124">After sorting the data, the data source control returns it to the GridView.</span></span>

<span data-ttu-id="c7089-125">Tuto funkci s ovládacími prvky DataList nebo Repeater replikovat, budeme musí:</span><span class="sxs-lookup"><span data-stu-id="c7089-125">To replicate this functionality with the DataList or Repeater controls, we must:</span></span>

- <span data-ttu-id="c7089-126">Vytvoření rozhraní pro řazení</span><span class="sxs-lookup"><span data-stu-id="c7089-126">Create a sorting interface</span></span>
- <span data-ttu-id="c7089-127">Mějte na paměti datové pole pro řazení podle a jestli se mají seřadit v vzestupném nebo sestupném pořadí</span><span class="sxs-lookup"><span data-stu-id="c7089-127">Remember the data field to sort by and whether to sort in ascending or descending order</span></span>
- <span data-ttu-id="c7089-128">Dáte pokyn, aby ObjectDataSource řazení dat podle konkrétní datové pole</span><span class="sxs-lookup"><span data-stu-id="c7089-128">Instruct the ObjectDataSource to sort the data by a particular data field</span></span>

<span data-ttu-id="c7089-129">Jsme budete řešit tyto tři úkoly v krocích 3 a 4.</span><span class="sxs-lookup"><span data-stu-id="c7089-129">We'll tackle these three tasks in steps 3 and 4.</span></span> <span data-ttu-id="c7089-130">Pod prozkoumáme jak zahrnout i stránkování a řazení podpory v prvku DataList nebo Repeater.</span><span class="sxs-lookup"><span data-stu-id="c7089-130">Following that, we'll examine how to include both paging and sorting support in a DataList or Repeater.</span></span>

## <a name="step-2-displaying-the-products-in-a-repeater"></a><span data-ttu-id="c7089-131">Krok 2: Zobrazení produkty v Repeateru</span><span class="sxs-lookup"><span data-stu-id="c7089-131">Step 2: Displaying the Products in a Repeater</span></span>

<span data-ttu-id="c7089-132">Předtím, než jsme se starat o implementaci některé funkce související s řazení, umožní s začněte tím, že výpis produktů v ovládacím prvku opakovače.</span><span class="sxs-lookup"><span data-stu-id="c7089-132">Before we worry about implementing any of the sorting-related functionality, let s start by listing the products in a Repeater control.</span></span> <span data-ttu-id="c7089-133">Začněte otevřením `Sorting.aspx` stránku `PagingSortingDataListRepeater` složky.</span><span class="sxs-lookup"><span data-stu-id="c7089-133">Start by opening the `Sorting.aspx` page in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="c7089-134">Přidání ovládacího prvku Repeater na webovou stránku, nastavení jeho `ID` vlastnost `SortableProducts`.</span><span class="sxs-lookup"><span data-stu-id="c7089-134">Add a Repeater control to the web page, setting its `ID` property to `SortableProducts`.</span></span> <span data-ttu-id="c7089-135">Opakovače s inteligentním, vytvořte nový prvek ObjectDataSource s názvem `ProductsDataSource` a jeho konfigurace pro načtení dat z `ProductsBLL` třída s `GetProducts()` metody.</span><span class="sxs-lookup"><span data-stu-id="c7089-135">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource` and configure it to retrieve data from the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="c7089-136">Vyberte možnost (žádné) rozevírací seznamy na kartách INSERT, UPDATE a DELETE.</span><span class="sxs-lookup"><span data-stu-id="c7089-136">Select the (None) option from the drop-down lists in the INSERT, UPDATE, and DELETE tabs.</span></span>


<span data-ttu-id="c7089-137">[![Vytvoření prvku ObjectDataSource a nakonfigurujte ho na použití GetProductsAsPagedDataSource() – metoda](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-137">[![Create an ObjectDataSource and Configure it to Use the GetProductsAsPagedDataSource() Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span></span>

<span data-ttu-id="c7089-138">**Obrázek 1**: vytvoření ObjectDataSource a konfigurace pro použití `GetProductsAsPagedDataSource()` – metoda ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-138">**Figure 1**: Create an ObjectDataSource and Configure it to Use the `GetProductsAsPagedDataSource()` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png))</span></span>


<span data-ttu-id="c7089-139">[![Nastavte rozevírací seznam obsahuje v UPDATE, INSERT a odstranit karty na (žádný)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-139">[![Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span></span>

<span data-ttu-id="c7089-140">**Obrázek 2**: Nastavte rozevírací seznam obsahuje v UPDATE, INSERT a odstranit karty na (žádný) ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-140">**Figure 2**: Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None) ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span></span>


<span data-ttu-id="c7089-141">Na rozdíl od s DataList, Visual Studio neprovádí automatické vytváření `ItemTemplate` pro ovládací prvek Repeater po vazby ke zdroji dat.</span><span class="sxs-lookup"><span data-stu-id="c7089-141">Unlike with the DataList, Visual Studio does not automatically create an `ItemTemplate` for the Repeater control after binding it to a data source.</span></span> <span data-ttu-id="c7089-142">Kromě toho jsme musí přidat `ItemTemplate` deklarativně, jako je inteligentní značky ovládacího prvku s Repeater chybí možnost Upravit šablony v prvku DataList s.</span><span class="sxs-lookup"><span data-stu-id="c7089-142">Furthermore, we must add this `ItemTemplate` declaratively, as the Repeater control s smart tag lacks the Edit Templates option found in the DataList s.</span></span> <span data-ttu-id="c7089-143">Umožňují s použít stejné `ItemTemplate` v předchozím kurzu, který zobrazí název produktu s, dodavatele a kategorie.</span><span class="sxs-lookup"><span data-stu-id="c7089-143">Let s use the same `ItemTemplate` from the previous tutorial, which displayed the product s name, supplier, and category.</span></span>

<span data-ttu-id="c7089-144">Po přidání `ItemTemplate`, Repeater a prvku ObjectDataSource s deklarativní by měl vypadat nějak takto:</span><span class="sxs-lookup"><span data-stu-id="c7089-144">After adding the `ItemTemplate`, the Repeater and ObjectDataSource s declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample1.aspx)]

<span data-ttu-id="c7089-145">Obrázek 3 ukazuje tuto stránku při prohlížení prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="c7089-145">Figure 3 shows this page when viewed through a browser.</span></span>


<span data-ttu-id="c7089-146">[![Zobrazí se každý produkt s názvem, dodavatele a kategorie](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-146">[![Each Product s Name, Supplier, and Category is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span></span>

<span data-ttu-id="c7089-147">**Obrázek 3**: se zobrazí každý produkt s názvem, dodavatele a kategorie ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-147">**Figure 3**: Each Product s Name, Supplier, and Category is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png))</span></span>


## <a name="step-3-instructing-the-objectdatasource-to-sort-the-data"></a><span data-ttu-id="c7089-148">Krok 3: Instruující ObjectDataSource k řazení dat.</span><span class="sxs-lookup"><span data-stu-id="c7089-148">Step 3: Instructing the ObjectDataSource to Sort the Data</span></span>

<span data-ttu-id="c7089-149">Seřadit data zobrazená v Opakovači, musíme informovat ObjectDataSource řadicí výraz, podle kterého mají být řazeny data.</span><span class="sxs-lookup"><span data-stu-id="c7089-149">To sort the data displayed in the Repeater, we need to inform the ObjectDataSource of the sort expression by which the data should be sorted.</span></span> <span data-ttu-id="c7089-150">Před ObjectDataSource načte data, nejprve aktivuje její [ `Selecting` události](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx), což dává příležitost, abychom mohli zadat výraz řazení.</span><span class="sxs-lookup"><span data-stu-id="c7089-150">Before the ObjectDataSource retrieves its data, it first fires its [`Selecting` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx), which provides an opportunity for us to specify a sort expression.</span></span> <span data-ttu-id="c7089-151">`Selecting` Obslužná rutina události je předán objekt typu [ `ObjectDataSourceSelectingEventArgs` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx), který má vlastnost s názvem [ `Arguments` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx) typu [ `DataSourceSelectArguments` ](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.aspx).</span><span class="sxs-lookup"><span data-stu-id="c7089-151">The `Selecting` event handler is passed an object of type [`ObjectDataSourceSelectingEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx), which has a property named [`Arguments`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx) of type [`DataSourceSelectArguments`](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.aspx).</span></span> <span data-ttu-id="c7089-152">`DataSourceSelectArguments` Třída slouží k předávání žádostí souvisejících s daty z příjemce dat pro ovládací prvek zdroje dat a zahrnuje [ `SortExpression` vlastnost](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.sortexpression.aspx).</span><span class="sxs-lookup"><span data-stu-id="c7089-152">The `DataSourceSelectArguments` class is designed to pass data-related requests from a consumer of data to the data source control, and includes a [`SortExpression` property](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.sortexpression.aspx).</span></span>

<span data-ttu-id="c7089-153">K předávání informací řazení ze stránky ASP.NET do ObjectDataSource, vytvořit obslužnou rutinu události pro `Selecting` událostí a pomocí následujícího kódu:</span><span class="sxs-lookup"><span data-stu-id="c7089-153">To pass sorting information from the ASP.NET page to the ObjectDataSource, create an event handler for the `Selecting` event and use the following code:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample2.cs)]

<span data-ttu-id="c7089-154">*SortExpression* hodnota by se měla přiřadit název datového pole seřadit podle data (například ProductName).</span><span class="sxs-lookup"><span data-stu-id="c7089-154">The *sortExpression* value should be assigned the name of the data field to sort the data by (such as ProductName ).</span></span> <span data-ttu-id="c7089-155">Není žádná vlastnost související směr řazení, takže pokud chcete data seřadit v sestupném pořadí, připojte řetězec DESC k *sortExpression* hodnotu (například ProductName DESC).</span><span class="sxs-lookup"><span data-stu-id="c7089-155">There is no sort direction-related property, so if you want to sort the data in descending order, append the string DESC to the *sortExpression* value (such as ProductName DESC ).</span></span>

<span data-ttu-id="c7089-156">Pokračujte a zkuste několik různých hodnot pevně zakódované pro *sortExpression* a výsledky testů v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="c7089-156">Go ahead and try some different hard-coded values for *sortExpression* and test the results in a browser.</span></span> <span data-ttu-id="c7089-157">Jak ukazuje obrázek 4, při použití ProductName DESC jako *sortExpression*, produkty jsou seřazeny podle názvu ve vzestupném abecedním pořadí.</span><span class="sxs-lookup"><span data-stu-id="c7089-157">As Figure 4 shows, when using ProductName DESC as the *sortExpression*, the products are sorted by their name in reverse alphabetical order.</span></span>


<span data-ttu-id="c7089-158">[![Produkty jsou seřazeny podle názvu v abecedním pořadí reverzní](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-158">[![The Products are Sorted by their Name in Reverse Alphabetical Order](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span></span>

<span data-ttu-id="c7089-159">**Obrázek 4**: The produkty jsou seřazeny podle názvu v abecedním pořadí reverzní ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-159">**Figure 4**: The Products are Sorted by their Name in Reverse Alphabetical Order ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png))</span></span>


## <a name="step-4-creating-the-sorting-interface-and-remembering-the-sort-expression-and-direction"></a><span data-ttu-id="c7089-160">Krok 4: Vytvoření rozhraní pro řazení a zapamatování výraz řazení a směr</span><span class="sxs-lookup"><span data-stu-id="c7089-160">Step 4: Creating the Sorting Interface and Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="c7089-161">Zapnutí podpory v prvku GridView řazení převede text záhlaví každého pole řazení s odkazem (LinkButton), které při kliknutí seřadí data odpovídajícím způsobem.</span><span class="sxs-lookup"><span data-stu-id="c7089-161">Turning on sorting support in the GridView converts each sortable field s header text into a LinkButton that, when clicked, sorts the data accordingly.</span></span> <span data-ttu-id="c7089-162">Řazení rozhraní dává smysl pro aplikaci prvku GridView, kde svá data se elegantně zobrazuje ve sloupci.</span><span class="sxs-lookup"><span data-stu-id="c7089-162">Such a sorting interface makes sense for the GridView, where its data is neatly laid out in columns.</span></span> <span data-ttu-id="c7089-163">U ovládacích prvků DataList a Repeater však jiné řazení rozhraní je potřeba.</span><span class="sxs-lookup"><span data-stu-id="c7089-163">For the DataList and Repeater controls, however, a different sorting interface is needed.</span></span> <span data-ttu-id="c7089-164">Běžné řazení rozhraní seznam dat (na rozdíl od mřížky dat), je rozevírací seznam, který obsahuje pole, podle kterých lze seřadit data.</span><span class="sxs-lookup"><span data-stu-id="c7089-164">A common sorting interface for a list of data (as opposed to a grid of data), is a drop-down list that provides the fields by which the data can be sorted.</span></span> <span data-ttu-id="c7089-165">Umožní s implementovat toto rozhraní pro účely tohoto kurzu.</span><span class="sxs-lookup"><span data-stu-id="c7089-165">Let s implement such an interface for this tutorial.</span></span>

<span data-ttu-id="c7089-166">Přidat ovládací prvek DropDownList webového výše `SortableProducts` Repeater a nastavte jeho `ID` vlastnost `SortBy`.</span><span class="sxs-lookup"><span data-stu-id="c7089-166">Add a DropDownList Web control above the `SortableProducts` Repeater and set its `ID` property to `SortBy`.</span></span> <span data-ttu-id="c7089-167">V okně Vlastnosti klikněte na symbol tří teček v `Items` vlastnost přineste si Editor kolekce ListItem.</span><span class="sxs-lookup"><span data-stu-id="c7089-167">From the Properties window, click the ellipses in the `Items` property to bring up the ListItem Collection Editor.</span></span> <span data-ttu-id="c7089-168">Přidat `ListItem` s řazení dat podle `ProductName`, `CategoryName`, a `SupplierName` pole.</span><span class="sxs-lookup"><span data-stu-id="c7089-168">Add `ListItem` s to sort the data by the `ProductName`, `CategoryName`, and `SupplierName` fields.</span></span> <span data-ttu-id="c7089-169">Také přidat `ListItem` k seřazení produktů podle jejich názvu ve vzestupném abecedním pořadí.</span><span class="sxs-lookup"><span data-stu-id="c7089-169">Also add a `ListItem` to sort the products by their name in reverse alphabetical order.</span></span>

<span data-ttu-id="c7089-170">`ListItem` `Text` Vlastnosti můžete nastavit na libovolnou hodnotu (jako je jméno), ale `Value` vlastnosti musí být nastavena na název datového pole (jako je například ProductName).</span><span class="sxs-lookup"><span data-stu-id="c7089-170">The `ListItem` `Text` properties can be set to any value (such as Name ), but the `Value` properties must be set to the name of the data field (such as ProductName ).</span></span> <span data-ttu-id="c7089-171">Chcete-li seřadit výsledky v sestupném pořadí, připojte řetězec DESC s názvem pole dat, jako je ProductName DESC.</span><span class="sxs-lookup"><span data-stu-id="c7089-171">To sort the results in descending order, append the string DESC to the data field name, like ProductName DESC .</span></span>


![Přidat položky ListItem pro každé pole řazení dat](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image13.png)

<span data-ttu-id="c7089-173">**Obrázek 5**: Přidejte `ListItem` pro každé pole řazení dat</span><span class="sxs-lookup"><span data-stu-id="c7089-173">**Figure 5**: Add a `ListItem` for Each of the Sortable Data Fields</span></span>


<span data-ttu-id="c7089-174">Nakonec přidejte ovládací prvek tlačítko webového napravo od DropDownList.</span><span class="sxs-lookup"><span data-stu-id="c7089-174">Finally, add a Button Web control to the right of the DropDownList.</span></span> <span data-ttu-id="c7089-175">Nastavte jeho `ID` k `RefreshRepeater` a jeho `Text` vlastnosti k aktualizaci.</span><span class="sxs-lookup"><span data-stu-id="c7089-175">Set its `ID` to `RefreshRepeater` and its `Text` property to Refresh .</span></span>

<span data-ttu-id="c7089-176">Po vytvoření `ListItem` s a přidáte tlačítko Aktualizovat, DropDownList a tlačítko deklarativní syntaxe s by měl vypadat nějak takto:</span><span class="sxs-lookup"><span data-stu-id="c7089-176">After creating the `ListItem` s and adding the Refresh button, the DropDownList and Button s declarative syntax should look similar to the following:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample3.aspx)]

<span data-ttu-id="c7089-177">S kompletní řazení DropDownList musíme dále aktualizovat ObjectDataSource s `Selecting` obslužná rutina události tak, že používá vybraný `SortBy``ListItem` s `Value` vlastnost na rozdíl od pevně zakódované řadicí výraz.</span><span class="sxs-lookup"><span data-stu-id="c7089-177">With the sorting DropDownList complete, we next need to update the ObjectDataSource s `Selecting` event handler so that it uses the selected `SortBy``ListItem` s `Value` property as opposed to a hard-coded sort expression.</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample4.cs)]

<span data-ttu-id="c7089-178">V tuto chvíli při první návštěvě stránky bude produkty zpočátku seřazené podle `ProductName` datové pole, protože s `SortBy` `ListItem` ve výchozím nastavení zaškrtnuto (viz obrázek 6).</span><span class="sxs-lookup"><span data-stu-id="c7089-178">At this point when first visiting the page the products will initially be sorted by the `ProductName` data field, as it s the `SortBy` `ListItem` selected by default (see Figure 6).</span></span> <span data-ttu-id="c7089-179">Vyberete jinou možnost, jako je například kategorie řazení a kliknutí na Aktualizovat vyvolávají zpětné odeslání a znovu řadit data podle názvu kategorie, jak je vidět na obrázku 7.</span><span class="sxs-lookup"><span data-stu-id="c7089-179">Selecting a different sorting option such as Category and clicking Refresh will cause a postback and re-sort the data by the category name, as Figure 7 shows.</span></span>


<span data-ttu-id="c7089-180">[![Produkty jsou zpočátku seřazené podle názvu](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-180">[![The Products are Initially Sorted by their Name](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span></span>

<span data-ttu-id="c7089-181">**Obrázek 6**: The produkty, které jsou zpočátku seřazené podle názvu ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-181">**Figure 6**: The Products are Initially Sorted by their Name ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png))</span></span>


<span data-ttu-id="c7089-182">[![Produkty jsou teď seřazené podle kategorie](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-182">[![The Products are Now Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span></span>

<span data-ttu-id="c7089-183">**Obrázek 7**: The produkty, které jsou teď seřazené podle kategorie ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-183">**Figure 7**: The Products are Now Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png))</span></span>


> [!NOTE]
> <span data-ttu-id="c7089-184">Kliknutím na tlačítko Aktualizovat způsobí, že data si automaticky znovu seřazený, protože stav zobrazení opakovače s je zakázané, a způsobuje Repeater znovu připojit ke zdroji dat při každém postbacku.</span><span class="sxs-lookup"><span data-stu-id="c7089-184">Clicking the Refresh button causes the data to automatically be re-sorted because the Repeater s view state has been disabled, thereby causing the Repeater to rebind to its data source on every postback.</span></span> <span data-ttu-id="c7089-185">Pokud jste již opakovače s stav zobrazení povolený, změna řazení rozevíracího seznamu vyhráli t mít jakékoli dopad na pořadí řazení.</span><span class="sxs-lookup"><span data-stu-id="c7089-185">If you ve left the Repeater s view state enabled, changing the sorting drop-down list won t have any affect on the sort order.</span></span> <span data-ttu-id="c7089-186">Chcete-li to napravit, vytvořit obslužnou rutinu události pro tlačítko Aktualizovat s `Click` událostí a obnovení vazby Repeater ke zdroji dat (voláním opakovače s `DataBind()` metoda).</span><span class="sxs-lookup"><span data-stu-id="c7089-186">To remedy this, create an event handler for the Refresh Button s `Click` event and rebind the Repeater to its data source (by calling the Repeater s `DataBind()` method).</span></span>


## <a name="remembering-the-sort-expression-and-direction"></a><span data-ttu-id="c7089-187">Zapamatování výraz řazení a směr</span><span class="sxs-lookup"><span data-stu-id="c7089-187">Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="c7089-188">Při vytváření seřaditelné DataList nebo Repeater na stránce, kde bez řazení související zpětná volání může dojít, je, že výraz řazení a směr se uloží postbacků dnešní s.</span><span class="sxs-lookup"><span data-stu-id="c7089-188">When creating a sortable DataList or Repeater on a page where non-sort related postbacks may occur, it s imperative that the sort expression and direction be remembered across postbacks.</span></span> <span data-ttu-id="c7089-189">Představte si například, že jsme aktualizovali Opakovači v tomto kurzu zahrnout tlačítko Odstranit v jednotlivých produktech.</span><span class="sxs-lookup"><span data-stu-id="c7089-189">For example, imagine that we updated the Repeater in this tutorial to include a Delete button with each product.</span></span> <span data-ttu-id="c7089-190">Když uživatel klikne na tlačítko Odstranit jsme d spouštět nějaký kód k odstranění vybraného produktu a potom znovu připojit data, která mají opakovače.</span><span class="sxs-lookup"><span data-stu-id="c7089-190">When the user clicks the Delete button we d run some code to delete the selected product and then rebind the data to the Repeater.</span></span> <span data-ttu-id="c7089-191">Pokud podrobnosti řazení se zachová pro zpětné volání, data zobrazená na obrazovce se vrátí k původní pořadí řazení.</span><span class="sxs-lookup"><span data-stu-id="c7089-191">If the sort details are not persisted across postback, the data displayed on screen will revert to the original sort order.</span></span>

<span data-ttu-id="c7089-192">Pro účely tohoto kurzu DropDownList implicitně uloží řazení výraz a směr svůj stav zobrazení pro nás.</span><span class="sxs-lookup"><span data-stu-id="c7089-192">For this tutorial, the DropDownList implicitly saves the sort expression and direction in its view state for us.</span></span> <span data-ttu-id="c7089-193">Kdybychom používali jiné rozhraní pro řazení, jednu s LinkButtons říct, která poskytují různé možnosti řazení d potřebujeme pečlivě postbacků mějte na paměti pořadí řazení.</span><span class="sxs-lookup"><span data-stu-id="c7089-193">If we were using a different sorting interface one with, say, LinkButtons that provided the various sorting options we d need to take care to remember the sort order across postbacks.</span></span> <span data-ttu-id="c7089-194">Toho je možné dosáhnout uložením řazení parametry ve stavu zobrazení s stránky, včetně parametr řazení v řetězec dotazu, nebo prostřednictvím některé další techniku trvalého stavu.</span><span class="sxs-lookup"><span data-stu-id="c7089-194">This could be accomplished by storing the sorting parameters in the page s view state, by including the sort parameter in the querystring, or through some other state persistence technique.</span></span>

<span data-ttu-id="c7089-195">Další příklady v tomto kurzu si projděte zachování řazení podrobnosti ve stavu zobrazení stránky s.</span><span class="sxs-lookup"><span data-stu-id="c7089-195">Future examples in this tutorial explore how to persist the sorting details in the page s view state.</span></span>

## <a name="step-5-adding-sorting-support-to-a-datalist-that-uses-default-paging"></a><span data-ttu-id="c7089-196">Krok 5: Přidání podpory řazení DataList, který používá výchozí stránkování</span><span class="sxs-lookup"><span data-stu-id="c7089-196">Step 5: Adding Sorting Support to a DataList that Uses Default Paging</span></span>

<span data-ttu-id="c7089-197">V [předchozím kurzu](paging-report-data-in-a-datalist-or-repeater-control-cs.md) jsme se zaměřili na tom, jak implementovat výchozí stránkování s a v prvku DataList.</span><span class="sxs-lookup"><span data-stu-id="c7089-197">In the [preceding tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to implement default paging with a DataList.</span></span> <span data-ttu-id="c7089-198">Umožní s rozšířit tuto předchozí příklad patří schopnost stránkovaná data seřadit.</span><span class="sxs-lookup"><span data-stu-id="c7089-198">Let s extend this previous example to include the ability to sort the paged data.</span></span> <span data-ttu-id="c7089-199">Začněte otevřením `SortingWithDefaultPaging.aspx` a `Paging.aspx` stránky v `PagingSortingDataListRepeater` složky.</span><span class="sxs-lookup"><span data-stu-id="c7089-199">Start by opening the `SortingWithDefaultPaging.aspx` and `Paging.aspx` pages in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="c7089-200">Z `Paging.aspx` stránky, klikněte na tlačítko zdroj zobrazíte deklarativním označení stránky s.</span><span class="sxs-lookup"><span data-stu-id="c7089-200">From the `Paging.aspx` page, click on the Source button to view the page s declarative markup.</span></span> <span data-ttu-id="c7089-201">Zkopírování vybraného textu (viz obrázek 8) a vložte ho do deklarativním označení `SortingWithDefaultPaging.aspx` mezi `<asp:Content>` značky.</span><span class="sxs-lookup"><span data-stu-id="c7089-201">Copy the selected text (see Figure 8) and paste it into the declarative markup of `SortingWithDefaultPaging.aspx` between the `<asp:Content>` tags.</span></span>


<span data-ttu-id="c7089-202">[![Deklarativní v replikaci &lt;asp: Content&gt; značek z Paging.aspx SortingWithDefaultPaging.aspx](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-202">[![Replicate the Declarative Markup in the &lt;asp:Content&gt; Tags from Paging.aspx to SortingWithDefaultPaging.aspx](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span></span>

<span data-ttu-id="c7089-203">**Obrázek 8**: deklarativní v replikaci `<asp:Content>` značek z `Paging.aspx` k `SortingWithDefaultPaging.aspx` ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-203">**Figure 8**: Replicate the Declarative Markup in the `<asp:Content>` Tags from `Paging.aspx` to `SortingWithDefaultPaging.aspx` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span></span>


<span data-ttu-id="c7089-204">Po zkopírování deklarativní, zkopírujte metod a vlastností v `Paging.aspx` stránky s použití modelu code-behind třídy k použití modelu code-behind třídu pro `SortingWithDefaultPaging.aspx`.</span><span class="sxs-lookup"><span data-stu-id="c7089-204">After copying the declarative markup, copy the methods and properties in the `Paging.aspx` page s code-behind class to the code-behind class for `SortingWithDefaultPaging.aspx`.</span></span> <span data-ttu-id="c7089-205">V dalším kroku věnujte chvíli zobrazíte `SortingWithDefaultPaging.aspx` stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="c7089-205">Next, take a moment to view the `SortingWithDefaultPaging.aspx` page in a browser.</span></span> <span data-ttu-id="c7089-206">By měl vykazovat stejné funkce a vzhled jako `Paging.aspx`.</span><span class="sxs-lookup"><span data-stu-id="c7089-206">It should exhibit the same functionality and appearance as `Paging.aspx`.</span></span>

## <a name="enhancing-productsbll-to-include-a-default-paging-and-sorting-method"></a><span data-ttu-id="c7089-207">Vylepšení ProductsBLL obsahovat výchozí stránkování a řazení – metoda</span><span class="sxs-lookup"><span data-stu-id="c7089-207">Enhancing ProductsBLL to Include a Default Paging and Sorting Method</span></span>

<span data-ttu-id="c7089-208">V předchozím kurzu jsme vytvořili `GetProductsAsPagedDataSource(pageIndex, pageSize)` metoda ve `ProductsBLL` třídy, která vrátila `PagedDataSource` objektu.</span><span class="sxs-lookup"><span data-stu-id="c7089-208">In the previous tutorial we created a `GetProductsAsPagedDataSource(pageIndex, pageSize)` method in the `ProductsBLL` class that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="c7089-209">To `PagedDataSource` se naplní objekt *všechny* produktů (prostřednictvím BLL s `GetProducts()` metoda), ale při vázání na ovládacím prvku DataList jen takové záznamy, které odpovídají zadané *pageIndex* a *pageSize* se zobrazí vstupní parametry.</span><span class="sxs-lookup"><span data-stu-id="c7089-209">This `PagedDataSource` object was populated with *all* of the products (via the BLL s `GetProducts()` method), but when bound to the DataList only those records corresponding to the specified *pageIndex* and *pageSize* input parameters were displayed.</span></span>

<span data-ttu-id="c7089-210">Dříve v tomto kurzu jsme přidali podporu třídění tak, že zadáte výraz řazení v prvku ObjectDataSource s `Selecting` obslužné rutiny události.</span><span class="sxs-lookup"><span data-stu-id="c7089-210">Earlier in this tutorial we added sorting support by specifying the sort expression from the ObjectDataSource s `Selecting` event handler.</span></span> <span data-ttu-id="c7089-211">Tento postup funguje, i když prvku ObjectDataSource se vrátí objekt, který se dají řadit, jako je třeba `ProductsDataTable` vrácených `GetProducts()` metody.</span><span class="sxs-lookup"><span data-stu-id="c7089-211">This works well when the ObjectDataSource is returned an object that can be sorted, like the `ProductsDataTable` returned by the `GetProducts()` method.</span></span> <span data-ttu-id="c7089-212">Ale `PagedDataSource` vrácený `GetProductsAsPagedDataSource` metoda nepodporuje řazení jeho vnitřní datového zdroje.</span><span class="sxs-lookup"><span data-stu-id="c7089-212">However, the `PagedDataSource` object returned by the `GetProductsAsPagedDataSource` method does not support sorting of its inner data source.</span></span> <span data-ttu-id="c7089-213">Místo toho potřebujeme seřadit výsledky vrácené `GetProducts()` metoda *před* jsme ji umístit do `PagedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="c7089-213">Instead, we need to sort the results returned from the `GetProducts()` method *before* we put it in the `PagedDataSource`.</span></span>

<span data-ttu-id="c7089-214">K tomu vytvořit novou metodu v `ProductsBLL` třídy, `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`.</span><span class="sxs-lookup"><span data-stu-id="c7089-214">To accomplish this, create a new method in the `ProductsBLL` class, `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`.</span></span> <span data-ttu-id="c7089-215">Řazení `ProductsDataTable` vrácené `GetProducts()` metoda, zadejte `Sort` vlastnost jeho výchozí `DataTableView`:</span><span class="sxs-lookup"><span data-stu-id="c7089-215">To sort the `ProductsDataTable` returned by the `GetProducts()` method, specify the `Sort` property of its default `DataTableView`:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample5.cs)]

<span data-ttu-id="c7089-216">`GetProductsSortedAsPagedDataSource` Metoda se liší jen mírně z `GetProductsAsPagedDataSource` metoda vytvořili v předchozím kurzu.</span><span class="sxs-lookup"><span data-stu-id="c7089-216">The `GetProductsSortedAsPagedDataSource` method differs only slightly from the `GetProductsAsPagedDataSource` method created in the previous tutorial.</span></span> <span data-ttu-id="c7089-217">Zejména `GetProductsSortedAsPagedDataSource` další vstupní parametr přijímá `sortExpression` a přiřadí tuto hodnotu `Sort` vlastnost `ProductDataTable` s `DefaultView`.</span><span class="sxs-lookup"><span data-stu-id="c7089-217">In particular, `GetProductsSortedAsPagedDataSource` accepts an additional input parameter `sortExpression` and assigns this value to the `Sort` property of the `ProductDataTable` s `DefaultView`.</span></span> <span data-ttu-id="c7089-218">Pár řádků kódu později, `PagedDataSource` je přiřazen objekt s zdroje dat `ProductDataTable` s `DefaultView`.</span><span class="sxs-lookup"><span data-stu-id="c7089-218">A few lines of code later, the `PagedDataSource` object s DataSource is assigned the `ProductDataTable` s `DefaultView`.</span></span>

## <a name="calling-the-getproductssortedaspageddatasource-method-and-specifying-the-value-for-the-sortexpression-input-parameter"></a><span data-ttu-id="c7089-219">Volání metody GetProductsSortedAsPagedDataSource a určující hodnotu pro parametr SortExpression vstup</span><span class="sxs-lookup"><span data-stu-id="c7089-219">Calling the GetProductsSortedAsPagedDataSource Method and Specifying the Value for the SortExpression Input Parameter</span></span>

<span data-ttu-id="c7089-220">S `GetProductsSortedAsPagedDataSource` metoda kompletní, dalším krokem je poskytnout hodnotu tohoto parametru.</span><span class="sxs-lookup"><span data-stu-id="c7089-220">With the `GetProductsSortedAsPagedDataSource` method complete, the next step is to provide the value for this parameter.</span></span> <span data-ttu-id="c7089-221">Prvek ObjectDataSource v `SortingWithDefaultPaging.aspx` je aktuálně nakonfigurován pro volání `GetProductsAsPagedDataSource` metoda a předá dva vstupní parametry prostřednictvím jeho dvě `QueryStringParameters`, které jsou určené v `SelectParameters` kolekce.</span><span class="sxs-lookup"><span data-stu-id="c7089-221">The ObjectDataSource in `SortingWithDefaultPaging.aspx` is currently configured to call the `GetProductsAsPagedDataSource` method and passes in the two input parameters through its two `QueryStringParameters`, which are specified in the `SelectParameters` collection.</span></span> <span data-ttu-id="c7089-222">Tyto dvě `QueryStringParameters` označuje, že zdroj `GetProductsAsPagedDataSource` metody s *pageIndex* a *pageSize* parametry pocházejí z pole řetězce dotazu `pageIndex` a `pageSize`.</span><span class="sxs-lookup"><span data-stu-id="c7089-222">These two `QueryStringParameters` indicate that the source for the `GetProductsAsPagedDataSource` method s *pageIndex* and *pageSize* parameters come from the querystring fields `pageIndex` and `pageSize`.</span></span>

<span data-ttu-id="c7089-223">Aktualizace prvku ObjectDataSource s `SelectMethod` vlastnost tak, že vyvolá nový `GetProductsSortedAsPagedDataSource` metody.</span><span class="sxs-lookup"><span data-stu-id="c7089-223">Update the ObjectDataSource s `SelectMethod` property so that it invokes the new `GetProductsSortedAsPagedDataSource` method.</span></span> <span data-ttu-id="c7089-224">Pak přidejte nový `QueryStringParameter` tak, aby *sortExpression* vstupní parametr je přístupná z pole řetězce dotazu `sortExpression`.</span><span class="sxs-lookup"><span data-stu-id="c7089-224">Then, add a new `QueryStringParameter` so that the *sortExpression* input parameter is accessed from the querystring field `sortExpression`.</span></span> <span data-ttu-id="c7089-225">Nastavte `QueryStringParameter` s `DefaultValue` k ProductName.</span><span class="sxs-lookup"><span data-stu-id="c7089-225">Set the `QueryStringParameter` s `DefaultValue` to ProductName .</span></span>

<span data-ttu-id="c7089-226">Po provedení těchto změn prvku ObjectDataSource s deklarativní by měl vypadat jako:</span><span class="sxs-lookup"><span data-stu-id="c7089-226">After these changes, the ObjectDataSource s declarative markup should look like:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample6.aspx)]

<span data-ttu-id="c7089-227">V tomto okamžiku `SortingWithDefaultPaging.aspx` stránky se jeho výsledky seřadit abecedně podle názvu produktu (viz obrázek 9).</span><span class="sxs-lookup"><span data-stu-id="c7089-227">At this point, the `SortingWithDefaultPaging.aspx` page will sort its results alphabetically by the product name (see Figure 9).</span></span> <span data-ttu-id="c7089-228">Důvodem je, že ve výchozím nastavení, je hodnota ProductName předáno jako `GetProductsSortedAsPagedDataSource` metody s *sortExpression* parametru.</span><span class="sxs-lookup"><span data-stu-id="c7089-228">This is because, by default, a value of ProductName is passed in as the `GetProductsSortedAsPagedDataSource` method s *sortExpression* parameter.</span></span>


<span data-ttu-id="c7089-229">[![Ve výchozím nastavení výsledky jsou seřazené podle ProductName](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-229">[![By Default, the Results are Sorted by ProductName](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span></span>

<span data-ttu-id="c7089-230">**Obrázek 9**: ve výchozím nastavení, výsledky jsou seřazeny podle `ProductName` ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-230">**Figure 9**: By Default, the Results are Sorted by `ProductName` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png))</span></span>


<span data-ttu-id="c7089-231">Pokud chcete ručně přidat `sortExpression` pole řetězce dotazu, jako `SortingWithDefaultPaging.aspx?sortExpression=CategoryName` výsledky budou seřazeny podle zadaného `sortExpression`.</span><span class="sxs-lookup"><span data-stu-id="c7089-231">If you manually add a `sortExpression` querystring field such as `SortingWithDefaultPaging.aspx?sortExpression=CategoryName` the results will be sorted by the specified `sortExpression`.</span></span> <span data-ttu-id="c7089-232">Nicméně to `sortExpression` parametr není součástí řetězec dotazu při přesunu na jinou stránku data.</span><span class="sxs-lookup"><span data-stu-id="c7089-232">However, this `sortExpression` parameter is not included in the querystring when moving to a different page of data.</span></span> <span data-ttu-id="c7089-233">Kliknutím na další nebo poslední stránku ve skutečnosti tlačítka přebírá nám zpět do `Paging.aspx`!</span><span class="sxs-lookup"><span data-stu-id="c7089-233">In fact, clicking on the Next or Last page buttons takes us back to `Paging.aspx`!</span></span> <span data-ttu-id="c7089-234">Kromě toho zde s aktuálně žádné řazení rozhraní.</span><span class="sxs-lookup"><span data-stu-id="c7089-234">Furthermore, there s currently no sorting interface.</span></span> <span data-ttu-id="c7089-235">Jediným způsobem, uživatel může změnit pořadí řazení stránkovaného dat je přímá manipulace s řetězec dotazu.</span><span class="sxs-lookup"><span data-stu-id="c7089-235">The only way a user can change the sort order of the paged data is by manipulating the querystring directly.</span></span>

## <a name="creating-the-sorting-interface"></a><span data-ttu-id="c7089-236">Vytvoření rozhraní pro řazení</span><span class="sxs-lookup"><span data-stu-id="c7089-236">Creating the Sorting Interface</span></span>

<span data-ttu-id="c7089-237">Musíme nejprve aktualizovat `RedirectUser` metodu pro odeslání uživateli `SortingWithDefaultPaging.aspx` (místo `Paging.aspx`) a chcete zahrnout `sortExpression` hodnotu v řetězec dotazu.</span><span class="sxs-lookup"><span data-stu-id="c7089-237">We first need to update the `RedirectUser` method to send the user to `SortingWithDefaultPaging.aspx` (instead of `Paging.aspx`) and to include the `sortExpression` value in the querystring.</span></span> <span data-ttu-id="c7089-238">Také jsme měli přidat jen pro čtení,-úrovni stránky s názvem `SortExpression` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="c7089-238">We should also add a read-only, page-level named `SortExpression` property.</span></span> <span data-ttu-id="c7089-239">Tuto vlastnost, podobně jako `PageIndex` a `PageSize` vlastnosti vytvořené v předchozím kurzu, vrátí hodnotu `sortExpression` pole řetězce dotazu, pokud existuje a výchozí hodnotu (ProductName) jinak.</span><span class="sxs-lookup"><span data-stu-id="c7089-239">This property, similar to the `PageIndex` and `PageSize` properties created in the previous tutorial, returns the value of the `sortExpression` querystring field if it exists, and the default value ( ProductName ) otherwise.</span></span>

<span data-ttu-id="c7089-240">Aktuálně `RedirectUser` metoda přijímá pouze jeden vstupní parametr index stránky k zobrazení.</span><span class="sxs-lookup"><span data-stu-id="c7089-240">Currently the `RedirectUser` method accepts only a single input parameter the index of the page to display.</span></span> <span data-ttu-id="c7089-241">Může však nastat situace, kdy chceme přesměruje uživatele na konkrétní stránce dat s využitím řadicí výraz, než jaké s zadané v řetězec dotazu.</span><span class="sxs-lookup"><span data-stu-id="c7089-241">However, there may be times when we want to redirect the user to a particular page of data using a sort expression other than what s specified in the querystring.</span></span> <span data-ttu-id="c7089-242">Za chvíli vytvoříme řazení rozhraní pro tuto stránku, která bude obsahovat řadu tlačítko webové ovládací prvky pro řazení data podle zadaného sloupce.</span><span class="sxs-lookup"><span data-stu-id="c7089-242">In a moment we'll create the sorting interface for this page, which will include a series of Button Web controls for sorting the data by a specified column.</span></span> <span data-ttu-id="c7089-243">Jedno z těchto tlačítek se při kliknutí na, chcete přesměrovat uživatele předanou ve výrazu hodnotu odpovídající řazení.</span><span class="sxs-lookup"><span data-stu-id="c7089-243">When one of those Buttons is clicked, we want to redirect the user passing in the appropriate sort expression value.</span></span> <span data-ttu-id="c7089-244">Chcete-li poskytují tuto funkci, vytvořte dvě verze `RedirectUser` metody.</span><span class="sxs-lookup"><span data-stu-id="c7089-244">To provide this functionality, create two versions of the `RedirectUser` method.</span></span> <span data-ttu-id="c7089-245">První z nich by měla přijímat pouze index stránky k zobrazení, zatímco druhá přijímá výrazu indexu a řazení stránky.</span><span class="sxs-lookup"><span data-stu-id="c7089-245">The first one should accept just the page index to display, while the second one accepts the page index and sort expression.</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample7.cs)]

<span data-ttu-id="c7089-246">V prvním příkladu v tomto kurzu jsme vytvořili řazení rozhraní pomocí DropDownList.</span><span class="sxs-lookup"><span data-stu-id="c7089-246">In the first example in this tutorial, we created a sorting interface using a DropDownList.</span></span> <span data-ttu-id="c7089-247">V tomto příkladu vám umožňují s použít tři ovládací prvky webového tlačítko umístěn nad ovládacím prvku DataList, jeden pro řazení podle `ProductName`, jeden pro `CategoryName`a jeden pro `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="c7089-247">For this example, let s use three Button Web controls positioned above the DataList one for sorting by `ProductName`, one for `CategoryName`, and one for `SupplierName`.</span></span> <span data-ttu-id="c7089-248">Přidejte tři ovládací prvky tlačítka webové nastavení jejich `ID` a `Text` vlastnosti odpovídajícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="c7089-248">Add the three Button Web controls, setting their `ID` and `Text` properties appropriately:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample8.aspx)]

<span data-ttu-id="c7089-249">Dále vytvořte `Click` obslužnou rutinu události pro každý.</span><span class="sxs-lookup"><span data-stu-id="c7089-249">Next, create a `Click` event handler for each.</span></span> <span data-ttu-id="c7089-250">Obslužné rutiny události by měly volat `RedirectUser` metoda vrací uživatele na první stránku pomocí odpovídající řadicí výraz.</span><span class="sxs-lookup"><span data-stu-id="c7089-250">The event handlers should call the `RedirectUser` method, returning the user to the first page using the appropriate sort expression.</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample9.cs)]

<span data-ttu-id="c7089-251">Při první návštěvě stránky, data abecedně seřazené podle názvu produktu (vrátit zpět k obrázek 9).</span><span class="sxs-lookup"><span data-stu-id="c7089-251">When first visiting the page, the data is sorted by the product name alphabetically (refer back to Figure 9).</span></span> <span data-ttu-id="c7089-252">Klikněte na tlačítko Další přejděte k druhé stránce data a potom klikněte na řazení podle kategorie tlačítko.</span><span class="sxs-lookup"><span data-stu-id="c7089-252">Click the Next button to advance to the second page of data and then click the Sort by Category button.</span></span> <span data-ttu-id="c7089-253">Vrátí se nám na první stránku dat, seřazené podle názvu kategorie (viz obrázek 10).</span><span class="sxs-lookup"><span data-stu-id="c7089-253">This returns us to the first page of data, sorted by category name (see Figure 10).</span></span> <span data-ttu-id="c7089-254">Podobně klepnutím na řazení podle dodavatele tlačítko seřadí data od první stránky dat dodavatelem.</span><span class="sxs-lookup"><span data-stu-id="c7089-254">Likewise, clicking the Sort by Supplier button sorts the data by supplier starting from the first page of data.</span></span> <span data-ttu-id="c7089-255">Možnost řazení je uloží, protože data je stránkování prostřednictvím.</span><span class="sxs-lookup"><span data-stu-id="c7089-255">The sort choice is remembered as the data is paged through.</span></span> <span data-ttu-id="c7089-256">Po seřazení podle kategorie a pak přechodu na stránku třináctou dat obrázku 11 můžete vidět na stránce.</span><span class="sxs-lookup"><span data-stu-id="c7089-256">Figure 11 shows the page after sorting by category and then advancing to the thirteenth page of data.</span></span>


<span data-ttu-id="c7089-257">[![Produkty jsou seřazeny podle kategorie](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-257">[![The Products are Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span></span>

<span data-ttu-id="c7089-258">**Obrázek 10**: The produkty jsou seřazeny podle kategorie ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-258">**Figure 10**: The Products are Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png))</span></span>


<span data-ttu-id="c7089-259">[![Výraz řazení se uloží, při stránkování přes Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-259">[![The Sort Expression is Remembered When Paging Through the Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span></span>

<span data-ttu-id="c7089-260">**Obrázek 11**: The řadicí výraz se uloží, při stránkování prostřednictvím Data ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-260">**Figure 11**: The Sort Expression is Remembered When Paging Through the Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png))</span></span>


## <a name="step-6-custom-paging-through-records-in-a-repeater"></a><span data-ttu-id="c7089-261">Krok 6: Vlastní stránkování prostřednictvím záznamy v Repeateru</span><span class="sxs-lookup"><span data-stu-id="c7089-261">Step 6: Custom Paging Through Records in a Repeater</span></span>

<span data-ttu-id="c7089-262">V příkladu v prvku DataList prozkoumat v kroku 5 stránek prostřednictvím její data způsobem neefektivní výchozí stránkování.</span><span class="sxs-lookup"><span data-stu-id="c7089-262">The DataList example examined in step 5 pages through its data using the inefficient default paging technique.</span></span> <span data-ttu-id="c7089-263">Při procházení dostatečně velké objemy dat, je nutné použít vlastní stránkování.</span><span class="sxs-lookup"><span data-stu-id="c7089-263">When paging through sufficiently large amounts of data, it is imperative that custom paging be used.</span></span> <span data-ttu-id="c7089-264">Zpátky [efektivně stránkování prostřednictvím velkých objemů dat](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) a [řazení vlastní stránkování dat](../paging-and-sorting/sorting-custom-paged-data-cs.md) kurzy, jsme se zaměřili na rozdíly mezi výchozí a vlastní stránkování a vytvořené metody v BLL pro Použití vlastní stránkování a řazení vlastní stránkovaná data.</span><span class="sxs-lookup"><span data-stu-id="c7089-264">Back in the [Efficiently Paging Through Large Amounts of Data](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) and [Sorting Custom Paged Data](../paging-and-sorting/sorting-custom-paged-data-cs.md) tutorials, we examined the differences between default and custom paging and created methods in the BLL for utilizing custom paging and sorting custom paged data.</span></span> <span data-ttu-id="c7089-265">Konkrétně se tyto dvě předchozích kurzů, jsme přidali následující tři metody, které `ProductsBLL` třídy:</span><span class="sxs-lookup"><span data-stu-id="c7089-265">In particular, in these two previous tutorials we added the following three methods to the `ProductsBLL` class:</span></span>

- <span data-ttu-id="c7089-266">`GetProductsPaged(startRowIndex, maximumRows)` Vrátí záznamy, které začínají na určitou podskupinu *startRowIndex* a nejvýše *maximumRows*.</span><span class="sxs-lookup"><span data-stu-id="c7089-266">`GetProductsPaged(startRowIndex, maximumRows)` returns a particular subset of records starting at *startRowIndex* and not exceeding *maximumRows*.</span></span>
- <span data-ttu-id="c7089-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)` Vrátí podmnožinu záznamů seřazených podle zadaného konkrétní *sortExpression* vstupního parametru.</span><span class="sxs-lookup"><span data-stu-id="c7089-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)` returns a particular subset of records sorted by the specified *sortExpression* input parameter.</span></span>
- <span data-ttu-id="c7089-268">`TotalNumberOfProducts()` poskytuje celkový počet záznamů v `Products` databázové tabulky.</span><span class="sxs-lookup"><span data-stu-id="c7089-268">`TotalNumberOfProducts()` provides the total number of records in the `Products` database table.</span></span>

<span data-ttu-id="c7089-269">Tyto metody slouží k efektivnímu stránce a roztřídit data pomocí ovládacího prvku DataList nebo Repeater.</span><span class="sxs-lookup"><span data-stu-id="c7089-269">These methods can be used to efficiently page and sort through data using a DataList or Repeater control.</span></span> <span data-ttu-id="c7089-270">Pro ilustraci to umožní s začněte vytvořením prvku opakovače s vlastní podporou stránkování; potom přidáme možnosti řazení.</span><span class="sxs-lookup"><span data-stu-id="c7089-270">To illustrate this, let s start by creating a Repeater control with custom paging support; we'll then add sorting capabilities.</span></span>

<span data-ttu-id="c7089-271">Otevřít `SortingWithCustomPaging.aspx` stránku `PagingSortingDataListRepeater` složky a přidat Repeateru na stránku nastavení jeho `ID` vlastnost `Products`.</span><span class="sxs-lookup"><span data-stu-id="c7089-271">Open the `SortingWithCustomPaging.aspx` page in the `PagingSortingDataListRepeater` folder and add a Repeater to the page, setting its `ID` property to `Products`.</span></span> <span data-ttu-id="c7089-272">Opakovače s inteligentním, vytvořte nový prvek ObjectDataSource s názvem `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="c7089-272">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource`.</span></span> <span data-ttu-id="c7089-273">Vyberte svoje data z konfigurace `ProductsBLL` třída s `GetProductsPaged` metoda.</span><span class="sxs-lookup"><span data-stu-id="c7089-273">Configure it to select its data from the `ProductsBLL` class s `GetProductsPaged` method.</span></span>


<span data-ttu-id="c7089-274">[![Konfigurace ObjectDataSource metody GetProductsPaged ProductsBLL třída s](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-274">[![Configure the ObjectDataSource to Use the ProductsBLL Class s GetProductsPaged Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span></span>

<span data-ttu-id="c7089-275">**Obrázek 12**: Konfigurace ObjectDataSource k použití `ProductsBLL` třída s `GetProductsPaged` – metoda ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-275">**Figure 12**: Configure the ObjectDataSource to Use the `ProductsBLL` Class s `GetProductsPaged` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span></span>


<span data-ttu-id="c7089-276">Nastavte rozevírací seznamy v UPDATE, INSERT a odstraňovat karty na (žádný) a potom klikněte na tlačítko Další.</span><span class="sxs-lookup"><span data-stu-id="c7089-276">Set the drop-down lists in the UPDATE, INSERT, and DELETE tabs to (None) and then click the Next button.</span></span> <span data-ttu-id="c7089-277">Průvodce konfigurace zdroje dat vyzve k zadání zdrojů `GetProductsPaged` metody s *startRowIndex* a *maximumRows* vstupní parametry.</span><span class="sxs-lookup"><span data-stu-id="c7089-277">The Configure Data Source wizard now prompts for the sources of the `GetProductsPaged` method s *startRowIndex* and *maximumRows* input parameters.</span></span> <span data-ttu-id="c7089-278">Ve skutečnosti tyto vstupní parametry budou ignorovány.</span><span class="sxs-lookup"><span data-stu-id="c7089-278">In actuality, these input parameters are ignored.</span></span> <span data-ttu-id="c7089-279">Místo toho *startRowIndex* a *maximumRows* hodnoty budou předávána ve prostřednictvím `Arguments` vlastnost v prvku ObjectDataSource s `Selecting` obslužná rutina události, stejně jako jak jsme zadali *sortExpression* v první kurz s ukázkou.</span><span class="sxs-lookup"><span data-stu-id="c7089-279">Instead, the *startRowIndex* and *maximumRows* values will be passed in through the `Arguments` property in the ObjectDataSource s `Selecting` event handler, just like how we specified the *sortExpression* in this tutorial s first demo.</span></span> <span data-ttu-id="c7089-280">Proto nechte zdroji parametru rozevírací seznamy v Průvodci nastavte na None.</span><span class="sxs-lookup"><span data-stu-id="c7089-280">Therefore, leave the parameter source drop-down lists in the wizard set at None .</span></span>


<span data-ttu-id="c7089-281">[![Ponechte sady zdrojů na hodnotu None](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-281">[![Leave the Parameter Sources Set to None](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span></span>

<span data-ttu-id="c7089-282">**Obrázek 13**: ponechte zdroje parametr nastaven na hodnotu None ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-282">**Figure 13**: Leave the Parameter Sources Set to None ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png))</span></span>


> [!NOTE]
> <span data-ttu-id="c7089-283">Proveďte *není* nastavit ObjectDataSource s `EnablePaging` vlastnost `true`.</span><span class="sxs-lookup"><span data-stu-id="c7089-283">Do *not* set the ObjectDataSource s `EnablePaging` property to `true`.</span></span> <span data-ttu-id="c7089-284">To způsobí, že ObjectDataSource automaticky zahrnulo vlastní *startRowIndex* a *maximumRows* parametrů `SelectMethod` s existující seznam parametrů.</span><span class="sxs-lookup"><span data-stu-id="c7089-284">This will cause the ObjectDataSource to automatically include its own *startRowIndex* and *maximumRows* parameters to the `SelectMethod` s existing parameter list.</span></span> <span data-ttu-id="c7089-285">`EnablePaging` Vlastnost je užitečná, když vlastní vazby dat k ovládacímu prvku GridView, DetailsView nebo FormView stránkováním vzhledem k tomu, že tyto ovládací prvky očekávat určité chování v prvku ObjectDataSource této s k dispozici pouze v případě `EnablePaging` vlastnost `true`.</span><span class="sxs-lookup"><span data-stu-id="c7089-285">The `EnablePaging` property is useful when binding custom paged data to a GridView, DetailsView, or FormView control because these controls expect certain behavior from the ObjectDataSource that s only available when `EnablePaging` property is `true`.</span></span> <span data-ttu-id="c7089-286">Vzhledem k tomu, že budeme muset ručně přidat podporu stránkování v prvku DataList a Repeater, ponechejte tuto vlastnost nastavenu `false` (výchozí), jak jsme budete zanést do potřebné funkce přímo v rámci naši stránku ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="c7089-286">Since we have to manually add the paging support for the DataList and Repeater, leave this property set to `false` (the default), as we'll bake in the needed functionality directly within our ASP.NET page.</span></span>


<span data-ttu-id="c7089-287">Nakonec definujte opakovače s `ItemTemplate` tak, aby produkt s názvem, kategorie a dodavateli.</span><span class="sxs-lookup"><span data-stu-id="c7089-287">Finally, define the Repeater s `ItemTemplate` so that the product s name, category, and supplier are shown.</span></span> <span data-ttu-id="c7089-288">Po provedení těchto změn Repeater a ObjectDataSource deklarativní syntaxe s by měl vypadat nějak takto:</span><span class="sxs-lookup"><span data-stu-id="c7089-288">After these changes, the Repeater and ObjectDataSource s declarative syntax should look similar to the following:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample10.aspx)]

<span data-ttu-id="c7089-289">Za chvíli najdete na stránce prostřednictvím prohlížeče a Všimněte si, že nejsou vráceny žádné záznamy.</span><span class="sxs-lookup"><span data-stu-id="c7089-289">Take a moment to visit the page through a browser and note that no records are returned.</span></span> <span data-ttu-id="c7089-290">Důvodem je, že jsme ve ještě k určení *startRowIndex* a *maximumRows* hodnoty parametrů; proto hodnoty 0 jsou předávány v obou.</span><span class="sxs-lookup"><span data-stu-id="c7089-290">This is because we ve yet to specify the *startRowIndex* and *maximumRows* parameter values; therefore, values of 0 are being passed in for both.</span></span> <span data-ttu-id="c7089-291">Chcete-li zadat tyto hodnoty, vytvořit obslužnou rutinu události pro prvek ObjectDataSource s `Selecting` událostí a nastavte tyto parametry hodnoty prostřednictvím kódu programu k pevně definovaných hodnot 0 až 5 v uvedeném pořadí:</span><span class="sxs-lookup"><span data-stu-id="c7089-291">To specify these values, create an event handler for the ObjectDataSource s `Selecting` event and set these parameters values programmatically to hard-coded values of 0 and 5, respectively:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample11.cs)]

<span data-ttu-id="c7089-292">Díky této změně stránky, při zobrazení v prohlížeči zobrazí prvních pěti produkty.</span><span class="sxs-lookup"><span data-stu-id="c7089-292">With this change, the page, when viewed through a browser, shows the first five products.</span></span>


<span data-ttu-id="c7089-293">[![Prvních pět záznamů se zobrazí.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-293">[![The First Five Records are Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span></span>

<span data-ttu-id="c7089-294">**Obrázek 14**: jsou zobrazeny prvních pět záznamů ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-294">**Figure 14**: The First Five Records are Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png))</span></span>


> [!NOTE]
> <span data-ttu-id="c7089-295">Produkty uvedenými v obrázek 14 dojít, který se má seřadit podle názvu produktu, protože `GetProductsPaged` uloženou proceduru, která provádí efektivní vlastní stránkování dotaz řadí výsledky podle `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="c7089-295">The products listed in Figure 14 happen to be sorted by product name because the `GetProductsPaged` stored procedure that performs the efficient custom paging query orders the results by `ProductName`.</span></span>


<span data-ttu-id="c7089-296">Umožní uživateli procházení stránek, musíme udržovat přehled o start index řádku a maximální počet řádků a postbacků pamatovat si tyto hodnoty.</span><span class="sxs-lookup"><span data-stu-id="c7089-296">In order to allow the user to step through the pages, we need to keep track of the start row index and maximum rows and remember these values across postbacks.</span></span> <span data-ttu-id="c7089-297">V příkladu stránkování výchozí jsme použili pole řetězce dotazu k uchování těchto hodnot. pro tuto ukázku umožní zachovat tyto informace ve stavu zobrazení stránky s s.</span><span class="sxs-lookup"><span data-stu-id="c7089-297">In the default paging example we used querystring fields to persist these values; for this demo, let s persist this information in the page s view state.</span></span> <span data-ttu-id="c7089-298">Vytvořte následující dvě vlastnosti:</span><span class="sxs-lookup"><span data-stu-id="c7089-298">Create the following two properties:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample12.cs)]

<span data-ttu-id="c7089-299">V dalším kroku aktualizovat kód v obslužné rutině události Selecting tak, aby používala `StartRowIndex` a `MaximumRows` vlastnosti namísto pevně definovaných hodnot 0 až 5:</span><span class="sxs-lookup"><span data-stu-id="c7089-299">Next, update the code in the Selecting event handler so that it uses the `StartRowIndex` and `MaximumRows` properties instead of the hard-coded values of 0 and 5:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample13.cs)]

<span data-ttu-id="c7089-300">V tomto okamžiku naši stránku stále zobrazuje jenom prvních pět záznamů.</span><span class="sxs-lookup"><span data-stu-id="c7089-300">At this point our page still shows just the first five records.</span></span> <span data-ttu-id="c7089-301">Nicméně s těmito vlastnostmi na místě, můžeme znovu připraven na vytvoření našeho stránkovací rozhraní.</span><span class="sxs-lookup"><span data-stu-id="c7089-301">However, with these properties in place, we re ready to create our paging interface.</span></span>

## <a name="adding-the-paging-interface"></a><span data-ttu-id="c7089-302">Přidání rozhraní stránkování</span><span class="sxs-lookup"><span data-stu-id="c7089-302">Adding the Paging Interface</span></span>

<span data-ttu-id="c7089-303">Umožněte s pomocí stejné první, Previous, další poslední stránkování rozhraní používá v příkladu stránkování výchozí včetně popisek webové zobrazení ovládacího prvku, který zobrazí stránku co data a celkový počet stránek existovat.</span><span class="sxs-lookup"><span data-stu-id="c7089-303">Let s use the same First, Previous, Next, Last paging interface used in the default paging example, including the Label Web control that displays what page of data is being viewed and how many total pages exist.</span></span> <span data-ttu-id="c7089-304">Přidejte čtyři ovládací prvky webového tlačítko a popisek pod opakovače.</span><span class="sxs-lookup"><span data-stu-id="c7089-304">Add the four Button Web controls and Label below the Repeater.</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample14.aspx)]

<span data-ttu-id="c7089-305">Dále vytvořte `Click` obslužné rutiny událostí pro čtyři tlačítka.</span><span class="sxs-lookup"><span data-stu-id="c7089-305">Next, create `Click` event handlers for the four Buttons.</span></span> <span data-ttu-id="c7089-306">Jedno z těchto tlačítek se při kliknutí na, musíme aktualizovat `StartRowIndex` a obnovení vazby dat k opakovače.</span><span class="sxs-lookup"><span data-stu-id="c7089-306">When one of these Buttons is clicked, we need to update the `StartRowIndex` and rebind the data to the Repeater.</span></span> <span data-ttu-id="c7089-307">Kód pro první, předchozí a další tlačítka je dostatečně jednoduchá, ale pro poslední tlačítko jak můžeme zjistit počáteční index řádků na poslední stránku dat?</span><span class="sxs-lookup"><span data-stu-id="c7089-307">The code for the First, Previous, and Next buttons is simple enough, but for the Last button how do we determine the start row index for the last page of data?</span></span> <span data-ttu-id="c7089-308">Pro výpočet tento index stejně jako schopnost určit, že zda by měla být povolená tlačítka Další a poslední potřebujeme vědět, kolik záznamů se stránkování prostřednictvím.</span><span class="sxs-lookup"><span data-stu-id="c7089-308">To compute this index as well as being able to determine whether the Next and Last buttons should be enabled we need to know how many records in total are being paged through.</span></span> <span data-ttu-id="c7089-309">Můžeme to určit pomocí volání `ProductsBLL` třída s `TotalNumberOfProducts()` metoda.</span><span class="sxs-lookup"><span data-stu-id="c7089-309">We can determine this by calling the `ProductsBLL` class s `TotalNumberOfProducts()` method.</span></span> <span data-ttu-id="c7089-310">Umožňují s vytvořit vlastnosti jen pro čtení, úrovni stránky s názvem `TotalRowCount` , který vrátí výsledky `TotalNumberOfProducts()` metody:</span><span class="sxs-lookup"><span data-stu-id="c7089-310">Let s create a read-only, page-level property named `TotalRowCount` that returns the results of the `TotalNumberOfProducts()` method:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample15.cs)]

<span data-ttu-id="c7089-311">S touto vlastností můžeme nyní určit poslední index stránky s počátečního řádku.</span><span class="sxs-lookup"><span data-stu-id="c7089-311">With this property we can now determine the last page s start row index.</span></span> <span data-ttu-id="c7089-312">Konkrétně to s výsledkem celé číslo z `TotalRowCount` minus 1 hodnotou `MaximumRows`, násobenou `MaximumRows`.</span><span class="sxs-lookup"><span data-stu-id="c7089-312">Specifically, it s the integer result of the `TotalRowCount` minus 1 divided by `MaximumRows`, multiplied by `MaximumRows`.</span></span> <span data-ttu-id="c7089-313">Můžeme se teď dá zapisovat `Click` obslužné rutiny událostí pro čtyři tlačítka stránkování rozhraní:</span><span class="sxs-lookup"><span data-stu-id="c7089-313">We can now write the `Click` event handlers for the four paging interface buttons:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample16.cs)]

<span data-ttu-id="c7089-314">Nakonec musíme zakázat první a předchozí tlačítka stránkování rozhraní při procházení první stránky dat a tlačítka Další a poslední při prohlížení na poslední stránce.</span><span class="sxs-lookup"><span data-stu-id="c7089-314">Finally, we need to disable the First and Previous buttons in the paging interface when viewing the first page of data and the Next and Last buttons when viewing the last page.</span></span> <span data-ttu-id="c7089-315">Chcete-li to provést, přidejte následující kód do prvku ObjectDataSource s `Selecting` obslužné rutiny události:</span><span class="sxs-lookup"><span data-stu-id="c7089-315">To accomplish this, add the following code to the ObjectDataSource s `Selecting` event handler:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample17.cs)]

<span data-ttu-id="c7089-316">Po přidání těchto `Click` obslužné rutiny událostí a kód pro povolení nebo zakázání stránkování prvky rozhraní založené na index aktuálního řádku start, otestovat stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="c7089-316">After adding these `Click` event handlers and the code to enable or disable the paging interface elements based on the current start row index, test the page in a browser.</span></span> <span data-ttu-id="c7089-317">Jak znázorňuje obrázek 15, při první návštěvě stránky první a předchozí tlačítka se jsou zakázané.</span><span class="sxs-lookup"><span data-stu-id="c7089-317">As Figure 15 illustrates, when first visiting the page the First and Previous buttons will are disabled.</span></span> <span data-ttu-id="c7089-318">Kliknutím na další ukazuje na druhé stránce data, při kliknutí na poslední se zobrazí na poslední stránce (viz obrázky 16 a 17).</span><span class="sxs-lookup"><span data-stu-id="c7089-318">Clicking Next shows the second page of data, while clicking Last displays the final page (see Figures 16 and 17).</span></span> <span data-ttu-id="c7089-319">Při prohlížení na poslední stránku dat na další a poslední tlačítka jsou zakázané.</span><span class="sxs-lookup"><span data-stu-id="c7089-319">When viewing the last page of data both the Next and Last buttons are disabled.</span></span>


<span data-ttu-id="c7089-320">[![Předchozí a poslední tlačítka jsou zakázány při procházení první stránky produktů](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-320">[![The Previous and Last Buttons are Disabled When Viewing the First Page of Products](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span></span>

<span data-ttu-id="c7089-321">**Obrázek 15**: Previous a poslední tlačítka jsou zakázány při procházení první stránky produktů ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-321">**Figure 15**: The Previous and Last Buttons are Disabled When Viewing the First Page of Products ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span></span>


<span data-ttu-id="c7089-322">[![Druhá stránka produkty jsou Dispalyed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-322">[![The Second Page of Products are Dispalyed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span></span>

<span data-ttu-id="c7089-323">**Obrázek 16**: druhou stránku produktů jsou Dispalyed ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-323">**Figure 16**: The Second Page of Products are Dispalyed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png))</span></span>


<span data-ttu-id="c7089-324">[![Kliknutím na poslední zobrazí poslední stránky dat](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-324">[![Clicking Last Displays the Final Page of Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span></span>

<span data-ttu-id="c7089-325">**Obrázek 17**: Kliknutím na poslední zobrazí Data poslední stránky ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-325">**Figure 17**: Clicking Last Displays the Final Page of Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png))</span></span>


## <a name="step-7-including-sorting-support-with-the-custom-paged-repeater"></a><span data-ttu-id="c7089-326">Krok 7: Včetně řazení podporu s vlastním stránkováním Repeater</span><span class="sxs-lookup"><span data-stu-id="c7089-326">Step 7: Including Sorting Support with the Custom Paged Repeater</span></span>

<span data-ttu-id="c7089-327">Teď, když byl implementován vlastní stránkování, znovu připravený k zahrnují řazení podporujeme.</span><span class="sxs-lookup"><span data-stu-id="c7089-327">Now that custom paging has been implemented, we re ready to include sorting support.</span></span> <span data-ttu-id="c7089-328">`ProductsBLL` Třída s `GetProductsPagedAndSorted` metoda má stejný *startRowIndex* a *maximumRows* vstupní parametry jako `GetProductsPaged`, ale umožňuje další  *sortExpression* vstupního parametru.</span><span class="sxs-lookup"><span data-stu-id="c7089-328">The `ProductsBLL` class s `GetProductsPagedAndSorted` method has the same *startRowIndex* and *maximumRows* input parameters as `GetProductsPaged`, but permits an additional *sortExpression* input parameter.</span></span> <span data-ttu-id="c7089-329">Použít `GetProductsPagedAndSorted` metodu z `SortingWithCustomPaging.aspx`, musíme provést následující kroky:</span><span class="sxs-lookup"><span data-stu-id="c7089-329">To use the `GetProductsPagedAndSorted` method from `SortingWithCustomPaging.aspx`, we need to perform the following steps:</span></span>

1. <span data-ttu-id="c7089-330">Změnit ObjectDataSource s `SelectMethod` vlastnost z `GetProductsPaged` k `GetProductsPagedAndSorted`.</span><span class="sxs-lookup"><span data-stu-id="c7089-330">Change the ObjectDataSource s `SelectMethod` property from `GetProductsPaged` to `GetProductsPagedAndSorted`.</span></span>
2. <span data-ttu-id="c7089-331">Přidat *sortExpression* `Parameter` objekt ObjectDataSource s `SelectParameters` kolekce.</span><span class="sxs-lookup"><span data-stu-id="c7089-331">Add a *sortExpression* `Parameter` object to the ObjectDataSource s `SelectParameters` collection.</span></span>
3. <span data-ttu-id="c7089-332">Vytvoření privátní, úrovni stránky `SortExpression` vlastnost, která se uchovávají napříč postbacků prostřednictvím stav zobrazení stránky s jeho hodnotu.</span><span class="sxs-lookup"><span data-stu-id="c7089-332">Create a private, page-level `SortExpression` property that persists its value across postbacks through the page s view state.</span></span>
4. <span data-ttu-id="c7089-333">Aktualizace prvku ObjectDataSource s `Selecting` obslužná rutina události přiřazení ObjectDataSource s *sortExpression* parametr hodnoty úrovni stránky `SortExpression` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="c7089-333">Update the ObjectDataSource s `Selecting` event handler to assign the ObjectDataSource s *sortExpression* parameter the value of the page-level `SortExpression` property.</span></span>
5. <span data-ttu-id="c7089-334">Vytvoření rozhraní pro řazení.</span><span class="sxs-lookup"><span data-stu-id="c7089-334">Create the sorting interface.</span></span>

<span data-ttu-id="c7089-335">Začněte tím, že aktualizace ObjectDataSource s `SelectMethod` vlastností a přidání *sortExpression* `Parameter`.</span><span class="sxs-lookup"><span data-stu-id="c7089-335">Start by updating the ObjectDataSource s `SelectMethod` property and adding a *sortExpression* `Parameter`.</span></span> <span data-ttu-id="c7089-336">Ujistěte se, že *sortExpression* `Parameter` s `Type` je nastavena na `String`.</span><span class="sxs-lookup"><span data-stu-id="c7089-336">Make sure that the *sortExpression* `Parameter` s `Type` property is set to `String`.</span></span> <span data-ttu-id="c7089-337">Po dokončení těchto prvních dvou úloh, ObjectDataSource s deklarativní by měl vypadat nějak takto:</span><span class="sxs-lookup"><span data-stu-id="c7089-337">After completing these first two tasks, the ObjectDataSource s declarative markup should look like the following:</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample18.aspx)]

<span data-ttu-id="c7089-338">V dalším kroku budeme potřebovat úrovni stránky `SortExpression` vlastnost, jejíž hodnota je serializována stavu zobrazení.</span><span class="sxs-lookup"><span data-stu-id="c7089-338">Next, we need a page-level `SortExpression` property whose value is serialized to view state.</span></span> <span data-ttu-id="c7089-339">Pokud byla nastavena žádná hodnota výraz řazení, použijte jako výchozí ProductName:</span><span class="sxs-lookup"><span data-stu-id="c7089-339">If no sort expression value has been set, use ProductName as the default:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample19.cs)]

<span data-ttu-id="c7089-340">Předtím, než vyvolá ObjectDataSource `GetProductsPagedAndSorted` metoda musíme nastavit *sortExpression* `Parameter` na hodnotu `SortExpression` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="c7089-340">Before the ObjectDataSource invokes the `GetProductsPagedAndSorted` method we need to set the *sortExpression* `Parameter` to the value of the `SortExpression` property.</span></span> <span data-ttu-id="c7089-341">V `Selecting` obslužná rutina události, přidejte následující řádek kódu:</span><span class="sxs-lookup"><span data-stu-id="c7089-341">In the `Selecting` event handler, add the following line of code:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample20.cs)]

<span data-ttu-id="c7089-342">Už jen zbývá k implementaci rozhraní řazení.</span><span class="sxs-lookup"><span data-stu-id="c7089-342">All that remains is to implement the sorting interface.</span></span> <span data-ttu-id="c7089-343">Jako jsme to udělali v předchozím příkladu, umožní s řazení rozhraní, které jsou implementované pomocí tří tlačítko ovládacích prvků, které uživateli umožňují řazení výsledků podle názvu produktu, kategorie nebo dodavatele.</span><span class="sxs-lookup"><span data-stu-id="c7089-343">As we did in the last example, let s have the sorting interface implemented using three Button Web controls that allow the user to sort the results by product name, category, or supplier.</span></span>


[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample21.aspx)]

<span data-ttu-id="c7089-344">Vytvoření `Click` obslužné rutiny událostí pro tyto tři ovládací prvky tlačítek.</span><span class="sxs-lookup"><span data-stu-id="c7089-344">Create `Click` event handlers for these three Button controls.</span></span> <span data-ttu-id="c7089-345">V obslužné rutiny, resetovat `StartRowIndex` na hodnotu 0, nastavte `SortExpression` odpovídající hodnotu a obnovení vazby dat k opakovače:</span><span class="sxs-lookup"><span data-stu-id="c7089-345">In the event handler, reset the `StartRowIndex` to 0, set the `SortExpression` to the appropriate value, and rebind the data to the Repeater:</span></span>


[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample22.cs)]

<span data-ttu-id="c7089-346">Všechny existuje tento s je to!</span><span class="sxs-lookup"><span data-stu-id="c7089-346">That s all there is to it!</span></span> <span data-ttu-id="c7089-347">Když došlo k několika kroky k získání vlastní stránkování a řazení implementované, byly kroky velmi podobné těm, které jsou potřebné pro výchozí stránkování.</span><span class="sxs-lookup"><span data-stu-id="c7089-347">While there were a number of steps to get custom paging and sorting implemented, the steps were very similar to those needed for default paging.</span></span> <span data-ttu-id="c7089-348">Obrázek 18 ukazuje produkty při prohlížení na poslední stránku dat při řazení podle kategorie.</span><span class="sxs-lookup"><span data-stu-id="c7089-348">Figure 18 shows the products when viewing the last page of data when sorted by category.</span></span>


<span data-ttu-id="c7089-349">[![Zobrazí se Data poslední stránky, seřazeno podle kategorie](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="c7089-349">[![The Last Page of Data, Sorted by Category, is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span></span>

<span data-ttu-id="c7089-350">**Obrázek 18**: poslední stránku Data, seřazeno podle kategorie, zobrazí se ([kliknutím ji zobrazíte obrázek v plné velikosti](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png))</span><span class="sxs-lookup"><span data-stu-id="c7089-350">**Figure 18**: The Last Page of Data, Sorted by Category, is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png))</span></span>


> [!NOTE]
> <span data-ttu-id="c7089-351">V předchozích příkladech je při řazení podle dodavatele, který dodavatel byl použit jako výraz řazení.</span><span class="sxs-lookup"><span data-stu-id="c7089-351">In previous examples, when sorting by the supplier SupplierName was used as the sort expression.</span></span> <span data-ttu-id="c7089-352">Ale pro vlastní implementaci stránkování, musíme použít CompanyName.</span><span class="sxs-lookup"><span data-stu-id="c7089-352">However, for the custom paging implementation, we need to use CompanyName.</span></span> <span data-ttu-id="c7089-353">Důvodem je, že uloženou proceduru, která je zodpovědná za implementaci vlastní stránkování `GetProductsPagedAndSorted` předává výraz řazení do `ROW_NUMBER()` – klíčové slovo, `ROW_NUMBER()` – klíčové slovo vyžaduje skutečný název sloupce, nikoli jako alias.</span><span class="sxs-lookup"><span data-stu-id="c7089-353">This is because the stored procedure responsible for implementing custom paging `GetProductsPagedAndSorted` passes the sort expression into the `ROW_NUMBER()` keyword, The `ROW_NUMBER()` keyword requires the actual column name rather than an alias.</span></span> <span data-ttu-id="c7089-354">Proto musíme použít `CompanyName` (název sloupce v `Suppliers` tabulky) namísto alias používaný v `SELECT` dotazu (`SupplierName`) pro výraz řazení.</span><span class="sxs-lookup"><span data-stu-id="c7089-354">Therefore, we must use `CompanyName` (the name of the column in the `Suppliers` table) rather than the alias used in the `SELECT` query (`SupplierName`) for the sort expression.</span></span>


## <a name="summary"></a><span data-ttu-id="c7089-355">Souhrn</span><span class="sxs-lookup"><span data-stu-id="c7089-355">Summary</span></span>

<span data-ttu-id="c7089-356">Ani ovládacích prvků DataList a Repeater nabízejí integrovanou podporu třídění, ale pomocí bitového kódu a vlastní řazení rozhraní, je možné přidat tyto funkce.</span><span class="sxs-lookup"><span data-stu-id="c7089-356">Neither the DataList nor Repeater offer built-in sorting support, but with a bit of code and a custom sorting interface, such functionality can be added.</span></span> <span data-ttu-id="c7089-357">Při implementaci řazení, ale ne stránkování, řadicí výraz se dá nastavit až `DataSourceSelectArguments` objekt předaný v prvku ObjectDataSource s `Select` metody.</span><span class="sxs-lookup"><span data-stu-id="c7089-357">When implementing sorting, but not paging, the sort expression can be specified through the `DataSourceSelectArguments` object passed into the ObjectDataSource s `Select` method.</span></span> <span data-ttu-id="c7089-358">To `DataSourceSelectArguments` objektu s `SortExpression` vlastnost můžete přiřadit v prvku ObjectDataSource s `Selecting` obslužné rutiny události.</span><span class="sxs-lookup"><span data-stu-id="c7089-358">This `DataSourceSelectArguments` object s `SortExpression` property can be assigned in the ObjectDataSource s `Selecting` event handler.</span></span>

<span data-ttu-id="c7089-359">Přidání možnosti řazení DataList nebo Repeater, která již poskytuje podporu stránkování, je nejjednodušší způsob přizpůsobení vrstvy obchodní logiky obsahovat metodu, který přijímá řadicí výraz.</span><span class="sxs-lookup"><span data-stu-id="c7089-359">To add sorting capabilities to a DataList or Repeater that already provides paging support, the easiest approach is to customize the Business Logic Layer to include a method that accepts a sort expression.</span></span> <span data-ttu-id="c7089-360">Tyto informace je pak možné předat v prostřednictvím parametru v prvku ObjectDataSource s `SelectParameters`.</span><span class="sxs-lookup"><span data-stu-id="c7089-360">This information can then be passed in through a parameter in the ObjectDataSource s `SelectParameters`.</span></span>

<span data-ttu-id="c7089-361">V tomto kurzu dokončíte naše zkoumání stránkování a řazení ovládacími prvky DataList a Repeater.</span><span class="sxs-lookup"><span data-stu-id="c7089-361">This tutorial completes our examination of paging and sorting with the DataList and Repeater controls.</span></span> <span data-ttu-id="c7089-362">V našem kurzu další a finální prozkoumá jak přidat tlačítko webové ovládací prvky s šablon ovládacích prvků DataList a Repeater negace některé vlastní, kterou inicioval uživatel funkce na základě za položku.</span><span class="sxs-lookup"><span data-stu-id="c7089-362">Our next and final tutorial will examine how to add Button Web controls to the DataList and Repeater s templates in order to provide some custom, user-initiated functionality on a per-item basis.</span></span>

<span data-ttu-id="c7089-363">Všechno nejlepší programování!</span><span class="sxs-lookup"><span data-stu-id="c7089-363">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="c7089-364">O autorovi</span><span class="sxs-lookup"><span data-stu-id="c7089-364">About the Author</span></span>

<span data-ttu-id="c7089-365">[Scott Meisnerová](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor sedm ASP/ASP.NET knih a Zakladatel [4GuysFromRolla.com](http://www.4guysfromrolla.com), má práce s Microsoft webových technologiích od roku 1998.</span><span class="sxs-lookup"><span data-stu-id="c7089-365">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="c7089-366">Scott funguje jako nezávislý konzultant, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="c7089-366">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="c7089-367">Jeho nejnovější knihy [ *Edice nakladatelství Sams naučit sami ASP.NET 2.0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="c7089-367">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="c7089-368">Může být dosáhl v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="c7089-368">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="c7089-369">nebo prostřednictvím jeho blogu, který lze nalézt v [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="c7089-369">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="c7089-370">Speciální k</span><span class="sxs-lookup"><span data-stu-id="c7089-370">Special Thanks To</span></span>

<span data-ttu-id="c7089-371">V této sérii kurzů byl recenzován uživatelem mnoho užitečných revidující.</span><span class="sxs-lookup"><span data-stu-id="c7089-371">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="c7089-372">Vedoucí kontrolor pro účely tohoto kurzu byla David Suru.</span><span class="sxs-lookup"><span data-stu-id="c7089-372">Lead reviewer for this tutorial was David Suru.</span></span> <span data-ttu-id="c7089-373">Zajímat téma Moje nadcházejících článcích MSDN?</span><span class="sxs-lookup"><span data-stu-id="c7089-373">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="c7089-374">Pokud ano, vyřaďte mě řádek na [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="c7089-374">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c7089-375">[Předchozí](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
> [další](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span><span class="sxs-lookup"><span data-stu-id="c7089-375">[Previous](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
[Next](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span></span>
