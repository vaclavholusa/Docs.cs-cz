---
uid: web-forms/overview/moving-to-aspnet-20/data-source-controls
title: Ovládací prvky zdroje dat | Dokumentace Microsoftu
author: microsoft
description: DataGrid – ovládací prvek technologie ASP.NET 1.x označené skvělé zlepšení v přístupu k datům ve webových aplikacích. Však nebyl jako uživatelsky přívětivé, jako by byly...
ms.author: riande
ms.date: 02/20/2005
ms.assetid: 78fd0e92-f9c6-4e96-a5e9-0375b307a828
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/data-source-controls
msc.type: authoredcontent
ms.openlocfilehash: ba00024e93beba6eab226dd0d381d8734061e095
ms.sourcegitcommit: 45ac74e400f9f2b7dbded66297730f6f14a4eb25
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/16/2018
ms.locfileid: "41756480"
---
<a name="data-source-controls"></a><span data-ttu-id="b0a57-104">Ovládací prvky zdroje dat</span><span class="sxs-lookup"><span data-stu-id="b0a57-104">Data Source Controls</span></span>
====================
<span data-ttu-id="b0a57-105">podle [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="b0a57-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="b0a57-106">DataGrid – ovládací prvek technologie ASP.NET 1.x označené skvělé zlepšení v přístupu k datům ve webových aplikacích.</span><span class="sxs-lookup"><span data-stu-id="b0a57-106">The DataGrid control in ASP.NET 1.x marked a great improvement in data access in Web applications.</span></span> <span data-ttu-id="b0a57-107">Však nebyl jako uživatelsky přívětivé, jako by byly.</span><span class="sxs-lookup"><span data-stu-id="b0a57-107">However, it wasn't as user-friendly as it could have been.</span></span> <span data-ttu-id="b0a57-108">Stále vyžaduje značné množství kódu, který z něj získat mnoho užitečných funkcí.</span><span class="sxs-lookup"><span data-stu-id="b0a57-108">It still required a considerable amount of code to obtain much useful functionality from it.</span></span> <span data-ttu-id="b0a57-109">Například je model v všechna data access přejeme v 1.x.</span><span class="sxs-lookup"><span data-stu-id="b0a57-109">Such is the model in all data access endeavors in 1.x.</span></span>


<span data-ttu-id="b0a57-110">DataGrid – ovládací prvek technologie ASP.NET 1.x označené skvělé zlepšení v přístupu k datům ve webových aplikacích.</span><span class="sxs-lookup"><span data-stu-id="b0a57-110">The DataGrid control in ASP.NET 1.x marked a great improvement in data access in Web applications.</span></span> <span data-ttu-id="b0a57-111">Však nebyl jako uživatelsky přívětivé, jako by byly.</span><span class="sxs-lookup"><span data-stu-id="b0a57-111">However, it wasn't as user-friendly as it could have been.</span></span> <span data-ttu-id="b0a57-112">Stále vyžaduje značné množství kódu, který z něj získat mnoho užitečných funkcí.</span><span class="sxs-lookup"><span data-stu-id="b0a57-112">It still required a considerable amount of code to obtain much useful functionality from it.</span></span> <span data-ttu-id="b0a57-113">Například je model v všechna data access přejeme v 1.x.</span><span class="sxs-lookup"><span data-stu-id="b0a57-113">Such is the model in all data access endeavors in 1.x.</span></span>

<span data-ttu-id="b0a57-114">ASP.NET 2.0 adresy se v části ovládací prvky zdroje dat.</span><span class="sxs-lookup"><span data-stu-id="b0a57-114">ASP.NET 2.0 addresses this with in part with data source controls.</span></span> <span data-ttu-id="b0a57-115">Ovládací prvky zdroje dat v technologii ASP.NET 2.0 poskytují vývojářům deklarativní model pro načítání dat, zobrazení dat a úpravy dat.</span><span class="sxs-lookup"><span data-stu-id="b0a57-115">The data source controls in ASP.NET 2.0 provide developers with a declarative model for retrieving data, displaying data, and editing data.</span></span> <span data-ttu-id="b0a57-116">Účelem ovládací prvky zdroje dat je poskytnout konzistentní reprezentace dat na ovládací prvky vázané na data bez ohledu na zdroj těchto údajů.</span><span class="sxs-lookup"><span data-stu-id="b0a57-116">The purpose of data source controls is to provide a consistent representation of data to data-bound controls regardless of the source of those data.</span></span> <span data-ttu-id="b0a57-117">V srdci ovládací prvky zdroje dat v technologii ASP.NET 2.0 je abstraktní třída DataSourceControl.</span><span class="sxs-lookup"><span data-stu-id="b0a57-117">At the heart of the data source controls in ASP.NET 2.0 is the DataSourceControl abstract class.</span></span> <span data-ttu-id="b0a57-118">Třída DataSourceControl poskytuje základní implementaci rozhraní IDataSource a rozhraní IListSource, druhá možnost, které vám umožní přiřadit ovládací prvek zdroje dat jako zdroj dat ovládací prvek vázaný na data (prostřednictvím nové vlastnosti DataSourceId prodiskutována později) a zobrazit data v něm jako seznam.</span><span class="sxs-lookup"><span data-stu-id="b0a57-118">The DataSourceControl class provides a base implementation of the IDataSource interface and the IListSource interface, the latter of which allows you to assign the data source control as the DataSource of a data-bound control (via the new DataSourceId property discussed later) and expose the data therein as a list.</span></span> <span data-ttu-id="b0a57-119">Každý seznam data z ovládacího prvku zdroje dat je přístupný jako objekt zobrazení DataSourceView.</span><span class="sxs-lookup"><span data-stu-id="b0a57-119">Each list of data from a data source control is exposed as a DataSourceView object.</span></span> <span data-ttu-id="b0a57-120">Poskytuje přístup k zobrazení DataSourceView instance rozhraní IDataSource.</span><span class="sxs-lookup"><span data-stu-id="b0a57-120">Access to the DataSourceView instances is provided by the IDataSource interface.</span></span> <span data-ttu-id="b0a57-121">Například metoda GetViewNames vrátí ICollection, která umožňuje vytvořit výčet DataSourceViews spojené s konkrétní data správy zdrojového kódu a metoda GetView umožňuje přístup ke konkrétní instanci zobrazení DataSourceView podle názvu.</span><span class="sxs-lookup"><span data-stu-id="b0a57-121">For example, the GetViewNames method returns an ICollection that allows you to enumerate the DataSourceViews associated with a particular data source control, and the GetView method allows you to access a particular DataSourceView instance by name.</span></span>

<span data-ttu-id="b0a57-122">Ovládací prvky zdroje dat k dispozici žádné uživatelské rozhraní.</span><span class="sxs-lookup"><span data-stu-id="b0a57-122">Data source controls have no user-interface.</span></span> <span data-ttu-id="b0a57-123">Jsou implementovány jako serverové ovládací prvky, aby se podporovaly deklarativní syntaxe, a tak, aby v případě potřeby mají přístup do stavu stránky.</span><span class="sxs-lookup"><span data-stu-id="b0a57-123">They are implemented as server controls so that they can support declarative syntax and so that they have access to page state if desired.</span></span> <span data-ttu-id="b0a57-124">Ovládací prvky zdroje dat zobrazené libovolný kód HTML do klienta.</span><span class="sxs-lookup"><span data-stu-id="b0a57-124">Data source controls do not render any HTML markup to the client.</span></span>

> [!NOTE]
> <span data-ttu-id="b0a57-125">Jak uvidíte později, že jsou také ukládání do mezipaměti výhody získat pomocí ovládací prvky zdroje dat.</span><span class="sxs-lookup"><span data-stu-id="b0a57-125">As you'll see later, there are also caching benefits obtained by using data source controls.</span></span>


## <a name="storing-connection-strings"></a><span data-ttu-id="b0a57-126">Ukládání připojovacích řetězců</span><span class="sxs-lookup"><span data-stu-id="b0a57-126">Storing Connection Strings</span></span>

<span data-ttu-id="b0a57-127">Předtím, než se dostaneme k pohledu na tom, jak nakonfigurovat ovládací prvky zdroje dat, by měla zahrnovat jsme novou funkci v technologii ASP.NET 2.0 týkající se připojovací řetězce.</span><span class="sxs-lookup"><span data-stu-id="b0a57-127">Before we get into looking at how to configure data source controls, we should cover a new capability in ASP.NET 2.0 concerning connection strings.</span></span> <span data-ttu-id="b0a57-128">Technologie ASP.NET 2.0 přináší nový oddíl v konfiguračním souboru, který umožňuje snadno ukládání připojovacích řetězců, které může číst dynamicky za běhu.</span><span class="sxs-lookup"><span data-stu-id="b0a57-128">ASP.NET 2.0 introduces a new section in the configuration file that allows you to easily store connection strings that can be read dynamically at runtime.</span></span> <span data-ttu-id="b0a57-129">&lt;ConnectionStrings&gt; části zjednodušuje ukládání připojovacích řetězců.</span><span class="sxs-lookup"><span data-stu-id="b0a57-129">The &lt;connectionStrings&gt; section makes it easy to store connection strings.</span></span>

<span data-ttu-id="b0a57-130">Následující fragment kódu přidá nový připojovací řetězec.</span><span class="sxs-lookup"><span data-stu-id="b0a57-130">The snippet below adds a new connection string.</span></span>

[!code-xml[Main](data-source-controls/samples/sample1.xml)]

> [!NOTE]
> <span data-ttu-id="b0a57-131">Stejně jako u &lt;appSettings&gt; části &lt;connectionStrings&gt; mimo se zobrazí část &lt;system.web&gt; oddílu v konfiguračním souboru.</span><span class="sxs-lookup"><span data-stu-id="b0a57-131">Just as with the &lt;appSettings&gt; section, the &lt;connectionStrings&gt; section appears outside of the &lt;system.web&gt; section in the configuration file.</span></span>


<span data-ttu-id="b0a57-132">Pokud chcete použít tento připojovací řetězec, můžete použijte následující syntaxi, při nastavení atributu ConnectionString serverového ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="b0a57-132">To use this connection string, you can use the following syntax when setting the ConnectionString attribute of a server control.</span></span>

[!code-aspx[Main](data-source-controls/samples/sample2.aspx)]

<span data-ttu-id="b0a57-133">&lt;ConnectionStrings&gt; oddílu se dá zašifrovat taky tak, aby se nevystaví citlivé informace.</span><span class="sxs-lookup"><span data-stu-id="b0a57-133">The &lt;connectionStrings&gt; section can also be encrypted so that sensitive information is not exposed.</span></span> <span data-ttu-id="b0a57-134">Tuto možnost najdete v novějším modulu.</span><span class="sxs-lookup"><span data-stu-id="b0a57-134">That ability will be covered in a later module.</span></span>

## <a name="caching-data-sources"></a><span data-ttu-id="b0a57-135">Ukládání do mezipaměti zdroje dat</span><span class="sxs-lookup"><span data-stu-id="b0a57-135">Caching Data Sources</span></span>

<span data-ttu-id="b0a57-136">Každý DataSourceControl poskytuje čtyři vlastnosti ke konfiguraci ukládání do mezipaměti; EnableCaching CacheDuration, CacheExpirationPolicy a CacheKeyDependency.</span><span class="sxs-lookup"><span data-stu-id="b0a57-136">Each DataSourceControl provides four properties for configuring caching; EnableCaching, CacheDuration, CacheExpirationPolicy, and CacheKeyDependency.</span></span>

## <a name="enablecaching"></a><span data-ttu-id="b0a57-137">EnableCaching</span><span class="sxs-lookup"><span data-stu-id="b0a57-137">EnableCaching</span></span>

<span data-ttu-id="b0a57-138">EnableCaching je pro ovládací prvek zdroje dat je povolena vlastnost typu Boolean určující, jestli ukládání do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="b0a57-138">EnableCaching is a Boolean property that determines whether or not caching is enabled for the data source control.</span></span>

## <a name="cacheduration-property"></a><span data-ttu-id="b0a57-139">Vlastnost CacheDuration</span><span class="sxs-lookup"><span data-stu-id="b0a57-139">CacheDuration Property</span></span>

<span data-ttu-id="b0a57-140">Vlastnost CacheDuration nastaví počet sekund, po které zůstává v platnosti do mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="b0a57-140">The CacheDuration property sets the number of seconds that the cache remains valid.</span></span> <span data-ttu-id="b0a57-141">Nastavení této vlastnosti na **0** způsobí, že v mezipaměti platnosti, dokud není výslovně zrušena.</span><span class="sxs-lookup"><span data-stu-id="b0a57-141">Setting this property to **0** causes the cache to remain valid until explicitly invalidated.</span></span>

## <a name="cacheexpirationpolicy-property"></a><span data-ttu-id="b0a57-142">Vlastnosti CacheExpirationPolicy</span><span class="sxs-lookup"><span data-stu-id="b0a57-142">CacheExpirationPolicy Property</span></span>

<span data-ttu-id="b0a57-143">Vlastnost CacheExpirationPolicy může být nastaven na hodnotu **absolutní** nebo **posuvné**.</span><span class="sxs-lookup"><span data-stu-id="b0a57-143">The CacheExpirationPolicy property can be set to either **Absolute** or **Sliding**.</span></span> <span data-ttu-id="b0a57-144">Nastavení na absolutní znamená, že je počet sekund, po určeném vlastností CacheDuration maximální množství času, které se data uložená v mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="b0a57-144">Setting it to Absolute means that the maximum amount of time that the data will be cached is the number of seconds specified by the CacheDuration property.</span></span> <span data-ttu-id="b0a57-145">Nastavením jeho posuvné čas vypršení platnosti se vynuluje, když každá operace provádí.</span><span class="sxs-lookup"><span data-stu-id="b0a57-145">By setting it to Sliding, the expiration time is reset when each operation is performed.</span></span>

## <a name="cachekeydependency-property"></a><span data-ttu-id="b0a57-146">Vlastnost CacheKeyDependency</span><span class="sxs-lookup"><span data-stu-id="b0a57-146">CacheKeyDependency Property</span></span>

<span data-ttu-id="b0a57-147">Pokud je hodnota řetězce zadaná pro vlastnost CacheKeyDependency, bude technologie ASP.NET nastavit novou závislost mezipaměti na základě tohoto řetězce.</span><span class="sxs-lookup"><span data-stu-id="b0a57-147">If a string value is specified for the CacheKeyDependency property, ASP.NET will set up a new cache dependency based on that string.</span></span> <span data-ttu-id="b0a57-148">To umožňuje tak jednoduše změně nebo odebrání CacheKeyDependency explicitně zneplatnění mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="b0a57-148">This allows you to explicitly invalidate the cache by simply changing or removing the CacheKeyDependency.</span></span>

<span data-ttu-id="b0a57-149">**Důležité**: Pokud je povolené zosobnění a přístup ke zdroji dat a/nebo obsah dat jsou založeny na identity klienta, se doporučuje že ukládání do mezipaměti zakázáno nastavením EnableCaching na hodnotu False.</span><span class="sxs-lookup"><span data-stu-id="b0a57-149">**Important**: If impersonation is enabled and access to the data source and/or content of data are based upon client identity, it is recommended that caching be disabled by setting EnableCaching to False.</span></span> <span data-ttu-id="b0a57-150">Pokud je povoleno ukládání do mezipaměti v tomto scénáři a uživatelem, než uživatel, který původně požadovali data vydá požadavek na autorizaci ke zdroji dat se nevynucuje.</span><span class="sxs-lookup"><span data-stu-id="b0a57-150">If caching is enabled in this scenario and a user other than the user who originally requested the data issues a request, authorization to the data source is not enforced.</span></span> <span data-ttu-id="b0a57-151">Data se jednoduše obsluhovat z mezipaměti.</span><span class="sxs-lookup"><span data-stu-id="b0a57-151">The data will simply be served from cache.</span></span>

## <a name="the-sqldatasource-control"></a><span data-ttu-id="b0a57-152">Ovládacím prvkem SqlDataSource</span><span class="sxs-lookup"><span data-stu-id="b0a57-152">The SqlDataSource Control</span></span>

<span data-ttu-id="b0a57-153">Ovládacím prvkem SqlDataSource umožňuje vývojáři přístup k datům uloženým v relační databázi, který podporuje technologii ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="b0a57-153">The SqlDataSource control allows a developer to access data stored in any relational database that supports ADO.NET.</span></span> <span data-ttu-id="b0a57-154">Zprostředkovatele System.Data.SqlClient může použít pro přístup k databázi serveru SQL Server, poskytovatel System.Data.OleDb, System.Data.Odbc zprostředkovatele nebo zprostředkovatele System.Data.OracleClient pro přístup k Oracle.</span><span class="sxs-lookup"><span data-stu-id="b0a57-154">It can use the System.Data.SqlClient provider to access a SQL Server database, the System.Data.OleDb provider, the System.Data.Odbc provider, or the System.Data.OracleClient provider to access Oracle.</span></span> <span data-ttu-id="b0a57-155">Proto ve třídě SqlDataSource není jistě používá jenom pro přístup k datům v databázi serveru SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b0a57-155">Therefore, the SqlDataSource is certainly not only used for accessing data in a SQL Server database.</span></span>

<span data-ttu-id="b0a57-156">Pokud chcete používat ve třídě SqlDataSource, jednoduše zadejte hodnotu pro vlastnost ConnectionString a zadáte příkaz SQL nebo uloženou proceduru.</span><span class="sxs-lookup"><span data-stu-id="b0a57-156">In order to use the SqlDataSource, you simply provide a value for the ConnectionString property and specify a SQL command or stored procedure.</span></span> <span data-ttu-id="b0a57-157">Ovládacím prvkem SqlDataSource postará o práci s základní architekturu ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="b0a57-157">The SqlDataSource control takes care of working with the underlying ADO.NET architecture.</span></span> <span data-ttu-id="b0a57-158">Otevře připojení k, dotazuje zdroje dat nebo provede uloženou proceduru, vrátí data a potom jej zavře spojení za vás.</span><span class="sxs-lookup"><span data-stu-id="b0a57-158">It opens the connection, queries the data source or executes the stored procedure, returns the data, and then closes the connection for you.</span></span>

> [!NOTE]
> <span data-ttu-id="b0a57-159">Protože třída DataSourceControl automaticky uzavře spojení za vás, by měla snížit počet volání zákazníka generovaných nevrácení připojení k databázi.</span><span class="sxs-lookup"><span data-stu-id="b0a57-159">Because the DataSourceControl class automatically closes the connection for you, it should reduce the number of customer calls generated by leaking database connections.</span></span>


<span data-ttu-id="b0a57-160">Následující fragment kódu váže ovládací prvek DropDownList s ovládacím prvkem SqlDataSource pomocí připojovacího řetězce, která je uložena v konfiguračním souboru, jak je znázorněno výše.</span><span class="sxs-lookup"><span data-stu-id="b0a57-160">The code snippet below binds a DropDownList control to a SqlDataSource control using the connection string that is stored in the configuration file as shown above.</span></span>

[!code-aspx[Main](data-source-controls/samples/sample3.aspx)]

<span data-ttu-id="b0a57-161">Jak je znázorněno výše, určuje vlastnost DataSourceMode ve třídě SqlDataSource režim datového zdroje.</span><span class="sxs-lookup"><span data-stu-id="b0a57-161">As illustrated above, the DataSourceMode property of the SqlDataSource specifies the mode for the data source.</span></span> <span data-ttu-id="b0a57-162">V předchozím příkladu nastavena vlastnost DataSourceMode na hodnotu objektu DataReader.</span><span class="sxs-lookup"><span data-stu-id="b0a57-162">In the example above, the DataSourceMode is set to DataReader.</span></span> <span data-ttu-id="b0a57-163">V takovém případě ve třídě SqlDataSource vrátí objekt IDataReader pomocí kurzoru dopředné a jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="b0a57-163">In that case, the SqlDataSource will return an IDataReader object using a forward-only and read-only cursor.</span></span> <span data-ttu-id="b0a57-164">Zadaný typ, který je vrácen řídí poskytovatele, který se používá.</span><span class="sxs-lookup"><span data-stu-id="b0a57-164">The specified type of object that is returned is controlled by the provider that is used.</span></span> <span data-ttu-id="b0a57-165">V takovém případě používám zprostředkovatele System.Data.SqlClient jako zadané v poli &lt;connectionStrings&gt; část souboru web.config.</span><span class="sxs-lookup"><span data-stu-id="b0a57-165">In this case, I'm using the System.Data.SqlClient provider as specified in the &lt;connectionStrings&gt; section of the web.config file.</span></span> <span data-ttu-id="b0a57-166">Objekt, který je vrácen proto bude typu SqlDataReader.</span><span class="sxs-lookup"><span data-stu-id="b0a57-166">Therefore, the object that is returned will be of type SqlDataReader.</span></span> <span data-ttu-id="b0a57-167">Zadáním hodnoty DataSourceMode datové sady, můžete data uložená v datové sadě na serveru.</span><span class="sxs-lookup"><span data-stu-id="b0a57-167">By specifying a DataSourceMode value of DataSet, the data can be stored in a DataSet on the server.</span></span> <span data-ttu-id="b0a57-168">Tento režim umožňuje přidat funkce, jako je řazení, stránkování, atd. Pokud jsem byl datové vazby ve třídě SqlDataSource do ovládacího prvku GridView, můžu byste zvolili režim datové sady.</span><span class="sxs-lookup"><span data-stu-id="b0a57-168">This mode allows you to add features such as sorting, paging, etc. If I had been data-binding the SqlDataSource to a GridView control, I would have chosen the DataSet mode.</span></span> <span data-ttu-id="b0a57-169">V případě DropDownList, je režim DataReader správnou volbu.</span><span class="sxs-lookup"><span data-stu-id="b0a57-169">However, in the case of a DropDownList, the DataReader mode is the correct choice.</span></span>

> [!NOTE]
> <span data-ttu-id="b0a57-170">Při ukládání do mezipaměti SqlDataSource nebo prvku AccessDataSource, vlastnost DataSourceMode je nastavena na hodnotu DataSet.</span><span class="sxs-lookup"><span data-stu-id="b0a57-170">When caching a SqlDataSource or an AccessDataSource, the DataSourceMode property must be set to DataSet.</span></span> <span data-ttu-id="b0a57-171">Pokud povolíte ukládání do mezipaměti s DataSourceMode DataReader dojde k vyvolání výjimky.</span><span class="sxs-lookup"><span data-stu-id="b0a57-171">An exception will occur if you enable caching with a DataSourceMode of DataReader.</span></span>


## <a name="sqldatasource-properties"></a><span data-ttu-id="b0a57-172">Vlastnosti SqlDataSource</span><span class="sxs-lookup"><span data-stu-id="b0a57-172">SqlDataSource Properties</span></span>

<span data-ttu-id="b0a57-173">Následují některé vlastnosti ovládacím prvkem SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="b0a57-173">The following are some of the properties of the SqlDataSource control.</span></span>

### <a name="cancelselectonnullparameter"></a><span data-ttu-id="b0a57-174">CancelSelectOnNullParameter</span><span class="sxs-lookup"><span data-stu-id="b0a57-174">CancelSelectOnNullParameter</span></span>

<span data-ttu-id="b0a57-175">Logická hodnota, která určuje, zda je příkazu select zrušena, pokud jeden z parametrů má hodnotu null.</span><span class="sxs-lookup"><span data-stu-id="b0a57-175">A Boolean value that specifies whether a select command is canceled if one of the parameters is null.</span></span> <span data-ttu-id="b0a57-176">Hodnota TRUE, ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="b0a57-176">True by default.</span></span>

### <a name="conflictdetection"></a><span data-ttu-id="b0a57-177">ConflictDetection</span><span class="sxs-lookup"><span data-stu-id="b0a57-177">ConflictDetection</span></span>

<span data-ttu-id="b0a57-178">V situaci, kdy více uživatelů může být aktualizace zdroje dat ve stejnou dobu určuje vlastnost ConflictDetection chování ovládacím prvkem SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="b0a57-178">In a situation where multiple users may be updating a data source at the same time, the ConflictDetection property determines the behavior of the SqlDataSource control.</span></span> <span data-ttu-id="b0a57-179">Tato vlastnost je vyhodnocen jako jedna z hodnot výčtu ConflictOptions.</span><span class="sxs-lookup"><span data-stu-id="b0a57-179">This property evaluates to one of the values of the ConflictOptions enumeration.</span></span> <span data-ttu-id="b0a57-180">Tyto hodnoty jsou **CompareAllValues** a **hodnotu OverwriteChanges**.</span><span class="sxs-lookup"><span data-stu-id="b0a57-180">Those values are **CompareAllValues** and **OverwriteChanges**.</span></span> <span data-ttu-id="b0a57-181">Pokud je nastaveno na hodnotu OverwriteChanges jméno poslední osoby k zápisu dat do zdroje dat přepíše jakékoli předchozí změny.</span><span class="sxs-lookup"><span data-stu-id="b0a57-181">If set to OverwriteChanges, the last person to write data to the data source overwrites any previous changes.</span></span> <span data-ttu-id="b0a57-182">Pokud ale vlastnost ConflictDetection je nastavena na CompareAllValues, parametry vytvořené pro sloupce vrácený SelectCommand a parametry jsou také vytvořená k uložení původní hodnoty v každém z těchto sloupců ve třídě SqlDataSource k povolení určení, zda hodnoty se změnily od posledního SelectCommand.</span><span class="sxs-lookup"><span data-stu-id="b0a57-182">However, if the ConflictDetection property is set to CompareAllValues, parameters get created for the columns returned by the SelectCommand and parameters are also created to hold the original values in each of those columns allowing the SqlDataSource to determine whether or not the values have changed since the SelectCommand was executed.</span></span>

### <a name="deletecommand"></a><span data-ttu-id="b0a57-183">Událost DeleteCommand</span><span class="sxs-lookup"><span data-stu-id="b0a57-183">DeleteCommand</span></span>

<span data-ttu-id="b0a57-184">Nastaví nebo získá SQL řetězec použitý při odstranění řádků z databáze.</span><span class="sxs-lookup"><span data-stu-id="b0a57-184">Sets or gets the SQL string used when deleting rows from the database.</span></span> <span data-ttu-id="b0a57-185">To může být buď dotaz SQL nebo název uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="b0a57-185">This can either be a SQL query or a stored procedure name.</span></span>

### <a name="deletecommandtype"></a><span data-ttu-id="b0a57-186">DeleteCommandType</span><span class="sxs-lookup"><span data-stu-id="b0a57-186">DeleteCommandType</span></span>

<span data-ttu-id="b0a57-187">Nastaví nebo získá typ příkazu pro odstranění, buď dotaz SQL (Text) nebo uložené procedury (uložené procedury StoredProcedure).</span><span class="sxs-lookup"><span data-stu-id="b0a57-187">Sets or gets the type of delete command, either a SQL query (Text) or a stored procedure (StoredProcedure).</span></span>

### <a name="deleteparameters"></a><span data-ttu-id="b0a57-188">DeleteParameters</span><span class="sxs-lookup"><span data-stu-id="b0a57-188">DeleteParameters</span></span>

<span data-ttu-id="b0a57-189">Vrátí parametry, které jsou používány DeleteCommand SqlDataSourceView objektu souvisejícího s ovládacím prvkem SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="b0a57-189">Returns the parameters that are used by the DeleteCommand of the SqlDataSourceView object associated with the SqlDataSource control.</span></span>

### <a name="oldvaluesparameterformatstring"></a><span data-ttu-id="b0a57-190">OldValuesParameterFormatString</span><span class="sxs-lookup"><span data-stu-id="b0a57-190">OldValuesParameterFormatString</span></span>

<span data-ttu-id="b0a57-191">Tato vlastnost se používá k určení formátu původní hodnoty parametrů v případech, ve kterém je nastavena vlastnost ConflictDetection na CompareAllValues.</span><span class="sxs-lookup"><span data-stu-id="b0a57-191">This property is used to specify the format of the original value parameters in cases where the ConflictDetection property is set to CompareAllValues.</span></span> <span data-ttu-id="b0a57-192">Výchozí hodnota je {0} to znamená, že původní hodnoty parametrů bude trvat stejný název jako původní parametr.</span><span class="sxs-lookup"><span data-stu-id="b0a57-192">The default is {0} which means that original value parameters will take the same name as the original parameter.</span></span> <span data-ttu-id="b0a57-193">Jinými slovy, pokud je název pole EmployeeID, původní hodnota parametru by @EmployeeID.</span><span class="sxs-lookup"><span data-stu-id="b0a57-193">In other words, if the field name is EmployeeID, the original value parameter would be @EmployeeID.</span></span>

### <a name="selectcommand"></a><span data-ttu-id="b0a57-194">Vlastnost SelectCommand</span><span class="sxs-lookup"><span data-stu-id="b0a57-194">SelectCommand</span></span>

<span data-ttu-id="b0a57-195">Nastaví nebo získá řetězec SQL, který se používá k načtení dat z databáze.</span><span class="sxs-lookup"><span data-stu-id="b0a57-195">Sets or gets the SQL string that is used to retrieve data from the database.</span></span> <span data-ttu-id="b0a57-196">To může být buď dotaz SQL nebo název uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="b0a57-196">This can either be a SQL query or a stored procedure name.</span></span>

### <a name="selectcommandtype"></a><span data-ttu-id="b0a57-197">SelectCommandType</span><span class="sxs-lookup"><span data-stu-id="b0a57-197">SelectCommandType</span></span>

<span data-ttu-id="b0a57-198">Nastaví nebo získá typu příkazu select, buď dotaz SQL (Text) nebo uložené procedury (uložené procedury StoredProcedure).</span><span class="sxs-lookup"><span data-stu-id="b0a57-198">Sets or gets the type of select command, either a SQL query (Text) or a stored procedure (StoredProcedure).</span></span>

### <a name="selectparameters"></a><span data-ttu-id="b0a57-199">Prvků vlastnosti SelectParameters obsahovat</span><span class="sxs-lookup"><span data-stu-id="b0a57-199">SelectParameters</span></span>

<span data-ttu-id="b0a57-200">Vrátí parametry, které jsou používány SelectCommand SqlDataSourceView objektu souvisejícího s ovládacím prvkem SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="b0a57-200">Returns the parameters that are used by the SelectCommand of the SqlDataSourceView object associated with the SqlDataSource control.</span></span>

### <a name="sortparametername"></a><span data-ttu-id="b0a57-201">SortParameterName</span><span class="sxs-lookup"><span data-stu-id="b0a57-201">SortParameterName</span></span>

<span data-ttu-id="b0a57-202">Získá nebo nastaví název parametru uložené procedury, která se používá při řazení dat načíst ovládací prvek zdroje dat.</span><span class="sxs-lookup"><span data-stu-id="b0a57-202">Gets or sets the name of a stored procedure parameter that is used when sorting data retrieved by the data source control.</span></span> <span data-ttu-id="b0a57-203">Platné pouze v případě, že SelectCommandType je nastavena na uložené procedury StoredProcedure.</span><span class="sxs-lookup"><span data-stu-id="b0a57-203">Valid only when SelectCommandType is set to StoredProcedure.</span></span>

### <a name="sqlcachedependency"></a><span data-ttu-id="b0a57-204">Vlastnost sqlCacheDependency</span><span class="sxs-lookup"><span data-stu-id="b0a57-204">SqlCacheDependency</span></span>

<span data-ttu-id="b0a57-205">Středníkem oddělený řetězec určující databáze a tabulky používané v závislosti mezipaměti SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b0a57-205">A semi-colon delimited string specifying the databases and tables used in a SQL Server cache dependency.</span></span> <span data-ttu-id="b0a57-206">(Závislosti mezipaměti SQL probereme v novějším modulu.)</span><span class="sxs-lookup"><span data-stu-id="b0a57-206">(SQL cache dependencies will be discussed in a later module.)</span></span>

### <a name="updatecommand"></a><span data-ttu-id="b0a57-207">Událost UpdateCommand</span><span class="sxs-lookup"><span data-stu-id="b0a57-207">UpdateCommand</span></span>

<span data-ttu-id="b0a57-208">Nastaví nebo získá řetězec SQL, který se používá při aktualizaci dat v databázi.</span><span class="sxs-lookup"><span data-stu-id="b0a57-208">Sets or gets the SQL string that is used when updating data in the database.</span></span> <span data-ttu-id="b0a57-209">To může být buď dotaz SQL nebo název uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="b0a57-209">This can either be a SQL query or a stored procedure name.</span></span>

### <a name="updatecommandtype"></a><span data-ttu-id="b0a57-210">UpdateCommandType</span><span class="sxs-lookup"><span data-stu-id="b0a57-210">UpdateCommandType</span></span>

<span data-ttu-id="b0a57-211">Nastaví nebo získá typ příkazu pro aktualizaci, buď dotaz SQL (Text) nebo uložené procedury (uložené procedury StoredProcedure).</span><span class="sxs-lookup"><span data-stu-id="b0a57-211">Sets or gets the type of update command, either a SQL query (Text) or a stored procedure (StoredProcedure).</span></span>

### <a name="updateparameters"></a><span data-ttu-id="b0a57-212">UpdateParameters</span><span class="sxs-lookup"><span data-stu-id="b0a57-212">UpdateParameters</span></span>

<span data-ttu-id="b0a57-213">Vrátí parametry, které jsou používány UpdateCommand SqlDataSourceView objektu souvisejícího s ovládacím prvkem SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="b0a57-213">Returns the parameters that are used by the UpdateCommand of the SqlDataSourceView object associated with the SqlDataSource control.</span></span>

## <a name="the-accessdatasource-control"></a><span data-ttu-id="b0a57-214">Ovládací prvek AccessDataSource</span><span class="sxs-lookup"><span data-stu-id="b0a57-214">The AccessDataSource Control</span></span>

<span data-ttu-id="b0a57-215">Ovládací prvek AccessDataSource je odvozena od třídy SqlDataSource a je použitého k vazbě dat na databázi aplikace Microsoft Access.</span><span class="sxs-lookup"><span data-stu-id="b0a57-215">The AccessDataSource control derives from the SqlDataSource class and is used to data-bind to a Microsoft Access database.</span></span> <span data-ttu-id="b0a57-216">Vlastnost ConnectionString prvku AccessDataSource je vlastnost jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="b0a57-216">The ConnectionString property for the AccessDataSource control is a read-only property.</span></span> <span data-ttu-id="b0a57-217">Namísto použití vlastnosti ConnectionString, je vlastnost DataFile použít tak, aby odkazoval na databázi aplikace Access, jak je znázorněno níže.</span><span class="sxs-lookup"><span data-stu-id="b0a57-217">Instead of using the ConnectionString property, the DataFile property is used to point to the Access Database as shown below.</span></span>

[!code-aspx[Main](data-source-controls/samples/sample4.aspx)]

<span data-ttu-id="b0a57-218">Prvku AccessDataSource ProviderName základní SqlDataSource bude vždycky nastavený na System.Data.OleDb a připojuje k databázi pomocí zprostředkovatele Microsoft.Jet.OLEDB.4.0 OLE DB.</span><span class="sxs-lookup"><span data-stu-id="b0a57-218">The AccessDataSource will always set the ProviderName of the base SqlDataSource to System.Data.OleDb and connects to the database using the Microsoft.Jet.OLEDB.4.0 OLE DB provider.</span></span> <span data-ttu-id="b0a57-219">Ovládací prvek AccessDataSource nelze použít pro připojení k databázi aplikace Access chráněný heslem.</span><span class="sxs-lookup"><span data-stu-id="b0a57-219">You cannot use the AccessDataSource control to connect to a password-protected Access database.</span></span> <span data-ttu-id="b0a57-220">Pokud máte připojení k databázi chráněn heslem, používejte ovládacím prvkem SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="b0a57-220">If you have to connect to a password protected database, you should use the SqlDataSource control.</span></span>

> [!NOTE]
> <span data-ttu-id="b0a57-221">Accessové databáze, které jsou uloženy v rámci tohoto webu musí být umístěné ve aplikace\_datový adresář.</span><span class="sxs-lookup"><span data-stu-id="b0a57-221">Access databases stored within the Web site should be placed in the App\_Data directory.</span></span> <span data-ttu-id="b0a57-222">ASP.NET nebude povolovat ukládání souborů do tohoto adresáře, které budete procházet.</span><span class="sxs-lookup"><span data-stu-id="b0a57-222">ASP.NET does not allow files in this directory to be browsed.</span></span> <span data-ttu-id="b0a57-223">Budete muset udělit oprávnění ke čtení a zápis do ní účet procesu\_adresář dat při použití databáze aplikace Access.</span><span class="sxs-lookup"><span data-stu-id="b0a57-223">You will need to grant the process account Read and Write permissions to the App\_Data directory when using Access databases.</span></span>


## <a name="the-xmldatasource-control"></a><span data-ttu-id="b0a57-224">Ovládací prvek XmlDataSource</span><span class="sxs-lookup"><span data-stu-id="b0a57-224">The XmlDataSource Control</span></span>

<span data-ttu-id="b0a57-225">Prvek XmlDataSource slouží k data-bind XML data do ovládacích prvků vázaných na data.</span><span class="sxs-lookup"><span data-stu-id="b0a57-225">The XmlDataSource is used to data-bind XML data to data-bound controls.</span></span> <span data-ttu-id="b0a57-226">Můžete svázat do souboru XML pomocí vlastnosti DataFile nebo můžete vytvořit vazbu na řetězec XML pomocí vlastnosti Data.</span><span class="sxs-lookup"><span data-stu-id="b0a57-226">You can bind to an XML file using the DataFile property or you can bind to an XML string using the Data property.</span></span> <span data-ttu-id="b0a57-227">Prvek XmlDataSource poskytuje atributy ve formátu XML jako pole s možností vazby.</span><span class="sxs-lookup"><span data-stu-id="b0a57-227">The XmlDataSource exposes XML attributes as bindable fields.</span></span> <span data-ttu-id="b0a57-228">V případech, kdy potřebujete k vytvoření vazby na hodnoty, které nejsou reprezentovány jako atributy je potřeba použít transformace XSL.</span><span class="sxs-lookup"><span data-stu-id="b0a57-228">In cases where you need to bind to values that are not represented as attributes, you will need to use an XSL transform.</span></span> <span data-ttu-id="b0a57-229">Můžete také použít výrazy XPath pro filtrování dat XML.</span><span class="sxs-lookup"><span data-stu-id="b0a57-229">You can also use XPath expressions to filter XML data.</span></span>

<span data-ttu-id="b0a57-230">Vezměte v úvahu následující soubor XML:</span><span class="sxs-lookup"><span data-stu-id="b0a57-230">Consider the following XML file:</span></span>

[!code-xml[Main](data-source-controls/samples/sample5.xml)]

<span data-ttu-id="b0a57-231">Všimněte si, že prvek XmlDataSource používá výraz XPath vlastnosti *osoby nebo osoby* Chcete-li filtrovat na jenom &lt;osoba&gt; uzly.</span><span class="sxs-lookup"><span data-stu-id="b0a57-231">Notice that the XmlDataSource uses an XPath property of *People/Person* in order to filter on just the &lt;Person&gt; nodes.</span></span> <span data-ttu-id="b0a57-232">DropDownList a data vazbu pomocí vlastnosti DataTextField atributu příjmení.</span><span class="sxs-lookup"><span data-stu-id="b0a57-232">The DropDownList then data-binds to the LastName attribute using the DataTextField property.</span></span>

<span data-ttu-id="b0a57-233">Zatímco ovládacího prvku XmlDataSource se používá především k vazbě dat na jen pro čtení dat XML, je možné upravit datový soubor XML.</span><span class="sxs-lookup"><span data-stu-id="b0a57-233">While the XmlDataSource control is primarily used to data-bind to read-only XML data, it is possible to edit the XML data file.</span></span> <span data-ttu-id="b0a57-234">Všimněte si, že v takových případech automatické vložení, aktualizace nebo odstranění informací v souboru XML neprobíhá automaticky stejně jako s jinými ovládacími prvky dat zdroje.</span><span class="sxs-lookup"><span data-stu-id="b0a57-234">Note that in such cases, automatic insertion, updating, and deletion of information in the XML file does not happen automatically as it does with other data source controls.</span></span> <span data-ttu-id="b0a57-235">Místo toho budete muset psát kód ručně upravovat data, pomocí následujících metod ovládacího prvku XmlDataSource.</span><span class="sxs-lookup"><span data-stu-id="b0a57-235">Instead, you will have to write code to manually edit the data using the following methods of the XmlDataSource control.</span></span>

### <a name="getxmldocument"></a><span data-ttu-id="b0a57-236">GetXmlDocument</span><span class="sxs-lookup"><span data-stu-id="b0a57-236">GetXmlDocument</span></span>

<span data-ttu-id="b0a57-237">Načte třídou XMLDocument nastavenou na objekt, který obsahuje kód XML pomocí prvku XmlDataSource.</span><span class="sxs-lookup"><span data-stu-id="b0a57-237">Retrieves an XmlDocument object containing the XML code retrieved by the XmlDataSource.</span></span>

### <a name="save"></a><span data-ttu-id="b0a57-238">Uložit</span><span class="sxs-lookup"><span data-stu-id="b0a57-238">Save</span></span>

<span data-ttu-id="b0a57-239">Uloží zpět do zdroje dat. XmlDocument v paměti.</span><span class="sxs-lookup"><span data-stu-id="b0a57-239">Saves the in-memory XmlDocument back to the data source.</span></span>

<span data-ttu-id="b0a57-240">Je důležité si uvědomit, že metodu Save bude fungovat jenom Pokud jsou splněny následující dvě podmínky:</span><span class="sxs-lookup"><span data-stu-id="b0a57-240">It's important to realize that the Save method will only work when the following two conditions are met:</span></span>

1. <span data-ttu-id="b0a57-241">Prvek XmlDataSource používá vlastnost DataFile k vytvoření vazby k souboru XML, nikoliv vlastnost datového připojení k datům XML v paměti.</span><span class="sxs-lookup"><span data-stu-id="b0a57-241">The XmlDataSource is using the DataFile property to bind to an XML file instead of the Data property to bind to in-memory XML data.</span></span>
2. <span data-ttu-id="b0a57-242">Žádná transformace je zadáno pomocí vlastnosti Transform nebo TransformFile.</span><span class="sxs-lookup"><span data-stu-id="b0a57-242">No transformation is specified via the Transform or TransformFile property.</span></span>

<span data-ttu-id="b0a57-243">Všimněte si také, že metodu Save může vést k neočekávaným výsledkům při volání více uživatelů současně.</span><span class="sxs-lookup"><span data-stu-id="b0a57-243">Note also that the Save method can yield unexpected results when called by multiple users concurrently.</span></span>

## <a name="the-objectdatasource-control"></a><span data-ttu-id="b0a57-244">Ovládací prvek ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="b0a57-244">The ObjectDataSource Control</span></span>

<span data-ttu-id="b0a57-245">Ovládací prvky zdroje dat, které jsme pokryli do této chvíle jsou výborné možnosti pro dvouvrstvé aplikace, ve kterém ovládací prvek zdroje dat komunikuje přímo do úložiště dat.</span><span class="sxs-lookup"><span data-stu-id="b0a57-245">The data source controls that we have covered up to this point are excellent choices for two-tier applications where the data source control communicates directly to the data store.</span></span> <span data-ttu-id="b0a57-246">Mnoho skutečných aplikací jsou však vícevrstvých aplikací ve kterém ovládací prvek zdroje dat může být nutné ke komunikaci se obchodního objektu, které pak komunikuje s datové vrstvě.</span><span class="sxs-lookup"><span data-stu-id="b0a57-246">However, many real-world applications are multi-tier applications where a data source control might need to communicate to a business object which, in turn, communicates with the data layer.</span></span> <span data-ttu-id="b0a57-247">V těchto situacích ObjectDataSource krásně vyplní faktury.</span><span class="sxs-lookup"><span data-stu-id="b0a57-247">In these situations, the ObjectDataSource fills the bill nicely.</span></span> <span data-ttu-id="b0a57-248">Prvku ObjectDataSource funguje ve spojení s zdrojový objekt.</span><span class="sxs-lookup"><span data-stu-id="b0a57-248">The ObjectDataSource works in conjunction with a source object.</span></span> <span data-ttu-id="b0a57-249">Ovládací prvek ObjectDataSource vytvoří instanci objektu zdroje, volání zadanou metodu a uvolnění instance objektu vše v rámci jedné žádosti, pokud objekt obsahuje instanci metody místo statické metody (Shared v jazyce Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="b0a57-249">The ObjectDataSource control will create an instance of the source object, call the specified method, and dispose of the object instance all within the scope of a single request, if your object has instance methods instead of static methods (Shared in Visual Basic).</span></span> <span data-ttu-id="b0a57-250">Proto musí být objekt bezstavové.</span><span class="sxs-lookup"><span data-stu-id="b0a57-250">Therefore, your object must be stateless.</span></span> <span data-ttu-id="b0a57-251">To znamená že váš objekt by měl získat a uvolnit všechny prostředky v rámci rozsahu jednoho požadavku.</span><span class="sxs-lookup"><span data-stu-id="b0a57-251">That is, your object should acquire and release all required resources within the span of a single request.</span></span> <span data-ttu-id="b0a57-252">Můžete řídit způsob vytvoření zdrojového objektu zpracováním událostí ObjectCreating ovládacího prvku ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="b0a57-252">You can control how the source object is created by handling the ObjectCreating event of the ObjectDataSource control.</span></span> <span data-ttu-id="b0a57-253">Můžete vytvořit instanci objektu zdroje a potom nastavte vlastnost ObjectInstance třídy ObjectDataSourceEventArgs do této instance.</span><span class="sxs-lookup"><span data-stu-id="b0a57-253">You can create an instance of the source object, and then set the ObjectInstance property of the ObjectDataSourceEventArgs class to that instance.</span></span> <span data-ttu-id="b0a57-254">Ovládací prvek ObjectDataSource, bude používat instanci, která se vytvoří v případě ObjectCreating namísto vytvoření instance sama o sobě.</span><span class="sxs-lookup"><span data-stu-id="b0a57-254">The ObjectDataSource control will use the instance that is created in the ObjectCreating event instead of creating an instance on its own.</span></span>

<span data-ttu-id="b0a57-255">Pokud zdrojový objekt pro ovládací prvek ObjectDataSource zpřístupní veřejné statické metody (Shared v jazyce Visual Basic), které lze volat pro načítání a úpravy dat, bude ovládací prvek ObjectDataSource přímo volat tyto metody.</span><span class="sxs-lookup"><span data-stu-id="b0a57-255">If the source object for an ObjectDataSource control exposes public static methods (Shared in Visual Basic) that can be called to retrieve and modify data, an ObjectDataSource control will call those methods directly.</span></span> <span data-ttu-id="b0a57-256">Pokud ovládací prvek ObjectDataSource musí vytvořit instanci objektu zdroje abyste mohli volat metodu, musí obsahovat objekt veřejný konstruktor, který nepřijímá žádné parametry.</span><span class="sxs-lookup"><span data-stu-id="b0a57-256">If an ObjectDataSource control must create an instance of the source object in order to make method calls, the object must include a public constructor that takes no parameters.</span></span> <span data-ttu-id="b0a57-257">Ovládací prvek ObjectDataSource zavolá tento konstruktor vytvoří novou instanci objektu zdroje.</span><span class="sxs-lookup"><span data-stu-id="b0a57-257">The ObjectDataSource control will call this constructor when it creates a new instance of the source object.</span></span>

<span data-ttu-id="b0a57-258">Pokud zdrojový objekt neobsahuje veřejný konstruktor bez parametrů, můžete vytvořit instanci objektu zdroje, který se použije v případě ObjectCreating ovládacího prvku ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="b0a57-258">If the source object does not contain a public constructor without parameters, you can create an instance of the source object that will be used by the ObjectDataSource control in the ObjectCreating event.</span></span>

## <a name="specifying-object-methods"></a><span data-ttu-id="b0a57-259">Určení objektových metod</span><span class="sxs-lookup"><span data-stu-id="b0a57-259">Specifying Object Methods</span></span>

<span data-ttu-id="b0a57-260">Zdrojového objektu ovládacího prvku ObjectDataSource může obsahovat libovolný počet metod, které se používají k výběru, vložit, aktualizovat nebo odstranit data.</span><span class="sxs-lookup"><span data-stu-id="b0a57-260">The source object for an ObjectDataSource control can contain any number of methods that are used to select, insert, update, or delete data.</span></span> <span data-ttu-id="b0a57-261">Tyto metody jsou volány ovládacího prvku ObjectDataSource vycházet z názvu metody, jsme uvedli, pomocí metody SelectMethod, InsertMethod, UpdateMethod a DeleteMethod vlastnosti ovládacího prvku ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="b0a57-261">These methods are called by the ObjectDataSource control based on the name of the method, as identified by using either the SelectMethod, InsertMethod, UpdateMethod, or DeleteMethod property of the ObjectDataSource control.</span></span> <span data-ttu-id="b0a57-262">Zdrojový objekt také může obsahovat volitelné SelectCount metodu, která je identifikovaná ovládacího prvku ObjectDataSource vlastnost SelectCountMethod, který vrací počet celkový počet objektů ve zdroji dat.</span><span class="sxs-lookup"><span data-stu-id="b0a57-262">The source object can also include an optional SelectCount method, which is identified by the ObjectDataSource control using the SelectCountMethod property, that returns the count of the total number of objects at the data source.</span></span> <span data-ttu-id="b0a57-263">Ovládací prvek ObjectDataSource bude volat metodu SelectCount po zavolání metody Select pro načtení celkový počet záznamů ve zdroji dat pro použití při stránkování.</span><span class="sxs-lookup"><span data-stu-id="b0a57-263">The ObjectDataSource control will call the SelectCount method after a Select method has been called to retrieve the total number of records at the data source for use when paging.</span></span>

## <a name="lab-using-data-source-controls"></a><span data-ttu-id="b0a57-264">Ovládací prvky zdroje dat pomocí testovacího prostředí</span><span class="sxs-lookup"><span data-stu-id="b0a57-264">Lab Using Data Source Controls</span></span>

## <a name="exercise-1---displaying-data-with-the-sqldatasource-control"></a><span data-ttu-id="b0a57-265">Cvičení 1 – zobrazení dat ovládacím prvkem SqlDataSource(VB)</span><span class="sxs-lookup"><span data-stu-id="b0a57-265">Exercise 1 - Displaying Data with the SqlDataSource Control</span></span>

<span data-ttu-id="b0a57-266">Následující cvičení používá ovládacím prvkem SqlDataSource pro připojení k databázi Northwind.</span><span class="sxs-lookup"><span data-stu-id="b0a57-266">The following exercise uses the SqlDataSource control to connect to the Northwind database.</span></span> <span data-ttu-id="b0a57-267">Předpokládá, že máte přístup k databázi Northwind v instanci systému SQL Server 2000.</span><span class="sxs-lookup"><span data-stu-id="b0a57-267">It assumes that you have access to the Northwind database on a SQL Server 2000 instance.</span></span>

1. <span data-ttu-id="b0a57-268">Vytvoření nového webu technologie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b0a57-268">Create a new ASP.NET Web site.</span></span>
2. <span data-ttu-id="b0a57-269">Přidejte nový soubor web.config.</span><span class="sxs-lookup"><span data-stu-id="b0a57-269">Add a new web.config file.</span></span>

    1. <span data-ttu-id="b0a57-270">Klikněte pravým tlačítkem na projekt v Průzkumníku řešení a klikněte na tlačítko Přidat novou položku.</span><span class="sxs-lookup"><span data-stu-id="b0a57-270">Right-click on the project in Solution Explorer and click Add New Item.</span></span>
    2. <span data-ttu-id="b0a57-271">Ze seznamu šablon vyberte soubor webové konfigurace a klikněte na tlačítko Přidat.</span><span class="sxs-lookup"><span data-stu-id="b0a57-271">Choose Web Configuration File from the list of templates and click Add.</span></span>
3. <span data-ttu-id="b0a57-272">Upravit &lt;connectionStrings&gt; části následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="b0a57-272">Edit the &lt;connectionStrings&gt; section as follows:</span></span> 

    [!code-aspx[Main](data-source-controls/samples/sample6.aspx)]
4. <span data-ttu-id="b0a57-273">Přepnout na zobrazení kódu a přidejte atribut ConnectionString a SelectCommand atributu &lt;asp: SqlDataSource&gt; řídit následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="b0a57-273">Switch to Code view and add a ConnectionString attribute and a SelectCommand attribute to the &lt;asp:SqlDataSource&gt; control as follows:</span></span> 

    [!code-aspx[Main](data-source-controls/samples/sample7.aspx)]
5. <span data-ttu-id="b0a57-274">V návrhovém zobrazení přidání nového ovládacího prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="b0a57-274">From Design view, add a new GridView control.</span></span>
6. <span data-ttu-id="b0a57-275">V rozevírací nabídce zvolit zdroj dat v nabídce úlohy ovládacího prvku GridView zvolte SqlDataSource1.</span><span class="sxs-lookup"><span data-stu-id="b0a57-275">From the Choose Data Source dropdown in the GridView Tasks menu, choose SqlDataSource1.</span></span>
7. <span data-ttu-id="b0a57-276">Klikněte pravým tlačítkem myši na Default.aspx a zvolte v nabídce zobrazení v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="b0a57-276">Right-click on Default.aspx and choose View in Browser from the menu.</span></span> <span data-ttu-id="b0a57-277">Po zobrazení výzvy k uložení klikněte na tlačítko Ano.</span><span class="sxs-lookup"><span data-stu-id="b0a57-277">Click Yes when prompted to save.</span></span>
8. <span data-ttu-id="b0a57-278">GridView zobrazí data z tabulky produktů.</span><span class="sxs-lookup"><span data-stu-id="b0a57-278">The GridView displays the data from the Products table.</span></span>

## <a name="exercise-2---editing-data-with-the-sqldatasource-control"></a><span data-ttu-id="b0a57-279">Cvičení 2 - Úprava dat ovládacím prvkem SqlDataSource(VB)</span><span class="sxs-lookup"><span data-stu-id="b0a57-279">Exercise 2 - Editing Data with the SqlDataSource Control</span></span>

<span data-ttu-id="b0a57-280">Následující cvičení předvádí, jak vytvořit vazbu na data DropDownList kontrolovat pomocí deklarativní syntaxe a slouží k úpravě dat v ovládacím prvku DropDownList.</span><span class="sxs-lookup"><span data-stu-id="b0a57-280">The following exercise demonstrates how to data bind a DropDownList control using the declarative syntax and allows you to edit the data presented in the DropDownList control.</span></span>

1. <span data-ttu-id="b0a57-281">V návrhovém zobrazení odstraňte z Default.aspx ovládacím prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="b0a57-281">In Design view, delete the GridView control from Default.aspx.</span></span> 

    <span data-ttu-id="b0a57-282">**Důležité**: ponechat SqlDataSource ovládací prvek na stránce.</span><span class="sxs-lookup"><span data-stu-id="b0a57-282">**Important**: Leave the SqlDataSource control on the page.</span></span>
2. <span data-ttu-id="b0a57-283">Přidejte ovládací prvek DropDownList Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="b0a57-283">Add a DropDownList control to Default.aspx.</span></span>
3. <span data-ttu-id="b0a57-284">Přepněte do zobrazení zdroje.</span><span class="sxs-lookup"><span data-stu-id="b0a57-284">Switch to Source view.</span></span>
4. <span data-ttu-id="b0a57-285">Přidat atribut DataSourceId, DataTextField a DataValueField k &lt;asp: DropDownList&gt; řídit následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="b0a57-285">Add a DataSourceId, DataTextField, and DataValueField attribute to the &lt;asp:DropDownList&gt; control as follows:</span></span> 

    [!code-aspx[Main](data-source-controls/samples/sample8.aspx)]
5. <span data-ttu-id="b0a57-286">Uložit Default.aspx a zobrazit v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="b0a57-286">Save Default.aspx and view it in the browser.</span></span> <span data-ttu-id="b0a57-287">Poznámka: aby DropDownList obsahuje všechny produkty z databáze Northwind.</span><span class="sxs-lookup"><span data-stu-id="b0a57-287">Note that the DropDownList contains all of the products from the Northwind database.</span></span>
6. <span data-ttu-id="b0a57-288">Zavřete prohlížeč.</span><span class="sxs-lookup"><span data-stu-id="b0a57-288">Close the browser.</span></span>
7. <span data-ttu-id="b0a57-289">V zobrazení zdroje Default.aspx přidání nového ovládacího prvku textového pole pod ovládacím prvkem DropDownList.</span><span class="sxs-lookup"><span data-stu-id="b0a57-289">In Source view of Default.aspx, add a new TextBox control below the DropDownList control.</span></span> <span data-ttu-id="b0a57-290">Změňte vlastnost ID textového pole na txtProductName.</span><span class="sxs-lookup"><span data-stu-id="b0a57-290">Change the ID property of the TextBox to txtProductName.</span></span>
8. <span data-ttu-id="b0a57-291">V části ovládacího prvku textového pole přidáte nový ovládací prvek tlačítko.</span><span class="sxs-lookup"><span data-stu-id="b0a57-291">Under the TextBox control, add a new Button control.</span></span> <span data-ttu-id="b0a57-292">Změnit vlastnosti ID na tlačítko na btnUpdate a vlastnost Text na **název produktu aktualizace**.</span><span class="sxs-lookup"><span data-stu-id="b0a57-292">Change the ID property of the Button to btnUpdate and the Text property to **Update Product Name**.</span></span>
9. <span data-ttu-id="b0a57-293">V zobrazení zdroje Default.aspx přidejte vlastnost UpdateCommand a dva nové UpdateParameters ke značce SqlDataSource následujícím způsobem:</span><span class="sxs-lookup"><span data-stu-id="b0a57-293">In Source view of Default.aspx, add an UpdateCommand property and two new UpdateParameters to the SqlDataSource tag as follows:</span></span> 

    [!code-aspx[Main](data-source-controls/samples/sample9.aspx)]

    > [!NOTE]
    > <span data-ttu-id="b0a57-294">Všimněte si, že existují dvě aktualizovat parametry (ProductName a ProductID) přidá tento kód.</span><span class="sxs-lookup"><span data-stu-id="b0a57-294">Note that there are two update parameters (ProductName and ProductID) added in this code.</span></span> <span data-ttu-id="b0a57-295">Tyto parametry jsou mapovány na vlastnosti Text txtProductName textového pole a vlastnosti SelectedValue ddlProducts DropDownList.</span><span class="sxs-lookup"><span data-stu-id="b0a57-295">These parameters are mapped to the Text property of the txtProductName TextBox and the SelectedValue property of the ddlProducts DropDownList.</span></span>
10. <span data-ttu-id="b0a57-296">Přepněte do zobrazení návrhu a dvakrát klikněte na ovládací prvek tlačítko pro přidání obslužné rutiny události.</span><span class="sxs-lookup"><span data-stu-id="b0a57-296">Switch to Design view and double-click on the Button control to add an event handler.</span></span>
11. <span data-ttu-id="b0a57-297">Přidejte následující kód btnUpdate\_klikněte na tlačítko kódu:</span><span class="sxs-lookup"><span data-stu-id="b0a57-297">Add the following code to the btnUpdate\_Click code:</span></span> 

    [!code-csharp[Main](data-source-controls/samples/sample10.cs)]
12. <span data-ttu-id="b0a57-298">Klikněte pravým tlačítkem myši na Default.aspx a zvolte, chcete-li zobrazit v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="b0a57-298">Right-click on Default.aspx and choose to view it in the browser.</span></span> <span data-ttu-id="b0a57-299">Po zobrazení výzvy k uložení všech změn, klikněte na tlačítko Ano.</span><span class="sxs-lookup"><span data-stu-id="b0a57-299">Click Yes when prompted to save all changes.</span></span>
13. <span data-ttu-id="b0a57-300">ASP.NET 2.0 povolit částečné třídy pro kompilaci za běhu.</span><span class="sxs-lookup"><span data-stu-id="b0a57-300">ASP.NET 2.0 partial classes allow for compilation at runtime.</span></span> <span data-ttu-id="b0a57-301">Není nutné vytvořit aplikaci, chcete-li zobrazit změny kódu projeví.</span><span class="sxs-lookup"><span data-stu-id="b0a57-301">It is not necessary to build an application in order to see code changes take effect.</span></span>
14. <span data-ttu-id="b0a57-302">Vyberte produkt z DropDownList.</span><span class="sxs-lookup"><span data-stu-id="b0a57-302">Select a product from the DropDownList.</span></span>
15. <span data-ttu-id="b0a57-303">Zadejte nový název pro vybraný produkt do textového pole a potom klikněte na tlačítko Aktualizovat.</span><span class="sxs-lookup"><span data-stu-id="b0a57-303">Enter a new name for the selected product in the TextBox and then click the Update button.</span></span>
16. <span data-ttu-id="b0a57-304">Název produktu je aktualizována v databázi.</span><span class="sxs-lookup"><span data-stu-id="b0a57-304">The product name is updated in the database.</span></span>

## <a name="exercise-3-using-the-objectdatasource-control"></a><span data-ttu-id="b0a57-305">Cvičení 3 pomocí ovládacího prvku ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="b0a57-305">Exercise 3 Using the ObjectDataSource Control</span></span>

<span data-ttu-id="b0a57-306">V tomto cvičení vám ukáže způsob použití ovládacího prvku ObjectDataSource a zdrojový objekt interakci s databází Northwind.</span><span class="sxs-lookup"><span data-stu-id="b0a57-306">This exercise will demonstrate how to use the ObjectDataSource control and a source object to interact with the Northwind database.</span></span>

1. <span data-ttu-id="b0a57-307">Klikněte pravým tlačítkem na projekt v Průzkumníku řešení a klikněte na Přidat novou položku.</span><span class="sxs-lookup"><span data-stu-id="b0a57-307">Right-click on the project in Solution Explorer and click on Add New Item.</span></span>
2. <span data-ttu-id="b0a57-308">V seznamu šablon vyberte webový formulář.</span><span class="sxs-lookup"><span data-stu-id="b0a57-308">Select Web Form in the templates list.</span></span> <span data-ttu-id="b0a57-309">Změňte název na object.aspx a klikněte na tlačítko Přidat.</span><span class="sxs-lookup"><span data-stu-id="b0a57-309">Change the name to object.aspx and click Add.</span></span>
3. <span data-ttu-id="b0a57-310">Klikněte pravým tlačítkem na projekt v Průzkumníku řešení a klikněte na Přidat novou položku.</span><span class="sxs-lookup"><span data-stu-id="b0a57-310">Right-click on the project in Solution Explorer and click on Add New Item.</span></span>
4. <span data-ttu-id="b0a57-311">V seznamu šablon vyberte třídu.</span><span class="sxs-lookup"><span data-stu-id="b0a57-311">Select Class in the templates list.</span></span> <span data-ttu-id="b0a57-312">Změnit název třídy NorthwindData.cs a klikněte na tlačítko Přidat.</span><span class="sxs-lookup"><span data-stu-id="b0a57-312">Change the name of the class to NorthwindData.cs and click Add.</span></span>
5. <span data-ttu-id="b0a57-313">Klikněte na tlačítko Ano, po zobrazení výzvy k přidání třídy do aplikace\_složky s kódem.</span><span class="sxs-lookup"><span data-stu-id="b0a57-313">Click Yes when prompted to add the class to the App\_Code folder.</span></span>
6. <span data-ttu-id="b0a57-314">Přidejte následující kód do souboru NorthwindData.cs:</span><span class="sxs-lookup"><span data-stu-id="b0a57-314">Add the following code to the NorthwindData.cs file:</span></span> 

    [!code-csharp[Main](data-source-controls/samples/sample11.cs)]
7. <span data-ttu-id="b0a57-315">Přidejte následující kód k zobrazení zdroje object.aspx:</span><span class="sxs-lookup"><span data-stu-id="b0a57-315">Add the following code to the Source view of object.aspx:</span></span> 

    [!code-aspx[Main](data-source-controls/samples/sample12.aspx)]
8. <span data-ttu-id="b0a57-316">Uložte všechny soubory a procházet object.aspx.</span><span class="sxs-lookup"><span data-stu-id="b0a57-316">Save all files and browse object.aspx.</span></span>
9. <span data-ttu-id="b0a57-317">Zobrazení podrobností, úpravy zaměstnanci, zaměstnanci přidáním a odstraněním zaměstnanci pracovat s rozhraním.</span><span class="sxs-lookup"><span data-stu-id="b0a57-317">Interact with the interface by viewing details, editing employees, adding employees, and deleting employees.</span></span>
