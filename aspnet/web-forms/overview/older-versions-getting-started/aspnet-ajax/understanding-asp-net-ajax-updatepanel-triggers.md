---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
title: Principy aktivačních událostí UpdatePanel technologie ASP.NET AJAX | Dokumentace Microsoftu
author: scottcate
description: Při práci v editoru kódu v sadě Visual Studio, můžete si všimnout (od IntelliSense), že jsou dva podřízené prvky prvku UpdatePanel. Jeden z co...
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/12/2008
ms.topic: article
ms.assetid: faab8503-2984-48a9-8a40-7728461abc50
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
msc.type: authoredcontent
ms.openlocfilehash: 180491b6aee188a9dca750d6d325217f1ad5212c
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/03/2018
ms.locfileid: "37363718"
---
<a name="understanding-aspnet-ajax-updatepanel-triggers"></a><span data-ttu-id="59689-104">Principy aktivačních událostí UpdatePanel technologie ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="59689-104">Understanding ASP.NET AJAX UpdatePanel Triggers</span></span>
====================
<span data-ttu-id="59689-105">podle [– Scott Cate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="59689-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="59689-106">Stáhnout PDF</span><span class="sxs-lookup"><span data-stu-id="59689-106">Download PDF</span></span>](http://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial02_Triggers_cs.pdf)

> <span data-ttu-id="59689-107">Při práci v editoru kódu v sadě Visual Studio, můžete si všimnout (od IntelliSense), že jsou dva podřízené prvky prvku UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="59689-107">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an UpdatePanel control.</span></span> <span data-ttu-id="59689-108">Jedním z nich je element aktivačních událostí, který určuje ovládacích prvků na stránce (nebo uživatelský ovládací prvek, pokud použijete jeden), který se aktivuje částečné vykreslení ovládacího prvku UpdatePanel, ve kterém se nachází element.</span><span class="sxs-lookup"><span data-stu-id="59689-108">One of which is the Triggers element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the element resides.</span></span>


## <a name="introduction"></a><span data-ttu-id="59689-109">Úvod</span><span class="sxs-lookup"><span data-stu-id="59689-109">Introduction</span></span>

<span data-ttu-id="59689-110">Technologie ASP.NET společnosti Microsoft přináší objektově orientované a založený na událostech programovací model a sjednotí s výhodami zkompilovaný kód.</span><span class="sxs-lookup"><span data-stu-id="59689-110">Microsoft's ASP.NET technology brings an object-oriented and event-driven programming model and unites it with the benefits of compiled code.</span></span> <span data-ttu-id="59689-111">Svůj model zpracování na straně serveru má však několik nevýhody vyplývajících z technologie, z nichž mnohá vyřešíte tak, že nové funkce zahrnuté v rozšíření Microsoft ASP.NET 3.5 AJAX.</span><span class="sxs-lookup"><span data-stu-id="59689-111">However, its server-side processing model has several drawbacks inherent in the technology, many of which can be addressed by the new features included in the Microsoft ASP.NET 3.5 AJAX Extensions.</span></span> <span data-ttu-id="59689-112">Tato rozšíření povolit spoustu nových funkcí vzhled plně funkčního klienta, včetně částečného zobrazení stránek, bez nutnosti úplná aktualizace stránky, možnost přístupu k webovým službám prostřednictvím klientského skriptu (včetně ASP.NET, rozhraní API pro profilaci) a rozsáhlé rozhraní API na straně klienta navržené pro zrcadlení mnoho systémů ovládací prvek v sadě serverový ovládací prvek technologie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="59689-112">These extensions enable many new rich client features, including partial rendering of pages without requiring a full page refresh, the ability to access Web Services via client script (including the ASP.NET profiling API), and an extensive client-side API designed to mirror many of the control schemes seen in the ASP.NET server-side control set.</span></span>

<span data-ttu-id="59689-113">Tento dokument White Paper zkoumá XML triggery funkce technologie ASP.NET AJAX `UpdatePanel` komponenty.</span><span class="sxs-lookup"><span data-stu-id="59689-113">This whitepaper examines the XML Triggers functionality of the ASP.NET AJAX `UpdatePanel` component.</span></span> <span data-ttu-id="59689-114">Aktivační události XML poskytují detailní kontrolu nad součásti, které může způsobit částečného zobrazení pro konkrétní ovládací prvky UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="59689-114">XML Triggers give granular control over the components that can cause partial rendering for specific UpdatePanel controls.</span></span>

<span data-ttu-id="59689-115">Tento dokument White Paper vychází Beta 2 verzi rozhraní .NET Framework 3.5 a Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="59689-115">This whitepaper is based on the Beta 2 release of the .NET Framework 3.5 and Visual Studio 2008.</span></span> <span data-ttu-id="59689-116">Rozšíření ASP.NET AJAX, dříve sestavení doplňku určenou pro technologii ASP.NET 2.0, jsou teď integrovaná v knihovně tříd rozhraní .NET Framework Base.</span><span class="sxs-lookup"><span data-stu-id="59689-116">The ASP.NET AJAX Extensions, previously an add-on assembly targeted at ASP.NET 2.0, are now integrated into the .NET Framework Base Class Library.</span></span> <span data-ttu-id="59689-117">Tento dokument White Paper také předpokládá, že můžete pracovat s Visual Studio 2008, nikoli Visual Web Developer Express a poskytne návody podle uživatelského rozhraní sady Visual Studio (i když výpis kódu bude zcela kompatibilní, bez ohledu na to vývojové prostředí).</span><span class="sxs-lookup"><span data-stu-id="59689-117">This whitepaper also assumes that you will be working with Visual Studio 2008, not Visual Web Developer Express, and will provide walkthroughs according to the user interface of Visual Studio (although code listings will be entirely compatible regardless of development environment).</span></span>

## <a name="triggers"></a><span data-ttu-id="59689-118">*Triggery*</span><span class="sxs-lookup"><span data-stu-id="59689-118">*Triggers*</span></span>

<span data-ttu-id="59689-119">Aktivační události pro daný prvek UpdatePanel, ve výchozím nastavení, automaticky zahrnulo všechny podřízené ovládací prvky, které vyvolávají zpětné volání, včetně (například) TextBox – ovládací prvky, které mají jejich `AutoPostBack` vlastnost nastavena na hodnotu **true**.</span><span class="sxs-lookup"><span data-stu-id="59689-119">Triggers for a given UpdatePanel, by default, automatically include any child controls that invoke a postback, including (for example) TextBox controls that have their `AutoPostBack` property set to **true**.</span></span> <span data-ttu-id="59689-120">Ale aktivačních událostí může být také součástí deklarativně pomocí značky To se provádí v rámci `<triggers>` části deklarace ovládacího prvku UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="59689-120">However, triggers can also be included declaratively using markup; this is done within the `<triggers>` section of the UpdatePanel control declaration.</span></span> <span data-ttu-id="59689-121">I když aktivační události je přístupná prostřednictvím `Triggers` vlastnost kolekce se doporučuje registraci žádné aktivační události částečné vykreslování v době běhu (například pokud ovládací prvek není k dispozici v době návrhu) s použitím `RegisterAsyncPostBackControl(Control)` metodu Stránky, v rámci objektu ScriptManager `Page_Load` událostí.</span><span class="sxs-lookup"><span data-stu-id="59689-121">Although triggers can be accessed via the `Triggers` collection property, it is recommended that you register any partial render triggers at run-time (for instance, if a control is not available at design time) by using the `RegisterAsyncPostBackControl(Control)` method of the ScriptManager object for your page, within the `Page_Load` event.</span></span> <span data-ttu-id="59689-122">Mějte na paměti, že stránky jsou bezstavové, a proto byste měli znovu zaregistrovat tyto ovládací prvky pokaždé, když jsou vytvořeny.</span><span class="sxs-lookup"><span data-stu-id="59689-122">Remember that Pages are stateless, and so you should re-register these controls every time they are created.</span></span>

<span data-ttu-id="59689-123">Zahrnutí podřízené automatické aktivační událost lze také zakázat (tak, aby podřízené ovládací prvky, které vytvářejí postbacků nespouštějí automaticky vykreslí částečné) tak, že nastavíte `ChildrenAsTriggers` vlastnost **false**.</span><span class="sxs-lookup"><span data-stu-id="59689-123">Automatic child trigger inclusion can also be disabled (so that child controls that create postbacks do not automatically trigger partial renders) by setting the `ChildrenAsTriggers` property to **false**.</span></span> <span data-ttu-id="59689-124">To vám umožní nejvyšší flexibilitu při přiřazování které konkrétní ovládací prvky mohou vyvolat vykreslení stránky a je doporučena, tak, aby vývojář se vyjádřit výslovný souhlas reagovat na události, namísto zpracování všech událostí, které mohou nastat.</span><span class="sxs-lookup"><span data-stu-id="59689-124">This allows you the greatest flexibility in assigning which specific controls may invoke a page render, and is recommended, so that a developer will opt-in to respond to an event, rather than handling any events that may arise.</span></span>

<span data-ttu-id="59689-125">Všimněte si, že když jsou vnořené ovládací prvky UpdatePanel, pokud UpdateMode nastavena na **podmíněného**, pokud se aktivuje podřízený prvek UpdatePanel, ale nadřazená položka nemá, pak pouze podřízené bude prvek UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="59689-125">Note that when UpdatePanel controls are nested, when the UpdateMode is set to **Conditional**, if the child UpdatePanel is triggered, but the parent is not, then only the child UpdatePanel will refresh.</span></span> <span data-ttu-id="59689-126">Ale pokud se nadřazený prvek UpdatePanel je aktualizovat, pak podřízený prvek UpdatePanel bude také aktualizovat.</span><span class="sxs-lookup"><span data-stu-id="59689-126">However, if the parent UpdatePanel is refreshed, then the child UpdatePanel will also be refreshed.</span></span>

## <a name="the-lttriggersgt-element"></a><span data-ttu-id="59689-127">*&lt;Triggery&gt; – Element*</span><span class="sxs-lookup"><span data-stu-id="59689-127">*The &lt;Triggers&gt; Element*</span></span>

<span data-ttu-id="59689-128">Při práci v editoru kódu v sadě Visual Studio, můžete si všimnout (od IntelliSense), že existují dva podřízené prvky ze `UpdatePanel` ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="59689-128">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an `UpdatePanel` control.</span></span> <span data-ttu-id="59689-129">Nejčastěji viděli prvek je `<ContentTemplate>` element, který zapouzdřuje v podstatě obsah, který se bude vysílat aktualizace panelem (obsah, u kterého jsme uvolnili částečného zobrazení).</span><span class="sxs-lookup"><span data-stu-id="59689-129">The most-frequently seen element is the `<ContentTemplate>` element, which essentially encapsulates the content that will be held by the update panel (the content for which we are enabling partial rendering).</span></span> <span data-ttu-id="59689-130">Druhý prvek je `<Triggers>` element, který určuje ovládacích prvků na stránce (nebo uživatelský ovládací prvek, pokud použijete jeden), který se aktivuje částečné vykreslení ovládacího prvku UpdatePanel, ve kterém &lt;aktivační události&gt; prvek nachází.</span><span class="sxs-lookup"><span data-stu-id="59689-130">The other element is the `<Triggers>` element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the &lt;Triggers&gt; element resides.</span></span>

<span data-ttu-id="59689-131">`<Triggers>` Element může obsahovat libovolný počet jednotlivých dva podřízené uzly: `<asp:AsyncPostBackTrigger>` a `<asp:PostBackTrigger>`.</span><span class="sxs-lookup"><span data-stu-id="59689-131">The `<Triggers>` element can contain any number each of two child nodes: `<asp:AsyncPostBackTrigger>` and `<asp:PostBackTrigger>`.</span></span> <span data-ttu-id="59689-132">Oba dva atributy, přijměte `ControlID` a `EventName`a můžete zadat libovolný ovládací prvek v rámci aktuální jednotky zapouzdření (například pokud se nachází v rámci uživatelského ovládacího prvku webového ovládacího prvku UpdatePanel, byste se neměli pokoušet tak, aby odkazovaly na ovládací prvek Stránka, na kterém se nachází uživatelský ovládací prvek).</span><span class="sxs-lookup"><span data-stu-id="59689-132">They both accept two attributes, `ControlID` and `EventName`, and can specify any Control within the current unit of encapsulation (for instance, if your UpdatePanel control resides within a Web User Control, you should not attempt to reference a Control on the Page on which the User Control will reside).</span></span>

<span data-ttu-id="59689-133">`<asp:AsyncPostBackTrigger>` Element je zvláště užitečná v tom, že ho můžete cílit na libovolnou událost z ovládacího prvku, který existuje jako podřízený objekt *jakékoli* ovládací prvek UpdatePanel v jednotce zapouzdření, nejen UpdatePanel, pod kterým je tento trigger podřízený .</span><span class="sxs-lookup"><span data-stu-id="59689-133">The `<asp:AsyncPostBackTrigger>` element is particularly useful in that it can target any event from a Control that exists as a child of *any* UpdatePanel control in the unit of encapsulation, not just the UpdatePanel under which this trigger is a child.</span></span> <span data-ttu-id="59689-134">Díky tomu se libovolný ovládací prvek lze aktivovat aktualizaci částečná stránka.</span><span class="sxs-lookup"><span data-stu-id="59689-134">Thus, any control can be made to trigger a partial page update.</span></span>

<span data-ttu-id="59689-135">Podobně platí `<asp:PostBackTrigger>` elementu lze použít aktivační událost vykreslování části stránky, ale ten, který vyžaduje úplné cesty k serveru.</span><span class="sxs-lookup"><span data-stu-id="59689-135">Similarly, the `<asp:PostBackTrigger>` element can be used to trigger a partial page render, but one that requires a full round-trip to the server.</span></span> <span data-ttu-id="59689-136">Tento prvek aktivační událost také umožňuje vynutit celou stránku vykreslování, pokud ovládací prvek jinak obvykle aktivuje vykreslování části stránky (například, když `Button` ovládací prvek existuje v `<ContentTemplate>` elementu ovládacího prvku UpdatePanel).</span><span class="sxs-lookup"><span data-stu-id="59689-136">This trigger element can also be used to force a full page render when a control would otherwise normally trigger a partial page render (for instance, when a `Button` control exists in the `<ContentTemplate>` element of an UpdatePanel control).</span></span> <span data-ttu-id="59689-137">PostBackTrigger element znovu, můžete zadat libovolný ovládací prvek, který je podřízeným prvkem libovolný ovládací prvek UpdatePanel v aktuální jednotce zapouzdření.</span><span class="sxs-lookup"><span data-stu-id="59689-137">Again, the PostBackTrigger element can specify any control that is a child of any UpdatePanel control in the current unit of encapsulation.</span></span>

## <a name="lttriggersgt-element-reference"></a><span data-ttu-id="59689-138">*&lt;Aktivační události&gt; – referenční dokumentace elementu*</span><span class="sxs-lookup"><span data-stu-id="59689-138">*&lt;Triggers&gt; Element Reference*</span></span>

<span data-ttu-id="59689-139">*Descendants značky:*</span><span class="sxs-lookup"><span data-stu-id="59689-139">*Markup Descendants:*</span></span>

| <span data-ttu-id="59689-140">**Značka**</span><span class="sxs-lookup"><span data-stu-id="59689-140">**Tag**</span></span> | <span data-ttu-id="59689-141">**Popis**</span><span class="sxs-lookup"><span data-stu-id="59689-141">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="59689-142">&lt;asp:AsyncPostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="59689-142">&lt;asp:AsyncPostBackTrigger&gt;</span></span> | <span data-ttu-id="59689-143">Určuje ovládací prvek a událost, která způsobí, že částečná stránka aktualizace pro prvek UpdatePanel, který obsahuje odkaz na tento trigger.</span><span class="sxs-lookup"><span data-stu-id="59689-143">Specifies a control and event that will cause a partial page update for the UpdatePanel that contains this trigger reference.</span></span> |
| <span data-ttu-id="59689-144">&lt;asp:PostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="59689-144">&lt;asp:PostBackTrigger&gt;</span></span> | <span data-ttu-id="59689-145">Určuje ovládací prvek a událost, která způsobí, že aktualizace celou stránku (úplná aktualizace stránky).</span><span class="sxs-lookup"><span data-stu-id="59689-145">Specifies a control and event that will cause a full page update (a full page refresh).</span></span> <span data-ttu-id="59689-146">Toto klíčové slovo slouží k vynucení úplné aktualizace, když ovládací prvek aktivuje v opačném případě částečného zobrazení.</span><span class="sxs-lookup"><span data-stu-id="59689-146">This tag can be used to force a full refresh when a control would otherwise trigger partial rendering.</span></span> |

## <a name="walkthrough-cross-updatepanel-triggers"></a><span data-ttu-id="59689-147">*Návod: Mezi ovládacím prvkem UpdatePanel triggery*</span><span class="sxs-lookup"><span data-stu-id="59689-147">*Walkthrough: Cross-UpdatePanel Triggers*</span></span>

1. <span data-ttu-id="59689-148">Vytvořte novou stránku ASP.NET pomocí objektu ScriptManager nastavit pro povolení částečného zobrazení.</span><span class="sxs-lookup"><span data-stu-id="59689-148">Create a new ASP.NET page with a ScriptManager object set to enable partial rendering.</span></span> <span data-ttu-id="59689-149">Přidat dvě komponenty UpdatePanel na tuto stránku – v prvním, zahrnují ovládací prvek popisku (Label1) a dva ovládací prvky tlačítka (ovládací prvky Button1 a Button2).</span><span class="sxs-lookup"><span data-stu-id="59689-149">Add two UpdatePanels to this page - in the first, include a Label control ( Label1 ) and two Button controls ( Button1 and Button2 ).</span></span> <span data-ttu-id="59689-150">Button1 by mělo být uvedeno klikněte na tlačítko Aktualizovat oba a Button2 by mělo být uvedeno klikněte na Aktualizovat to nebo něco spolu tyto řádky.</span><span class="sxs-lookup"><span data-stu-id="59689-150">Button1 should say Click to Update Both and Button2 should say Click to Update This, or something along those lines.</span></span> <span data-ttu-id="59689-151">V druhém ovládacím prvkem UpdatePanel obsahovat pouze ovládací prvek popisku (Label2), ale nastavit jeho vlastnosti ForeColor na jinou hodnotu než výchozí, aby ho odlišil.</span><span class="sxs-lookup"><span data-stu-id="59689-151">In the second UpdatePanel, include only a Label control ( Label2 ), but set its ForeColor property to something other than the default to differentiate it.</span></span>
2. <span data-ttu-id="59689-152">Nastavte vlastnost UpdateMode obě značky ovládacího prvku UpdatePanel **podmíněného**.</span><span class="sxs-lookup"><span data-stu-id="59689-152">Set the UpdateMode property of both UpdatePanel tags to **Conditional**.</span></span>

<span data-ttu-id="59689-153">**Výpis 1: Kód pro default.aspx:**</span><span class="sxs-lookup"><span data-stu-id="59689-153">**Listing 1: Markup for default.aspx:**</span></span> 

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample1.aspx)]

1. <span data-ttu-id="59689-154">V obslužné rutině události kliknutí pro Button1 nastavte Label1.Text i Label2.Text na něco závislá na čase (například DateTime.Now.ToLongTimeString()).</span><span class="sxs-lookup"><span data-stu-id="59689-154">In the Click event handler for Button1, set Label1.Text and Label2.Text to something time-dependent (such as DateTime.Now.ToLongTimeString()).</span></span> <span data-ttu-id="59689-155">Pro obslužné rutiny události kliknutí pro Button2 nastavte pouze Label1.Text hodnotě závislá na čase.</span><span class="sxs-lookup"><span data-stu-id="59689-155">For the Click event handler for Button2, set only Label1.Text to the time-dependent value.</span></span>

<span data-ttu-id="59689-156">**Výpis 2: Codebehind (oříznut) v default.aspx.cs:**</span><span class="sxs-lookup"><span data-stu-id="59689-156">**Listing 2: Codebehind (trimmed) in default.aspx.cs:**</span></span> 

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample2.cs)]

1. <span data-ttu-id="59689-157">Stisknutím klávesy F5 sestavte a spusťte projekt.</span><span class="sxs-lookup"><span data-stu-id="59689-157">Press F5 to build and run the project.</span></span> <span data-ttu-id="59689-158">Všimněte si, že po kliknutí na panelech jak aktualizace i popisky, změnit text; ale po kliknutí na tento Panel aktualizace pouze Label1 aktualizuje.</span><span class="sxs-lookup"><span data-stu-id="59689-158">Note that, when you click Update Both Panels, both labels change text; however, when you click Update This Panel, only Label1 updates.</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image2.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image1.png)

<span data-ttu-id="59689-159">([Kliknutím ji zobrazíte obrázek v plné velikosti](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="59689-159">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span></span>


## <a name="under-the-hood"></a><span data-ttu-id="59689-160">*Pohled pod kapotu*</span><span class="sxs-lookup"><span data-stu-id="59689-160">*Under the Hood*</span></span>

<span data-ttu-id="59689-161">Využitím příkladu, který jsme právě vytvořen, můžeme provést podívat, co dělá technologie ASP.NET AJAX a jak pracují naše aktivačních událostí UpdatePanel mezi panely.</span><span class="sxs-lookup"><span data-stu-id="59689-161">Utilizing the example we just constructed, we can take a look at what ASP.NET AJAX is doing and how our UpdatePanel cross-panel triggers work.</span></span> <span data-ttu-id="59689-162">K tomu, pak ve spolupráci s zdrojový kód vygenerovaný stránky HTML, jakož i rozšíření Mozilla Firefox volat FireBug - s, jsme snadněji zkontrolovat zpětná volání AJAX.</span><span class="sxs-lookup"><span data-stu-id="59689-162">To do so, we will work with the generated page source HTML, as well as the Mozilla Firefox extension called FireBug - with it, we can easily examine the AJAX postbacks.</span></span> <span data-ttu-id="59689-163">Budeme také používat nástroj .NET Reflector podle Lutz Roeder.</span><span class="sxs-lookup"><span data-stu-id="59689-163">We will also use the .NET Reflector tool by Lutz Roeder.</span></span> <span data-ttu-id="59689-164">Oba tyto nástroje jsou volně k dispozici online a lze najít pomocí vyhledávání na Internetu.</span><span class="sxs-lookup"><span data-stu-id="59689-164">Both of these tools are freely available online, and can be found with an internet search.</span></span>

<span data-ttu-id="59689-165">Prošetření kódu ze zdrojového kódu stránky zobrazí téměř nic neobvyklého; ovládací prvky UpdatePanel jsou vykresleny jako `<div>` kontejnery a My můžete zobrazit skript prostředků obsahuje zadaný ve `<asp:ScriptManager>`.</span><span class="sxs-lookup"><span data-stu-id="59689-165">An examination of the page source code shows almost nothing out of the ordinary; the UpdatePanel controls are rendered as `<div>` containers, and we can see the script resource includes provided by the `<asp:ScriptManager>`.</span></span> <span data-ttu-id="59689-166">Existují také některé nové AJAX konkrétní volání do správce PageRequestManager, která jsou interní v klientské knihovně skriptu AJAX.</span><span class="sxs-lookup"><span data-stu-id="59689-166">There are also some new AJAX-specific calls to the PageRequestManager that are internal to the AJAX client script library.</span></span> <span data-ttu-id="59689-167">A konečně, můžeme vidět dva kontejnery UpdatePanel – jeden u vygenerované `<input>` tlačítka s nimi `<asp:Label>` ovládací prvky se vykresluje jako `<span>` kontejnery.</span><span class="sxs-lookup"><span data-stu-id="59689-167">Finally, we see the two UpdatePanel containers - one with the rendered `<input>` buttons with the two `<asp:Label>` controls rendered as `<span>` containers.</span></span> <span data-ttu-id="59689-168">(Je-li si prohlédnout v FireBug stromové struktuře modelu DOM, můžete si všimnout, že popisky jsou neaktivní označíte, že nejsou vytváření viditelného obsahu).</span><span class="sxs-lookup"><span data-stu-id="59689-168">(If you inspect the DOM tree in FireBug, you will notice that the labels are dimmed to indicate that they are not producing visible content).</span></span>

<span data-ttu-id="59689-169">Klikněte na tlačítko Aktualizovat tento Panel a Všimněte si, že hlavní prvek UpdatePanel aktualizuje aktuální čas serveru.</span><span class="sxs-lookup"><span data-stu-id="59689-169">Click the Update This Panel button, and notice the top UpdatePanel will be updated with the current server time.</span></span> <span data-ttu-id="59689-170">V FireBug zvolte kartu konzoly tak, aby můžete zkontrolovat žádost.</span><span class="sxs-lookup"><span data-stu-id="59689-170">In FireBug, choose the Console tab so that you can examine the request.</span></span> <span data-ttu-id="59689-171">Nejprve zkontrolujte parametry požadavku POST:</span><span class="sxs-lookup"><span data-stu-id="59689-171">Examine the POST request parameters first:</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image5.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image4.png)

<span data-ttu-id="59689-172">([Kliknutím ji zobrazíte obrázek v plné velikosti](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="59689-172">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span></span>


<span data-ttu-id="59689-173">Všimněte si, že prvku UpdatePanel uvedl do kódu jazyka AJAX na straně serveru přesně které ovládací prvek stromu se vyvolala prostřednictvím parametru ScriptManager1: `Button1` z `UpdatePanel1` ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="59689-173">Note that the UpdatePanel has indicated to the server-side AJAX code precisely which control tree was fired via the ScriptManager1 parameter: `Button1` of the `UpdatePanel1` control.</span></span> <span data-ttu-id="59689-174">Nyní klikněte na tlačítko aktualizace i panelů.</span><span class="sxs-lookup"><span data-stu-id="59689-174">Now, click on the Update Both Panels button.</span></span> <span data-ttu-id="59689-175">Potom zkoumání odpovědi, vidíme oddělených kanálu řadu proměnné nastavené v řetězci; Konkrétně můžeme vidět nejvyšší UpdatePanel `UpdatePanel1`, má podkladové jeho HTML odesláno prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="59689-175">Then, examining the response, we see a pipe-delimited series of variables set in a string; specifically, we see the top UpdatePanel, `UpdatePanel1`, has the entirety of its HTML sent to the browser.</span></span> <span data-ttu-id="59689-176">Skript klientské knihovny AJAX nahradí původní HTML prvku UpdatePanel obsahu s použitím nového obsahu prostřednictvím `.innerHTML` vlastnost, a proto server odešle změněný obsah ze serveru ve formátu HTML.</span><span class="sxs-lookup"><span data-stu-id="59689-176">The AJAX client script library substitutes the UpdatePanel's original HTML content with the new content via the `.innerHTML` property, and so the server sends the changed content from the server as HTML.</span></span>

<span data-ttu-id="59689-177">Nyní klikněte na tlačítko jak panelů aktualizace a podívejte se na výsledky ze serveru.</span><span class="sxs-lookup"><span data-stu-id="59689-177">Now, click on the Update Both Panels button and examine the results from the server.</span></span> <span data-ttu-id="59689-178">Výsledky jsou velmi podobné – obě komponenty UpdatePanel příjem nových HTML ze serveru.</span><span class="sxs-lookup"><span data-stu-id="59689-178">The results are very similar - both UpdatePanels receive new HTML from the server.</span></span> <span data-ttu-id="59689-179">Stejně jako u předchozí zpětné volání, je odeslána stav další stránky.</span><span class="sxs-lookup"><span data-stu-id="59689-179">As with the previous callback, additional page state is sent.</span></span>

<span data-ttu-id="59689-180">Jak vidíme, protože žádný zvláštní kód slouží k provádění zpětné volání AJAX, je schopna zachytit zpětného odeslání formuláře bez jakékoli další kód skriptu klientské knihovny AJAX.</span><span class="sxs-lookup"><span data-stu-id="59689-180">As we can see, because no special code is utilized to perform an AJAX postback, the AJAX client script library is able to intercept form postbacks without any additional code.</span></span> <span data-ttu-id="59689-181">Serverové ovládací prvky automaticky využívat jazyka JavaScript tak, aby se neodešlou automaticky formuláře – ASP.NET automaticky vkládá kód pro ověřování formuláře a stav již, především dosahuje automatický skript prostředků zahrnutí PostBackOptions třídy a třídu ClientScriptManager.</span><span class="sxs-lookup"><span data-stu-id="59689-181">Server controls automatically utilize JavaScript so that they do not automatically submit the form - ASP.NET automatically injects code for form validation and state already, primarily achieved by automatic script resource inclusion, the PostBackOptions class, and the ClientScriptManager class.</span></span>

<span data-ttu-id="59689-182">Například vezměte v úvahu ovládacím prvku zaškrtávací políčko; Prozkoumejte zpětný překlad třídy v rozhraní .NET Reflector.</span><span class="sxs-lookup"><span data-stu-id="59689-182">For instance, consider a CheckBox control; examine the class disassembly in .NET Reflector.</span></span> <span data-ttu-id="59689-183">Uděláte to tak, ujistěte se, že vaše sestavení System.Web otevřete a přejděte do `System.Web.UI.WebControls.CheckBox` třídy, otevřete `RenderInputTag` metody.</span><span class="sxs-lookup"><span data-stu-id="59689-183">To do so, ensure that your System.Web assembly is open, and navigate to the `System.Web.UI.WebControls.CheckBox` class, opening the `RenderInputTag` method.</span></span> <span data-ttu-id="59689-184">Hledat s podmínkou, která zkontroluje, `AutoPostBack` vlastnost:</span><span class="sxs-lookup"><span data-stu-id="59689-184">Look for a conditional that checks the `AutoPostBack` property:</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image8.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image7.png)

<span data-ttu-id="59689-185">([Kliknutím ji zobrazíte obrázek v plné velikosti](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="59689-185">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span></span>


<span data-ttu-id="59689-186">Pokud je povoleno automatické zpětného odeslání na `CheckBox` řízení (prostřednictvím AutoPostBack vlastnosti je true), výsledné `<input>` je tedy vykreslen pomocí technologie ASP.NET událost zpracování skriptu v jeho `onclick` atribut.</span><span class="sxs-lookup"><span data-stu-id="59689-186">When automatic postback is enabled on a `CheckBox` control (via the AutoPostBack property being true), the resultant `<input>` tag is therefore rendered with an ASP.NET event handling script in its `onclick` attribute.</span></span> <span data-ttu-id="59689-187">Zachycení odeslání formuláře, pak umožňuje technologie ASP.NET AJAX vložit do stránky nonintrusively, a usnadnit tak vyhnuli potenciální rozbíjející změny, které mohou nastat s využitím pravděpodobně nepřesnou řetězec nahrazení.</span><span class="sxs-lookup"><span data-stu-id="59689-187">The interception of the form's submission, then, allows ASP.NET AJAX to be injected into the page nonintrusively, helping to avoid any potential breaking changes that might occur by utilizing a possibly-imprecise string replacement.</span></span> <span data-ttu-id="59689-188">Kromě toho díky tomu *jakékoli* vlastní ovládací prvek ASP.NET využívat sílu technologie ASP.NET AJAX bez jakékoli další kód pro podporu jeho použití v rámci kontejneru prvku UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="59689-188">Furthermore, this enables *any* custom ASP.NET control to utilize the power of ASP.NET AJAX without any additional code to support its use within an UpdatePanel container.</span></span>

<span data-ttu-id="59689-189">`<triggers>` Funkce odpovídá hodnoty inicializován při volání funkce PageRequestManager \_updateControls (Všimněte si, že knihovna skriptu klienta ASP.NET AJAX používá tato konvence této metody, události a názvy polí, které začínají začínající podtržítkem jsou označeny jako vnitřní a nejsou určené pro použití mimo samotné knihovny).</span><span class="sxs-lookup"><span data-stu-id="59689-189">The `<triggers>` functionality corresponds to the values initialized in the PageRequestManager call to \_updateControls (note that the ASP.NET AJAX client script library utilizes the convention that methods, events, and field names that begin with an underscore are marked as internal, and are not meant for use outside of the library itself).</span></span> <span data-ttu-id="59689-190">Pomocí něho můžete podle našich zkušeností které ovládací prvky jsou určeny k způsobit, že zpětná volání AJAX.</span><span class="sxs-lookup"><span data-stu-id="59689-190">With it, we can observe which controls are intended to cause AJAX postbacks.</span></span>

<span data-ttu-id="59689-191">Na stránce, ponechat jeden ovládací prvek mimo komponenty UpdatePanel zcela a ponechat v rámci ovládacího prvku UpdatePanel jednoho například přidáme další dva ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="59689-191">For example, let's add two additional controls to the page, leaving one control outside of the UpdatePanels entirely, and leaving one within an UpdatePanel.</span></span> <span data-ttu-id="59689-192">Budeme přidat ovládací prvek v rámci horní UpdatePanel a vyřadit DropDownList s celou řadou barvám definovaným v rámci seznamu.</span><span class="sxs-lookup"><span data-stu-id="59689-192">We will add a CheckBox control within the upper UpdatePanel, and drop a DropDownList with a number of colors defined within the list.</span></span> <span data-ttu-id="59689-193">Toto je nový zápis:</span><span class="sxs-lookup"><span data-stu-id="59689-193">Here is the new markup:</span></span>

<span data-ttu-id="59689-194">**Výpis 3: Nové značky**</span><span class="sxs-lookup"><span data-stu-id="59689-194">**Listing 3: New Markup**</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample3.aspx)]

<span data-ttu-id="59689-195">A tady je nová kódu:</span><span class="sxs-lookup"><span data-stu-id="59689-195">And here is the new code-behind:</span></span>

<span data-ttu-id="59689-196">**Část 4: Codebehind**</span><span class="sxs-lookup"><span data-stu-id="59689-196">**Listing 4: Codebehind**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample4.cs)]

<span data-ttu-id="59689-197">Myšlenkou Tato stránka je, že rozevíracího seznamu vybere jeden ze tří barvy zobrazíte druhého popisku, že zaškrtávací políčko určuje, jestli je tučný i Určuje, zda se zobrazí popisky datum i čas.</span><span class="sxs-lookup"><span data-stu-id="59689-197">The idea behind this page is that the drop-down list selects one of three colors to show the second label, that the check box determines both whether it is bold, and whether the labels display the date as well as the time.</span></span> <span data-ttu-id="59689-198">Pole by nemělo způsobit aktualizaci AJAX, ale měli rozevíracího seznamu, i když není umístěna v rámci ovládacího prvku UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="59689-198">The check box should not cause an AJAX update, but the drop-down list should, even though it is not housed within an UpdatePanel.</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image11.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image10.png)

<span data-ttu-id="59689-199">([Kliknutím ji zobrazíte obrázek v plné velikosti](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="59689-199">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span></span>


<span data-ttu-id="59689-200">Jako je zřejmý na snímku obrazovky výše, byla nejnovější tlačítko dá kliknout pravým tlačítkem tento Panel aktualizace, která aktualizuje hlavní dobu nezávisle na dolní čas.</span><span class="sxs-lookup"><span data-stu-id="59689-200">As is apparent in the above screen shot, the most-recent button to be clicked was the right button Update This Panel, which updated the top time independent of the bottom time.</span></span> <span data-ttu-id="59689-201">Datum se také vypnout mezi kliknutí, protože datum je viditelný v dolní popisek.</span><span class="sxs-lookup"><span data-stu-id="59689-201">The date was also switched off between clicks, as the date is visible in the bottom label.</span></span> <span data-ttu-id="59689-202">A konečně zájmu je barva dolního popisku: později, než text popisku, který ukazuje, že stav ovládacího prvku je důležité, aktualizace a uživatelé očekávají, že bude zachována přes zpětná volání AJAX.</span><span class="sxs-lookup"><span data-stu-id="59689-202">Finally of interest is the bottom label's color: it was updated more recently than the label's text, which demonstrates that control state is important, and users expect it to be preserved through AJAX postbacks.</span></span> <span data-ttu-id="59689-203">*Ale*, čas nebyla aktualizována.</span><span class="sxs-lookup"><span data-stu-id="59689-203">*However*, the time was not updated.</span></span> <span data-ttu-id="59689-204">Čas se automaticky naplnit prostřednictvím trvalou dostupnost \_ \_pole Stav zobrazení stránky zamezit interpretaci modulem ASP.NET runtime, když ovládací prvek se znovu vykreslený na serveru.</span><span class="sxs-lookup"><span data-stu-id="59689-204">The time was automatically repopulated through the persistence of the \_\_VIEWSTATE field of the page being interpreted by the ASP.NET runtime when the control was being re-rendered on the server.</span></span> <span data-ttu-id="59689-205">Do kódu serveru technologie ASP.NET AJAX nebylo rozpoznáno, ve kterém jsou metody ovládací prvky změnu stavu; jednoduše znovu naplní ze zobrazení stavu a poté spuštění události, které jsou vhodné.</span><span class="sxs-lookup"><span data-stu-id="59689-205">The ASP.NET AJAX server code does not recognize in which methods the controls are changing state; it simply repopulates from view state and then runs the events that are appropriate.</span></span>

<span data-ttu-id="59689-206">Je třeba zdůraznit, však, že došlo I inicializovat čas v rámci stránky\_události načtení času by byl navýšen správně.</span><span class="sxs-lookup"><span data-stu-id="59689-206">It should be pointed out, however, that had I initialized the time within the Page\_Load event, the time would have been incremented correctly.</span></span> <span data-ttu-id="59689-207">V důsledku toho by vývojáři dávejte pozor na to, že odpovídající kód je spuštěn během obslužné rutiny události a vyhněte se použití stránky\_načíst při obslužnou rutinu události ovládacího prvku může být vhodné.</span><span class="sxs-lookup"><span data-stu-id="59689-207">Consequently, developers should be wary that the appropriate code is being run during the appropriate event handlers, and avoid use of Page\_Load when a control event handler would be appropriate.</span></span>

## <a name="summary"></a><span data-ttu-id="59689-208">Souhrn</span><span class="sxs-lookup"><span data-stu-id="59689-208">Summary</span></span>

<span data-ttu-id="59689-209">Ovládacího prvku UpdatePanel technologie ASP.NET AJAX rozšíření je flexibilní a můžete využít několik metod pro určení události ovládacích prvků, které byste ji aktualizovat.</span><span class="sxs-lookup"><span data-stu-id="59689-209">The ASP.NET AJAX Extensions UpdatePanel control is versatile, and can utilize a number of methods for identifying control events that should cause it to be updated.</span></span> <span data-ttu-id="59689-210">Podporuje se automaticky aktualizovat podle jemu podřízených ovládacích prvků, ale může také reagovat na události ovládacích prvků na stránce jinde.</span><span class="sxs-lookup"><span data-stu-id="59689-210">It supports being updated automatically by its child controls, but can also respond to control events elsewhere on the page.</span></span>

<span data-ttu-id="59689-211">Pokud chcete snížit riziko pro zatížení serveru, je doporučeno `ChildrenAsTriggers` vlastnost ovládacího prvku UpdatePanel nastavit na `false`, a události se rozhodli do spíše než zahrnuté ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="59689-211">To reduce potential for server processing load, it is recommended that the `ChildrenAsTriggers` property of an UpdatePanel be set to `false`, and that events be opted-into rather than included by default.</span></span> <span data-ttu-id="59689-212">To zabrání také všechny nepotřebné události z potenciálně nežádoucí účinky, včetně ověření a změn na vstupní pole.</span><span class="sxs-lookup"><span data-stu-id="59689-212">This also prevents any unneeded events from causing potentially-unwanted effects, including validation, and changes to input fields.</span></span> <span data-ttu-id="59689-213">Tyto druhy chyb může být obtížné určit, protože se stránka aktualizuje transparentně uživateli, a nemusí proto být hned zjevné příčiny.</span><span class="sxs-lookup"><span data-stu-id="59689-213">These types of bugs may be difficult to isolate, because the page updates transparently to the user, and the cause may therefore not be immediately obvious.</span></span>

<span data-ttu-id="59689-214">Prozkoumáním vnitřní fungování formuláře technologie ASP.NET AJAX konečná modelu zachycení, jsme byli schopni zjistit, že využívá rozhraní již poskytovaných technologií ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="59689-214">By examining the inner workings of the ASP.NET AJAX form post interception model, we were able to determine that it utilizes the framework already provided by ASP.NET.</span></span> <span data-ttu-id="59689-215">Přitom je zachová maximální kompatibility s ovládacími prvky navrženými pomocí stejné architektury a intrudes minimálně na jakékoli další JavaScript zapsán pro danou stránku.</span><span class="sxs-lookup"><span data-stu-id="59689-215">In doing so, it preserves maximum compatibility with controls designed using the same framework, and intrudes minimally on any additional JavaScript written for the page.</span></span>

## <a name="bio"></a><span data-ttu-id="59689-216">Životopis</span><span class="sxs-lookup"><span data-stu-id="59689-216">Bio</span></span>

<span data-ttu-id="59689-217">Rob Paveza je vedoucí vývojář aplikace .NET v Terralever ([www.terralever.com](http://www.terralever.com)), přední interaktivní marketingové podniku v Tempe, AZ.</span><span class="sxs-lookup"><span data-stu-id="59689-217">Rob Paveza is a senior .NET application developer at Terralever ([www.terralever.com](http://www.terralever.com)), a leading interactive marketing firm in Tempe, AZ.</span></span> <span data-ttu-id="59689-218">Může být dosáhl v [ robpaveza@gmail.com ](mailto:robpaveza@gmail.com), a je umístěn na svém blogu [ http://geekswithblogs.net/robp/ ](http://geekswithblogs.net/robp/).</span><span class="sxs-lookup"><span data-stu-id="59689-218">He can be reached at [robpaveza@gmail.com](mailto:robpaveza@gmail.com), and his blog is located at [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span></span>

<span data-ttu-id="59689-219">Scott Cate má práce s Microsoft webových technologiích od roku 1997 a je prezident myKB.com ([www.myKB.com](http://www.myKB.com)) kde mu se specializuje na technologie ASP.NET psaní aplikací, zaměřuje na znalostní báze softwarová řešení založených na.</span><span class="sxs-lookup"><span data-stu-id="59689-219">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="59689-220">Scott můžete kontaktovat prostřednictvím e-mailové adrese [ scott.cate@myKB.com ](mailto:scott.cate@myKB.com) nebo na svém blogu [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="59689-220">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="59689-221">[Předchozí](understanding-partial-page-updates-with-asp-net-ajax.md)
> [další](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span><span class="sxs-lookup"><span data-stu-id="59689-221">[Previous](understanding-partial-page-updates-with-asp-net-ajax.md)
[Next](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span></span>
