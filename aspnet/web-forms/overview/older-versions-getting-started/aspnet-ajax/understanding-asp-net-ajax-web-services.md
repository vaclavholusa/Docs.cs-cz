---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-web-services
title: Principy webových služeb ASP.NET AJAX | Dokumentace Microsoftu
author: scottcate
description: Webové služby jsou nedílnou součástí rozhraní .NET framework, která poskytují řešení napříč platformami pro výměnu dat mezi distribuované systémy. I když Web...
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/28/2008
ms.topic: article
ms.assetid: 3332d6e7-e2e1-4144-b805-e71d51e7e415
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-web-services
msc.type: authoredcontent
ms.openlocfilehash: c3874e19ef55ffd4949f9bc280d32a3da7a00271
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/03/2018
ms.locfileid: "37376382"
---
<a name="understanding-aspnet-ajax-web-services"></a><span data-ttu-id="e3c09-104">Principy webových služeb ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="e3c09-104">Understanding ASP.NET AJAX Web Services</span></span>
====================
<span data-ttu-id="e3c09-105">podle [– Scott Cate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="e3c09-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="e3c09-106">Stáhnout PDF</span><span class="sxs-lookup"><span data-stu-id="e3c09-106">Download PDF</span></span>](http://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial05_Web_Services_with_MS_Ajax_cs.pdf)

> <span data-ttu-id="e3c09-107">Webové služby jsou nedílnou součástí rozhraní .NET framework, která poskytují řešení napříč platformami pro výměnu dat mezi distribuované systémy.</span><span class="sxs-lookup"><span data-stu-id="e3c09-107">Web Services are an integral part of the .NET framework that provide a cross-platform solution for exchanging data between distributed systems.</span></span> <span data-ttu-id="e3c09-108">I když webové služby se obvykle používají pro různé operační systémy, objektové modely a programovacích jazyků k odesílání a příjmu dat, jsou také umožňuje dynamicky vložení dat do stránky technologie ASP.NET AJAX nebo odesílat data ze stránky do back endovému systému.</span><span class="sxs-lookup"><span data-stu-id="e3c09-108">Although Web Services are normally used to allow different operating systems, object models and programming languages to send and receive data, they can also be used to dynamically inject data into an ASP.NET AJAX page or send data from a page to a back-end system.</span></span> <span data-ttu-id="e3c09-109">To všechno můžete udělat bez nutnosti uchýlit se operace odeslání.</span><span class="sxs-lookup"><span data-stu-id="e3c09-109">All of this can be done without resorting to postback operations.</span></span>


## <a name="calling-web-services-with-aspnet-ajax"></a><span data-ttu-id="e3c09-110">Volání webové služby pomocí ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="e3c09-110">Calling Web Services with ASP.NET AJAX</span></span>

<span data-ttu-id="e3c09-111">DaN Wahlin</span><span class="sxs-lookup"><span data-stu-id="e3c09-111">Dan Wahlin</span></span>

<span data-ttu-id="e3c09-112">Webové služby jsou nedílnou součástí rozhraní .NET framework, která poskytují řešení napříč platformami pro výměnu dat mezi distribuované systémy.</span><span class="sxs-lookup"><span data-stu-id="e3c09-112">Web Services are an integral part of the .NET framework that provide a cross-platform solution for exchanging data between distributed systems.</span></span> <span data-ttu-id="e3c09-113">I když webové služby se obvykle používají pro různé operační systémy, objektové modely a programovacích jazyků k odesílání a příjmu dat, jsou také umožňuje dynamicky vložení dat do stránky technologie ASP.NET AJAX nebo odesílat data ze stránky do back endovému systému.</span><span class="sxs-lookup"><span data-stu-id="e3c09-113">Although Web Services are normally used to allow different operating systems, object models and programming languages to send and receive data, they can also be used to dynamically inject data into an ASP.NET AJAX page or send data from a page to a back-end system.</span></span> <span data-ttu-id="e3c09-114">To všechno můžete udělat bez nutnosti uchýlit se operace odeslání.</span><span class="sxs-lookup"><span data-stu-id="e3c09-114">All of this can be done without resorting to postback operations.</span></span>

<span data-ttu-id="e3c09-115">Zatímco ovládacího prvku UpdatePanel technologie ASP.NET AJAX poskytuje jednoduchý způsob, jak AJAX povolit jakékoli stránky technologie ASP.NET, může nastat situace, kdy je potřeba dynamicky přístup k datům na serveru bez použití ovládacího prvku UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="e3c09-115">While the ASP.NET AJAX UpdatePanel control provides a simple way to AJAX enable any ASP.NET page, there may be times when you need to dynamically access data on the server without using an UpdatePanel.</span></span> <span data-ttu-id="e3c09-116">V tomto článku uvidíte, jak to provést pomocí vytváření a používání webových služeb v rámci stránky technologie ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="e3c09-116">In this article you'll see how to accomplish this by creating and consuming Web Services within ASP.NET AJAX pages.</span></span>

<span data-ttu-id="e3c09-117">Tento článek se zaměřuje na funkce, které jsou k dispozici v rozšíření základní technologie ASP.NET AJAX, stejně jako webové služby povolena ovládacího prvku v ASP.NET AJAX Toolkit, volá se, AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="e3c09-117">This article will focus on functionality available in the core ASP.NET AJAX Extensions as well as a Web Service enabled control in the ASP.NET AJAX Toolkit called the AutoCompleteExtender.</span></span> <span data-ttu-id="e3c09-118">Probíraná témata zahrnují definice webové služby s povoleným AJAX, vytváření proxy serverů klientských a volání webových služeb s použitím jazyka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="e3c09-118">Topics covered include defining AJAX-enabled Web Services, creating client proxies and calling Web Services with JavaScript.</span></span> <span data-ttu-id="e3c09-119">Uvidíte také, jak volání webové služby můžete provést přímo do metody stránky technologie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e3c09-119">You'll also see how Web Service calls can be made directly to ASP.NET page methods.</span></span>

## <a name="web-services-configuration"></a><span data-ttu-id="e3c09-120">Konfigurace webové služby</span><span class="sxs-lookup"><span data-stu-id="e3c09-120">Web Services Configuration</span></span>

<span data-ttu-id="e3c09-121">Když pomocí sady Visual Studio 2008 se vytvoří nový projekt webu, v souboru web.config má několik nové doplňky, které mohou být obeznámeni uživatelům z předchozích verzí sady Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e3c09-121">When a new Web Site project is created with Visual Studio 2008, the web.config file has a number of new additions that may be unfamiliar to users of previous versions of Visual Studio.</span></span> <span data-ttu-id="e3c09-122">Některé tyto úpravy, aby je bylo možné použít na stránkách zatímco ostatní definovat povinné HttpHandlers a HttpModules mapování předpony "asp" na technologie ASP.NET AJAX – ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="e3c09-122">Some of these modifications map the "asp" prefix to ASP.NET AJAX controls so they can be used in pages while others define required HttpHandlers and HttpModules.</span></span> <span data-ttu-id="e3c09-123">Výpis 1 zobrazuje změny provedené `<httpHandlers>` element v souboru web.config, který má vliv volání webové služby.</span><span class="sxs-lookup"><span data-stu-id="e3c09-123">Listing 1 shows modifications made to the `<httpHandlers>` element in web.config that affects Web Service calls.</span></span> <span data-ttu-id="e3c09-124">Výchozí httpHandlers používá ke zpracování .asmx volání je odebrán a nahrazen parametrem ScriptHandlerFactory třídy v sestavení System.Web.Extensions.dll.</span><span class="sxs-lookup"><span data-stu-id="e3c09-124">The default HttpHandler used to process .asmx calls is removed and replaced with a ScriptHandlerFactory class located in the System.Web.Extensions.dll assembly.</span></span> <span data-ttu-id="e3c09-125">System.Web.Extensions.dll obsahuje všechny základní funkce používané technologie ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="e3c09-125">System.Web.Extensions.dll contains all of the core functionality used by ASP.NET AJAX.</span></span>

<span data-ttu-id="e3c09-126">**Výpis 1. Konfigurace obslužnou rutinu ASP.NET AJAX webové služby**</span><span class="sxs-lookup"><span data-stu-id="e3c09-126">**Listing 1. ASP.NET AJAX Web Service Handler Configuration**</span></span>

[!code-xml[Main](understanding-asp-net-ajax-web-services/samples/sample1.xml)]

<span data-ttu-id="e3c09-127">Toto nahrazení httpHandlers tvoří umožní se zápis JSON (JavaScript Object) volání provést ze stránek technologie ASP.NET AJAX, webové služby .NET pomocí proxy webové služby jazyka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="e3c09-127">This HttpHandler replacement is made in order to allow JavaScript Object Notation (JSON) calls to be made from ASP.NET AJAX pages to .NET Web Services using a JavaScript Web Service proxy.</span></span> <span data-ttu-id="e3c09-128">ASP.NET AJAX odesílá zprávy JSON do webové služby na rozdíl od standardních volání jednoduchý objekt přístup protokolu (SOAP), které jsou typicky spojované s webovými službami.</span><span class="sxs-lookup"><span data-stu-id="e3c09-128">ASP.NET AJAX sends JSON messages to Web Services as opposed to the standard Simple Object Access Protocol (SOAP) calls typically associated with Web Services.</span></span> <span data-ttu-id="e3c09-129">Výsledkem je menší žádosti a zprávy s odezvami na celkové.</span><span class="sxs-lookup"><span data-stu-id="e3c09-129">This results in smaller request and response messages overall.</span></span> <span data-ttu-id="e3c09-130">Také umožňuje efektivnější zpracování dat na straně klienta od knihovny JavaScript AJAX technologie ASP.NET je optimalizovaná pro práci s objekty JSON.</span><span class="sxs-lookup"><span data-stu-id="e3c09-130">It also allows for more efficient client-side processing of data since the ASP.NET AJAX JavaScript library is optimized to work with JSON objects.</span></span> <span data-ttu-id="e3c09-131">Výpis 2 a 3 výpis příklady požadavků a odpovědí zprávy webové služby serializovat do formátu JSON.</span><span class="sxs-lookup"><span data-stu-id="e3c09-131">Listing 2 and Listing 3 show examples of Web Service request and response messages serialized to JSON format.</span></span> <span data-ttu-id="e3c09-132">Zprávy s požadavkem je znázorněno na výpis 2 předává země parametr s hodnotou "Belgie", zatímco zprávy s odpovědí ve výpisu 3 předává pole objektů zákazníků a jejich vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="e3c09-132">The request message shown in Listing 2 passes a country parameter with a value of "Belgium" while the response message in Listing 3 passes an array of Customer objects and their associated properties.</span></span>

<span data-ttu-id="e3c09-133">**Výpis 2. Zpráva požadavku webové služby serializovat do formátu JSON**</span><span class="sxs-lookup"><span data-stu-id="e3c09-133">**Listing 2. Web Service Request Message Serialized to JSON**</span></span>

[!code-json[Main](understanding-asp-net-ajax-web-services/samples/sample2.json)]

> <span data-ttu-id="e3c09-134">*> [!NOTE] Název operace je definován jako část adresy URL webové služby; Kromě toho zprávy žádosti nejsou vždy odeslat prostřednictvím formátu JSON. Webové služby můžete využít ScriptMethod atribut s UseHttpGet parametrem nastaveným na hodnotu true, což způsobí, že parametry se mají být předány prostřednictvím parametrů řetězce dotazu.*</span><span class="sxs-lookup"><span data-stu-id="e3c09-134">*> [!NOTE] the operation name is defined as part of the URL to the web service; additionally, request messages are not always submitted via JSON. Web Services can utilize the ScriptMethod attribute with the UseHttpGet parameter set to true, which causes parameters to be passed via a the query string parameters.*</span></span>


<span data-ttu-id="e3c09-135">**Výpis 3. Zpráva odpovědi webové služby serializovat do formátu JSON**</span><span class="sxs-lookup"><span data-stu-id="e3c09-135">**Listing 3. Web Service Response Message Serialized to JSON**</span></span>

[!code-json[Main](understanding-asp-net-ajax-web-services/samples/sample3.json)]

<span data-ttu-id="e3c09-136">V další části uvidíte, jak vytvořit webové služby schopné zpracování zprávy požadavku JSON a reagovat s jednoduché a komplexní typy.</span><span class="sxs-lookup"><span data-stu-id="e3c09-136">In the next section you'll see how to create Web Services capable of handling JSON request messages and responding with both simple and complex types.</span></span>

## <a name="creating-ajax-enabled-web-services"></a><span data-ttu-id="e3c09-137">Vytváření webových služeb podporou jazyka AJAX</span><span class="sxs-lookup"><span data-stu-id="e3c09-137">Creating AJAX-Enabled Web Services</span></span>

<span data-ttu-id="e3c09-138">ASP.NET AJAX framework nabízí několik různých způsobů pro volání webové služby.</span><span class="sxs-lookup"><span data-stu-id="e3c09-138">The ASP.NET AJAX framework provides several different ways to call Web Services.</span></span> <span data-ttu-id="e3c09-139">Můžete použít ovládací prvek AutoCompleteExtender (k dispozici v ASP.NET AJAX Toolkit) nebo JavaScript.</span><span class="sxs-lookup"><span data-stu-id="e3c09-139">You can use the AutoCompleteExtender control (available in the ASP.NET AJAX Toolkit) or JavaScript.</span></span> <span data-ttu-id="e3c09-140">Ale před voláním služby budete muset povolit AJAX ho tak, že je možné vyvolat v kódu skriptu klienta.</span><span class="sxs-lookup"><span data-stu-id="e3c09-140">However, before calling a service you have to AJAX-enable it so that it can be called by client-script code.</span></span>

<span data-ttu-id="e3c09-141">Jestli jste nové webové služby ASP.NET, najdete ho k vytvoření jednoduché a AJAX – povolení služby.</span><span class="sxs-lookup"><span data-stu-id="e3c09-141">Whether or not you're new to ASP.NET Web Services, you'll find it straightforward to create and AJAX-enable services.</span></span> <span data-ttu-id="e3c09-142">Rozhraní .NET framework je podporováno vytváření webových služeb ASP.NET od původní verze v roce 2002 a rozšíření ASP.NET AJAX poskytují další funkce AJAX, která staví na rozhraní .NET framework výchozí sadu funkcí.</span><span class="sxs-lookup"><span data-stu-id="e3c09-142">The .NET framework has supported the creation of ASP.NET Web Services since its initial release in 2002 and the ASP.NET AJAX Extensions provide additional AJAX functionality that builds upon the .NET framework's default set of features.</span></span> <span data-ttu-id="e3c09-143">Visual Studio .NET 2008 Beta 2 obsahuje integrovanou podporu pro vytváření .asmx souborů webové služby a automaticky přidružený kód vedle třídy je odvozen od třídy System.Web.Services.WebService.</span><span class="sxs-lookup"><span data-stu-id="e3c09-143">Visual Studio .NET 2008 Beta 2 has built-in support for creating .asmx Web Service files and automatically derives associated code beside classes from the System.Web.Services.WebService class.</span></span> <span data-ttu-id="e3c09-144">Jak přidat metody do třídy, musíte použít atribut WebMethod je možné vyvolat v příjemci webové služby.</span><span class="sxs-lookup"><span data-stu-id="e3c09-144">As you add methods into the class you must apply the WebMethod attribute in order for them to be called by Web Service consumers.</span></span>

<span data-ttu-id="e3c09-145">Výpis 4 ukazuje příklad použití atributu WebMethod metodu s názvem GetCustomersByCountry().</span><span class="sxs-lookup"><span data-stu-id="e3c09-145">Listing 4 shows an example of applying the WebMethod attribute to a method named GetCustomersByCountry().</span></span>

<span data-ttu-id="e3c09-146">**Výpis 4. Použít atribut WebMethod ve webové službě**</span><span class="sxs-lookup"><span data-stu-id="e3c09-146">**Listing 4. Using the WebMethod Attribute in a Web Service**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample4.cs)]

<span data-ttu-id="e3c09-147">Metoda GetCustomersByCountry() přijímá parametr země a vrátí pole objektů zákazníka.</span><span class="sxs-lookup"><span data-stu-id="e3c09-147">The GetCustomersByCountry() method accepts a country parameter and returns a Customer object array.</span></span> <span data-ttu-id="e3c09-148">Země hodnoty předané do metody je předán do třídy obchodní vrstvu, která volá třída vrstvy dat k načtení dat z databáze, zadejte vlastnosti objektu zákazníků s daty a vrátí pole.</span><span class="sxs-lookup"><span data-stu-id="e3c09-148">The country value passed into the method is forwarded to a business layer class which in turn calls a data layer class to retrieve the data from the database, fill the Customer object properties with data and return the array.</span></span>

## <a name="using-the-scriptservice-attribute"></a><span data-ttu-id="e3c09-149">Pomocí atributu ScriptService</span><span class="sxs-lookup"><span data-stu-id="e3c09-149">Using the ScriptService Attribute</span></span>

<span data-ttu-id="e3c09-150">Při přidávání WebMethod atribut umožňuje GetCustomersByCountry() metoda má být volána klienty, kteří odesílají standardní zprávy protokolu SOAP k webové službě, neumožňuje volání JSON má být provedeno z aplikací ASP.NET AJAX úprav.</span><span class="sxs-lookup"><span data-stu-id="e3c09-150">While adding the WebMethod attribute allows the GetCustomersByCountry() method to be called by clients that send standard SOAP messages to the Web Service, it doesn't allow JSON calls to be made from ASP.NET AJAX applications out of the box.</span></span> <span data-ttu-id="e3c09-151">Chcete-li povolit volání JSON má být provedeno, budete muset použít rozšíření ASP.NET AJAX `ScriptService` atribut pro třídu webové služby.</span><span class="sxs-lookup"><span data-stu-id="e3c09-151">To allow JSON calls to be made you have to apply the ASP.NET AJAX Extension's `ScriptService` attribute to the Web Service class.</span></span> <span data-ttu-id="e3c09-152">To umožňuje odesílat zprávy s odezvami ve formátu JSON pomocí webové služby a umožní skript na straně klienta pro volání služby odesíláním zpráv JSON.</span><span class="sxs-lookup"><span data-stu-id="e3c09-152">This enables a Web Service to send response messages formatted using JSON and allows client-side script to call a service by sending JSON messages.</span></span>

<span data-ttu-id="e3c09-153">Výpis 5 ukazuje příklad použití atributu ScriptService třída webové služby s názvem CustomersService.</span><span class="sxs-lookup"><span data-stu-id="e3c09-153">Listing 5 shows an example of applying the ScriptService attribute to a Web Service class named CustomersService.</span></span>

<span data-ttu-id="e3c09-154">**Seznam 5. Pomocí atributu ScriptService AJAX povolit webové služby**</span><span class="sxs-lookup"><span data-stu-id="e3c09-154">**Listing 5. Using the ScriptService Attribute to AJAX-enable a Web Service**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample5.cs)]

<span data-ttu-id="e3c09-155">Atribut ScriptService funguje jako značku, která označuje, že jej lze volat z kódu skriptu AJAX.</span><span class="sxs-lookup"><span data-stu-id="e3c09-155">The ScriptService attribute acts as a marker that indicates it can be called from AJAX script code.</span></span> <span data-ttu-id="e3c09-156">Ho nemůže pracovat s ve skutečnosti JSON serializaci nebo deserializaci úkoly, ke kterým dochází na pozadí.</span><span class="sxs-lookup"><span data-stu-id="e3c09-156">It doesn't actually handle any of the JSON serialization or deserialization tasks that occur behind the scenes.</span></span> <span data-ttu-id="e3c09-157">ScriptHandlerFactory (nakonfigurovaný v souboru web.config) a další související třídy provést hromadné zpracování JSON.</span><span class="sxs-lookup"><span data-stu-id="e3c09-157">The ScriptHandlerFactory (configured in web.config) and other related classes do the bulk of JSON processing.</span></span>

## <a name="using-the-scriptmethod-attribute"></a><span data-ttu-id="e3c09-158">Pomocí atributu ScriptMethod</span><span class="sxs-lookup"><span data-stu-id="e3c09-158">Using the ScriptMethod Attribute</span></span>

<span data-ttu-id="e3c09-159">Atribut ScriptService není jediným atributem technologie ASP.NET AJAX, který má být definován ve webové službě .NET v pořadí, které bude využívat stránky technologie ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="e3c09-159">The ScriptService attribute is the only ASP.NET AJAX attribute that has to be defined in a .NET Web Service in order for it to be used by ASP.NET AJAX pages.</span></span> <span data-ttu-id="e3c09-160">Jiný atribut s názvem ScriptMethod však lze také použít přímo na metody webové služby.</span><span class="sxs-lookup"><span data-stu-id="e3c09-160">However, another attribute named ScriptMethod can also be applied directly to Web Methods in a service.</span></span> <span data-ttu-id="e3c09-161">ScriptMethod definuje tři vlastnosti včetně `UseHttpGet`, `ResponseFormat` a `XmlSerializeString`.</span><span class="sxs-lookup"><span data-stu-id="e3c09-161">ScriptMethod defines three properties including `UseHttpGet`, `ResponseFormat` and `XmlSerializeString`.</span></span> <span data-ttu-id="e3c09-162">Změna hodnoty těchto vlastností, může být užitečné v případech, kde je potřeba změnit tak, aby GET, když Web metoda musí vracet nezpracovaná data XML ve formě typu požadavek přijal metody webové `XmlDocument` nebo `XmlElement` objekt nebo když se data vrácená z  služby by měl vždy být serializován jako XML namísto formátu JSON.</span><span class="sxs-lookup"><span data-stu-id="e3c09-162">Changing the values of these properties can be useful in cases where the type of request accepted by a Web Method needs to be changed to GET, when a Web Method needs to return raw XML data in the form of an `XmlDocument` or `XmlElement` object or when data returned from a service should always be serialized as XML instead of JSON.</span></span>

<span data-ttu-id="e3c09-163">UseHttpGet vlastnost se dá použít při webové metodě by měla přijímat žádosti o požadavky POST na rozdíl od získání.</span><span class="sxs-lookup"><span data-stu-id="e3c09-163">The UseHttpGet property can be used when a Web Method should accept GET requests as opposed to POST requests.</span></span> <span data-ttu-id="e3c09-164">Požadavky se odešlou pomocí adresy URL se vstupními parametry webové metody převedeny na parametry řetězce dotazu.</span><span class="sxs-lookup"><span data-stu-id="e3c09-164">Requests are sent using a URL with Web Method input parameters converted to QueryString parameters.</span></span> <span data-ttu-id="e3c09-165">UseHttpGet vlastnost Výchozí hodnota je false a pouze by měl být nastaven na `true` když operace jsou známé jako bezpečné a pokud není citlivá data předán webové služby.</span><span class="sxs-lookup"><span data-stu-id="e3c09-165">The UseHttpGet property defaults to false and should only be set to `true` when operations are known to be safe and when sensitive data is not passed to a Web Service.</span></span> <span data-ttu-id="e3c09-166">Výpis 6 ukazuje příklad použití atributu ScriptMethod s vlastností UseHttpGet.</span><span class="sxs-lookup"><span data-stu-id="e3c09-166">Listing 6 shows an example of using the ScriptMethod attribute with the UseHttpGet property.</span></span>

<span data-ttu-id="e3c09-167">**Výpis 6. Pomocí atributu ScriptMethod s vlastností UseHttpGet.**</span><span class="sxs-lookup"><span data-stu-id="e3c09-167">**Listing 6. Using the ScriptMethod attribute with the UseHttpGet property.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample6.cs)]

<span data-ttu-id="e3c09-168">Příklad hlavičky posílané při volání metody webové HttpGetEcho ukazuje výpis 6 jsou uvedeny další:</span><span class="sxs-lookup"><span data-stu-id="e3c09-168">An example of the headers sent when the HttpGetEcho Web Method shown in Listing 6 is called are shown next:</span></span>

`GET /CustomerViewer/DemoService.asmx/HttpGetEcho?input=%22Input Value%22 HTTP/1.1`

<span data-ttu-id="e3c09-169">Kromě povolení metody Web tak, aby přijímal požadavky HTTP GET, atribut ScriptMethod lze také při odpovědi XML se muset vrátit ze služby spíše než formátu JSON.</span><span class="sxs-lookup"><span data-stu-id="e3c09-169">In addition to allowing Web Methods to accept HTTP GET requests, the ScriptMethod attribute can also be used when XML responses need to be returned from a service rather than JSON.</span></span> <span data-ttu-id="e3c09-170">Webová služba může například načtení informačního kanálu RSS ze vzdálené lokality a vraťte jej jako objekt XmlDocument nebo XmlElement.</span><span class="sxs-lookup"><span data-stu-id="e3c09-170">For example, a Web Service may retrieve an RSS feed from a remote site and return it as an XmlDocument or XmlElement object.</span></span> <span data-ttu-id="e3c09-171">Zpracování XML data poté provést na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="e3c09-171">Processing of the XML data can then occur on the client.</span></span>

<span data-ttu-id="e3c09-172">Výpis 7 ukazuje příklad použití vlastnost Formát odpovědi k určení, že má být vrácen XML data z webové metody.</span><span class="sxs-lookup"><span data-stu-id="e3c09-172">Listing 7 shows an example of using the ResponseFormat property to specify that XML data should be returned from a Web Method.</span></span>

<span data-ttu-id="e3c09-173">**Výpis 7. Pomocí atributu ScriptMethod s vlastností formát odpovědi.**</span><span class="sxs-lookup"><span data-stu-id="e3c09-173">**Listing 7. Using the ScriptMethod attribute with the ResponseFormat property.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample7.cs)]

<span data-ttu-id="e3c09-174">Vlastnost Formát odpovědi lze také společně s vlastností XmlSerializeString.</span><span class="sxs-lookup"><span data-stu-id="e3c09-174">The ResponseFormat property can also be used along with the XmlSerializeString property.</span></span> <span data-ttu-id="e3c09-175">Vlastnost XmlSerializeString má výchozí hodnotu false, což znamená, že všechny návratové typy s výjimkou řetězce vrácené z metody webové serializují jako kód XML při `ResponseFormat` je nastavena na `ResponseFormat.Xml`.</span><span class="sxs-lookup"><span data-stu-id="e3c09-175">The XmlSerializeString property has a default value of false which means that all return types except strings returned from a Web Method are serialized as XML when the `ResponseFormat` property is set to `ResponseFormat.Xml`.</span></span> <span data-ttu-id="e3c09-176">Když `XmlSerializeString` je nastavena na `true`, všechny typy vrácené z metody webové serializují jako kód XML, včetně typy řetězců.</span><span class="sxs-lookup"><span data-stu-id="e3c09-176">When `XmlSerializeString` is set to `true`, all types returned from a Web Method are serialized as XML including string types.</span></span> <span data-ttu-id="e3c09-177">Pokud má vlastnost Formát odpovědi hodnotu `ResponseFormat.Json` XmlSerializeString vlastnost se ignoruje.</span><span class="sxs-lookup"><span data-stu-id="e3c09-177">If the ResponseFormat property has a value of `ResponseFormat.Json` the XmlSerializeString property is ignored.</span></span>

<span data-ttu-id="e3c09-178">Výpis 8 ukazuje příklad použití vlastnost XmlSerializeString přinutit řetězců, které mají být serializován jako XML.</span><span class="sxs-lookup"><span data-stu-id="e3c09-178">Listing 8 shows an example of using the XmlSerializeString property to force strings to be serialized as XML.</span></span>

<span data-ttu-id="e3c09-179">**Výpis 8. Pomocí atributu ScriptMethod s vlastností XmlSerializeString**</span><span class="sxs-lookup"><span data-stu-id="e3c09-179">**Listing 8. Using the ScriptMethod attribute with the XmlSerializeString property**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample8.cs)]

<span data-ttu-id="e3c09-180">Hodnota vrácená z volání metody webové GetXmlString ukazuje výpis 8 se zobrazí jako další:</span><span class="sxs-lookup"><span data-stu-id="e3c09-180">The value returned from calling the GetXmlString Web Method shown in Listing 8 is shown next:</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample9.cs)]

<span data-ttu-id="e3c09-181">I když výchozí formát JSON minimalizuje celkové velikosti zprávy požadavků a odpovědí a snadněji využívá klienti technologie ASP.NET AJAX v podobě prohlížečů, formát odpovědi a XmlSerializeString vlastnosti lze využít při klienta data XML, který se má vrátit z metody webové očekávat, že aplikace, jako je například Internet Explorer 5 nebo vyšší.</span><span class="sxs-lookup"><span data-stu-id="e3c09-181">Although the default JSON format minimizes the overall size of request and response messages and is more readily consumed by ASP.NET AJAX clients in a cross-browser manner, the ResponseFormat and XmlSerializeString properties can be utilized when client applications such as Internet Explorer 5 or higher expect XML data to be returned from a Web Method.</span></span>

## <a name="working-with-complex-types"></a><span data-ttu-id="e3c09-182">Práce s komplexní typy</span><span class="sxs-lookup"><span data-stu-id="e3c09-182">Working with Complex Types</span></span>

<span data-ttu-id="e3c09-183">Výpis 5 vám ukázal, příklad vrací složitý typ s názvem zákazníka z webové služby.</span><span class="sxs-lookup"><span data-stu-id="e3c09-183">Listing 5 showed an example of returning a complex type named Customer from a Web Service.</span></span> <span data-ttu-id="e3c09-184">Třída zákazník definuje několik různých typů jednoduché interně jako vlastnosti, jako je jméno a příjmení.</span><span class="sxs-lookup"><span data-stu-id="e3c09-184">The Customer class defines several different simple types internally as properties such as FirstName and LastName.</span></span> <span data-ttu-id="e3c09-185">Komplexní typy použité jako vstupní parametr nebo návratový typ na webové metody s povoleným AJAX jsou automaticky serializovat do formátu JSON před odesláním na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="e3c09-185">Complex types used as an input parameter or return type on an AJAX-enabled Web Method are automatically serialized into JSON before being sent to the client-side.</span></span> <span data-ttu-id="e3c09-186">Ale vnořené komplexní typy (pokud jsou definované interně v rámci jiného typu) nejsou k dispozici klient jako samostatné objekty ve výchozím nastavení.</span><span class="sxs-lookup"><span data-stu-id="e3c09-186">However, nested complex types (those defined internally within another type) are not made available to the client as standalone objects by default.</span></span>

<span data-ttu-id="e3c09-187">V případech, kdy vnořené komplexní typ, který používá webové služby musí být rovněž použita na stránce klienta můžete přidat atribut GenerateScriptType technologie ASP.NET AJAX k webové službě.</span><span class="sxs-lookup"><span data-stu-id="e3c09-187">In cases where a nested complex type used by a Web Service must also be used in a client page, the ASP.NET AJAX GenerateScriptType attribute can be added to the Web Service.</span></span> <span data-ttu-id="e3c09-188">Například třída CustomerDetails je vidět na výpisu 9 obsahuje vlastnosti adresy a pohlaví který ***představují vnořené komplexní typy.***</span><span class="sxs-lookup"><span data-stu-id="e3c09-188">For example, the CustomerDetails class shown in Listing 9 contains Address and Gender properties which ***represent nested complex types.***</span></span>

<span data-ttu-id="e3c09-189">**Výpis 9. Třída CustomerDetails je vidět tady obsahuje dvě vnořené komplexní typy.**</span><span class="sxs-lookup"><span data-stu-id="e3c09-189">**Listing 9. The CustomerDetails class shown here contains two nested complex types.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample10.cs)]

<span data-ttu-id="e3c09-190">Adresa a pohlaví objekty, které jsou definované v rámci třídy CustomerDetails je vidět na výpisu 9 nebude automaticky dostupná pro použití na straně klienta pomocí JavaScriptu vzhledem k tomu, že jsou vnořené typy (adresa je třída a pohlaví je výčet).</span><span class="sxs-lookup"><span data-stu-id="e3c09-190">The Address and Gender objects defined within the CustomerDetails class shown in Listing 9 won't automatically be made available for use on the client-side via JavaScript since they are nested types (Address is a class and Gender is an enumeration).</span></span> <span data-ttu-id="e3c09-191">V situacích, kde vnořený typ používaný v rámci webové služby musí být k dispozici na na straně klienta, můžete použít atribut GenerateScriptType již bylo zmíněno dříve (viz seznam 10).</span><span class="sxs-lookup"><span data-stu-id="e3c09-191">In situations where a nested type used within a Web Service must be available on the client-side, the GenerateScriptType attribute mentioned earlier can be used (see Listing 10).</span></span> <span data-ttu-id="e3c09-192">Tento atribut lze přidat více než jednou v případech, kdy se různé typy vnořených komplexní vrátí ze služby.</span><span class="sxs-lookup"><span data-stu-id="e3c09-192">This attribute can be added multiple times in cases where different nested complex types are returned from a service.</span></span> <span data-ttu-id="e3c09-193">Můžete použít přímo na třídu webové služby nebo vyšší. konkrétní webové metody.</span><span class="sxs-lookup"><span data-stu-id="e3c09-193">It can be applied directly to the Web Service class or above specific Web Methods.</span></span>

<span data-ttu-id="e3c09-194">**Seznam 10. Pomocí atributu GenerateScriptService definovat vnořené typy, které by měly být k dispozici ke klientovi.**</span><span class="sxs-lookup"><span data-stu-id="e3c09-194">**Listing 10. Using the GenerateScriptService attribute to define nested types that should be available to the client.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample11.cs)]

<span data-ttu-id="e3c09-195">Použitím `GenerateScriptType` atribut na typy webové služby a adresu pohlaví bude automaticky k dispozici pro použití kódu jazyka JavaScript technologie ASP.NET AJAX na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="e3c09-195">By applying the `GenerateScriptType` attribute to the Web Service, the Address and Gender types will automatically be made available for use by client-side ASP.NET AJAX JavaScript code.</span></span> <span data-ttu-id="e3c09-196">V informacích 11 je uveden příklad jazyka JavaScript, která je automaticky generována a odeslat klientovi, tak, že přidáte atribut GenerateScriptType na webovou službu.</span><span class="sxs-lookup"><span data-stu-id="e3c09-196">An example of the JavaScript that is automatically generated and sent to the client by adding the GenerateScriptType attribute on a Web Service is shown in Listing 11.</span></span> <span data-ttu-id="e3c09-197">Uvidíte jak používat komplexní typy vnořených později v tomto článku.</span><span class="sxs-lookup"><span data-stu-id="e3c09-197">You'll see how to use nested complex types later in the article.</span></span>

<span data-ttu-id="e3c09-198">**Výpis 11. Vnořené komplexní typy, které jsou k dispozici na stránku ASP.NET AJAX.**</span><span class="sxs-lookup"><span data-stu-id="e3c09-198">**Listing 11. Nested complex types made available to an ASP.NET AJAX page.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample12.cs)]

<span data-ttu-id="e3c09-199">Teď, když už víte, jak vytvořit webové služby a zajistíte jejich přístupnost na stránky technologie ASP.NET AJAX, Pojďme se podívat, jak vytvořit a použít třídy proxy JavaScript, takže data můžete načíst nebo odesílány do webové služby.</span><span class="sxs-lookup"><span data-stu-id="e3c09-199">Now that you've seen how to create Web Services and make them accessible to ASP.NET AJAX pages, let's take a look at how to create and use JavaScript proxies so that data can be retrieved or sent to Web Services.</span></span>

## <a name="creating-javascript-proxies"></a><span data-ttu-id="e3c09-200">Vytvoření třídy proxy JavaScript</span><span class="sxs-lookup"><span data-stu-id="e3c09-200">Creating JavaScript Proxies</span></span>

<span data-ttu-id="e3c09-201">Volání standardní webové služby (.NET nebo jinou platformu) obvykle zahrnuje vytvoření objekt proxy serveru, který chrání před složitým odesílání požadavků a odpovědí zprávy protokolu SOAP.</span><span class="sxs-lookup"><span data-stu-id="e3c09-201">Calling a standard Web Service (.NET or another platform) typically involves creating a proxy object that shields you from the complexities of sending SOAP request and response messages.</span></span> <span data-ttu-id="e3c09-202">Při volání webové služby ASP.NET AJAX můžete vytvořit a použít snadno volat služby bez starostí o serializaci a deserializaci zpráv JSON třídy proxy JavaScript.</span><span class="sxs-lookup"><span data-stu-id="e3c09-202">With ASP.NET AJAX Web Service calls, JavaScript proxies can be created and used to easily call services without worrying about serializing and deserializing JSON messages.</span></span> <span data-ttu-id="e3c09-203">Třídy proxy JavaScript je automaticky generovat pomocí ovládacího prvku ASP.NET AJAX ovládacímu prvku ScriptManager.</span><span class="sxs-lookup"><span data-stu-id="e3c09-203">JavaScript proxies can be automatically generated by using the ASP.NET AJAX ScriptManager control.</span></span>

<span data-ttu-id="e3c09-204">Vytváření JavaScript třídu proxy, která může volat webové služby se provádí pomocí vlastnosti služby prvku ScriptManager.</span><span class="sxs-lookup"><span data-stu-id="e3c09-204">Creating a JavaScript proxy that can call Web Services is accomplished by using the ScriptManager's Services property.</span></span> <span data-ttu-id="e3c09-205">Tuto vlastnost můžete zadat jednu nebo víc služeb, které může stránka technologie ASP.NET AJAX můžete odesílat nebo přijímat data bez nutnosti postback operace asynchronní volání.</span><span class="sxs-lookup"><span data-stu-id="e3c09-205">This property allows you to define one or more services that an ASP.NET AJAX page can call asynchronously to send or receive data without requiring postback operations.</span></span> <span data-ttu-id="e3c09-206">Službu definujete pomocí technologie ASP.NET AJAX `ServiceReference` ovládacího prvku a přiřadí adresu URL webové služby ovládacího prvku `Path` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="e3c09-206">You define a service by using the ASP.NET AJAX `ServiceReference` control and assigning the Web Service URL to the control's `Path` property.</span></span> <span data-ttu-id="e3c09-207">Výpis 12 znázorňuje příklad odkazuje službu s názvem CustomersService.asmx.</span><span class="sxs-lookup"><span data-stu-id="e3c09-207">Listing 12 shows an example of referencing a service named CustomersService.asmx.</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample13.aspx)]

<span data-ttu-id="e3c09-208">**Výpis 12. Definice webové služby používané stránku ASP.NET AJAX.**</span><span class="sxs-lookup"><span data-stu-id="e3c09-208">**Listing 12. Defining a Web Service used in an ASP.NET AJAX page.**</span></span>

<span data-ttu-id="e3c09-209">Přidání odkazu na CustomersService.asmx prostřednictvím ovládacího prvku ScriptManager způsobí, že proxy server JavaScript dynamicky generované a odkazuje na stránku.</span><span class="sxs-lookup"><span data-stu-id="e3c09-209">Adding a reference to the CustomersService.asmx through the ScriptManager control causes a JavaScript proxy to be dynamically generated and referenced by the page.</span></span> <span data-ttu-id="e3c09-210">Proxy server se vloží pomocí &lt;skript&gt; označit a dynamicky načíst voláním CustomersService.asmx souboru a přidávání /js na konec.</span><span class="sxs-lookup"><span data-stu-id="e3c09-210">The proxy is embedded by using the &lt;script&gt; tag and dynamically loaded by calling the CustomersService.asmx file and appending /js to the end of it.</span></span> <span data-ttu-id="e3c09-211">Následující příklad ukazuje, jak proxy server JavaScript je vložená na stránce při ladění je zakázána v souboru web.config:</span><span class="sxs-lookup"><span data-stu-id="e3c09-211">The following example shows how the JavaScript proxy is embedded in the page when debugging is disabled in web.config:</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample14.html)]

> <span data-ttu-id="e3c09-212">*> [!NOTE] Pokud chcete zobrazit skutečný kód jazyka JavaScript proxy server, který je generován můžete zadat adresu URL požadované webové služby .NET do pole Adresa aplikace Internet Explorer a připojte na konec /js.*</span><span class="sxs-lookup"><span data-stu-id="e3c09-212">*> [!NOTE] If you'd like to see the actual JavaScript proxy code that is generated you can type the URL to the desired .NET Web Service into Internet Explorer's address box and append /js to the end of it.*</span></span>


<span data-ttu-id="e3c09-213">Pokud je povoleno ladění v souboru web.config, který vloží ladicí verzi proxy server JavaScript na stránce jako ukazuje následující:</span><span class="sxs-lookup"><span data-stu-id="e3c09-213">If debugging is enabled in web.config a debug version of the JavaScript proxy will be embedded in the page as shown next:</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample15.html)]

<span data-ttu-id="e3c09-214">Proxy server JavaScript vytvořené ScriptManager můžete také vložit přímo na stránku spíše než odkazovat pomocí &lt;skript&gt; atributu src značky.</span><span class="sxs-lookup"><span data-stu-id="e3c09-214">The JavaScript proxy created by the ScriptManager can also be embedded directly into the page rather than referenced using the &lt;script&gt; tag's src attribute.</span></span> <span data-ttu-id="e3c09-215">To můžete udělat tak, že nastavíte vlastnost InlineScript ServiceReference ovládacího prvku na hodnotu true (výchozí hodnota je false).</span><span class="sxs-lookup"><span data-stu-id="e3c09-215">This can be done by setting the ServiceReference control's InlineScript property to true (the default is false).</span></span> <span data-ttu-id="e3c09-216">To může být užitečné, když se proxy server není sdílí na několika stránkách a když chcete snížit počet volání sítě na serveru.</span><span class="sxs-lookup"><span data-stu-id="e3c09-216">This can be useful when a proxy isn't shared across multiple pages and when you'd like to reduce the number of network calls made to the server.</span></span> <span data-ttu-id="e3c09-217">Pokud InlineScript nastavená na hodnotu true, skript proxy serveru nebudou zapisována do mezipaměti v prohlížeči tak výchozí hodnotu false, je vhodné v případech, ve kterém proxy server používá více stránek v aplikaci technologie ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="e3c09-217">When InlineScript is set to true the proxy script won't be cached by the browser so the default value of false is recommended in cases where the proxy is used by multiple pages in an ASP.NET AJAX application.</span></span> <span data-ttu-id="e3c09-218">Příklad použití vlastnost InlineScript se zobrazí následující:</span><span class="sxs-lookup"><span data-stu-id="e3c09-218">An example of using the InlineScript property is shown next:</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample16.aspx)]

## <a name="using-javascript-proxies"></a><span data-ttu-id="e3c09-219">Pomocí třídy proxy JavaScript</span><span class="sxs-lookup"><span data-stu-id="e3c09-219">Using JavaScript Proxies</span></span>

<span data-ttu-id="e3c09-220">Jakmile webová služba se odkazuje pomocí ovládacího prvku ScriptManager stránce technologie ASP.NET AJAX, může být k volání webové služby a vrácená data mohou být zpracovávány pomocí funkce zpětného volání.</span><span class="sxs-lookup"><span data-stu-id="e3c09-220">Once a Web Service is referenced by an ASP.NET AJAX page using the ScriptManager control, a call can be made to the Web Service and the returned data can be handled using callback functions.</span></span> <span data-ttu-id="e3c09-221">Webová služba je volán odkazující na svůj obor názvů (pokud existuje), název třídy a název webové metody.</span><span class="sxs-lookup"><span data-stu-id="e3c09-221">A Web Service is called by referencing its namespace (if one exists), class name and Web Method name.</span></span> <span data-ttu-id="e3c09-222">Všechny parametry předané k webové službě mohou být definovány spolu s funkce zpětného volání, která zpracovává vracená data.</span><span class="sxs-lookup"><span data-stu-id="e3c09-222">Any parameters passed to the Web Service can be defined along with a callback function that handles the returned data.</span></span>

<span data-ttu-id="e3c09-223">Příklad použití proxy server JavaScript volat metodu Web s názvem GetCustomersByCountry() se zobrazí v zobrazení 13.</span><span class="sxs-lookup"><span data-stu-id="e3c09-223">An example of using a JavaScript proxy to call a Web Method named GetCustomersByCountry() is shown in Listing 13.</span></span> <span data-ttu-id="e3c09-224">GetCustomersByCountry() funkce je volána, když koncový uživatel klikne na tlačítko na stránce.</span><span class="sxs-lookup"><span data-stu-id="e3c09-224">The GetCustomersByCountry() function is called when an end user clicks a button on the page.</span></span>

<span data-ttu-id="e3c09-225">**Výpis 13. Volání webové služby s proxy server JavaScript.**</span><span class="sxs-lookup"><span data-stu-id="e3c09-225">**Listing 13. Calling a Web Service with a JavaScript proxy.**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample17.js)]

<span data-ttu-id="e3c09-226">Toto volání odkazuje na obor názvů InterfaceTraining, CustomersService třídy a metody webové GetCustomersByCountry definované ve službě.</span><span class="sxs-lookup"><span data-stu-id="e3c09-226">This call references the InterfaceTraining namespace, CustomersService class and GetCustomersByCountry Web Method defined in the service.</span></span> <span data-ttu-id="e3c09-227">Předá hodnotu země získaných z objektu textbox, stejně jako funkce zpětného volání s názvem OnWSRequestComplete, který má být volána, když se vrátí asynchronní volání webové služby.</span><span class="sxs-lookup"><span data-stu-id="e3c09-227">It passes a country value obtained from a textbox as well as a callback function named OnWSRequestComplete that should be invoked when the asynchronous Web Service call returns.</span></span> <span data-ttu-id="e3c09-228">OnWSRequestComplete zpracovává pole vrácené službou zákaznických objektů a převede je do tabulky, který se zobrazí na stránce.</span><span class="sxs-lookup"><span data-stu-id="e3c09-228">OnWSRequestComplete handles the array of Customer objects returned from the service and converts them into a table that is displayed in the page.</span></span> <span data-ttu-id="e3c09-229">Výstup generovaný z volání je znázorněno na obrázku 1.</span><span class="sxs-lookup"><span data-stu-id="e3c09-229">The output generated from the call is shown in Figure 1.</span></span>


<span data-ttu-id="e3c09-230">[![Vazba dat získali tím, že asynchronní volání jazyka AJAX k webové službě.](understanding-asp-net-ajax-web-services/_static/image2.png)](understanding-asp-net-ajax-web-services/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="e3c09-230">[![Binding data obtained by making an asynchronous AJAX call to a Web Service.](understanding-asp-net-ajax-web-services/_static/image2.png)](understanding-asp-net-ajax-web-services/_static/image1.png)</span></span>

<span data-ttu-id="e3c09-231">**Obrázek 1**: vytvoření vazby dat získali tím, že asynchronní volání jazyka AJAX k webové službě.</span><span class="sxs-lookup"><span data-stu-id="e3c09-231">**Figure 1**: Binding data obtained by making an asynchronous AJAX call to a Web Service.</span></span>  <span data-ttu-id="e3c09-232">([Kliknutím ji zobrazíte obrázek v plné velikosti](understanding-asp-net-ajax-web-services/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="e3c09-232">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image3.png))</span></span>


<span data-ttu-id="e3c09-233">Třídy proxy JavaScript lze také nastavit jednosměrné volání webové služby v případech, kdy by měla být volána metoda webových, ale proxy nesmí čekat na odpověď.</span><span class="sxs-lookup"><span data-stu-id="e3c09-233">JavaScript proxies can also make one-way calls to Web Services in cases where a Web Method should be called but the proxy shouldn't wait for a response.</span></span> <span data-ttu-id="e3c09-234">Můžete například volání webové služby sloužící ke spuštění procesu, jako je například pracovní postup, ale nečeká návratová hodnota ze služby.</span><span class="sxs-lookup"><span data-stu-id="e3c09-234">For example, you may want to call a Web Service to start a process such as a work-flow but not wait for a return value from the service.</span></span> <span data-ttu-id="e3c09-235">V případech, kde jednosměrné volání je nutné provést, služby můžete jednoduše vynechat funkce zpětného volání, které jsou uvedené v informacích 13.</span><span class="sxs-lookup"><span data-stu-id="e3c09-235">In cases where a one-way call needs to be made to a service, the callback function shown in Listing 13 can simply be omitted.</span></span> <span data-ttu-id="e3c09-236">Protože je definována žádná funkce zpětného volání objektu proxy nebude čekat pro webovou službu vrátit data.</span><span class="sxs-lookup"><span data-stu-id="e3c09-236">Since no callback function is defined the proxy object will not wait for the Web Service to return data.</span></span>

## <a name="handling-errors"></a><span data-ttu-id="e3c09-237">Zpracování chyb</span><span class="sxs-lookup"><span data-stu-id="e3c09-237">Handling Errors</span></span>

<span data-ttu-id="e3c09-238">Asynchronními zpětnými voláními k webovým službám můžou mít různé typy chyb, jako jsou například sítě se dolů, webová služba není k dispozici nebo se vrátila výjimka.</span><span class="sxs-lookup"><span data-stu-id="e3c09-238">Asynchronous callbacks to Web Services can encounter different types of errors such as the network being down, the Web Service being unavailable or an exception being returned.</span></span> <span data-ttu-id="e3c09-239">Naštěstí generovaných ScriptManager objekty proxy JavaScript povolit více zpětných volání, aby byla definována pro zpracování chyb a selhání kromě úspěch zpětného volání je uvedeno výše.</span><span class="sxs-lookup"><span data-stu-id="e3c09-239">Fortunately, JavaScript proxy objects generated by the ScriptManager allow multiple callbacks to be defined to handle errors and failures in addition to the success callback shown earlier.</span></span> <span data-ttu-id="e3c09-240">K chybě funkce zpětného volání lze definovat ihned po zpětného volání standardní funkce při volání metody webové, jak je uvedeno v informacích 14.</span><span class="sxs-lookup"><span data-stu-id="e3c09-240">An error callback function can be defined immediately after the standard callback function in the call to the Web Method as shown in Listing 14.</span></span>

<span data-ttu-id="e3c09-241">**Výpis 14. Definování k chybě funkce zpětného volání a zobrazování chyb.**</span><span class="sxs-lookup"><span data-stu-id="e3c09-241">**Listing 14. Defining an error callback function and displaying errors.**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample18.js)]

<span data-ttu-id="e3c09-242">Všechny chyby, ke kterým dochází při volání webové služby se aktivuje OnWSRequestFailed() funkce zpětného volání k volání, která přijímá objekt, který reprezentuje chyby jako parametr.</span><span class="sxs-lookup"><span data-stu-id="e3c09-242">Any errors that occur when the Web Service is called will trigger the OnWSRequestFailed() callback function to be called which accepts an object representing the error as a parameter.</span></span> <span data-ttu-id="e3c09-243">Objekt error poskytuje několik různých funkcí můžete zjistit příčinu chyby a zda volání vypršel časový limit. Výpis 14 ukazuje příklad použití funkce různých chyb a obrázek 2 ukazuje příklad výstupu generovaného pomocí funkcí.</span><span class="sxs-lookup"><span data-stu-id="e3c09-243">The error object exposes several different functions to determine the cause of the error as well as whether or not the call timed out. Listing 14 shows an example of using the different error functions and Figure 2 shows an example of the output generated by the functions.</span></span>


<span data-ttu-id="e3c09-244">[![Výstup vygenerovaný pomocí volání funkce chybě technologie ASP.NET AJAX.](understanding-asp-net-ajax-web-services/_static/image5.png)](understanding-asp-net-ajax-web-services/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="e3c09-244">[![Output generated by calling ASP.NET AJAX error functions.](understanding-asp-net-ajax-web-services/_static/image5.png)](understanding-asp-net-ajax-web-services/_static/image4.png)</span></span>

<span data-ttu-id="e3c09-245">**Obrázek 2**: výstup vygenerovaný pomocí volání funkce chybě technologie ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="e3c09-245">**Figure 2**: Output generated by calling ASP.NET AJAX error functions.</span></span>  <span data-ttu-id="e3c09-246">([Kliknutím ji zobrazíte obrázek v plné velikosti](understanding-asp-net-ajax-web-services/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="e3c09-246">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image6.png))</span></span>


## <a name="handling-xml-data-returned-from-a-web-service"></a><span data-ttu-id="e3c09-247">Zpracování dat XML vrácený webovou službu</span><span class="sxs-lookup"><span data-stu-id="e3c09-247">Handling XML Data Returned from a Web Service</span></span>

<span data-ttu-id="e3c09-248">Dříve jste viděli, jak webové metodě může vrátit nezpracovaná data XML použitím atributu ScriptMethod spolu s vlastností formát odpovědi.</span><span class="sxs-lookup"><span data-stu-id="e3c09-248">Earlier you saw how a Web Method could return raw XML data by using the ScriptMethod attribute along with its ResponseFormat property.</span></span> <span data-ttu-id="e3c09-249">Pokud formát odpovědi je nastavena na ResponseFormat.Xml, data vrácená z webové služby je serializován jako XML spíše než formátu JSON.</span><span class="sxs-lookup"><span data-stu-id="e3c09-249">When ResponseFormat is set to ResponseFormat.Xml, data returned from the Web Service is serialized as XML rather than JSON.</span></span> <span data-ttu-id="e3c09-250">To může být užitečné, když XML data je nutné předat přímo do klienta pro zpracování pomocí jazyka JavaScript nebo XSLT.</span><span class="sxs-lookup"><span data-stu-id="e3c09-250">This can be useful when XML data needs to be passed directly to the client for processing using JavaScript or XSLT.</span></span> <span data-ttu-id="e3c09-251">V současné době aplikace Internet Explorer 5 nebo vyšší poskytuje nejlepší model objektu na straně klienta k parsování a filtrování dat XML z důvodu jeho integrovanou podporu pro analyzátor MSXML.</span><span class="sxs-lookup"><span data-stu-id="e3c09-251">At the current time, Internet Explorer 5 or higher provides the best client-side object model for parsing and filtering XML data due to its built-in support for MSXML.</span></span>

<span data-ttu-id="e3c09-252">Načítání dat XML z webové služby se nijak neliší od načítání jiné datové typy.</span><span class="sxs-lookup"><span data-stu-id="e3c09-252">Retrieving XML data from a Web Service is no different than retrieving other data types.</span></span> <span data-ttu-id="e3c09-253">Začněte tím, že volání proxy server JavaScript volat odpovídající funkce a definovat funkci zpětného volání.</span><span class="sxs-lookup"><span data-stu-id="e3c09-253">Start by invoking the JavaScript proxy to call the appropriate function and define a callback function.</span></span> <span data-ttu-id="e3c09-254">Po volání vrátí lze následně zpracovat data ve funkci zpětného volání.</span><span class="sxs-lookup"><span data-stu-id="e3c09-254">Once the call returns you can then process the data in the callback function.</span></span>

<span data-ttu-id="e3c09-255">Výpis 15 ukazuje příklad volá metodu Web s názvem GetRssFeed(), která vrací objekt XmlElement.</span><span class="sxs-lookup"><span data-stu-id="e3c09-255">Listing 15 shows an example of calling a Web Method named GetRssFeed() that returns an XmlElement object.</span></span> <span data-ttu-id="e3c09-256">GetRssFeed() přijímá jeden parametr představující adresu URL pro načtení informačního kanálu RSS.</span><span class="sxs-lookup"><span data-stu-id="e3c09-256">GetRssFeed() accepts a single parameter representing the URL for the RSS feed to retrieve.</span></span>

<span data-ttu-id="e3c09-257">**Výpis 15. Práce s daty XML vrácený webovou službu.**</span><span class="sxs-lookup"><span data-stu-id="e3c09-257">**Listing 15. Working with XML data returned from a Web Service.**</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample19.html)]

<span data-ttu-id="e3c09-258">Tento příklad předá adresu URL informačního kanálu RSS a zpracovává vrácená data XML ve funkci OnWSRequestComplete().</span><span class="sxs-lookup"><span data-stu-id="e3c09-258">This example passes a URL to an RSS feed and processes the returned XML data in the OnWSRequestComplete() function.</span></span> <span data-ttu-id="e3c09-259">OnWSRequestComplete() nejprve zkontroluje, zda je v prohlížeči Internet Explorer vědět, zda analyzátor MSXML je k dispozici.</span><span class="sxs-lookup"><span data-stu-id="e3c09-259">OnWSRequestComplete() first checks to see if the browser is Internet Explorer to know whether or not the MSXML parser is available.</span></span> <span data-ttu-id="e3c09-260">Pokud se jedná, příkaz jazyka XPath je používaná k nalezení všech &lt;položky&gt; značky v informačním kanálu RSS.</span><span class="sxs-lookup"><span data-stu-id="e3c09-260">If it is, an XPath statement is used to locate all &lt;item&gt; tags within the RSS feed.</span></span> <span data-ttu-id="e3c09-261">Jednotlivé položky potom provést iteraci pomocí a přidružené &lt;title&gt; a &lt;odkaz&gt; značky jsou umístěné a zpracování pro každou položku dat zobrazení.</span><span class="sxs-lookup"><span data-stu-id="e3c09-261">Each item is then iterated through and the associated &lt;title&gt; and &lt;link&gt; tags are located and processed to display each item's data.</span></span> <span data-ttu-id="e3c09-262">Obrázek 3 ukazuje příklad výstupu generovaného v provádění volání přes proxy server JavaScript webové metodě GetRssFeed() technologie ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="e3c09-262">Figure 3 shows an example of the output generated from making an ASP.NET AJAX call through a JavaScript proxy to the GetRssFeed() Web Method.</span></span>

## <a name="handling-complex-types"></a><span data-ttu-id="e3c09-263">Zpracování komplexních typů</span><span class="sxs-lookup"><span data-stu-id="e3c09-263">Handling Complex Types</span></span>

<span data-ttu-id="e3c09-264">Komplexní typy přijata nebo vrácené webové služby jsou automaticky přístupné přes proxy server JavaScript.</span><span class="sxs-lookup"><span data-stu-id="e3c09-264">Complex types accepted or returned by a Web Service are automatically exposed through a JavaScript proxy.</span></span> <span data-ttu-id="e3c09-265">Vnořené komplexní typy však nejsou přímo přístupné na straně klienta, pokud se atribut GenerateScriptType používá ke službě, jak je uvedeno výše.</span><span class="sxs-lookup"><span data-stu-id="e3c09-265">However, nested complex types are not directly accessible on the client-side unless the GenerateScriptType attribute is applied to the service as discussed earlier.</span></span> <span data-ttu-id="e3c09-266">Proč byste měli použít vnořené komplexní typ, na straně klienta?</span><span class="sxs-lookup"><span data-stu-id="e3c09-266">Why would you want to use a nested complex type on the client-side?</span></span>

<span data-ttu-id="e3c09-267">Na tuto otázku odpovědět, předpokládají, že zákaznická data se zobrazí stránku ASP.NET AJAX a umožňuje koncovým uživatelům aktualizovat adresy zákazníka.</span><span class="sxs-lookup"><span data-stu-id="e3c09-267">To answer this question, assume that an ASP.NET AJAX page displays customer data and allows end users to update a customer's address.</span></span> <span data-ttu-id="e3c09-268">Pokud webová služba určuje, že typ adresy (komplexní typ definovaný v rámci třídy CustomerDetails) může odeslat klientovi proces aktualizace je možné rozdělit do samostatné funkce pro lepší opakovanému použití kódu.</span><span class="sxs-lookup"><span data-stu-id="e3c09-268">If the Web Service specifies that the Address type (a complex type defined within a CustomerDetails class) can be sent to the client then the update process can be divided into separate functions for better code re-use.</span></span>


<span data-ttu-id="e3c09-269">[![Vytváření z volání webové služby, která vrací RSS data výstup.](understanding-asp-net-ajax-web-services/_static/image8.png)](understanding-asp-net-ajax-web-services/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="e3c09-269">[![Output creating from calling a Web Service that returns RSS data.](understanding-asp-net-ajax-web-services/_static/image8.png)](understanding-asp-net-ajax-web-services/_static/image7.png)</span></span>

<span data-ttu-id="e3c09-270">**Obrázek 3**: výstup vytváření z volání webové služby, která vrací RSS data.</span><span class="sxs-lookup"><span data-stu-id="e3c09-270">**Figure 3**: Output creating from calling a Web Service that returns RSS data.</span></span>  <span data-ttu-id="e3c09-271">([Kliknutím ji zobrazíte obrázek v plné velikosti](understanding-asp-net-ajax-web-services/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="e3c09-271">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image9.png))</span></span>


<span data-ttu-id="e3c09-272">Výpis 16 ukazuje příklad kódu na straně klienta, který vyvolá adresu objekt definovaný v oboru názvů modelu, vyplní aktualizovaná data a přiřadí ji k vlastnost adresy CustomerDetails objektu.</span><span class="sxs-lookup"><span data-stu-id="e3c09-272">Listing 16 shows an example of client-side code that invokes an Address object defined in a Model namespace, fills it with updated data and assigns it to a CustomerDetails object's Address property.</span></span> <span data-ttu-id="e3c09-273">CustomerDetails objekt je pak předán k webové službě pro zpracování.</span><span class="sxs-lookup"><span data-stu-id="e3c09-273">The CustomerDetails object is then passed to the Web Service for processing.</span></span>

<span data-ttu-id="e3c09-274">**Výpis 16. Pomocí vnořeného komplexní typy**</span><span class="sxs-lookup"><span data-stu-id="e3c09-274">**Listing 16. Using nested complex types**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample20.js)]

## <a name="creating-and-using-page-methods"></a><span data-ttu-id="e3c09-275">Vytváření a používání metody stránky</span><span class="sxs-lookup"><span data-stu-id="e3c09-275">Creating and Using Page Methods</span></span>

<span data-ttu-id="e3c09-276">Webové služby poskytují vynikající příležitost k vystavení služby znovu použitelný pro celou řadu klientů, včetně stránek technologie ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="e3c09-276">Web Services provide an excellent way to expose re-useable services to a variety of clients including ASP.NET AJAX pages.</span></span> <span data-ttu-id="e3c09-277">Mohou však nastat případy, kde stránku potřebuje načíst data, která nebude nikdy používat nebo sdílet další stránky.</span><span class="sxs-lookup"><span data-stu-id="e3c09-277">However, there may be cases where a page needs to retrieve data that won't ever be used or shared by other pages.</span></span> <span data-ttu-id="e3c09-278">V takovém případě provádění soubor ASMX umožňující přístup k datům stránky může jevit jako přehnaně vzhledem k tomu, že služba používá jenom jednu stránku.</span><span class="sxs-lookup"><span data-stu-id="e3c09-278">In this case, making an .asmx file to allow the page to access the data may seem like overkill since the service is only used by a single page.</span></span>

<span data-ttu-id="e3c09-279">ASP.NET AJAX obsahuje jiný mechanismus pro volání webové služby jako bez vytváření souborů .asmx samostatné.</span><span class="sxs-lookup"><span data-stu-id="e3c09-279">ASP.NET AJAX provides another mechanism for making Web Service-like calls without creating standalone .asmx files.</span></span> <span data-ttu-id="e3c09-280">To se provádí pomocí techniky označované jako "metody stránky".</span><span class="sxs-lookup"><span data-stu-id="e3c09-280">This is done by using a technique referred to as "page methods".</span></span> <span data-ttu-id="e3c09-281">Stránka metod jsou statické (sdílené v VB.NET) metody, které mají aplikovaný atribut WebMethod je součástí stránku nebo kód vedle souboru.</span><span class="sxs-lookup"><span data-stu-id="e3c09-281">Page methods are static (shared in VB.NET) methods embedded directly in a page or code-beside file that have the WebMethod attribute applied to them.</span></span> <span data-ttu-id="e3c09-282">Použitím atributu WebMethod bylo možné volat pomocí speciální objekt JavaScriptu s názvem PageMethods, která se dynamicky vytvoří za běhu.</span><span class="sxs-lookup"><span data-stu-id="e3c09-282">By applying the WebMethod attribute they can be called using a special JavaScript object named PageMethods that gets dynamically created at runtime.</span></span> <span data-ttu-id="e3c09-283">Objekt PageMethods funguje jako proxy server, který chrání před procesu serializaci nebo deserializaci JSON.</span><span class="sxs-lookup"><span data-stu-id="e3c09-283">The PageMethods object acts as a proxy that shields you from the JSON serialization/deserialization process.</span></span> <span data-ttu-id="e3c09-284">Mějte na paměti, chcete-li použít objekt PageMethods musíte nastavit vlastnost EnablePageMethods prvku ScriptManager na hodnotu true.</span><span class="sxs-lookup"><span data-stu-id="e3c09-284">Note that in order to use the PageMethods object you must set the ScriptManager's EnablePageMethods property to true.</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample21.aspx)]

<span data-ttu-id="e3c09-285">Výpis 17 ukazuje příklad definuje dvě metody stránky v kódu vedle třídu technologie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e3c09-285">Listing 17 shows an example of defining two page methods in an ASP.NET code-beside class.</span></span> <span data-ttu-id="e3c09-286">Tyto metody načíst data ze třídy obchodní vrstvy v aplikaci\_složka kódu webové stránky.</span><span class="sxs-lookup"><span data-stu-id="e3c09-286">These methods retrieve data from a business layer class located in the App\_Code folder of the Website.</span></span>

<span data-ttu-id="e3c09-287">**Výpis 17. Definování metody stránky.**</span><span class="sxs-lookup"><span data-stu-id="e3c09-287">**Listing 17. Defining page methods.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample22.cs)]

<span data-ttu-id="e3c09-288">Když ScriptManager zjistí přítomnost webové metody ve stránce generuje dynamické odkaz na objekt PageMethods již bylo zmíněno dříve.</span><span class="sxs-lookup"><span data-stu-id="e3c09-288">When ScriptManager detects the presence of Web Methods in the page it generates a dynamic reference to the PageMethods object mentioned earlier.</span></span> <span data-ttu-id="e3c09-289">Volání metody webové se provádí pomocí odkazu na třídu PageMethods následovaný názvem metody a všechny nezbytné parametr data, která by se měl předávat.</span><span class="sxs-lookup"><span data-stu-id="e3c09-289">Calling a Web Method is accomplished by referencing the PageMethods class followed by the name of the method and any necessary parameter data that should be passed.</span></span> <span data-ttu-id="e3c09-290">Výpis 18 jsou uvedeny příklady volání dvě metody stránky je uvedeno výše.</span><span class="sxs-lookup"><span data-stu-id="e3c09-290">Listing 18 shows examples of calling the two page methods shown earlier.</span></span>

<span data-ttu-id="e3c09-291">**Výpis 18. Volání metody stránky s objektem PageMethods JavaScript.**</span><span class="sxs-lookup"><span data-stu-id="e3c09-291">**Listing 18. Calling page methods with the PageMethods JavaScript object.**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample23.js)]

<span data-ttu-id="e3c09-292">Pomocí objektu PageMethods je velmi podobný pomocí objektu proxy server JavaScript.</span><span class="sxs-lookup"><span data-stu-id="e3c09-292">Using the PageMethods object is very similar to using a JavaScript proxy object.</span></span> <span data-ttu-id="e3c09-293">Nejdřív musíte určit všechna data parametr, který by měly být předány metodě stránky a potom definovat, která by měla být volána, když se vrátí asynchronního volání funkce zpětného volání.</span><span class="sxs-lookup"><span data-stu-id="e3c09-293">You first specify all of the parameter data that should be passed to the page method and then define the callback function that should be called when the asynchronous call returns.</span></span> <span data-ttu-id="e3c09-294">Je taky možné specifikovat zpětné volání chyby (viz část o výpis 14 příklad zpracování chyb).</span><span class="sxs-lookup"><span data-stu-id="e3c09-294">A failure callback can also be specified (refer to Listing 14 for an example of handling failures).</span></span>

## <a name="the-autocompleteextender-and-the-aspnet-ajax-toolkit"></a><span data-ttu-id="e3c09-295">AutoCompleteExtender a ASP.NET AJAX Toolkit</span><span class="sxs-lookup"><span data-stu-id="e3c09-295">The AutoCompleteExtender and the ASP.NET AJAX Toolkit</span></span>

<span data-ttu-id="e3c09-296">ASP.NET AJAX Toolkit (k dispozici z [ http://ajax.asp.net ](http://ajax.asp.net)) nabízí několik ovládacích prvků, které lze použít pro přístup k webovým službám.</span><span class="sxs-lookup"><span data-stu-id="e3c09-296">The ASP.NET AJAX Toolkit (available from [http://ajax.asp.net](http://ajax.asp.net)) offers several controls that can be used to access Web Services.</span></span> <span data-ttu-id="e3c09-297">Konkrétně sada nástrojů obsahuje užitečných ovládací prvek s názvem `AutoCompleteExtender` , který slouží k volání webové služby a zobrazení dat bez psaní kódu jazyka JavaScript na všech stránkách.</span><span class="sxs-lookup"><span data-stu-id="e3c09-297">Specifically, the toolkit contains a useful control named `AutoCompleteExtender` that can be used to call Web Services and show data in pages without writing any JavaScript code at all.</span></span>

<span data-ttu-id="e3c09-298">Ovládací prvek AutoCompleteExtender slouží k rozšíření stávajících funkcí textové pole a uživatelům snadno najít data, která se snaží zjistit.</span><span class="sxs-lookup"><span data-stu-id="e3c09-298">The AutoCompleteExtender control can be used to extend existing functionality of a textbox and help users more easily locate data they're looking for.</span></span> <span data-ttu-id="e3c09-299">Psaní do pole textbox ovládací prvek lze použít k dotazování webové služby a zobrazí výsledky pod textovým polem dynamicky.</span><span class="sxs-lookup"><span data-stu-id="e3c09-299">As they type into a textbox the control can be used to query a Web Service and shows results below the textbox dynamically.</span></span> <span data-ttu-id="e3c09-300">Obrázek 4 ukazuje příklad použití ovládacího prvku AutoCompleteExtender zobrazíte ID zákazníka pro podporu aplikace.</span><span class="sxs-lookup"><span data-stu-id="e3c09-300">Figure 4 shows an example of using the AutoCompleteExtender control to display customer ids for a support application.</span></span> <span data-ttu-id="e3c09-301">Uživatel zadá různých znaků do textového pole, zobrazí se pod ní na základě jejich vstupu různé položky.</span><span class="sxs-lookup"><span data-stu-id="e3c09-301">As the user types different characters into the textbox, different items will be shown below it based upon their input.</span></span> <span data-ttu-id="e3c09-302">Uživatelé pak mohou vybrat požadovanou CustomerID.</span><span class="sxs-lookup"><span data-stu-id="e3c09-302">Users can then select the desired customer id.</span></span>

<span data-ttu-id="e3c09-303">Použití AutoCompleteExtender stránky technologie ASP.NET AJAX vyžaduje, aby sestavení AjaxControlToolkit.dll přidají do složky bin na webu.</span><span class="sxs-lookup"><span data-stu-id="e3c09-303">Using the AutoCompleteExtender within an ASP.NET AJAX page requires that the AjaxControlToolkit.dll assembly be added to the Website's bin folder.</span></span> <span data-ttu-id="e3c09-304">Po sestavení toolkit se přidala, budete chtít tak, že jsou dostupné pro všechny stránky v aplikaci, která obsahuje ovládací prvky na něj odkazovat v souboru web.config.</span><span class="sxs-lookup"><span data-stu-id="e3c09-304">Once the toolkit assembly has been added, you'll want to reference it in web.config so that the controls it contains are available to all pages in an application.</span></span> <span data-ttu-id="e3c09-305">To můžete udělat tak, že přidáte následující značky v souboru web.config &lt;ovládací prvky&gt; značky:</span><span class="sxs-lookup"><span data-stu-id="e3c09-305">This can be done by adding the following tag within web.config's &lt;controls&gt; tag:</span></span>

[!code-xml[Main](understanding-asp-net-ajax-web-services/samples/sample24.xml)]

<span data-ttu-id="e3c09-306">V případech, kdy je potřeba jenom pomocí ovládacího prvku na konkrétní stránce můžete na něj mohli odkazovat tak, že přidáte direktiva odkazu do horní části stránky, jak je ukázáno dále místo aktualizaci souboru web.config:</span><span class="sxs-lookup"><span data-stu-id="e3c09-306">In cases where you only need to use the control in a specific page you can reference it by adding the Reference directive to the top of a page as shown next rather than updating web.config:</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample25.aspx)]


<span data-ttu-id="e3c09-307">[![Použití ovládacího prvku AutoCompleteExtender.](understanding-asp-net-ajax-web-services/_static/image11.png)](understanding-asp-net-ajax-web-services/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="e3c09-307">[![Using the AutoCompleteExtender control.](understanding-asp-net-ajax-web-services/_static/image11.png)](understanding-asp-net-ajax-web-services/_static/image10.png)</span></span>

<span data-ttu-id="e3c09-308">**Obrázek 4**: použití AutoCompleteExtender ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="e3c09-308">**Figure 4**: Using the AutoCompleteExtender control.</span></span>  <span data-ttu-id="e3c09-309">([Kliknutím ji zobrazíte obrázek v plné velikosti](understanding-asp-net-ajax-web-services/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="e3c09-309">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image12.png))</span></span>


<span data-ttu-id="e3c09-310">Po web nakonfigurovaný se sadou nástrojů ASP.NET AJAX Toolkit, ovládací prvek AutoCompleteExtender lze přidat do stránky podobně jako byste přidali regulární serverový ovládací prvek ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e3c09-310">Once the Website has been configured to use the ASP.NET AJAX Toolkit, an AutoCompleteExtender control can be added into the page much like you'd add a regular ASP.NET server control.</span></span> <span data-ttu-id="e3c09-311">Výpis 19 ukazuje příklad použití ovládacího prvku k volání webové služby.</span><span class="sxs-lookup"><span data-stu-id="e3c09-311">Listing 19 shows an example of using the control to call a Web Service.</span></span>

<span data-ttu-id="e3c09-312">**Výpis 19. Použití ovládacího prvku ASP.NET AJAX Toolkit AutoCompleteExtender.**</span><span class="sxs-lookup"><span data-stu-id="e3c09-312">**Listing 19. Using the ASP.NET AJAX Toolkit AutoCompleteExtender control.**</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample26.aspx)]

<span data-ttu-id="e3c09-313">AutoCompleteExtender má několik různých vlastností, včetně standardní vlastnosti ID a runat na serverové ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="e3c09-313">The AutoCompleteExtender has several different properties including the standard ID and runat properties found on server controls.</span></span> <span data-ttu-id="e3c09-314">Kromě toho umožňuje definovat, kolik znaků typy koncového uživatele před webová služba je dotazován na data.</span><span class="sxs-lookup"><span data-stu-id="e3c09-314">In addition to these, it allows you to define how many characters an end user types before the Web Service is queried for data.</span></span> <span data-ttu-id="e3c09-315">Vlastnost MinimumPrefixLength ukazuje výpis 19 způsobí, že služba má být volána pokaždé, když je zadaný znak do textového pole.</span><span class="sxs-lookup"><span data-stu-id="e3c09-315">The MinimumPrefixLength property shown in Listing 19 causes the service to be called each time a character is typed into the textbox.</span></span> <span data-ttu-id="e3c09-316">Bude nutné mít na paměti, že tuto hodnotu nastavíte, protože pokaždé, když uživatel zadá znak webová služba bude volána k vyhledání hodnoty, které odpovídají znaky do textového pole.</span><span class="sxs-lookup"><span data-stu-id="e3c09-316">You'll want to be careful setting this value since each time the user types a character the Web Service will be called to search for values that match the characters in the textbox.</span></span> <span data-ttu-id="e3c09-317">Volání webové služby, jakož i cílové webové metody jsou definovány pomocí vlastnosti ServicePath a ServiceMethod v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="e3c09-317">The Web Service to call as well as the target Web Method are defined using the ServicePath and ServiceMethod properties respectively.</span></span> <span data-ttu-id="e3c09-318">Vlastnost TargetControlID nakonec identifikuje které textové pole k připojení AutoCompleteExtender ovládacího prvku.</span><span class="sxs-lookup"><span data-stu-id="e3c09-318">Finally, the TargetControlID property identifies which textbox to hook the AutoCompleteExtender control to.</span></span>

<span data-ttu-id="e3c09-319">Volání webové služby musí mít atribut ScriptService použít, protože jsme probírali výše a cílové webové metody, musíte přijmout dva parametry s názvem prefixText a počet.</span><span class="sxs-lookup"><span data-stu-id="e3c09-319">The Web Service being called must have the ScriptService attribute applied as discussed earlier and the target Web Method must accept two parameters named prefixText and count.</span></span> <span data-ttu-id="e3c09-320">Parametr prefixText představuje zadané znaky koncovým uživatelem, a parametr počet představuje, kolik položek k vrácení (výchozí hodnota je 10).</span><span class="sxs-lookup"><span data-stu-id="e3c09-320">The prefixText parameter represents the characters typed by the end user and the count parameter represents how many items to return (the default is 10).</span></span> <span data-ttu-id="e3c09-321">Výpis 20 ukazuje příklad GetCustomerIDs webové metody volané AutoCompleteExtender ovládací prvek výše v informacích 19.</span><span class="sxs-lookup"><span data-stu-id="e3c09-321">Listing 20 shows an example of the GetCustomerIDs Web Method called by the AutoCompleteExtender control shown earlier in Listing 19.</span></span> <span data-ttu-id="e3c09-322">Metodu webové volá metodu obchodní vrstvy, pak volání datové vrstvy metoda, která zpracovává filtrování dat a vrátí odpovídající výsledky.</span><span class="sxs-lookup"><span data-stu-id="e3c09-322">The Web Method calls a business layer method that in turn calls a data layer method that handles filtering the data and returning the matching results.</span></span> <span data-ttu-id="e3c09-323">Kód pro metodu vrstvy dat je zobrazena ve výpisu 21.</span><span class="sxs-lookup"><span data-stu-id="e3c09-323">The code for the data layer method is shown in Listing 21.</span></span>

<span data-ttu-id="e3c09-324">**Výpis 20. Filtrování dat odesílaných z ovládacího prvku AutoCompleteExtender.**</span><span class="sxs-lookup"><span data-stu-id="e3c09-324">**Listing 20. Filtering data sent from the AutoCompleteExtender control.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample27.cs)]

<span data-ttu-id="e3c09-325">**Výpis 21. Filtrování výsledků na základě vstupního koncového uživatele.**</span><span class="sxs-lookup"><span data-stu-id="e3c09-325">**Listing 21. Filtering results based upon end user input.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample28.cs)]

## <a name="conclusion"></a><span data-ttu-id="e3c09-326">Závěr</span><span class="sxs-lookup"><span data-stu-id="e3c09-326">Conclusion</span></span>

<span data-ttu-id="e3c09-327">ASP.NET AJAX poskytuje skvělou podporu pro volání webové služby, aniž byste museli psát spoustu vlastní kód JavaScript ke zpracování zpráv požadavků a odpovědí.</span><span class="sxs-lookup"><span data-stu-id="e3c09-327">ASP.NET AJAX provides excellent support for calling Web Services without writing a lot of custom JavaScript code to handle the request and response messages.</span></span> <span data-ttu-id="e3c09-328">V tomto článku už víte, jak povolit AJAX .NET webové služby je chcete povolit zpracování zpráv JSON a definování třídy proxy JavaScript pomocí ovládacího prvku ScriptManager.</span><span class="sxs-lookup"><span data-stu-id="e3c09-328">In this article you've seen how to AJAX-enable .NET Web Services to enable them to process JSON messages and how to define JavaScript proxies using the ScriptManager control.</span></span> <span data-ttu-id="e3c09-329">Také jste viděli, jak JavaScript proxy slouží k volání webové služby, zpracování jednoduché a komplexní typy a řešit chyby.</span><span class="sxs-lookup"><span data-stu-id="e3c09-329">You've also seen how JavaScript proxies can be used to call Web Services, handle simple and complex types and deal with failures.</span></span> <span data-ttu-id="e3c09-330">Nakonec jste viděli, jak lze pomocí metody stránky zjednodušit proces vytváření a volání webové služby a jak AutoCompleteExtender ovládacího prvku může poskytnout nápovědu pro koncové uživatele jako jejich typu.</span><span class="sxs-lookup"><span data-stu-id="e3c09-330">Finally, you've seen how page methods can be used to simplify the process of creating and making Web Service calls and how the AutoCompleteExtender control can provide help to end users as they type.</span></span> <span data-ttu-id="e3c09-331">I když k dispozici v technologii ASP.NET AJAX UpdatePanel bude určitě ovládacího prvku volba pro mnoho programátorů AJAX z důvodu jeho jednoduchost, může být užitečné v mnoha aplikacích vědět, jak pomocí třídy proxy JavaScript volání webové služby.</span><span class="sxs-lookup"><span data-stu-id="e3c09-331">Although the UpdatePanel available in ASP.NET AJAX will certainly be the control of choice for many AJAX programmers due to its simplicity, knowing how to call Web Services through JavaScript proxies can be useful in many applications.</span></span>

## <a name="bio"></a><span data-ttu-id="e3c09-332">Životopis</span><span class="sxs-lookup"><span data-stu-id="e3c09-332">Bio</span></span>

<span data-ttu-id="e3c09-333">DaN Wahlin (Microsoft Most Valuable Professional pro ASP.NET a webových služeb XML) je .NET development instruktorem a architektura konzultant na technické školení rozhraní ([http://www.interfacett.com](http://www.interfacett.com)).</span><span class="sxs-lookup"><span data-stu-id="e3c09-333">Dan Wahlin (Microsoft Most Valuable Professional for ASP.NET and XML Web Services) is a .NET development instructor and architecture consultant at Interface Technical Training ([http://www.interfacett.com](http://www.interfacett.com)).</span></span> <span data-ttu-id="e3c09-334">DaN založil XML pro vývojáře v prostředí ASP.NET Web ([www.XMLforASP.NET](http://www.XMLforASP.NET)), která je na mluvčího INETA kancelář a přednáší na konferencích několik.</span><span class="sxs-lookup"><span data-stu-id="e3c09-334">Dan founded the XML for ASP.NET Developers Web site ([www.XMLforASP.NET](http://www.XMLforASP.NET)), is on the INETA Speaker's Bureau and speaks at several conferences.</span></span> <span data-ttu-id="e3c09-335">DaN spoluautorem DNA Windows Professional (Wrox), technologie ASP.NET: tipy, kurzy a kód (edice), technologie ASP.NET 1.1 Insider řešení, Professional ASP.NET 2.0 AJAX (Wrox), technologie ASP.NET 2.0 MVP změní a vytvořené XML pro vývojáře využívající technologii ASP.NET (edice).</span><span class="sxs-lookup"><span data-stu-id="e3c09-335">Dan co-authored Professional Windows DNA (Wrox), ASP.NET: Tips, Tutorials and Code (Sams), ASP.NET 1.1 Insider Solutions, Professional ASP.NET 2.0 AJAX (Wrox), ASP.NET 2.0 MVP Hacks and authored XML for ASP.NET Developers (Sams).</span></span> <span data-ttu-id="e3c09-336">Když mu není psaní kódu, články nebo knihy, Dan infrastrukturální, zápis a Hudba záznam a přehrávání golf a Basketbalový se svou ženou a děti.</span><span class="sxs-lookup"><span data-stu-id="e3c09-336">When he's not writing code, articles or books, Dan enjoys writing and recording music and playing golf and basketball with his wife and kids.</span></span>

<span data-ttu-id="e3c09-337">Scott Cate má práce s Microsoft webových technologiích od roku 1997 a je prezident myKB.com ([www.myKB.com](http://www.myKB.com)) kde mu se specializuje na technologie ASP.NET psaní aplikací, zaměřuje na znalostní báze softwarová řešení založených na.</span><span class="sxs-lookup"><span data-stu-id="e3c09-337">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="e3c09-338">Scott můžete kontaktovat prostřednictvím e-mailové adrese [ scott.cate@myKB.com ](mailto:scott.cate@myKB.com) nebo na svém blogu [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="e3c09-338">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="e3c09-339">[Předchozí](understanding-asp-net-ajax-localization.md)
> [další](understanding-asp-net-ajax-debugging-capabilities.md)</span><span class="sxs-lookup"><span data-stu-id="e3c09-339">[Previous](understanding-asp-net-ajax-localization.md)
[Next](understanding-asp-net-ajax-debugging-capabilities.md)</span></span>
