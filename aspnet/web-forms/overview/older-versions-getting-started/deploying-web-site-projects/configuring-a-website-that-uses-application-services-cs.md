---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-a-website-that-uses-application-services-cs
title: Konfigurace webu, který používá aplikační služby (C#) | Dokumentace Microsoftu
author: rick-anderson
description: Verze technologie ASP.NET 2.0 zavedené řadě aplikačních služeb, které jsou součástí rozhraní .NET Framework a slouží jako sadu stavebních bloků služby, které yo...
ms.author: riande
ms.date: 04/23/2009
ms.assetid: 1e33d1c6-3f9f-4c26-81e2-2a8f8907bb05
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-a-website-that-uses-application-services-cs
msc.type: authoredcontent
ms.openlocfilehash: 4cec939795c2b3abfd51c894f985dfd2eb7bc361
ms.sourcegitcommit: 45ac74e400f9f2b7dbded66297730f6f14a4eb25
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/16/2018
ms.locfileid: "41754573"
---
<a name="configuring-a-website-that-uses-application-services-c"></a><span data-ttu-id="c34f0-103">Konfigurace webu, který používá aplikační služby (C#)</span><span class="sxs-lookup"><span data-stu-id="c34f0-103">Configuring a Website that Uses Application Services (C#)</span></span>
====================
<span data-ttu-id="c34f0-104">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="c34f0-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="c34f0-105">[Stáhněte si kód](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_09_CS.zip) nebo [stahovat PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial09_AppServicesConfig_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="c34f0-105">[Download Code](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_09_CS.zip) or [Download PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial09_AppServicesConfig_cs.pdf)</span></span>

> <span data-ttu-id="c34f0-106">Verze technologie ASP.NET 2.0 zavedli řadu aplikační služby, které jsou součástí rozhraní .NET Framework a slouží jako sadu stavebních bloků služby, které vám umožní doplnit celou řadu funkcí do webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="c34f0-106">ASP.NET version 2.0 introduced a series of application services, which are part of the .NET Framework and serve as a suite of building block services that you can use to add rich functionality to your web application.</span></span> <span data-ttu-id="c34f0-107">Tento kurz popisuje, jak nakonfigurovat webovou stránku v provozním prostředí použít aplikačních služeb a řeší běžné problémy se správou uživatelské účty a role na provozním prostředí.</span><span class="sxs-lookup"><span data-stu-id="c34f0-107">This tutorial explores how to configure a website in the production environment to use application services and addresses common issues with managing user accounts and roles on the production environment.</span></span>


## <a name="introduction"></a><span data-ttu-id="c34f0-108">Úvod</span><span class="sxs-lookup"><span data-stu-id="c34f0-108">Introduction</span></span>

<span data-ttu-id="c34f0-109">Verze technologie ASP.NET 2.0 zavedené řadu *aplikačních služeb*, které jsou součástí rozhraní .NET Framework a slouží jako sadu stavebních bloků služby, které můžete doplnit celou řadu funkcí do webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="c34f0-109">ASP.NET version 2.0 introduced a series of *application services*, which are part of the .NET Framework and serve as a suite of building block services that you can use to add rich functionality to your web application.</span></span> <span data-ttu-id="c34f0-110">Aplikační služby zahrnují:</span><span class="sxs-lookup"><span data-stu-id="c34f0-110">The application services include:</span></span>

- <span data-ttu-id="c34f0-111">**Členství** – rozhraní API pro vytváření a správa uživatelských účtů.</span><span class="sxs-lookup"><span data-stu-id="c34f0-111">**Membership** - an API for creating and managing user accounts.</span></span>
- <span data-ttu-id="c34f0-112">**Role** – rozhraní API pro zařazení do skupin uživatelů.</span><span class="sxs-lookup"><span data-stu-id="c34f0-112">**Roles** - an API for categorizing users into groups.</span></span>
- <span data-ttu-id="c34f0-113">**Profil** – rozhraní API pro ukládání obsahu vlastní, specifické pro uživatele.</span><span class="sxs-lookup"><span data-stu-id="c34f0-113">**Profile** - an API for storing custom, user-specific content.</span></span>
- <span data-ttu-id="c34f0-114">**Mapa webu** – rozhraní API pro definování lokality s logickou strukturou v podobě hierarchie, které lze zobrazit pomocí navigační ovládací prvky, jako je například nabídek a s popisem cesty.</span><span class="sxs-lookup"><span data-stu-id="c34f0-114">**Site Map** - an API for defining a site s logical structure in the form of a hierarchy, which can then be displayed via navigation controls, such as menus and breadcrumbs.</span></span>
- <span data-ttu-id="c34f0-115">**Přizpůsobení** – rozhraní API pro udržování vlastní předvolby, se nejčastěji používají [ *WebParts*](https://msdn.microsoft.com/library/e0s9t4ck.aspx).</span><span class="sxs-lookup"><span data-stu-id="c34f0-115">**Personalization** - an API for maintaining customization preferences, most often used with [*WebParts*](https://msdn.microsoft.com/library/e0s9t4ck.aspx).</span></span>
- <span data-ttu-id="c34f0-116">**Monitorování stavu** – rozhraní API pro monitorování výkonu, zabezpečení, chyby a jiné metriky stavu systému pro provozní webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="c34f0-116">**Health Monitoring** - an API for monitoring performance, security, errors, and other system health metrics for a running web application.</span></span>
  

<span data-ttu-id="c34f0-117">Aplikační služby API nejsou vázané na konkrétní implementaci.</span><span class="sxs-lookup"><span data-stu-id="c34f0-117">The application services APIs are not tied to a specific implementation.</span></span> <span data-ttu-id="c34f0-118">Místo toho dáte pokyn aplikační služby, které chcete použít konkrétní *poskytovatele*, a tohoto zprostředkovatele implementuje pomocí konkrétní technologii.</span><span class="sxs-lookup"><span data-stu-id="c34f0-118">Instead, you instruct the application services to use a particular *provider*, and that provider implements the service using a particular technology.</span></span> <span data-ttu-id="c34f0-119">Nejčastěji používané zprostředkovatelé pro internetové webové aplikace hostované na webhosting společnosti jsou těchto zprostředkovatelů, které používají implementace databáze systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c34f0-119">The most commonly used providers for Internet-based web applications hosted at a web hosting company are those providers that use a SQL Server database implementation.</span></span> <span data-ttu-id="c34f0-120">Například `SqlMembershipProvider` je zprostředkovatele pro členství v rozhraní API, které jsou uloženy informace o uživatelském účtu v databázi Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c34f0-120">For example, the `SqlMembershipProvider` is a provider for the Membership API that stores user account information in a Microsoft SQL Server database.</span></span>

<span data-ttu-id="c34f0-121">Použití aplikačních služeb a systému SQL Server zprostředkovatelů přidá některé běžné problémy při nasazování aplikace.</span><span class="sxs-lookup"><span data-stu-id="c34f0-121">Using the application services and SQL Server providers adds some challenges when deploying the application.</span></span> <span data-ttu-id="c34f0-122">Začínáte musí být objekty databáze služeb aplikací správně vytvořena pro vývoj i produkci databáze a správně inicializován.</span><span class="sxs-lookup"><span data-stu-id="c34f0-122">For starters, the application services database objects must be properly created on both the development and production databases and appropriately initialized.</span></span> <span data-ttu-id="c34f0-123">Existují také důležitá nastavení konfigurace, které je potřeba provést.</span><span class="sxs-lookup"><span data-stu-id="c34f0-123">There are also important configuration settings that need to be made.</span></span>

> [!NOTE]
> <span data-ttu-id="c34f0-124">Rozhraní API byly navrženy pomocí aplikační služby [ *modelu poskytovatele*](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), návrhový vzor, který umožňuje rozhraní API s podrobnosti implementace poskytované v době běhu.</span><span class="sxs-lookup"><span data-stu-id="c34f0-124">The application services APIs were designed using the [*provider model*](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), a design pattern that allows for an API s implementation details to be provided at runtime.</span></span> <span data-ttu-id="c34f0-125">Rozhraní .NET Framework se dodává s celou řadou poskytovatelů služeb aplikací, které lze použít, jako `SqlMembershipProvider` a `SqlRoleProvider`, které jsou zprostředkovatelů pro členství a rolí API, která používá SQL Server databáze implementace.</span><span class="sxs-lookup"><span data-stu-id="c34f0-125">The .NET Framework ships with a number of application service providers that can be used, such as the `SqlMembershipProvider` and `SqlRoleProvider`, which are providers for the Membership and Roles APIs that use a SQL Server database implementation.</span></span> <span data-ttu-id="c34f0-126">Můžete také vytvořit a modulu plug-in vlastního zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="c34f0-126">You can also create and plug-in a custom provider.</span></span> <span data-ttu-id="c34f0-127">Ve skutečnosti recenzí webové aplikace už obsahuje vlastního zprostředkovatele pro rozhraní API pro mapy webu (`ReviewSiteMapProvider`), což vytvoří mapa webu z dat v `Genres` a `Books` tabulky v databázi.</span><span class="sxs-lookup"><span data-stu-id="c34f0-127">In fact, the Book Reviews web application already contains a custom provider for the Site Map API (`ReviewSiteMapProvider`), which constructs the site map from the data in the `Genres` and `Books` tables in the database.</span></span>


<span data-ttu-id="c34f0-128">Tento kurz pracuje s podívat, jak můžu rozšířit recenzí webové aplikace pro použití rozhraní API rolí a členství.</span><span class="sxs-lookup"><span data-stu-id="c34f0-128">This tutorial starts with a look at how I extended the Book Reviews web application to use the Membership and Roles APIs.</span></span> <span data-ttu-id="c34f0-129">Potom se provede nasazení webové aplikace, který používá aplikační služby s implementací databáze systému SQL Server a řešení běžných problémů se správou uživatelské účty a role na provozním prostředí, uzavře.</span><span class="sxs-lookup"><span data-stu-id="c34f0-129">It then walks through deploying a web application that uses application services with a SQL Server database implementation, and concludes by addressing common issues with managing user accounts and roles on the production environment.</span></span>

## <a name="updates-to-the-book-reviews-application"></a><span data-ttu-id="c34f0-130">Aktualizace aplikace revize knihy</span><span class="sxs-lookup"><span data-stu-id="c34f0-130">Updates to the Book Reviews Application</span></span>

<span data-ttu-id="c34f0-131">Za posledních několik kurzů, které webové aplikace zkontroluje knihy se aktualizoval z: statického webu k aplikaci dynamické weby s daty dokončení sadu pro správu žánry a revize stránky pro správu.</span><span class="sxs-lookup"><span data-stu-id="c34f0-131">Over the past couple tutorials the Book Reviews web application was updated from a static website to a dynamic, data-driven web application complete with a set of administration pages for managing genres and reviews.</span></span> <span data-ttu-id="c34f0-132">Ale momentálně není chráněn této části Správa – každý uživatel, který zná (nebo uhádne) Adresa URL stránky pro správu můžete waltz v a vytvořit, upravit nebo odstranit recenze na našem webu.</span><span class="sxs-lookup"><span data-stu-id="c34f0-132">However, this administration section is currently not protected - any user who knows (or guesses) the administration page URL can waltz in and create, edit, or delete reviews on our site.</span></span> <span data-ttu-id="c34f0-133">Běžný způsob, jak chránit některé části tohoto webu je k implementaci uživatelských účtů a pak pomocí autorizačních pravidel adres URL můžete omezit přístup na určité uživatele nebo role.</span><span class="sxs-lookup"><span data-stu-id="c34f0-133">A common way to protect certain portions of a website is to implement user accounts and then use URL authorization rules to restrict access to certain users or roles.</span></span> <span data-ttu-id="c34f0-134">Webová aplikace recenzí, které jsou k dispozici ke stažení v tomto kurzu podporuje uživatelských účtů a rolí.</span><span class="sxs-lookup"><span data-stu-id="c34f0-134">The Book Reviews web application available for download with this tutorial supports user accounts and roles.</span></span> <span data-ttu-id="c34f0-135">Má jedné definice role s názvem správce a jenom uživatelé s touto rolí mají přístup k stránky pro správu.</span><span class="sxs-lookup"><span data-stu-id="c34f0-135">It has a single role defined named Admin and only users in this role can access the administration pages.</span></span>

> [!NOTE]
> <span data-ttu-id="c34f0-136">Můžu odebrat vytvoří tři uživatelské účty ve webové aplikaci recenzí: Scott, Jisun a Alice.</span><span class="sxs-lookup"><span data-stu-id="c34f0-136">I ve created three user accounts in the Book Reviews web application: Scott, Jisun, and Alice.</span></span> <span data-ttu-id="c34f0-137">Všechny tři uživatelé mají stejné heslo: **heslo!**</span><span class="sxs-lookup"><span data-stu-id="c34f0-137">All three users have the same password: **password!**</span></span> <span data-ttu-id="c34f0-138">Scott a Jisun jsou v roli správce, není Alice.</span><span class="sxs-lookup"><span data-stu-id="c34f0-138">Scott and Jisun are in the Admin role, Alice is not.</span></span> <span data-ttu-id="c34f0-139">Stránky webu s bez správy jsou stále dostupné pro anonymní uživatele.</span><span class="sxs-lookup"><span data-stu-id="c34f0-139">The site s non-administration pages are still accessible to anonymous users.</span></span> <span data-ttu-id="c34f0-140">To znamená, nepotřebujete k přihlášení k webu, pokud chcete spravovat, v takovém případě musíte se přihlásit jako uživatel v roli správce.</span><span class="sxs-lookup"><span data-stu-id="c34f0-140">That is, you do not need to sign in to visit the site, unless you want to administer it, in which case you must sign in as a user in the Admin role.</span></span>


<span data-ttu-id="c34f0-141">Aktualizovali jsme stránky předlohy knihy revize aplikace s zahrnout jiného uživatelského rozhraní pro ověřený a anonymní uživatele.</span><span class="sxs-lookup"><span data-stu-id="c34f0-141">The Book Reviews application s master page has been updated to include a different user interface for authenticated and anonymous users.</span></span> <span data-ttu-id="c34f0-142">Pokud je anonymní uživatel navštíví web marcela vidí odkazu pro přihlášení v pravém horním rohu.</span><span class="sxs-lookup"><span data-stu-id="c34f0-142">If an anonymous user visits the site she sees a Login link in the upper right corner.</span></span> <span data-ttu-id="c34f0-143">Ověřený uživatel se zobrazí se zpráva "Vítejte zpět, *uživatelské jméno*!"</span><span class="sxs-lookup"><span data-stu-id="c34f0-143">An authenticated user sees the message, "Welcome back, *username*!"</span></span> <span data-ttu-id="c34f0-144">a odkaz na odhlášení. Tam s také na přihlašovací stránce (`~/Login.aspx`), která obsahuje ovládací prvek webové přihlášení, která poskytuje uživatelské rozhraní a logiky za účelem ověřování totožnosti návštěvník.</span><span class="sxs-lookup"><span data-stu-id="c34f0-144">and a link to log out. There s also a login page (`~/Login.aspx`), which contains a Login Web control that provides the user interface and logic for authenticating a visitor.</span></span> <span data-ttu-id="c34f0-145">Pouze správci mohou vytvářet nové účty.</span><span class="sxs-lookup"><span data-stu-id="c34f0-145">Only administrators can create new accounts.</span></span> <span data-ttu-id="c34f0-146">(Nejsou stránky pro vytváření a správa uživatelských účtů v `~/Admin` složky.)</span><span class="sxs-lookup"><span data-stu-id="c34f0-146">(There are pages for creating and managing user accounts in the `~/Admin` folder.)</span></span>

### <a name="configuring-the-membership-and-roles-apis"></a><span data-ttu-id="c34f0-147">Konfigurace členství a rolí rozhraní API</span><span class="sxs-lookup"><span data-stu-id="c34f0-147">Configuring the Membership and Roles APIs</span></span>

<span data-ttu-id="c34f0-148">Webová aplikace recenzí používá členství a rolí rozhraní API pro podporu uživatelské účty a skupiny těchto uživatelů do rolí (konkrétně role správce).</span><span class="sxs-lookup"><span data-stu-id="c34f0-148">The Book Reviews web application uses the Membership and Roles APIs to support user accounts and to group those users into roles (namely, the Admin role).</span></span> <span data-ttu-id="c34f0-149">`SqlMembershipProvider` a `SqlRoleProvider` třídy zprostředkovatele se používají, protože chceme, aby k ukládání informací o účtu a rolích do databáze SQL serveru.</span><span class="sxs-lookup"><span data-stu-id="c34f0-149">The `SqlMembershipProvider` and `SqlRoleProvider` provider classes are used because we want to store account and role information in a SQL Server database.</span></span>

> [!NOTE]
> <span data-ttu-id="c34f0-150">V tomto kurzu není určen jako podrobné zkoumání v konfiguraci webové aplikace pro podporu rozhraní API rolí a členství.</span><span class="sxs-lookup"><span data-stu-id="c34f0-150">This tutorial is not intended to be a detailed examination at configuring a web application to support the Membership and Roles APIs.</span></span> <span data-ttu-id="c34f0-151">Důkladný rozbor tato rozhraní API a kroky musíte provést konfiguraci webu k jejich použití, přečtěte si prosím Moje [ *kurzy o zabezpečení webu*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="c34f0-151">For a thorough look at these APIs and the steps you need to take to configure a website to use them, please read my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>


<span data-ttu-id="c34f0-152">Použití aplikačních služeb s databází SQL Server, musíte nejprve přidat databázové objekty používané těchto poskytovatelů pro databáze, místo, kam chcete uživatelský účet a uložené informace o rolích.</span><span class="sxs-lookup"><span data-stu-id="c34f0-152">To use the application services with a SQL Server database you must first add the database objects used by these providers to the database where you want the user account and role information stored.</span></span> <span data-ttu-id="c34f0-153">Tyto objekty požadované databáze zahrnují celou řadu tabulek, zobrazení a uložených procedur.</span><span class="sxs-lookup"><span data-stu-id="c34f0-153">These requisite database objects include a variety of tables, views, and stored procedures.</span></span> <span data-ttu-id="c34f0-154">Pokud není uvedeno jinak, `SqlMembershipProvider` a `SqlRoleProvider` třídy zprostředkovatele použití systému SQL Server Express Edition databázi s názvem `ASPNETDB` umístěný v aplikaci s `App_Data` složky; pokud takové databáze buď neexistuje, automaticky se vytvoří s nezbytné databázových objektů pomocí těchto zprostředkovatelů za běhu.</span><span class="sxs-lookup"><span data-stu-id="c34f0-154">Unless specified otherwise, the `SqlMembershipProvider` and `SqlRoleProvider` provider classes use a SQL Server Express Edition database named `ASPNETDB` located in the application s `App_Data` folder; if such a database does not exist, it is automatically created with the necessary database objects by these providers at runtime.</span></span>

<span data-ttu-id="c34f0-155">Je možné, a obvykle ideální, chcete-li vytvořit aplikaci služby databázové objekty ve stejné databázi na webu s specifické pro aplikace se mají ukládat data.</span><span class="sxs-lookup"><span data-stu-id="c34f0-155">It is possible, and usually ideal, to create the application services database objects in the same database where the website s application-specific data is stored.</span></span> <span data-ttu-id="c34f0-156">Rozhraní .NET Framework se dodává s nástrojem s názvem `aspnet_regsql.exe` databázové objekty, které instaluje na zadanou databázi.</span><span class="sxs-lookup"><span data-stu-id="c34f0-156">The .NET Framework ships with a tool named `aspnet_regsql.exe` that installs the database objects on a specified database.</span></span> <span data-ttu-id="c34f0-157">Mám předem a použít tento nástroj k přidání tyto objekty `Reviews.mdf` databáze v `App_Data` složky (vývoj databáze).</span><span class="sxs-lookup"><span data-stu-id="c34f0-157">I have gone ahead and used this tool to add these objects to the `Reviews.mdf` database in the `App_Data` folder (the development database).</span></span> <span data-ttu-id="c34f0-158">Uvidíme, jak používat tento nástroj později v tomto kurzu při přidáme tyto objekty do provozní databáze.</span><span class="sxs-lookup"><span data-stu-id="c34f0-158">We'll see how to use this tool later in this tutorial when we add these objects to the production database.</span></span>

<span data-ttu-id="c34f0-159">Pokud chcete přidat aplikace databázových objektů do databáze služby jiné než `ASPNETDB` budete muset přizpůsobit `SqlMembershipProvider` a `SqlRoleProvider` poskytovatele třídy konfigurace tak, že používají příslušné databáze.</span><span class="sxs-lookup"><span data-stu-id="c34f0-159">If you add the application services database objects to a database other than `ASPNETDB` you will need to customize the `SqlMembershipProvider` and `SqlRoleProvider` provider classes configurations so that they use the appropriate database.</span></span> <span data-ttu-id="c34f0-160">Přizpůsobení přidat zprostředkovatele členství [  *&lt;členství&gt; element* ](https://msdn.microsoft.com/library/1b9hw62f.aspx) v rámci `<system.web>` tématu `Web.config`; použít [  *&lt;roleManager&gt; element* ](https://msdn.microsoft.com/library/ms164660.aspx) nakonfigurovat zprostředkovatele rolí.</span><span class="sxs-lookup"><span data-stu-id="c34f0-160">To customize the Membership provider add a [*&lt;membership&gt; element*](https://msdn.microsoft.com/library/1b9hw62f.aspx) within the `<system.web>` section in `Web.config`; use the [*&lt;roleManager&gt; element*](https://msdn.microsoft.com/library/ms164660.aspx) to configure the Roles provider.</span></span> <span data-ttu-id="c34f0-161">Následující fragment kódu je převzata z aplikací s recenzí `Web.config` a ukazuje, konfigurace nastavení pro rozhraní API rolí a členství.</span><span class="sxs-lookup"><span data-stu-id="c34f0-161">The following snippet is taken from the Book Reviews application s `Web.config` and shows the configure settings for the Membership and Roles APIs.</span></span> <span data-ttu-id="c34f0-162">Všimněte si, že oba registraci nového poskytovatele - `ReviewMembership` a `ReviewRole` -, které používají `SqlMembershipProvider` a `SqlRoleProvider` poskytovatelů, v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="c34f0-162">Note that both register a new provider - `ReviewMembership` and `ReviewRole` - that use the `SqlMembershipProvider` and `SqlRoleProvider` providers, respectively.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample1.xml)]

<span data-ttu-id="c34f0-163">`Web.config` Soubor s `<authentication>` element je také nakonfigurovaný pro podporu ověřování pomocí formulářů.</span><span class="sxs-lookup"><span data-stu-id="c34f0-163">The `Web.config` file s `<authentication>` element has also been configured to support forms-based authentication.</span></span>
  

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample2.xml)]

### <a name="limiting-access-to-the-administration-pages"></a><span data-ttu-id="c34f0-164">Omezení přístupu k stránky pro správu</span><span class="sxs-lookup"><span data-stu-id="c34f0-164">Limiting Access to the Administration Pages</span></span>

<span data-ttu-id="c34f0-165">Technologie ASP.NET umožňuje snadno udělit nebo odepřít přístup k určitého souboru nebo složky podle uživatele nebo podle role pomocí jeho *autorizace adres URL* funkce.</span><span class="sxs-lookup"><span data-stu-id="c34f0-165">ASP.NET makes it easy to grant or deny access to a particular file or folder by user or by role via its *URL authorization* feature.</span></span> <span data-ttu-id="c34f0-166">(Krátce jsme probírali autorizace adres URL v *základní rozdíly mezi IIS a serveru ASP.NET Development Server* kurzu a jsme si ukázali, jak použít službu IIS a serveru ASP.NET Development Server autorizačních pravidel adres URL pro statické oproti dynamického obsahu.) Protože chceme zakázat přístup k `~/Admin` složku s výjimkou tito uživatelé v roli správce, je potřeba přidat autorizačních pravidel adres URL do této složky.</span><span class="sxs-lookup"><span data-stu-id="c34f0-166">(We briefly discussed URL authorization in the *Core Differences Between IIS and the ASP.NET Development Server* tutorial and showed how IIS and the ASP.NET Development Server apply URL authorization rules differently for static versus dynamic content.) Because we want to prohibit access to the `~/Admin` folder except for those users in the Admin role, we need to add URL authorization rules to this folder.</span></span> <span data-ttu-id="c34f0-167">Konkrétně autorizačních pravidel adres URL muset povolit uživatelům v roli správce a odepřít jiným uživatelům.</span><span class="sxs-lookup"><span data-stu-id="c34f0-167">Specifically, the URL authorization rules need to allow users in the Admin role and deny all other users.</span></span> <span data-ttu-id="c34f0-168">To lze provést přidáním `Web.config` do souboru `~/Admin` složka s následujícím obsahem:</span><span class="sxs-lookup"><span data-stu-id="c34f0-168">This is accomplished by adding a `Web.config` file to the `~/Admin` folder with the following contents:</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample3.xml)]

<span data-ttu-id="c34f0-169">Pro další informace o funkci ověřování adresy URL s ASP.NET a jak ji používat k pravopisu si autorizačních pravidel pro uživatele a role, nezapomeňte si přečíst [ *autorizace na základě uživatele* ](../../older-versions-security/membership/user-based-authorization-cs.md) a [ *Autorizace na základě rolí* ](../../older-versions-security/roles/role-based-authorization-cs.md) kurzů od Moje [ *kurzy o zabezpečení webu*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="c34f0-169">For more information on ASP.NET s URL authorization feature and how to use it to spell out authorization rules for users and for roles, be sure to read the [*User-Based Authorization*](../../older-versions-security/membership/user-based-authorization-cs.md) and [*Role-Based Authorization*](../../older-versions-security/roles/role-based-authorization-cs.md) tutorials from my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>

## <a name="deploying-a-web-application-that-uses-application-services"></a><span data-ttu-id="c34f0-170">Nasazení webové aplikace, který používá aplikační služby</span><span class="sxs-lookup"><span data-stu-id="c34f0-170">Deploying a Web Application That Uses Application Services</span></span>

<span data-ttu-id="c34f0-171">Při nasazování webu, který používá aplikační služby a zprostředkovatele, který ukládá informace o službách aplikací do databáze, je nutné vytvořené objekty databáze vyžaduje aplikační služby na produkční databázi.</span><span class="sxs-lookup"><span data-stu-id="c34f0-171">When deploying a website that uses application services and a provider that stores the application services information in a database, it is imperative that the database objects needed by the application services be created on the production database.</span></span> <span data-ttu-id="c34f0-172">Zpočátku provozní databáze neobsahuje tyto objekty, tak při prvním nasazení aplikace (nebo po nasazení poprvé po přidání aplikační služby), musejí udělat dodatečné kroky k získání těchto nezbytných databázových objektů provozní databáze.</span><span class="sxs-lookup"><span data-stu-id="c34f0-172">Initially the production database does not contain these objects, so when the application is first deployed (or when it is deployed for the first time after application services have been added), you must take extra steps to get these requisite database objects on the production database.</span></span>

<span data-ttu-id="c34f0-173">Dalším problémem může dojít při nasazování webu, který používá aplikační služby, pokud chcete provést replikaci uživatelské účty vytvořené ve vývojovém prostředí do produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="c34f0-173">Another challenge can arise when deploying a website that uses application services if you intend to replicate the user accounts created in the development environment to the production environment.</span></span> <span data-ttu-id="c34f0-174">V závislosti na konfiguraci členství a rolí je možné, že i v případě, že zkopírujete úspěšně uživatelské účty, které byly vytvořeny ve vývojovém prostředí do provozní databáze, tito uživatelé nemůže přihlásit do webové aplikace v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="c34f0-174">Depending on the Membership and Roles configuration, it is possible that even if you successfully copy the user accounts that were created in the development environment to the production database, these users cannot sign into the web application in production.</span></span> <span data-ttu-id="c34f0-175">Vytvoříme prohlédnout příčinu těchto potíží a diskuzi o tom, aby se zabránilo jejímu děje.</span><span class="sxs-lookup"><span data-stu-id="c34f0-175">We'll look at the cause of this issue and discuss how to prevent it from happening.</span></span>

<span data-ttu-id="c34f0-176">Technologie ASP.NET se dodává s nice [ *nástroj pro správu webového serveru (WSAT)* ](https://msdn.microsoft.com/library/yy40ytx0.aspx) , který lze spustit ze sady Visual Studio a umožňuje uživatelům účtu, role a autorizační pravidla ke správě přes webové rozhraní.</span><span class="sxs-lookup"><span data-stu-id="c34f0-176">ASP.NET ships with a nice [*Web Site Administration Tool (WSAT)*](https://msdn.microsoft.com/library/yy40ytx0.aspx) that can be launched from Visual Studio and allows the user account, roles, and authorization rules to be managed through a web-based interface.</span></span> <span data-ttu-id="c34f0-177">Bohužel WSAT funguje jenom pro místní weby, což znamená, že nelze použít ke vzdálené správě uživatelských účtů, rolí a pravidel autorizace pro webovou aplikaci v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="c34f0-177">Unfortunately, the WSAT only works for local websites, meaning that it cannot be used to remotely manage user accounts, roles, and authorization rules for the web application in the production environment.</span></span> <span data-ttu-id="c34f0-178">Podíváme se na různé způsoby, jak implementovat podobně WSAT z produkčního webu.</span><span class="sxs-lookup"><span data-stu-id="c34f0-178">We'll look at different ways to implement WSAT-like behavior from your production website.</span></span>

### <a name="adding-the-database-objects-using-aspnetregsqlexe"></a><span data-ttu-id="c34f0-179">Přidání aspnet databázi pomocí objektů\_regsql.exe</span><span class="sxs-lookup"><span data-stu-id="c34f0-179">Adding the Database Objects Using aspnet\_regsql.exe</span></span>

<span data-ttu-id="c34f0-180">*Nasazení databáze* kurz vám ukázal, jak kopírovat tabulek a dat z databáze vývoje do provozní databáze a následujících postupů lze jistě objekty databáze aplikace služby k zkopírovat provozní databáze.</span><span class="sxs-lookup"><span data-stu-id="c34f0-180">The *Deploying a Database* tutorial showed how to copy the tables and data from the development database to the production database, and these techniques can certainly be used to copy the application services database objects to the production database.</span></span> <span data-ttu-id="c34f0-181">Další možností je `aspnet_regsql.exe` nástroj, který přidá nebo odebere z databáze aplikace služby databázové objekty.</span><span class="sxs-lookup"><span data-stu-id="c34f0-181">Another option is the `aspnet_regsql.exe` tool, which adds or removes the application services database objects from a database.</span></span>

> [!NOTE]
> <span data-ttu-id="c34f0-182">`aspnet_regsql.exe` Nástroj vytvoří databázové objekty v zadané databázi.</span><span class="sxs-lookup"><span data-stu-id="c34f0-182">The `aspnet_regsql.exe` tool creates the database objects on a specified database.</span></span> <span data-ttu-id="c34f0-183">Se nemigruje data v těchto objektů databáze z databáze vývoje do provozní databáze.</span><span class="sxs-lookup"><span data-stu-id="c34f0-183">It does not migrate data in those database objects from the development database to the production database.</span></span> <span data-ttu-id="c34f0-184">Pokud jste v úmyslu kopírovat informace o uživatelském účtu a role databáze vývoje do provozní databáze použijte techniky popsané v *nasazení databáze* kurzu.</span><span class="sxs-lookup"><span data-stu-id="c34f0-184">If you mean to copy the user account and role information in the development database to the production database use the techniques covered in the *Deploying a Database* tutorial.</span></span>


<span data-ttu-id="c34f0-185">Umožní s, podívejte se na tom, jak přidat k produkční databázi pomocí databázových objektů `aspnet_regsql.exe` nástroj.</span><span class="sxs-lookup"><span data-stu-id="c34f0-185">Let s look at how to add the database objects to the production database using the `aspnet_regsql.exe` tool.</span></span> <span data-ttu-id="c34f0-186">Začněte tím, že otevřete Průzkumníka Windows a přejděte k adresáři rozhraní .NET Framework verze 2.0 ve vašem počítači %WINDIR%\ Microsoft.NET\Framework\v2.0.50727.</span><span class="sxs-lookup"><span data-stu-id="c34f0-186">Start by opening Windows Explorer and navigating to the .NET Framework version 2.0 directory on your computer, %WINDIR%\ Microsoft.NET\Framework\v2.0.50727.</span></span> <span data-ttu-id="c34f0-187">Existuje byste měli najít `aspnet_regsql.exe` nástroj.</span><span class="sxs-lookup"><span data-stu-id="c34f0-187">There you should find the `aspnet_regsql.exe` tool.</span></span> <span data-ttu-id="c34f0-188">Tento nástroj se dá použít z příkazového řádku, ale zahrnuje také grafické uživatelské rozhraní; dvakrát klikněte `aspnet_regsql.exe` souboru ke spuštění grafického komponenty.</span><span class="sxs-lookup"><span data-stu-id="c34f0-188">This tool can be used from the command-line, but it also includes a graphical user interface; double-click the `aspnet_regsql.exe` file to launch its graphical component.</span></span>

<span data-ttu-id="c34f0-189">Nástroj spustí zobrazením úvodní obrazovky s vysvětlením účelu.</span><span class="sxs-lookup"><span data-stu-id="c34f0-189">The tool starts by displaying a splash screen explaining its purpose.</span></span> <span data-ttu-id="c34f0-190">Klikněte na tlačítko vedle záloh na obrazovku "Vyberte možnost instalace", která je znázorněna na obrázku 1.</span><span class="sxs-lookup"><span data-stu-id="c34f0-190">Click Next to advance to the "Select a Setup Option" screen, which is shown in Figure 1.</span></span> <span data-ttu-id="c34f0-191">Odsud můžete přidat databázové objekty aplikační služby nebo je odebrat z databáze.</span><span class="sxs-lookup"><span data-stu-id="c34f0-191">From here you can choose to add the application services database objects or remove them from a database.</span></span> <span data-ttu-id="c34f0-192">Vzhledem k tomu, že budeme chtít přidat tyto objekty k provozní databázi, vyberte možnost "Konfigurovat SQL Server pro aplikační služby" a klikněte na tlačítko Další.</span><span class="sxs-lookup"><span data-stu-id="c34f0-192">Because we want to add these objects to the production database, select the "Configure SQL Server for application services" option and click Next.</span></span>


<span data-ttu-id="c34f0-193">[![Vyberte konfigurace systému SQL Server pro služby aplikací](configuring-a-website-that-uses-application-services-cs/_static/image2.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="c34f0-193">[![Choose to Configure SQL Server for Application Services](configuring-a-website-that-uses-application-services-cs/_static/image2.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image1.jpg)</span></span>

<span data-ttu-id="c34f0-194">**Obrázek 1**: Nakonfigurujte systém SQL Server se rozhodnete pro aplikační služby ([kliknutím ji zobrazíte obrázek v plné velikosti](configuring-a-website-that-uses-application-services-cs/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="c34f0-194">**Figure 1**: Choose to Configure SQL Server for Application Services ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image3.jpg))</span></span>


<span data-ttu-id="c34f0-195">V "Vyberte do serveru a databázi" obrazovky vyzve k zadání informace pro připojení k databázi.</span><span class="sxs-lookup"><span data-stu-id="c34f0-195">In "Select the Server and Database" screen prompts for information to connect to the database.</span></span> <span data-ttu-id="c34f0-196">Zadejte databázový server, zabezpečovací přihlašovací údaje a název databáze, který vám poskytne váš webhosting společnosti a klikněte na tlačítko Další.</span><span class="sxs-lookup"><span data-stu-id="c34f0-196">Enter the database server, the security credentials, and the database name supplied to you by your web hosting company and click Next.</span></span>

> [!NOTE]
> <span data-ttu-id="c34f0-197">Po zadání vašeho databázového serveru a přihlašovací údaje mohou dojde k chybě při rozšiřování rozevírací seznam databází.</span><span class="sxs-lookup"><span data-stu-id="c34f0-197">After entering your database server and credentials you may get an error when expanding the database drop-down list.</span></span> <span data-ttu-id="c34f0-198">`aspnet_regsql.exe` Nástroj pro dotazy `sysdatabases` systémová tabulka načíst seznam databází na serveru, ale některé webové hostování společnosti uzamknutí jejich databázové servery tak, aby tyto informace není veřejně k dispozici.</span><span class="sxs-lookup"><span data-stu-id="c34f0-198">The `aspnet_regsql.exe` tool queries the `sysdatabases` system table to retrieve a list of databases on the server, but some web hosting companies lock down their database servers so that this information is not publicly available.</span></span> <span data-ttu-id="c34f0-199">Pokud se zobrazí tato chyba můžete zadat název databáze přímo do rozevíracího seznamu.</span><span class="sxs-lookup"><span data-stu-id="c34f0-199">If you get this error you can type the database name directly into the drop-down list.</span></span>


<span data-ttu-id="c34f0-200">[![Zadat nástroj s informací o připojení databáze s](configuring-a-website-that-uses-application-services-cs/_static/image5.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="c34f0-200">[![Supply the Tool With Your Database s Connection Information](configuring-a-website-that-uses-application-services-cs/_static/image5.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image4.jpg)</span></span>

<span data-ttu-id="c34f0-201">**Obrázek 2**: zadat nástroj s databáze s informací o připojení ([kliknutím ji zobrazíte obrázek v plné velikosti](configuring-a-website-that-uses-application-services-cs/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="c34f0-201">**Figure 2**: Supply the Tool With Your Database s Connection Information ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image6.jpg))</span></span>


<span data-ttu-id="c34f0-202">Na další obrazovce shrnuje akce, které se chystáte provést, a to, které objekty databáze služeb aplikací se chystáte přidat k zadané databázi.</span><span class="sxs-lookup"><span data-stu-id="c34f0-202">The subsequent screen summarizes the actions that are about to take place, namely that the application services database objects are going to be added to the specified database.</span></span> <span data-ttu-id="c34f0-203">Klikněte na tlačítko vedle dokončení této akce.</span><span class="sxs-lookup"><span data-stu-id="c34f0-203">Click Next to complete this action.</span></span> <span data-ttu-id="c34f0-204">Po chvíli se zobrazí na poslední obrazovce poznamenat, že databázové objekty byly přidány (servery viz obrázek 3).</span><span class="sxs-lookup"><span data-stu-id="c34f0-204">After a few moments, the final screen is displayed, noting that the database objects have been added (see Figure 3).</span></span>


<span data-ttu-id="c34f0-205">[![Úspěch! Aplikace služby databázové objekty byly přidány do provozní databáze](configuring-a-website-that-uses-application-services-cs/_static/image8.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="c34f0-205">[![Success! The Application Services Database Objects Were Added to the Production Database](configuring-a-website-that-uses-application-services-cs/_static/image8.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image7.jpg)</span></span>

<span data-ttu-id="c34f0-206">**Obrázek 3**: Úspěch!</span><span class="sxs-lookup"><span data-stu-id="c34f0-206">**Figure 3**: Success!</span></span> <span data-ttu-id="c34f0-207">Aplikaci služby databáze objekty byly přidány do provozní databáze ([kliknutím ji zobrazíte obrázek v plné velikosti](configuring-a-website-that-uses-application-services-cs/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="c34f0-207">The Application Services Database Objects Were Added to the Production Database ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image9.jpg))</span></span>


<span data-ttu-id="c34f0-208">Pokud chcete ověřit, že aplikace služby databázové objekty byly úspěšně přidány do provozní databáze, otevřete SQL Server Management Studio a připojte se k provozní databázi.</span><span class="sxs-lookup"><span data-stu-id="c34f0-208">To verify that the application services database objects were successfully added to the production database, open SQL Server Management Studio and connect to your production database.</span></span> <span data-ttu-id="c34f0-209">Jak je vidět na obrázku 4, měli byste vidět tabulky databáze služeb aplikací ve vaší databázi `aspnet_Applications`, `aspnet_Membership`, `aspnet_Users`a tak dále.</span><span class="sxs-lookup"><span data-stu-id="c34f0-209">As Figure 4 shows, you should now see the application services database tables in your database, `aspnet_Applications`, `aspnet_Membership`, `aspnet_Users`, and so forth.</span></span>


<span data-ttu-id="c34f0-210">[![Potvrďte, že databázové objekty byly přidány do provozní databáze](configuring-a-website-that-uses-application-services-cs/_static/image11.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="c34f0-210">[![Confirm That the Database Objects Were Added to the Production Database](configuring-a-website-that-uses-application-services-cs/_static/image11.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image10.jpg)</span></span>

<span data-ttu-id="c34f0-211">**Obrázek 4**: Ověřte, že databázové objekty byly přidány do provozní databáze ([kliknutím ji zobrazíte obrázek v plné velikosti](configuring-a-website-that-uses-application-services-cs/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="c34f0-211">**Figure 4**: Confirm That the Database Objects Were Added to the Production Database ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image12.jpg))</span></span>


<span data-ttu-id="c34f0-212">Je potřeba jenom použít `aspnet_regsql.exe` nástroj při nasazení webové aplikace poprvé nebo poprvé po spuštění služby aplikace.</span><span class="sxs-lookup"><span data-stu-id="c34f0-212">You will only need to use the `aspnet_regsql.exe` tool when deploying your web application for the first time or for the first time after you have started using the application services.</span></span> <span data-ttu-id="c34f0-213">Jakmile tyto databázové objekty na provozní databázi, vyhráli t potřeba znovu přidat ani upravit.</span><span class="sxs-lookup"><span data-stu-id="c34f0-213">Once these database objects are on the production database they won t need to be re-added or modified.</span></span>

### <a name="copying-user-accounts-from-development-to-production"></a><span data-ttu-id="c34f0-214">Kopírování uživatelské účty z vývojového do produkčního prostředí</span><span class="sxs-lookup"><span data-stu-id="c34f0-214">Copying User Accounts from Development to Production</span></span>

<span data-ttu-id="c34f0-215">Při použití `SqlMembershipProvider` a `SqlRoleProvider` třídy zprostředkovatele ukládat informace o službách aplikací do databáze serveru SQL, informace o uživatelském účtu a role je uložena v různých databázové tabulky, včetně `aspnet_Users`, `aspnet_Membership`, `aspnet_Roles`, a `aspnet_UsersInRoles`, mimo jiné.</span><span class="sxs-lookup"><span data-stu-id="c34f0-215">When using the `SqlMembershipProvider` and `SqlRoleProvider` provider classes to store the application services information in a SQL Server database, the user account and role information is stored in a variety of database tables, including `aspnet_Users`, `aspnet_Membership`, `aspnet_Roles`, and `aspnet_UsersInRoles`, among others.</span></span> <span data-ttu-id="c34f0-216">Pokud během vývoje vytvoříte uživatelské účty ve vývojovém prostředí můžete replikovat tyto uživatelské účty v produkčním prostředí tak, že zkopírujete odpovídající záznamy z příslušných databázových tabulek.</span><span class="sxs-lookup"><span data-stu-id="c34f0-216">If during development you create user accounts in the development environment you can replicate those user accounts in production by copying the corresponding records from the applicable database tables.</span></span> <span data-ttu-id="c34f0-217">Pokud jste použili k nasazení aplikace služby databázové objekty Průvodce publikováním databáze může také rozhodnete kopírování záznamů, které by mělo za následek uživatelské účty vytvořené ve vývoji nebyla v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="c34f0-217">If you used the Database Publishing Wizard to deploy the application services database objects you may have also elected to copy the records, which would result in the user accounts created in development to also be on production.</span></span> <span data-ttu-id="c34f0-218">Ale v závislosti na nastavení konfigurace, může se stát, že tito uživatelé, jejichž účty byly vytvořeny ve vývoji a zkopírovali do produkčního prostředí nelze se přihlásit na webu produkčního prostředí.</span><span class="sxs-lookup"><span data-stu-id="c34f0-218">But, depending on your configuration settings, you may find that those users whose accounts were created in development and copied to production are unable to login from the production website.</span></span> <span data-ttu-id="c34f0-219">Co nabízí?</span><span class="sxs-lookup"><span data-stu-id="c34f0-219">What gives?</span></span>

<span data-ttu-id="c34f0-220">`SqlMembershipProvider` a `SqlRoleProvider` třídy zprostředkovatele byly navržené tak, aby izolované databáze může sloužit jako úložiště uživatele pro více aplikací, kde každá aplikace může teoreticky, mají uživatelé s překrývající se uživatelská jména a rolí se stejným názvem.</span><span class="sxs-lookup"><span data-stu-id="c34f0-220">The `SqlMembershipProvider` and `SqlRoleProvider` provider classes were designed such that a single database could serve as a user store for multiple applications, where each application could, in theory, have users with overlapping usernames and roles with the same name.</span></span> <span data-ttu-id="c34f0-221">Chcete-li povolit tuto flexibilitu, databázi udržuje seznam aplikací v `aspnet_Applications` tabulky a každý uživatel je přidružený nejméně k jednomu z těchto aplikací.</span><span class="sxs-lookup"><span data-stu-id="c34f0-221">To allow for this flexibility, the database maintains a list of applications in the `aspnet_Applications` table, and each user is associated with one of these applications.</span></span> <span data-ttu-id="c34f0-222">Konkrétně `aspnet_Users` tabulka má `ApplicationId` sloupec, který přiřazuje každému uživateli záznam v `aspnet_Applications` tabulky.</span><span class="sxs-lookup"><span data-stu-id="c34f0-222">Specifically, the `aspnet_Users` table has an `ApplicationId` column that ties each user to a record in the `aspnet_Applications` table.</span></span>

<span data-ttu-id="c34f0-223">Kromě `ApplicationId` sloupci `aspnet_Applications` tabulka obsahuje také `ApplicationName` sloupec, který obsahuje více lidských – popisný název pro aplikaci.</span><span class="sxs-lookup"><span data-stu-id="c34f0-223">In addition to the `ApplicationId` column, the `aspnet_Applications` table also includes an `ApplicationName` column, which provides a more human-friendly name for the application.</span></span> <span data-ttu-id="c34f0-224">Pokusy webu pro práci s uživatelským účtem, jako je například ověřování pověření uživatele s z přihlašovací stránky, musíte upozornit `SqlMembershipProvider` třídy, které aplikace pro spolupráci s.</span><span class="sxs-lookup"><span data-stu-id="c34f0-224">When a website attempts to work with a user account, such as validating a user s credentials from the login page, it must tell the `SqlMembershipProvider` class what application to work with.</span></span> <span data-ttu-id="c34f0-225">Obvykle dělá to zadáním názvu aplikace a je tato hodnota pochází z konfigurace poskytovatele s v `Web.config` – konkrétně prostřednictvím `applicationName` atribut.</span><span class="sxs-lookup"><span data-stu-id="c34f0-225">It usually does this by supplying the application name, and the this value comes from the provider s configuration in `Web.config` - specifically via the `applicationName` attribute.</span></span>

<span data-ttu-id="c34f0-226">Ale co se stane, když `applicationName` atribut není zadán v `Web.config`?</span><span class="sxs-lookup"><span data-stu-id="c34f0-226">But what happens if the `applicationName` attribute is not specified in `Web.config`?</span></span> <span data-ttu-id="c34f0-227">V takovém případě členství systém používá kořenové cestě aplikace jako `applicationName` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="c34f0-227">In such a case the Membership system uses the application root path as the `applicationName` value.</span></span> <span data-ttu-id="c34f0-228">Pokud `applicationName` atribut není explicitně nastavena `Web.config`, pak je možné, že vývojovým prostředím a produkčním prostředí použít jiné aplikační kořen a proto mají být asociována s novou aplikaci názvy v aplikační služby.</span><span class="sxs-lookup"><span data-stu-id="c34f0-228">If the `applicationName` attribute is not explicitly set in `Web.config`, then, there is the possibility that the development environment and production environment use a different application root and therefore will be associated with different application names in the application services.</span></span> <span data-ttu-id="c34f0-229">Případě Tato neshoda pak tito uživatelé vytvoření ve vývojovém prostředí budou mít `ApplicationId` hodnotu, která se neshoduje s `ApplicationId` hodnotu pro produkční prostředí.</span><span class="sxs-lookup"><span data-stu-id="c34f0-229">If such a mismatch occurs then those users created in the development environment will have an `ApplicationId` value that does not match with the `ApplicationId` value for the production environment.</span></span> <span data-ttu-id="c34f0-230">Net výsledkem je, že tito uživatelé vyhráli t se moct přihlásit.</span><span class="sxs-lookup"><span data-stu-id="c34f0-230">The net result is that those users won t be able to login.</span></span>

> [!NOTE]
> <span data-ttu-id="c34f0-231">Pokud se v této situaci – s uživatelskými účty, které jsou zkopírovány do ostrého provozu neshodný `ApplicationId` hodnota – můžete napsat dotaz k aktualizaci těchto nesprávné `ApplicationId` hodnoty `ApplicationId` používat v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="c34f0-231">If you find yourself in this situation - with user accounts copied to production with a mismatched `ApplicationId` value - you could write a query to update these incorrect `ApplicationId` values to the `ApplicationId` used on production.</span></span> <span data-ttu-id="c34f0-232">Po aktualizaci uživatele, jejichž účty byly vytvořeny ve vývojovém prostředí teď bude moct přihlásit do webové aplikace v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="c34f0-232">Once updated, the users whose accounts were created on the development environment would now be able to sign into the web application on production.</span></span>


<span data-ttu-id="c34f0-233">Dobrou zprávou je, že je jednoduchý krok můžete provést k zajištění, že dvě prostředí použít stejné `ApplicationId` – je explicitně nastaveno `applicationName` atribut `Web.config` pro všech zprostředkovatelů služby vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="c34f0-233">The good news is that there is a simple step you can take to ensure that the two environments use the same `ApplicationId` - explicitly set the `applicationName` attribute in `Web.config` for all of your application services providers.</span></span> <span data-ttu-id="c34f0-234">Explicitně nastavit `applicationName` atribut na "BookReviews" `<membership>` a `<roleManager>` prvky jako tento fragment kódu z `Web.config` ukazuje.</span><span class="sxs-lookup"><span data-stu-id="c34f0-234">I explicitly set the `applicationName` attribute to "BookReviews" in the `<membership>` and `<roleManager>` elements as this snippet from `Web.config` shows.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample4.xml)]

<span data-ttu-id="c34f0-235">Další informace o nastavení `applicationName` atribut a úvah, odkazovat na [ *Scott Guthrie* ](https://weblogs.asp.net/scottgu/) blogovém příspěvku s [ *vždy nastavena vlastnost applicationName Vlastnost při konfiguraci členství technologie ASP.NET a dalších poskytovatelů*](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="c34f0-235">For more discussion on setting the `applicationName` attribute and the rationale behind it, refer to [*Scott Guthrie*](https://weblogs.asp.net/scottgu/) s blog post, [*Always set the applicationName property when configuring ASP.NET Membership and other Providers*](https://weblogs.asp.net/scottgu/443634).</span></span>

### <a name="managing-user-accounts-in-the-production-environment"></a><span data-ttu-id="c34f0-236">Správa uživatelských účtů v provozním prostředí</span><span class="sxs-lookup"><span data-stu-id="c34f0-236">Managing User Accounts in the Production Environment</span></span>

<span data-ttu-id="c34f0-237">Nástroj pro správu webu technologie ASP.NET (WSAT) umožňuje snadno vytvořit a spravovat uživatelské účty, definovat a použít role a navýšení kapacity na základě uživatelů a rolí autorizační pravidla pravopisu.</span><span class="sxs-lookup"><span data-stu-id="c34f0-237">The ASP.NET Web Site Administration Tool (WSAT) makes it easy to create and manage user accounts, define and apply roles, and spell out user- and role-based authorization rules.</span></span> <span data-ttu-id="c34f0-238">WSAT ze sady Visual Studio můžete spustit tak, že přejdete do okna Průzkumník řešení a potom kliknete na ikonu konfigurace technologie ASP.NET nebo nabídky webu nebo projekt a pak vyberete požadovanou položku nabídky konfigurace technologie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="c34f0-238">You can launch the WSAT from Visual Studio by going to the Solution Explorer and clicking the ASP.NET Configuration icon or by going to the Website or Project menus and selecting the ASP.NET Configuration menu item.</span></span> <span data-ttu-id="c34f0-239">Bohužel WSAT funguje jenom s místní weby.</span><span class="sxs-lookup"><span data-stu-id="c34f0-239">Unfortunately, the WSAT can only work with local websites.</span></span> <span data-ttu-id="c34f0-240">Proto nelze použít WSAT z pracovní stanice pro správu webu v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="c34f0-240">Therefore, you cannot use the WSAT from your workstation to manage the website in the production environment.</span></span>

<span data-ttu-id="c34f0-241">Dobrou zprávou je, že všechny funkce vystavené poskytované WSAT jsou k dispozici prostřednictvím kódu programu přes rozhraní API rolí; a členství Kromě toho z obrazovky WSAT používat standardní ovládací prvky související s přihlášením technologie ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="c34f0-241">The good news is that all of the functionality exposed provided by the WSAT is available programmatically through the Membership and Roles APIs; furthermore, many of the WSAT screens use the standard ASP.NET Login-related controls.</span></span> <span data-ttu-id="c34f0-242">Stručně řečeno můžete přidat stránky technologie ASP.NET na web, který nabízí možnosti správy potřeby.</span><span class="sxs-lookup"><span data-stu-id="c34f0-242">In short, you can add ASP.NET pages to your website that offer the necessary management capabilities.</span></span>

<span data-ttu-id="c34f0-243">Připomínáme, že starší kurz aktualizovali webovou aplikaci recenzí zahrnout `~/Admin` složky a tato složka není nakonfigurovaná a Povolit jenom uživatelé v roli správce.</span><span class="sxs-lookup"><span data-stu-id="c34f0-243">Recall that an earlier tutorial updated the Book Reviews web application to include an `~/Admin` folder, and this folder has been configured to only allow users in the Admin role.</span></span> <span data-ttu-id="c34f0-244">Po přidání na stránku k této složce s názvem `CreateAccount.aspx` z které správce může vytvořit nový uživatelský účet.</span><span class="sxs-lookup"><span data-stu-id="c34f0-244">I added a page to that folder named `CreateAccount.aspx` from which an administrator can create a new user account.</span></span> <span data-ttu-id="c34f0-245">Tato stránka používá ovládacím prvku CreateUserWizard zobrazit uživatelské rozhraní a back-end logiku pro vytvoření nového uživatelského účtu.</span><span class="sxs-lookup"><span data-stu-id="c34f0-245">This page uses the CreateUserWizard control to display the user interface and backend logic for creating a new user account.</span></span> <span data-ttu-id="c34f0-246">Jaké další možnosti, s jsem si přizpůsobila tak ovládacího prvku zahrnout zaškrtávací políčko, zda se nový uživatel by měl být také přidáni do role správce (viz obrázek 5).</span><span class="sxs-lookup"><span data-stu-id="c34f0-246">What s more, I customized the control to include a CheckBox that prompts whether the new user should also be added to the Admin role (see Figure 5).</span></span> <span data-ttu-id="c34f0-247">Stačí nepatrné práce můžete vytvořit vlastní sadu stránek, který implementuje uživatelů a rolí souvisejících se správou úkolů, které by jinak poskytované WSAT.</span><span class="sxs-lookup"><span data-stu-id="c34f0-247">With a little bit of work you can build a custom set of pages that implements the user and role management-related tasks that would otherwise be provided by the WSAT.</span></span>

> [!NOTE]
> <span data-ttu-id="c34f0-248">Pro další informace o použití rozhraní API rolí a členství spolu s ovládacích prvků technologie ASP.NET související s přihlášením, nezapomeňte si přečíst Moje [ *kurzy o zabezpečení webu*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="c34f0-248">For more information on using the Membership and Roles APIs along with the Login-related ASP.NET Web controls, be sure to read my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span> <span data-ttu-id="c34f0-249">Další informace o přizpůsobení ovládacího prvku CreateUserWizard najdete [ *vytváření uživatelských účtů* ](../../older-versions-security/membership/creating-user-accounts-cs.md) a [ *ukládání Další informace o uživateli* ](../../older-versions-security/membership/storing-additional-user-information-cs.md) kurzy nebo rezervace [ *Erich Peterson* ](http://www.erichpeterson.com/) článku s [ *přizpůsobení ovládacího prvku CreateUserWizard* ](http://aspnet.4guysfromrolla.com/articles/070506-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="c34f0-249">For more on customizing the CreateUserWizard control refer to the [*Creating User Accounts*](../../older-versions-security/membership/creating-user-accounts-cs.md) and [*Storing Additional User Information*](../../older-versions-security/membership/storing-additional-user-information-cs.md) tutorials, or check out [*Erich Peterson*](http://www.erichpeterson.com/) s article, [*Customizing the CreateUserWizard Control*](http://aspnet.4guysfromrolla.com/articles/070506-1.aspx).</span></span>


<span data-ttu-id="c34f0-250">[![Správci mohou vytvářet nové uživatelské účty](configuring-a-website-that-uses-application-services-cs/_static/image14.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image13.jpg)</span><span class="sxs-lookup"><span data-stu-id="c34f0-250">[![Administrators Can Create New User Accounts](configuring-a-website-that-uses-application-services-cs/_static/image14.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image13.jpg)</span></span>

<span data-ttu-id="c34f0-251">**Obrázek 5**: Správci mohou vytvářet nové uživatelské účty ([kliknutím ji zobrazíte obrázek v plné velikosti](configuring-a-website-that-uses-application-services-cs/_static/image15.jpg))</span><span class="sxs-lookup"><span data-stu-id="c34f0-251">**Figure 5**: Administrators Can Create New User Accounts ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image15.jpg))</span></span>


<span data-ttu-id="c34f0-252">Pokud je nutné úplné funkce aplikace WSAT rezervaci [ *se zajištěním provozu svůj vlastní nástroj pro správu webu*](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx), ve které autor Dan Clem vás provede procesem vytváření vlastního nástroje WSAT jako.</span><span class="sxs-lookup"><span data-stu-id="c34f0-252">If you need the full functionality of the WSAT check out [*Rolling Your Own Web Site Administration Tool*](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx), in which author Dan Clem walks through the process of building a custom WSAT-like tool.</span></span> <span data-ttu-id="c34f0-253">DaN sdílené složky zdrojového kódu s jeho aplikace (v jazyce C#) a poskytuje podrobné pokyny pro přidání do vašeho prostředí webu.</span><span class="sxs-lookup"><span data-stu-id="c34f0-253">Dan shares his application s source code (in C#) and provides step-by-step instructions for adding it to your hosted website.</span></span>

## <a name="summary"></a><span data-ttu-id="c34f0-254">Souhrn</span><span class="sxs-lookup"><span data-stu-id="c34f0-254">Summary</span></span>

<span data-ttu-id="c34f0-255">Při nasazení webové aplikace, která používá implementace databáze aplikace služby nutné nejdříve zkontrolovat, zda má databáze produkční požadavku databázových objektů.</span><span class="sxs-lookup"><span data-stu-id="c34f0-255">When deploying a web application that uses the application services database implementation you must first ensure that the production database has the requisite database objects.</span></span> <span data-ttu-id="c34f0-256">Tyto objekty lze přidat pomocí technik popsaných v *nasazení databáze* kurz; případně můžete použít `aspnet_regsql.exe` nástroj, jako jsme viděli v tomto kurzu.</span><span class="sxs-lookup"><span data-stu-id="c34f0-256">These objects can be added using the techniques discussed in the *Deploying a Database* tutorial; alternatively, you can use the `aspnet_regsql.exe` tool, as we saw in this tutorial.</span></span> <span data-ttu-id="c34f0-257">Další výzvy jsme nakousli center kolem název aplikace, které se používá ve vývojovém a produkčním prostředí (což je důležité, pokud chcete, aby uživatelé a role vytvořené ve vývojovém prostředí platný v produkčním prostředí) a techniky pro synchronizaci Správa uživatelů a rolí v provozním prostředí.</span><span class="sxs-lookup"><span data-stu-id="c34f0-257">Other challenges we touched on center around synchronizing the application name used in the development and production environments (which is important if you want users and roles created in the development environment to be valid on production) and techniques for managing the users and roles in the production environment.</span></span>

<span data-ttu-id="c34f0-258">Všechno nejlepší programování!</span><span class="sxs-lookup"><span data-stu-id="c34f0-258">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="c34f0-259">Další čtení</span><span class="sxs-lookup"><span data-stu-id="c34f0-259">Further Reading</span></span>

<span data-ttu-id="c34f0-260">Další informace o tématech, které jsou popsané v tomto kurzu najdete na následujících odkazech:</span><span class="sxs-lookup"><span data-stu-id="c34f0-260">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="c34f0-261">*Nástroj pro registraci serveru SQL technologie ASP.NET (aspnet_regsql.exe)*</span><span class="sxs-lookup"><span data-stu-id="c34f0-261">*ASP.NET SQL Server Registration Tool (aspnet_regsql.exe)*</span></span>](https://msdn.microsoft.com/library/ms229862.aspx)
- [<span data-ttu-id="c34f0-262">*Vytváří se databáze aplikace služby pro SQL Server*</span><span class="sxs-lookup"><span data-stu-id="c34f0-262">*Creating the Application Services Database for SQL Server*</span></span>](https://msdn.microsoft.com/library/x28wfk74.aspx)
- [<span data-ttu-id="c34f0-263">*Vytvoření schématu členství v SQL serveru*</span><span class="sxs-lookup"><span data-stu-id="c34f0-263">*Creating the Membership Schema in SQL Server*</span></span>](../../older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs.md)
- [<span data-ttu-id="c34f0-264">*Zkoumání s členství technologie ASP.NET, role a profilu*</span><span class="sxs-lookup"><span data-stu-id="c34f0-264">*Examining ASP.NET s Membership, Roles, and Profile*</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="c34f0-265">*Vlastní nástroje pro správu webu se zajištěním provozu*</span><span class="sxs-lookup"><span data-stu-id="c34f0-265">*Rolling Your Own Web Site Administration Tool*</span></span>](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)
- [<span data-ttu-id="c34f0-266">*Kurzy zabezpečení webu*</span><span class="sxs-lookup"><span data-stu-id="c34f0-266">*Website Security Tutorials*</span></span>](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md)
- [<span data-ttu-id="c34f0-267">*Přehled nástroje pro správu webu*</span><span class="sxs-lookup"><span data-stu-id="c34f0-267">*Web Site Administration Tool Overview*</span></span>](https://msdn.microsoft.com/library/yy40ytx0.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="c34f0-268">[Předchozí](configuring-the-production-web-application-to-use-the-production-database-cs.md)
> [další](strategies-for-database-development-and-deployment-cs.md)</span><span class="sxs-lookup"><span data-stu-id="c34f0-268">[Previous](configuring-the-production-web-application-to-use-the-production-database-cs.md)
[Next](strategies-for-database-development-and-deployment-cs.md)</span></span>
