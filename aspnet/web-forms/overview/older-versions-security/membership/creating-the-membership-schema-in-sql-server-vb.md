---
uid: web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
title: Vytvoření schématu členství v SQL serveru (VB) | Dokumentace Microsoftu
author: rick-anderson
description: V tomto kurzu se spustí prozkoumáním techniky pro přidání nezbytné schématu do databáze, aby bylo možné používat SqlMembershipProvider. Pod jsme wi...
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/18/2008
ms.topic: article
ms.assetid: 112a674d-716f-41a6-99b8-4074d65a54c0
ms.technology: dotnet-webforms
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
msc.type: authoredcontent
ms.openlocfilehash: 6fe5ab7e2748a7502f47cb29ecc0b93b6cb07d6b
ms.sourcegitcommit: 953ff9ea4369f154d6fd0239599279ddd3280009
ms.translationtype: HT
ms.contentlocale: cs-CZ
ms.lasthandoff: 07/03/2018
ms.locfileid: "37396985"
---
<a name="creating-the-membership-schema-in-sql-server-vb"></a><span data-ttu-id="0fa0a-104">Vytvoření schématu členství v SQL serveru (VB)</span><span class="sxs-lookup"><span data-stu-id="0fa0a-104">Creating the Membership Schema in SQL Server (VB)</span></span>
====================
<span data-ttu-id="0fa0a-105">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="0fa0a-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="0fa0a-106">[Stáhněte si kód](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_VB.zip) nebo [stahovat PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="0fa0a-106">[Download Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_VB.zip) or [Download PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_vb.pdf)</span></span>

> <span data-ttu-id="0fa0a-107">V tomto kurzu se spustí prozkoumáním techniky pro přidání nezbytné schématu do databáze, aby bylo možné používat SqlMembershipProvider.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-107">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the SqlMembershipProvider.</span></span> <span data-ttu-id="0fa0a-108">Pod budeme zkoumat klíče tabulky ve schématu a diskutovat o jejím účelu a důležitosti.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-108">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="0fa0a-109">V tomto kurzu končí podívat, jak zjistit, které poskytovatel by měl použít členství v rámci aplikace ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-109">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>


## <a name="introduction"></a><span data-ttu-id="0fa0a-110">Úvod</span><span class="sxs-lookup"><span data-stu-id="0fa0a-110">Introduction</span></span>

<span data-ttu-id="0fa0a-111">Předchozí dva kurzy prozkoumat pomocí ověřování pomocí formulářů k identifikaci návštěvníků webu.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-111">The previous two tutorials examined using forms authentication to identify website visitors.</span></span> <span data-ttu-id="0fa0a-112">Rámce ověření formuláře usnadňuje vývojářům pro přihlášení uživatele na webu a nezapomeňte napříč návštěv stránky prostřednictvím lístků pro ověřování.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-112">The forms authentication framework makes it easy for developers to log a user into a website and to remember them across page visits through the use of authentication tickets.</span></span> <span data-ttu-id="0fa0a-113">`FormsAuthentication` Třída obsahuje metody pro generování-the-ticket a přidáním souborů cookie pomocí nastavení návštěvníka.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-113">The `FormsAuthentication` class includes methods for generating the ticket and adding it to the visitor's cookies.</span></span> <span data-ttu-id="0fa0a-114">`FormsAuthenticationModule` Kontroluje všechny příchozí požadavky a, uživatelům se platný ověřovací lístek, vytvoří a přidruží `GenericPrincipal` a `FormsIdentity` objektu s aktuálním požadavkem.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-114">The `FormsAuthenticationModule` examines all incoming requests and, for those with a valid authentication ticket, creates and associates a `GenericPrincipal` and a `FormsIdentity` object with the current request.</span></span> <span data-ttu-id="0fa0a-115">Ověřování pomocí formulářů je pouze mechanismus pro poskytování ověřovací lístek pro návštěvníka při přihlašování a na následné žádosti, analýze tento lístek určit identitu uživatele.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-115">Forms authentication is merely a mechanism for granting an authentication ticket to a visitor when logging in and, on subsequent requests, parsing that ticket to determine the user's identity.</span></span> <span data-ttu-id="0fa0a-116">Pro webovou aplikaci pro podporu uživatelských účtů ještě musíme implementovat úložiště uživatele a přidat funkci do ověřit přihlašovací údaje, registrovat nové uživatele a velkého počtu další úlohy související s účtem uživatele.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-116">For a web application to support user accounts, we still need to implement a user store and add functionality to validate credentials, register new users, and the myriad of other user account-related tasks.</span></span>

<span data-ttu-id="0fa0a-117">Před ASP.NET 2.0 vývojáři byli hook pro implementaci všechny tyto úlohy související s účtem uživatele.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-117">Prior to ASP.NET 2.0, developers were on the hook for implementing all of these user account-related tasks.</span></span> <span data-ttu-id="0fa0a-118">Naštěstí tým ASP.NET rozpoznán tohoto nedostatku a zavedl se členství v rámci s prostředím ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-118">Fortunately the ASP.NET team recognized this shortcoming and introduced the Membership framework with ASP.NET 2.0.</span></span> <span data-ttu-id="0fa0a-119">Členství v rámci je sada tříd v rozhraní .NET Framework, které poskytují programový rozhraní pro provádění úlohy související s účtem uživatele core.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-119">The Membership framework is a set of classes in the .NET Framework that provide a programmatic interface for accomplishing core user account-related tasks.</span></span> <span data-ttu-id="0fa0a-120">Toto rozhraní je vytvořeným na základě [modelu poskytovatele](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), které vývojářům umožňuje pružný vlastní implementace standardizované rozhraní API.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-120">This framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which allows developers to plug a customized implementation into a standardized API.</span></span>

<span data-ttu-id="0fa0a-121">Jak je popsáno v <a id="Tutorial1"> </a> [ *Základy zabezpečení a podpora ASP.NET* ](../introduction/security-basics-and-asp-net-support-vb.md) kurzu rozhraní .NET Framework se dodává s dvě předdefinované zprostředkovatele členství: [ `ActiveDirectoryMembershipProvider` ](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) a [ `SqlMembershipProvider` ](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span><span class="sxs-lookup"><span data-stu-id="0fa0a-121">As discussed in the <a id="Tutorial1"></a>[*Security Basics and ASP.NET Support*](../introduction/security-basics-and-asp-net-support-vb.md) tutorial, the .NET Framework ships with two built-in Membership providers: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) and [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span></span> <span data-ttu-id="0fa0a-122">Jak již název napovídá, `SqlMembershipProvider` používá databázi serveru Microsoft SQL Server jako úložiště uživatele.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-122">As its name implies, the `SqlMembershipProvider` uses a Microsoft SQL Server database as the user store.</span></span> <span data-ttu-id="0fa0a-123">Chcete-li použít tento poskytovatel v aplikaci, potřebujeme sdělte poskytovateli jaké databáze pro použití jako úložiště.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-123">In order to use this provider in an application, we need to tell the provider what database to use as the store.</span></span> <span data-ttu-id="0fa0a-124">Jak může Představte si, `SqlMembershipProvider` očekává, že uživatel databáze úložiště má určitá databázových tabulek, zobrazení a uložených procedur.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-124">As you might imagine, the `SqlMembershipProvider` expects the user store database to have certain database tables, views, and stored procedures.</span></span> <span data-ttu-id="0fa0a-125">Potřebujeme přidat tohle schéma očekávané k vybrané databázi.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-125">We need to add this expected schema to the selected database.</span></span>

<span data-ttu-id="0fa0a-126">V tomto kurzu začíná tím, že kontroluje techniky pro přidání nezbytné schéma do databáze, chcete-li použít `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-126">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the `SqlMembershipProvider`.</span></span> <span data-ttu-id="0fa0a-127">Pod budeme zkoumat klíče tabulky ve schématu a diskutovat o jejím účelu a důležitosti.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-127">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="0fa0a-128">V tomto kurzu končí podívat, jak zjistit, které poskytovatel by měl použít členství v rámci aplikace ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-128">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

<span data-ttu-id="0fa0a-129">Pusťme se do práce!</span><span class="sxs-lookup"><span data-stu-id="0fa0a-129">Let's get started!</span></span>

## <a name="step-1-deciding-where-to-place-the-user-store"></a><span data-ttu-id="0fa0a-130">Krok 1: Rozhodování, kam umístit Store uživatele</span><span class="sxs-lookup"><span data-stu-id="0fa0a-130">Step 1: Deciding Where to Place the User Store</span></span>

<span data-ttu-id="0fa0a-131">Aplikace technologie ASP.NET data jsou obvykle uložena v několik tabulek v databázi.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-131">An ASP.NET application's data is commonly stored in a number of tables in a database.</span></span> <span data-ttu-id="0fa0a-132">Při implementaci `SqlMembershipProvider` schéma databáze jsme musíte rozhodnout, jestli se má umístit schématu členství ve stejné databázi jako data aplikací nebo do alternativní databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-132">When implementing the `SqlMembershipProvider` database schema we must decide whether to place the Membership schema in the same database as the application data or in an alternate database.</span></span>

<span data-ttu-id="0fa0a-133">Můžu jenom doporučit vyhledání schématu členství ve stejné databázi jako data aplikací z následujících důvodů:</span><span class="sxs-lookup"><span data-stu-id="0fa0a-133">I recommend locating the Membership schema in the same database as the application data for the following reasons:</span></span>

- <span data-ttu-id="0fa0a-134">**Udržovatelnost** aplikace, jejichž data zapouzdřena v jedné databázi je lépe pochopit, správě a nasazení než aplikace, která má dvě samostatné databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-134">**Maintainability** � an application whose data is encapsulated in one database is easier to understand, maintain, and deploy than an application that has two separate databases.</span></span>
- <span data-ttu-id="0fa0a-135">**Relační Integrity** vyhledáním tabulky související s členstvím ve stejné databázi jako aplikace tabulky ji je možné navázat [omezení cizího klíče](http://en.wikipedia.org/wiki/Foreign_key) mezi primárních klíčů v Členství související tabulky a tabulky souvisejících aplikací.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-135">**Relational Integrity** � by locating the Membership-related tables in the same database as the application tables it is possible to establish [foreign key constraints](http://en.wikipedia.org/wiki/Foreign_key) between the primary keys in the Membership-related tables and related application tables.</span></span>

<span data-ttu-id="0fa0a-136">Oddělení úložiště a aplikace data uživatele do samostatné databáze pouze dává smysl, pokud máte více aplikací, že každé použití samostatných databází, ale muset sdílejí společné úložiště uživatele.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-136">Decoupling the user store and application data into separate databases only makes sense if you have multiple applications that each use separate databases, but need to share a common user store.</span></span>

### <a name="creating-a-database"></a><span data-ttu-id="0fa0a-137">Vytvoření databáze</span><span class="sxs-lookup"><span data-stu-id="0fa0a-137">Creating a Database</span></span>

<span data-ttu-id="0fa0a-138">Aplikace, kterou jsme se vytváření od druhé části kurzu není potřeba ještě databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-138">The application we have been building since the second tutorial has not yet needed a database.</span></span> <span data-ttu-id="0fa0a-139">Potřebujeme, ale pro úložiště uživatelů.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-139">We need one now, however, for the user store.</span></span> <span data-ttu-id="0fa0a-140">Pojďme vytvořit a pak přidejte do ní schéma vyžadované `SqlMembershipProvider` zprostředkovatele (viz krok 2).</span><span class="sxs-lookup"><span data-stu-id="0fa0a-140">Let's create one and then add to it the schema required by the `SqlMembershipProvider` provider (see Step 2).</span></span>

> [!NOTE]
> <span data-ttu-id="0fa0a-141">V celé této sérii kurzů použijeme [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) databázi pro ukládání tabulky našich aplikací a `SqlMembershipProvider` schématu.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-141">Throughout this tutorial series we will be using a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database to store our application tables and the `SqlMembershipProvider` schema.</span></span> <span data-ttu-id="0fa0a-142">Toto rozhodnutí bylo dvou důvodů: nejprve z důvodu jeho cena – zdarma – edice Express je nejvíce readably přístupnou verzi systému SQL Server 2005; za druhé, databáze SQL Server 2005 Express Edition je možné použít přímo ve webové aplikaci `App_Data` složky, takže díky balení databáze a webové aplikace společně v jednom souboru ZIP a znovu ji nasadíte bez jakékoli speciální instalační pokyny nebo možnosti konfigurace.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-142">This decision was made for two reasons: first, due to its cost - free - the Express Edition is the most readably accessible version of SQL Server 2005; second, SQL Server 2005 Express Edition databases can be placed directly in the web application's `App_Data` folder, making it a cinch to package the database and web application together in one ZIP file and to redeploy it without any special setup instructions or configuration options.</span></span> <span data-ttu-id="0fa0a-143">Pokud chcete postupovat s námi používáte verzi systému SQL Server Express Edition, můžete.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-143">If you'd prefer to follow along using a non-Express Edition version of SQL Server, feel free.</span></span> <span data-ttu-id="0fa0a-144">Postup je prakticky totožný.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-144">The steps are virtually identical.</span></span> <span data-ttu-id="0fa0a-145">`SqlMembershipProvider` Bude fungovat v žádné verzi systému Microsoft SQL Server 2000 a až schématu.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-145">The `SqlMembershipProvider` schema will work with any version of Microsoft SQL Server 2000 and up.</span></span>

<span data-ttu-id="0fa0a-146">V Průzkumníku řešení klikněte pravým tlačítkem na `App_Data` složce a chcete přidat novou položku.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-146">From the Solution Explorer, right-click on the `App_Data` folder and choose to Add New Item.</span></span> <span data-ttu-id="0fa0a-147">(Pokud se nezobrazí `App_Data` složku ve vašem projektu, klikněte pravým tlačítkem na projekt v Průzkumníku řešení vyberte Přidat složku ASP.NET a vybrat `App_Data`.) Z dialogového okna Přidat novou položku zvolte Přidat novou databázi SQL s názvem `SecurityTutorials.mdf`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-147">(If you do not see an `App_Data` folder in your project, right-click on the project in Solution Explorer, select Add ASP.NET Folder, and pick `App_Data`.) From the Add New Item dialog box, choose to add a new SQL Database named `SecurityTutorials.mdf`.</span></span> <span data-ttu-id="0fa0a-148">V tomto kurzu přidáme `SqlMembershipProvider` schématu pro tuto databázi, v následujících kurzech vytvoříme další tabulky k zaznamenání dat o našich aplikací.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-148">In this tutorial we will add the `SqlMembershipProvider` schema to this database; in subsequent tutorials we will create additional tables to capture our application data.</span></span>


<span data-ttu-id="0fa0a-149">[![Přidat novou databázi SQL s názvem SecurityTutorials.mdf databáze do složky App_Data](creating-the-membership-schema-in-sql-server-vb/_static/image2.png)](creating-the-membership-schema-in-sql-server-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="0fa0a-149">[![Add a New SQL Database Named SecurityTutorials.mdf Database to the App_Data Folder](creating-the-membership-schema-in-sql-server-vb/_static/image2.png)](creating-the-membership-schema-in-sql-server-vb/_static/image1.png)</span></span>

<span data-ttu-id="0fa0a-150">**Obrázek 1**: přidejte nový název databáze SQL `SecurityTutorials.mdf` databáze `App_Data` složky ([kliknutím ji zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="0fa0a-150">**Figure 1**: Add a New SQL Database Named `SecurityTutorials.mdf` Database to the `App_Data` Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image3.png))</span></span>


<span data-ttu-id="0fa0a-151">Přidání databáze do `App_Data` složku automaticky zahrne v zobrazení Průzkumník databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-151">Adding a database to the `App_Data` folder automatically includes it in the Database Explorer view.</span></span> <span data-ttu-id="0fa0a-152">(Ve verzi Express Edition sady Visual Studio, se nazývá Průzkumník databáze v Průzkumníku serveru.) Přejít na Průzkumník databáze a rozbalte právě přidané `SecurityTutorials` databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-152">(In the non-Express Edition version of Visual Studio, the Database Explorer is called the Server Explorer.) Go to the Database Explorer and expand the just-added `SecurityTutorials` database.</span></span> <span data-ttu-id="0fa0a-153">Pokud se nezobrazí Průzkumník databáze na obrazovce, přejděte do zobrazení nabídky a zvolte Průzkumník databáze nebo stiskněte kombinaci kláves Ctrl + Alt + S.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-153">If you do not see the Database Explorer on screen, go to the View menu and choose Database Explorer, or hit Ctrl+Alt+S.</span></span> <span data-ttu-id="0fa0a-154">Obrázek 2 ukazuje, `SecurityTutorials` databáze je prázdná – neobsahuje žádné tabulky, k dispozici žádná zobrazení a žádné uložené procedury.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-154">As Figure 2 shows, the `SecurityTutorials` database is empty - it contains no tables, no views, and no stored procedures.</span></span>


<span data-ttu-id="0fa0a-155">[![SecurityTutorials databáze je aktuálně prázdný](creating-the-membership-schema-in-sql-server-vb/_static/image5.png)](creating-the-membership-schema-in-sql-server-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="0fa0a-155">[![The SecurityTutorials Database is Currently Empty](creating-the-membership-schema-in-sql-server-vb/_static/image5.png)](creating-the-membership-schema-in-sql-server-vb/_static/image4.png)</span></span>

<span data-ttu-id="0fa0a-156">**Obrázek 2**: `SecurityTutorials` databáze je aktuálně prázdný ([kliknutím ji zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="0fa0a-156">**Figure 2**: The `SecurityTutorials` Database is Currently Empty ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image6.png))</span></span>


## <a name="step-2-adding-thesqlmembershipproviderschema-to-the-database"></a><span data-ttu-id="0fa0a-157">Krok 2: Přidání`SqlMembershipProvider`schéma do databáze</span><span class="sxs-lookup"><span data-stu-id="0fa0a-157">Step 2: Adding the`SqlMembershipProvider`Schema to the Database</span></span>

<span data-ttu-id="0fa0a-158">`SqlMembershipProvider` Vyžaduje konkrétní sadu tabulek, zobrazení a uložených procedur nainstalovaný v uživatelské databázi úložiště.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-158">The `SqlMembershipProvider` requires a particular set of tables, views, and stored procedures to be installed in the user store database.</span></span> <span data-ttu-id="0fa0a-159">Tyto objekty požadované databáze můžete přidat pomocí [ `aspnet_regsql.exe` nástroj](https://msdn.microsoft.com/library/ms229862.aspx).</span><span class="sxs-lookup"><span data-stu-id="0fa0a-159">These requisite database objects can be added using the [`aspnet_regsql.exe` tool](https://msdn.microsoft.com/library/ms229862.aspx).</span></span> <span data-ttu-id="0fa0a-160">Tento soubor je umístěn v `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` složky.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-160">This file is located in the `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder.</span></span>

> [!NOTE]
> <span data-ttu-id="0fa0a-161">`aspnet_regsql.exe` Nabízí nástroj pro příkazový řádek a grafické uživatelské rozhraní.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-161">The `aspnet_regsql.exe` tool offers both command line functionality and a graphical user interface.</span></span> <span data-ttu-id="0fa0a-162">Grafické rozhraní je uživatelsky přívětivější a co prozkoumáme v tomto kurzu.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-162">The graphical interface is more user friendly and is what we will examine in this tutorial.</span></span> <span data-ttu-id="0fa0a-163">Rozhraní příkazového řádku je užitečné, když přidání `SqlMembershipProvider` schématu musí být automatické, jako je například sestavení skripty nebo automatizované testování scénářů.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-163">The command line interface is useful when the addition of the `SqlMembershipProvider` schema needs to be automated, such as in build scripts or automated testing scenarios.</span></span>

<span data-ttu-id="0fa0a-164">`aspnet_regsql.exe` Nástroj se používá k přidání nebo odebrání *aplikačními službami ASP.NET* k zadané databázi SQL serveru.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-164">The `aspnet_regsql.exe` tool is used to add or remove *ASP.NET application services* to a specified SQL Server database.</span></span> <span data-ttu-id="0fa0a-165">Zahrnovat schémata pro aplikační služby technologie ASP.NET `SqlMembershipProvider` a `SqlRoleProvider`, spolu s schémata pro zprostředkovatele založený na SQL pro jiná rozhraní ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-165">The ASP.NET application services encompass the schemas for the `SqlMembershipProvider` and `SqlRoleProvider`, along with the schemas for the SQL-based providers for other ASP.NET 2.0 frameworks.</span></span> <span data-ttu-id="0fa0a-166">Potřebujeme pro poskytování informací, které mají dva bity `aspnet_regsql.exe` nástroje:</span><span class="sxs-lookup"><span data-stu-id="0fa0a-166">We need to provide two bits of information to the `aspnet_regsql.exe` tool:</span></span>

- <span data-ttu-id="0fa0a-167">Určuje, zda chcete přidat nebo odebrat aplikace služby a</span><span class="sxs-lookup"><span data-stu-id="0fa0a-167">Whether we want to add or remove application services, and</span></span>
- <span data-ttu-id="0fa0a-168">Databáze, ze kterého chcete přidat nebo odebrat aplikace služby schématu</span><span class="sxs-lookup"><span data-stu-id="0fa0a-168">The database from which to add or remove the application services schema</span></span>

<span data-ttu-id="0fa0a-169">V vás vyzve k zadání databáze, kterou chcete použít, `aspnet_regsql.exe` nástroj dotazem, abychom mohli poskytovat název serveru databáze nachází na zabezpečovací přihlašovací údaje pro připojení k databázi a název databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-169">In prompting for the database to use, the `aspnet_regsql.exe` tool asks us to provide the name of the server the database resides on, the security credentials for connecting to the database, and the database name.</span></span> <span data-ttu-id="0fa0a-170">Pokud použijete jiné - Express edici systému SQL Server, musí už znáte tyto informace, jako je stejná informace, je třeba zadat pomocí připojovacího řetězce při práci s databází přes webové stránky ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-170">If you are using the non-Express Edition of SQL Server, you should already know this information, as it is the same information you must provide through a connection string when working with the database through an ASP.NET web page.</span></span> <span data-ttu-id="0fa0a-171">Určení názvu serveru a databáze při použití v databázi SQL Server 2005 Express Edition `App_Data` složka, ale je trochu složitější.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-171">Determining the server and database name when using a SQL Server 2005 Express Edition database in the `App_Data` folder, however, is a bit more involved.</span></span>

<span data-ttu-id="0fa0a-172">Následující oddíl se zabývá jednoduchý způsob, jak zadat název serveru a databáze pro databázi SQL Server 2005 Express Edition v `App_Data` složky.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-172">The following section examines a straightforward way for specifying the server and database name for a SQL Server 2005 Express Edition database in the `App_Data` folder.</span></span> <span data-ttu-id="0fa0a-173">Pokud nechcete použít SQL Server 2005 Express Edition klidně můžete přeskočit přímo k instalace v části aplikační služby.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-173">If you are not using SQL Server 2005 Express Edition feel free to skip ahead to the Installing the Application Services section.</span></span>

### <a name="determining-the-server-and-database-name-for-a-sql-server-2005-express-edition-database-in-theappdatafolder"></a><span data-ttu-id="0fa0a-174">Určení serveru a název databáze pro databázi SQL Server 2005 Express Edition v`App_Data`složky</span><span class="sxs-lookup"><span data-stu-id="0fa0a-174">Determining the Server and Database Name for a SQL Server 2005 Express Edition Database in the`App_Data`Folder</span></span>

<span data-ttu-id="0fa0a-175">Chcete-li použít `aspnet_regsql.exe` nástroj budeme potřebovat znát název serveru a databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-175">In order to use the `aspnet_regsql.exe` tool we need to know the server and database names.</span></span> <span data-ttu-id="0fa0a-176">Název serveru je `localhost\InstanceName`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-176">The server name is `localhost\InstanceName`.</span></span> <span data-ttu-id="0fa0a-177">Pravděpodobně, *InstanceName* je `SQLExpress`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-177">Most likely, the *InstanceName* is `SQLExpress`.</span></span> <span data-ttu-id="0fa0a-178">Nicméně pokud jste nainstalovali ručně SQL Server 2005 Express Edition (to znamená, že jste nenainstalovali ho automaticky při instalaci sady Visual Studio), je možné, že jste vybrali jiný název instance.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-178">However, if you installed SQL Server 2005 Express Edition manually (that is, you did not install it automatically while installing Visual Studio), then it is possible that you selected a different instance name.</span></span>

<span data-ttu-id="0fa0a-179">Název databáze je o něco trickier určit.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-179">The database name is a bit trickier to determine.</span></span> <span data-ttu-id="0fa0a-180">Databáze ve `App_Data` složky mají obvykle název databáze, která zahrnuje [globálně jedinečný identifikátor](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) spolu se cesta k souboru databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-180">Databases in the `App_Data` folder typically have a database name that includes a [globally unique identifier](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) along with the path to the database file.</span></span> <span data-ttu-id="0fa0a-181">Je třeba určit název této databáze, chcete-li přidat schématu služby aplikací prostřednictvím `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-181">We need to determine this database name in order to add the application services schema through `aspnet_regsql.exe`.</span></span>

<span data-ttu-id="0fa0a-182">Nejjednodušší způsob, jak zjistit název databáze je prozkoumat SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-182">The easiest way to ascertain the database name is to examine it through SQL Server Management Studio.</span></span> <span data-ttu-id="0fa0a-183">SQL Server Management Studio poskytuje grafické rozhraní pro správu databáze systému SQL Server 2005, ale ne dodávají spolu s Express edice systému SQL Server 2005.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-183">SQL Server Management Studio provides a graphical interface for managing SQL Server 2005 databases, but it does not ship with the Express Edition of SQL Server 2005.</span></span> <span data-ttu-id="0fa0a-184">Dobrou zprávou je, že [si můžete stáhnout](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) na bezplatné Express edice systému SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-184">The good news is that [you can download](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) the free Express Edition of SQL Server Management Studio.</span></span>

> [!NOTE]
> <span data-ttu-id="0fa0a-185">Pokud máte také verze nainstalované na pracovní ploše, plnou verzi aplikace Management Studio je pravděpodobně nainstalován systém SQL Server 2005 Express Edition.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-185">If you also have a non-Express Edition version of SQL Server 2005 installed on your desktop then the full version of Management Studio is likely installed.</span></span> <span data-ttu-id="0fa0a-186">Chcete-li zjistit název databáze po stejný postup, jak je uvedeno níže pro edice Express, můžete použít na plnou verzi.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-186">You can use the full version to determine the database name, following the same steps as outlined below for the Express Edition.</span></span>

<span data-ttu-id="0fa0a-187">Začněte tím, že zavření sady Visual Studio k zajištění, že žádné zámky uložené v souboru databáze aplikace Visual Studio zavřená.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-187">Start by closing Visual Studio to ensure that any locks imposed by Visual Studio on the database file are closed.</span></span> <span data-ttu-id="0fa0a-188">V dalším kroku spusťte SQL Server Management Studio a připojte se k `localhost\InstanceName` databáze pro SQL Server 2005 Express Edition.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-188">Next, launch SQL Server Management Studio and connect to the `localhost\InstanceName` database for SQL Server 2005 Express Edition.</span></span> <span data-ttu-id="0fa0a-189">Jak je uvedeno výše, je pravděpodobné, je název instance `SQLExpress`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-189">As noted earlier, chances are the instance name is `SQLExpress`.</span></span> <span data-ttu-id="0fa0a-190">Možnost ověřování vyberte možnost ověřování Windows.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-190">For the Authentication option, select Windows Authentication.</span></span>


<span data-ttu-id="0fa0a-191">[![Připojte se k instanci serveru SQL Server 2005 Express Edition](creating-the-membership-schema-in-sql-server-vb/_static/image8.png)](creating-the-membership-schema-in-sql-server-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="0fa0a-191">[![Connect to the SQL Server 2005 Express Edition Instance](creating-the-membership-schema-in-sql-server-vb/_static/image8.png)](creating-the-membership-schema-in-sql-server-vb/_static/image7.png)</span></span>

<span data-ttu-id="0fa0a-192">**Obrázek 3**: Připojte se k instanci serveru SQL Server 2005 Express Edition ([kliknutím ji zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="0fa0a-192">**Figure 3**: Connect to the SQL Server 2005 Express Edition Instance ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image9.png))</span></span>


<span data-ttu-id="0fa0a-193">Po připojení k instanci SQL serveru 2005 Express Edition, Management Studio zobrazí složek pro databáze, nastavení zabezpečení, objekty serveru a tak dále.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-193">After connecting to the SQL Server 2005 Express Edition instance, Management Studio displays folders for the Databases, the Security settings, the Server Objects, and so on.</span></span> <span data-ttu-id="0fa0a-194">Pokud rozbalíte na kartě databáze bude uvidíte, že `SecurityTutorials.mdf` databáze je *není* zaregistrovaný v instanci databáze – potřebujeme nejprve připojte databázi.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-194">If you expand the Databases tab you will see that the `SecurityTutorials.mdf` database is *not* registered in the database instance - we need to attach the database first.</span></span>

<span data-ttu-id="0fa0a-195">Klikněte pravým tlačítkem na složku databází a v místní nabídce zvolte možnost připojit.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-195">Right-click on the Databases folder and choose Attach from the context menu.</span></span> <span data-ttu-id="0fa0a-196">Zobrazí se dialogové okno Připojit databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-196">This will display the Attach Databases dialog box.</span></span> <span data-ttu-id="0fa0a-197">Zde, klikněte na tlačítko Přidat, přejděte `SecurityTutorials.mdf` databáze a klikněte na tlačítko OK.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-197">From here, click the Add button, browse to the `SecurityTutorials.mdf` database, and click OK.</span></span> <span data-ttu-id="0fa0a-198">Obrázek 4 ukazuje dialogové okno Připojit databáze po `SecurityTutorials.mdf` byla vybrána databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-198">Figure 4 shows the Attach Databases dialog box after the `SecurityTutorials.mdf` database has been selected.</span></span> <span data-ttu-id="0fa0a-199">Obrázek 5 ukazuje Průzkumník objektů systému Management Studio po databáze byl úspěšně připojen.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-199">Figure 5 shows Management Studio's Object Explorer after the database has been successfully attached.</span></span>


<span data-ttu-id="0fa0a-200">[![Připojte databázi SecurityTutorials.mdf](creating-the-membership-schema-in-sql-server-vb/_static/image11.png)](creating-the-membership-schema-in-sql-server-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="0fa0a-200">[![Attach the SecurityTutorials.mdf Database](creating-the-membership-schema-in-sql-server-vb/_static/image11.png)](creating-the-membership-schema-in-sql-server-vb/_static/image10.png)</span></span>

<span data-ttu-id="0fa0a-201">**Obrázek 4**: připojit `SecurityTutorials.mdf` databáze ([kliknutím ji zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="0fa0a-201">**Figure 4**: Attach the `SecurityTutorials.mdf` Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image12.png))</span></span>


<span data-ttu-id="0fa0a-202">[![Databáze SecurityTutorials.mdf zobrazí ve složce databáze](creating-the-membership-schema-in-sql-server-vb/_static/image14.png)](creating-the-membership-schema-in-sql-server-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="0fa0a-202">[![The SecurityTutorials.mdf Database Appears in the Databases Folder](creating-the-membership-schema-in-sql-server-vb/_static/image14.png)](creating-the-membership-schema-in-sql-server-vb/_static/image13.png)</span></span>

<span data-ttu-id="0fa0a-203">**Obrázek 5**: `SecurityTutorials.mdf` databáze se zobrazí ve složce databáze ([kliknutím ji zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-vb/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="0fa0a-203">**Figure 5**: The `SecurityTutorials.mdf` Database Appears in the Databases Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image15.png))</span></span>


<span data-ttu-id="0fa0a-204">Jak je vidět na obrázku 5, `SecurityTutorials.mdf` databáze má raději abstruse název.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-204">As Figure 5 shows, the `SecurityTutorials.mdf` database has a rather abstruse name.</span></span> <span data-ttu-id="0fa0a-205">Pojďme jej změnit na víc zapamatovatelnou (a usnadňuje zadejte) název.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-205">Let's change it to a more memorable (and easier to type) name.</span></span> <span data-ttu-id="0fa0a-206">Klikněte pravým tlačítkem na databázi, zvolte Přejmenovat v místní nabídce a přejmenujte ji `SecurityTutorialsDatabase`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-206">Right-click on the database, choose Rename from the context menu, and rename it `SecurityTutorialsDatabase`.</span></span> <span data-ttu-id="0fa0a-207">Nezmění se název souboru, pouze název databáze slouží k identifikaci k systému SQL Server.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-207">This does not change the filename, just the name the database uses to identify itself to SQL Server.</span></span>


<span data-ttu-id="0fa0a-208">[![Přejmenování databáze SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-vb/_static/image17.png)](creating-the-membership-schema-in-sql-server-vb/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="0fa0a-208">[![Rename the Database to SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-vb/_static/image17.png)](creating-the-membership-schema-in-sql-server-vb/_static/image16.png)</span></span>

<span data-ttu-id="0fa0a-209">**Obrázek 6**: databáze, kterou chcete přejmenovat `SecurityTutorialsDatabase`([kliknutím ji zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-vb/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="0fa0a-209">**Figure 6**: Rename the Database to `SecurityTutorialsDatabase`([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image18.png))</span></span>


<span data-ttu-id="0fa0a-210">V tuto chvíli jsme znát název serveru a databáze pro `SecurityTutorials.mdf` databázového souboru: `localhost\InstanceName` a `SecurityTutorialsDatabase`v uvedeném pořadí.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-210">At this point we know the server and database names for the `SecurityTutorials.mdf` database file: `localhost\InstanceName` and `SecurityTutorialsDatabase`, respectively.</span></span> <span data-ttu-id="0fa0a-211">Máme teď připravena k instalaci aplikace služeb prostřednictvím `aspnet_regsql.exe` nástroj.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-211">We are now ready to install the application services through the `aspnet_regsql.exe` tool.</span></span>

### <a name="installing-the-application-services"></a><span data-ttu-id="0fa0a-212">Instalace aplikační služby</span><span class="sxs-lookup"><span data-stu-id="0fa0a-212">Installing the Application Services</span></span>

<span data-ttu-id="0fa0a-213">Ke spuštění `aspnet_regsql.exe` nástroj, přejděte do nabídky start a klikněte na tlačítko spustit.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-213">To launch the `aspnet_regsql.exe` tool, go to the start menu and choose Run.</span></span> <span data-ttu-id="0fa0a-214">Zadejte `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` do textového pole a klikněte na tlačítko OK.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-214">Enter `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` into the textbox and click OK.</span></span> <span data-ttu-id="0fa0a-215">Alternativně můžete použít Windows Explorer k podrobnostem a příslušné složky a dvojím kliknutím `aspnet_regsql.exe` souboru.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-215">Alternatively, you can use Windows Explorer to drill down to the appropriate folder and double-click the `aspnet_regsql.exe` file.</span></span> <span data-ttu-id="0fa0a-216">Kterýkoliv přístup bude net stejné výsledky.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-216">Either approach will net the same results.</span></span>

<span data-ttu-id="0fa0a-217">Spuštění `aspnet_regsql.exe` grafickém uživatelském rozhraní Průvodce instalací SQL serveru ASP.NET se spustí nástroj bez argumentů příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-217">Running the `aspnet_regsql.exe` tool without any command line arguments launches the ASP.NET SQL Server Setup Wizard graphical user interface.</span></span> <span data-ttu-id="0fa0a-218">Průvodce umožňuje snadno přidat nebo odebrat aplikačních služeb technologie ASP.NET v zadané databázi.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-218">The wizard makes it easy to add or remove the ASP.NET application services on a specified database.</span></span> <span data-ttu-id="0fa0a-219">První obrazovce průvodce, je znázorněno na obrázku 7, jsou popsány nástroje.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-219">The first screen of the wizard, shown in Figure 7, describes the purpose of the tool.</span></span>


<span data-ttu-id="0fa0a-220">[![Slouží k přidání schématu členství využívá Průvodce instalace serveru SQL technologie ASP.NET](creating-the-membership-schema-in-sql-server-vb/_static/image20.png)](creating-the-membership-schema-in-sql-server-vb/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="0fa0a-220">[![Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema](creating-the-membership-schema-in-sql-server-vb/_static/image20.png)](creating-the-membership-schema-in-sql-server-vb/_static/image19.png)</span></span>

<span data-ttu-id="0fa0a-221">**Obrázek 7**: použijte ASP.NET SQL Server nastavení Průvodce provede přidání schématu členství ([kliknutím ji zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-vb/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="0fa0a-221">**Figure 7**: Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image21.png))</span></span>


<span data-ttu-id="0fa0a-222">Druhý krok v Průvodci nám zeptá, zda chceme přidat aplikační služby nebo je odeberte.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-222">The second step in the wizard asks us whether we want to add the application services or remove them.</span></span> <span data-ttu-id="0fa0a-223">Protože chceme přidat tabulek, zobrazení a uložených procedur, které jsou nezbytné pro `SqlMembershipProvider`, zvolte Konfigurovat systém SQL Server pro aplikace možnost služby.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-223">Since we want to add the tables, views, and stored procedures necessary for the `SqlMembershipProvider`, choose the Configure SQL Server for application services option.</span></span> <span data-ttu-id="0fa0a-224">Pokud chcete odebrat toto schéma z databáze, později, spusťte znovu tohoto průvodce, ale místo toho zvolit informace o službách aplikací odebrat z existující možnost databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-224">Later, if you want to remove this schema from your database, re-run this wizard, but instead choose the Remove application services information from an existing database option.</span></span>


<span data-ttu-id="0fa0a-225">[![Zvolte konfiguraci serveru SQL pro možnost aplikace služby](creating-the-membership-schema-in-sql-server-vb/_static/image23.png)](creating-the-membership-schema-in-sql-server-vb/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="0fa0a-225">[![Choose the Configure SQL Server for Application Services Option](creating-the-membership-schema-in-sql-server-vb/_static/image23.png)](creating-the-membership-schema-in-sql-server-vb/_static/image22.png)</span></span>

<span data-ttu-id="0fa0a-226">**Obrázek 8**: Zvolte konfigurovat systém SQL Server pro aplikaci služby možnost ([kliknutím ji zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-vb/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="0fa0a-226">**Figure 8**: Choose the Configure SQL Server for Application Services Option ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image24.png))</span></span>


<span data-ttu-id="0fa0a-227">Třetí krok zobrazí výzvu k zadání informace o databázi: název serveru, informace o ověřování a název databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-227">The third step prompts for the database information: the server name, authentication information, and the database name.</span></span> <span data-ttu-id="0fa0a-228">Pokud jste postupovali podle spolu se v tomto kurzu a přidali `SecurityTutorials.mdf` databáze `App_Data`, připojit ho k `localhost\InstanceName`a přejmenoval jej na `SecurityTutorialsDatabase`, pak použijte následující hodnoty:</span><span class="sxs-lookup"><span data-stu-id="0fa0a-228">If you have been following along with this tutorial and have added the `SecurityTutorials.mdf` database to `App_Data`, attached it to `localhost\InstanceName`, and renamed it to `SecurityTutorialsDatabase`, then use the following values:</span></span>

- <span data-ttu-id="0fa0a-229">Server: `localhost\InstanceName`</span><span class="sxs-lookup"><span data-stu-id="0fa0a-229">Server: `localhost\InstanceName`</span></span>
- <span data-ttu-id="0fa0a-230">Ověřování systému Windows</span><span class="sxs-lookup"><span data-stu-id="0fa0a-230">Windows authentication</span></span>
- <span data-ttu-id="0fa0a-231">Databáze: `SecurityTutorialsDatabase`</span><span class="sxs-lookup"><span data-stu-id="0fa0a-231">Database: `SecurityTutorialsDatabase`</span></span>


<span data-ttu-id="0fa0a-232">[![Zadejte informace o databázi](creating-the-membership-schema-in-sql-server-vb/_static/image26.png)](creating-the-membership-schema-in-sql-server-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="0fa0a-232">[![Enter the Database Information](creating-the-membership-schema-in-sql-server-vb/_static/image26.png)](creating-the-membership-schema-in-sql-server-vb/_static/image25.png)</span></span>

<span data-ttu-id="0fa0a-233">**Obrázek 9**: Zadejte informace o databázi ([kliknutím ji zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-vb/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="0fa0a-233">**Figure 9**: Enter the Database Information ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image27.png))</span></span>


<span data-ttu-id="0fa0a-234">Jakmile zadáte informace o databázi, klikněte na tlačítko Další.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-234">After entering the database information, click Next.</span></span> <span data-ttu-id="0fa0a-235">V posledním kroku jsou shrnuté kroky, které se mají provést.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-235">The final step summarizes the steps that will be taken.</span></span> <span data-ttu-id="0fa0a-236">Instalace aplikační služby a pak dokončete průvodce, klikněte na tlačítko Další.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-236">Click Next to install the application services and then Finish to complete the wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="0fa0a-237">Pokud jste použili Management Studio a připojte databázi přejmenujte soubor databáze, je potřeba odpojit databázi a před otevřením sady Visual Studio zavřít Management Studio.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-237">If you used Management Studio to attach the database and rename the database file, be sure to detach the database and close Management Studio before reopening Visual Studio.</span></span> <span data-ttu-id="0fa0a-238">Chcete-li odpojit `SecurityTutorialsDatabase` databáze, klikněte pravým tlačítkem na název databáze a v nabídce úlohy zvolte Odpojit.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-238">To detach the `SecurityTutorialsDatabase` database, right-click on the database name and, from the Tasks menu, choose Detach.</span></span>

<span data-ttu-id="0fa0a-239">Po dokončení Průvodce vraťte se do sady Visual Studio a přejděte do Průzkumníka databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-239">Upon completion of the wizard, return to Visual Studio and navigate to the Database Explorer.</span></span> <span data-ttu-id="0fa0a-240">Rozbalte složku tabulky.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-240">Expand the Tables folder.</span></span> <span data-ttu-id="0fa0a-241">Měli byste vidět řadu tabulek, jejichž názvy začínají předponou `aspnet_`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-241">You should see a series of tables whose names start with the prefix `aspnet_`.</span></span> <span data-ttu-id="0fa0a-242">Obdobně širokou škálu zobrazení a uložených procedur najdete ve složkách zobrazení a uložených procedur.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-242">Likewise, a variety of views and stored procedures can be found under the Views and Stored Procedures folders.</span></span> <span data-ttu-id="0fa0a-243">Tyto databázové objekty tvoří schéma služby aplikace.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-243">These database objects make up the application services schema.</span></span> <span data-ttu-id="0fa0a-244">Prozkoumáme databázových objektů konkrétní členství a role v kroku 3.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-244">We will examine the membership- and role-specific database objects in Step 3.</span></span>


<span data-ttu-id="0fa0a-245">[![Celou řadu tabulek, zobrazení a uložených procedur jsou přidané do databáze](creating-the-membership-schema-in-sql-server-vb/_static/image29.png)](creating-the-membership-schema-in-sql-server-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="0fa0a-245">[![A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database](creating-the-membership-schema-in-sql-server-vb/_static/image29.png)](creating-the-membership-schema-in-sql-server-vb/_static/image28.png)</span></span>

<span data-ttu-id="0fa0a-246">**Obrázek 10**: A různých tabulek, zobrazení a uložených procedur byly přidány do databáze ([kliknutím ji zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-vb/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="0fa0a-246">**Figure 10**: A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image30.png))</span></span>


> [!NOTE]
> <span data-ttu-id="0fa0a-247">`aspnet_regsql.exe` Grafické uživatelské rozhraní nástroje instaluje schéma služby celé aplikace.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-247">The `aspnet_regsql.exe` tool's graphical user interface installs the entire application services schema.</span></span> <span data-ttu-id="0fa0a-248">Ale při provádění `aspnet_regsql.exe` z příkazového řádku můžete určit, jaké konkrétní aplikačních služeb součásti k instalaci (nebo odebrání).</span><span class="sxs-lookup"><span data-stu-id="0fa0a-248">But when executing `aspnet_regsql.exe` from the command-line you can specify what particular application services components to install (or remove).</span></span> <span data-ttu-id="0fa0a-249">Proto pokud chcete přidat pouze tabulky, zobrazení a uložené procedury, které jsou nezbytné pro `SqlMembershipProvider` a `SqlRoleProvider` poskytovatelů, spouštění `aspnet_regsql.exe` z příkazového řádku.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-249">Therefore, if you want to add just the tables, views, and stored procedures necessary for the `SqlMembershipProvider` and `SqlRoleProvider` providers, run `aspnet_regsql.exe` from the command-line.</span></span> <span data-ttu-id="0fa0a-250">Alternativně můžete spustit ručně příslušnou podmnožinu jazyka T-SQL vytvořit skripty používané `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-250">Alternatively, you can manually run the appropriate subset of T-SQL create scripts used by `aspnet_regsql.exe`.</span></span> <span data-ttu-id="0fa0a-251">Tyto skripty jsou umístěny v `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` složky s názvy jako `InstallCommon.sql`, `InstallMembership.sql`, `InstallRoles.sql`, `InstallProfile.sql`, `InstallSqlState.sql`, a tak dále.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-251">These scripts are located in the `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder with names like `InstallCommon.sql`, `InstallMembership.sql`, `InstallRoles.sql`, `InstallProfile.sql`, `InstallSqlState.sql`, and so on.</span></span>

<span data-ttu-id="0fa0a-252">V tuto chvíli jsme vytvořili databázové objekty vyžadované `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-252">At this point we have created the database objects needed by the `SqlMembershipProvider`.</span></span> <span data-ttu-id="0fa0a-253">Však stále potřebujeme dáte pokyn, aby rozhraní členství, by měl použít `SqlMembershipProvider` (oproti, Řekněme, že, `ActiveDirectoryMembershipProvider`) a že `SqlMembershipProvider` používejte `SecurityTutorials` databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-253">However, we still need to instruct the Membership framework that it should use the `SqlMembershipProvider` (versus, say, the `ActiveDirectoryMembershipProvider`) and that the `SqlMembershipProvider` should use the `SecurityTutorials` database.</span></span> <span data-ttu-id="0fa0a-254">Podíváme se na určení zprostředkovatele, používat a jak upravit vybraného poskytovatele nastavení v kroku 4.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-254">We'll look at how to specify what provider to use and how to customize the selected provider's settings in Step 4.</span></span> <span data-ttu-id="0fa0a-255">Ale nejprve se podívejme se podrobněji na databázové objekty, které se právě vytvořili.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-255">But first, let's take a deeper look at the database objects that were just created.</span></span>

## <a name="step-3-a-look-at-the-schemas-core-tables"></a><span data-ttu-id="0fa0a-256">Krok 3: Podívejte se na základní tabulky schématu</span><span class="sxs-lookup"><span data-stu-id="0fa0a-256">Step 3: A Look at the Schema's Core Tables</span></span>

<span data-ttu-id="0fa0a-257">Při práci s rozhraními členství a rolí v aplikaci ASP.NET, podrobnosti implementace jsou zapouzdřeny zprostředkovatelem.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-257">When working with the Membership and Roles frameworks in an ASP.NET application, the implementation details are encapsulated by the provider.</span></span> <span data-ttu-id="0fa0a-258">V budoucích kurzech jsme se s těmito rozhraními prostřednictvím rozhraní .NET Framework rozhraní `Membership` a `Roles` třídy.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-258">In future tutorials we will interface with these frameworks via the .NET Framework's `Membership` and `Roles` classes.</span></span> <span data-ttu-id="0fa0a-259">Při použití těchto rozhraní API vysoké úrovně jsme nemusíte sami se týkají se podrobnosti nižší úrovně, například jaké dotazy se spouštějí nebo které tabulky se změnil `SqlMembershipProvider` a `SqlRoleProvider`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-259">When using these high-level APIs we do not need to concern ourselves with the low-level details, like what queries are executed or what tables are modified by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span>

<span data-ttu-id="0fa0a-260">To směru, bychom mohli bez obav použít rozhraní členství a rolí bez nutnosti prozkoumali schéma databáze vytvořené v kroku 2.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-260">Given this, we could confidently use the Membership and Roles frameworks without having explored the database schema created in Step 2.</span></span> <span data-ttu-id="0fa0a-261">Ale při vytváření tabulky k ukládání aplikačních dat. možná potřebujeme vytvořit entity, které se vztahují na uživatele nebo role.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-261">However, when creating the tables to store application data we may need to create entities that relate to users or roles.</span></span> <span data-ttu-id="0fa0a-262">Umožňuje mít znalost `SqlMembershipProvider` a `SqlRoleProvider` schémata při navazování cizího klíče omezení mezi tabulkami dat aplikace a tyto tabulky vytvořené v kroku 2.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-262">It helps to have a familiarity with the `SqlMembershipProvider` and `SqlRoleProvider` schemas when establishing foreign key constraints between the application data tables and those tables created in Step 2.</span></span> <span data-ttu-id="0fa0a-263">Kromě toho v některých výjimečných případech může potřebujeme k propojení s uživateli a role uloží přímo na úrovni databáze (namísto prostřednictvím `Membership` nebo `Roles` třídy).</span><span class="sxs-lookup"><span data-stu-id="0fa0a-263">Moreover, in certain rare circumstances we may need to interface with the user and role stores directly at the database level (instead of through the `Membership` or `Roles` classes).</span></span>

### <a name="partitioning-the-user-store-into-applications"></a><span data-ttu-id="0fa0a-264">Dělení Store uživatele do aplikací</span><span class="sxs-lookup"><span data-stu-id="0fa0a-264">Partitioning the User Store Into Applications</span></span>

<span data-ttu-id="0fa0a-265">Členství a rolí rozhraní jsou navržené tak, že jedno úložiště uživatele a roli je možné sdílet mezi mnoha různých aplikací.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-265">The Membership and Roles frameworks are designed such that a single user and role store can be shared among many different applications.</span></span> <span data-ttu-id="0fa0a-266">Aplikace ASP.NET, která používá rozhraní členství nebo rolí, musíte zadat oddílu aplikace používat.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-266">An ASP.NET application that uses the Membership or Roles frameworks must specify what application partition to use.</span></span> <span data-ttu-id="0fa0a-267">Stručně řečeno více webových aplikací můžete použít stejné úložiště pro uživatele a role.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-267">In short, multiple web applications can use the same user and role stores.</span></span> <span data-ttu-id="0fa0a-268">Úložiště pro uživatele a role, které jsou rozdělené do tří aplikací znázorňuje obrázek 11: HRSite CustomerSite a SalesSite.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-268">Figure 11 depicts user and role stores that are partitioned into three applications: HRSite, CustomerSite, and SalesSite.</span></span> <span data-ttu-id="0fa0a-269">Tyto tři webové aplikace každý mají své vlastní jedinečných uživatelů a rolí, ale jsou v nich všechny fyzicky uložené informace o účtu a role uživateli ve stejných databázových tabulkách.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-269">These three web applications each have their own unique users and roles, yet they all physically store their user account and role information in the same database tables.</span></span>


<span data-ttu-id="0fa0a-270">[![Může být dělené uživatelské účty napříč více aplikacemi](creating-the-membership-schema-in-sql-server-vb/_static/image32.png)](creating-the-membership-schema-in-sql-server-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="0fa0a-270">[![User Accounts May Be Partitioned Across Multiple Applications](creating-the-membership-schema-in-sql-server-vb/_static/image32.png)](creating-the-membership-schema-in-sql-server-vb/_static/image31.png)</span></span>

<span data-ttu-id="0fa0a-271">**Obrázek 11**: uživatelské účty může být rozdělit na oddíly napříč více aplikacemi ([kliknutím ji zobrazíte obrázek v plné velikosti](creating-the-membership-schema-in-sql-server-vb/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="0fa0a-271">**Figure 11**: User Accounts May Be Partitioned Across Multiple Applications ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image33.png))</span></span>


<span data-ttu-id="0fa0a-272">`aspnet_Applications` Tabulka je co definuje tyto oddíly.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-272">The `aspnet_Applications` table is what defines these partitions.</span></span> <span data-ttu-id="0fa0a-273">Každá aplikace, která používá databázi k ukládání informací o uživatelském účtu představuje řádek v této tabulce.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-273">Each application that uses the database to store user account information is represented by a row in this table.</span></span> <span data-ttu-id="0fa0a-274">`aspnet_Applications` Tabulka obsahuje čtyři sloupce: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, a `Description`.`ApplicationId`</span><span class="sxs-lookup"><span data-stu-id="0fa0a-274">The `aspnet_Applications` table has four columns: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, and `Description`.`ApplicationId`</span></span> <span data-ttu-id="0fa0a-275">je typu [ `uniqueidentifier` ](https://msdn.microsoft.com/library/ms187942.aspx) a primárního klíče v tabulce. `ApplicationName` poskytuje jedinečné lidských – popisný název pro každou aplikaci.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-275">is of type [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) and is the table's primary key; `ApplicationName` provides a unique human-friendly name for each application.</span></span>

<span data-ttu-id="0fa0a-276">Členství a Role související tabulky odkazují zpátky na `ApplicationId` pole `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-276">The other Membership- and Role-related tables link back to the `ApplicationId` field in `aspnet_Applications`.</span></span> <span data-ttu-id="0fa0a-277">Například `aspnet_Users` tabulku, která obsahuje záznam pro každý uživatelský účet má `ApplicationId` pole cizího klíče; viz výše pro `aspnet_Roles` tabulky.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-277">For example, the `aspnet_Users` table, which contains a record for each user account, has an `ApplicationId` foreign key field; ditto for the `aspnet_Roles` table.</span></span> <span data-ttu-id="0fa0a-278">`ApplicationId` Pole v těchto tabulkách určuje oddíl aplikace uživatelský účet nebo roli patří.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-278">The `ApplicationId` field in these tables specifies the application partition the user account or role belongs to.</span></span>

### <a name="storing-user-account-information"></a><span data-ttu-id="0fa0a-279">Ukládání informací o uživatelském účtu</span><span class="sxs-lookup"><span data-stu-id="0fa0a-279">Storing User Account Information</span></span>

<span data-ttu-id="0fa0a-280">Informace o uživatelském účtu je umístěnými ve dvou tabulkách: `aspnet_Users` a `aspnet_Membership`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-280">User account information is housed in two tables: `aspnet_Users` and `aspnet_Membership`.</span></span> <span data-ttu-id="0fa0a-281">`aspnet_Users` Tabulka obsahuje pole, které obsahují informace podstatné uživatelského účtu.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-281">The `aspnet_Users` table contains fields that hold the essential user account information.</span></span> <span data-ttu-id="0fa0a-282">Jsou tři nejvíce relevantní sloupce:</span><span class="sxs-lookup"><span data-stu-id="0fa0a-282">The three most pertinent columns are:</span></span>

- `UserId`
- `UserName`
- `ApplicationId`

<span data-ttu-id="0fa0a-283">`UserId` představuje primární klíč (a typu `uniqueidentifier`).</span><span class="sxs-lookup"><span data-stu-id="0fa0a-283">`UserId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="0fa0a-284">`UserName` je typu `nvarchar(256)` a společně s heslem, tvoří přihlašovacích údajů uživatele.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-284">`UserName` is of type `nvarchar(256)` and, along with the password, makes up the user's credentials.</span></span> <span data-ttu-id="0fa0a-285">(Heslo uživatele je uložená v `aspnet_Membership` tabulky.) `ApplicationId` propojí účet uživatele ke konkrétní aplikaci v `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-285">(A user's password is stored in the `aspnet_Membership` table.) `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="0fa0a-286">Je složeného [ `UNIQUE` omezení](https://msdn.microsoft.com/library/ms191166.aspx) na `UserName` a `ApplicationId` sloupce.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-286">There is a composite [`UNIQUE` constraint](https://msdn.microsoft.com/library/ms191166.aspx) on the `UserName` and `ApplicationId` columns.</span></span> <span data-ttu-id="0fa0a-287">Tím se zajistí, že v dané aplikaci každé uživatelské jméno je jedinečné, ale umožňuje stejné `UserName` pro použití v různých aplikacích.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-287">This ensures that in a given application each UserName is unique, yet it allows for the same `UserName` to be used in different applications.</span></span>

<span data-ttu-id="0fa0a-288">`aspnet_Membership` Tabulka obsahuje další informace o uživatelském účtu, jako je heslo uživatele, e-mailovou adresu, poslední přihlášení datum a čas a tak dále.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-288">The `aspnet_Membership` table includes additional user account information, like the user's password, email address, the last login date and time, and so forth.</span></span> <span data-ttu-id="0fa0a-289">Neexistuje shoda mezi záznamy `aspnet_Users` a `aspnet_Membership` tabulky.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-289">There is a one-to-one correspondence between records in the `aspnet_Users` and `aspnet_Membership` tables.</span></span> <span data-ttu-id="0fa0a-290">Tento vztah je zajištěna `UserId` pole `aspnet_Membership`, který slouží jako primární klíč v tabulce.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-290">This relationship is ensured by the `UserId` field in `aspnet_Membership`, which serves as the table's primary key.</span></span> <span data-ttu-id="0fa0a-291">Podobně jako `aspnet_Users` tabulky, `aspnet_Membership` zahrnuje `ApplicationId` pole, která spojují tyto informace do konkrétního oddílu aplikace.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-291">Like the `aspnet_Users` table, `aspnet_Membership` includes an `ApplicationId` field that ties this information to a particular application partition.</span></span>

### <a name="securing-passwords"></a><span data-ttu-id="0fa0a-292">Zabezpečení hesel</span><span class="sxs-lookup"><span data-stu-id="0fa0a-292">Securing Passwords</span></span>

<span data-ttu-id="0fa0a-293">Informace o hesle je uložen v `aspnet_Membership` tabulky.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-293">Password information is stored in the `aspnet_Membership` table.</span></span> <span data-ttu-id="0fa0a-294">`SqlMembershipProvider` Umožňuje hesla uložená v databázi pomocí jedné z následujících tří postupů:</span><span class="sxs-lookup"><span data-stu-id="0fa0a-294">The `SqlMembershipProvider` allows for passwords to be stored in the database using one of the following three techniques:</span></span>

- <span data-ttu-id="0fa0a-295">**Vymazat** – heslo je uloženo v databázi jako prostý text.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-295">**Clear** - the password is stored in the database as plain-text.</span></span> <span data-ttu-id="0fa0a-296">Můžu důrazně bránit použití této možnosti.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-296">I strongly discourage using this option.</span></span> <span data-ttu-id="0fa0a-297">Pokud databáze dojde k ohrožení - být hacker nálezci usnadní zadní vrátka nebo propuštěný zaměstnance, který má přístup k databázi – každý jednoho uživatele přihlašovací údaje jsou existuje odběr.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-297">If the database is compromised - be it by a hacker who finds a back door or a disgruntled employee who has database access - every single user's credentials are there for the taking.</span></span>
- <span data-ttu-id="0fa0a-298">**Hodnoty hash** – jsou hesla hashována pomocí jednocestného hashovacího algoritmu a náhodně generované hodnoty řetězce salt.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-298">**Hashed** - passwords are hashed using a one-way hash algorithm and a randomly generated salt value.</span></span> <span data-ttu-id="0fa0a-299">Tato hodnota hash (spolu s hodnota salt) je uložen v databázi.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-299">This hashed value (along with the salt) is stored in the database.</span></span>
- <span data-ttu-id="0fa0a-300">**Šifrované** -zašifrovaná verze hesla uložená v databázi.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-300">**Encrypted** - an encrypted version of the password is stored in the database.</span></span>

<span data-ttu-id="0fa0a-301">Použitá metoda heslo úložiště závisí `SqlMembershipProvider` nastavení uvedená v `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-301">The password storage technique used depends on the `SqlMembershipProvider` settings specified in `Web.config`.</span></span> <span data-ttu-id="0fa0a-302">Přizpůsobení se podíváme `SqlMembershipProvider` nastavení v kroku 4.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-302">We will look at customizing the `SqlMembershipProvider` settings in Step 4.</span></span> <span data-ttu-id="0fa0a-303">Výchozí chování je ukládat hodnoty hash hesla.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-303">The default behavior is to store the hash of the password.</span></span>

<span data-ttu-id="0fa0a-304">Sloupce za níž byla hesla uložená `Password`, `PasswordFormat`, a `PasswordSalt`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-304">The columns responsible for storing the password are `Password`, `PasswordFormat`, and `PasswordSalt`.</span></span> <span data-ttu-id="0fa0a-305">`PasswordFormat` je pole s typem `int` jehož hodnota označuje postup slouží k uložení hesla: 0 pro Clear; 1 pro Hashed; 2 pro šifrované.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-305">`PasswordFormat` is a field of type `int` whose value indicates the technique used for storing the password: 0 for Clear; 1 for Hashed; 2 for Encrypted.</span></span> <span data-ttu-id="0fa0a-306">`PasswordSalt` je přiřazen náhodně generované řetězec bez ohledu na to technika úložiště heslo, používají; Hodnota `PasswordSalt` se používá pouze při výpočtu hodnoty hash hesla.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-306">`PasswordSalt` is assigned a randomly generated string regardless of the password storage technique used; the value of `PasswordSalt` is only used when computing the hash of the password.</span></span> <span data-ttu-id="0fa0a-307">Nakonec `Password` sloupec obsahuje data skutečné heslo, ať už jde heslo jako prostý text, hodnotu hash hesla nebo šifrované heslo.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-307">Finally, the `Password` column contains the actual password data, be it the plain-text password, the hash of the password, or the encrypted password.</span></span>

<span data-ttu-id="0fa0a-308">Tabulka 1 ukazuje, jak tyto tři sloupce může vypadat pro různých technik vytváření úložiště při ukládání hesel MySecret!</span><span class="sxs-lookup"><span data-stu-id="0fa0a-308">Table 1 illustrates what these three columns might look like for the various storage techniques when storing the password MySecret!</span></span> <span data-ttu-id="0fa0a-309">.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-309">.</span></span>

| <span data-ttu-id="0fa0a-310">**Úložiště techniku&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="0fa0a-310">**Storage Technique&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="0fa0a-311">**Heslo&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="0fa0a-311">**Password&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="0fa0a-312">**PasswordFormat&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="0fa0a-312">**PasswordFormat&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="0fa0a-313">**PasswordSalt&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="0fa0a-313">**PasswordSalt&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0fa0a-314">Vymazat</span><span class="sxs-lookup"><span data-stu-id="0fa0a-314">Clear</span></span> | <span data-ttu-id="0fa0a-315">MySecret!</span><span class="sxs-lookup"><span data-stu-id="0fa0a-315">MySecret!</span></span> | <span data-ttu-id="0fa0a-316">0</span><span class="sxs-lookup"><span data-stu-id="0fa0a-316">0</span></span> | <span data-ttu-id="0fa0a-317">tTnkPlesqissc2y2SMEygA==</span><span class="sxs-lookup"><span data-stu-id="0fa0a-317">tTnkPlesqissc2y2SMEygA==</span></span> |
| <span data-ttu-id="0fa0a-318">Hodnoty hash</span><span class="sxs-lookup"><span data-stu-id="0fa0a-318">Hashed</span></span> | <span data-ttu-id="0fa0a-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span><span class="sxs-lookup"><span data-stu-id="0fa0a-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span></span> | <span data-ttu-id="0fa0a-320">1</span><span class="sxs-lookup"><span data-stu-id="0fa0a-320">1</span></span> | <span data-ttu-id="0fa0a-321">wFgjUfhdUFOCKQiI61vtiQ==</span><span class="sxs-lookup"><span data-stu-id="0fa0a-321">wFgjUfhdUFOCKQiI61vtiQ==</span></span> |
| <span data-ttu-id="0fa0a-322">Šifrované</span><span class="sxs-lookup"><span data-stu-id="0fa0a-322">Encrypted</span></span> | <span data-ttu-id="0fa0a-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span><span class="sxs-lookup"><span data-stu-id="0fa0a-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span></span> | <span data-ttu-id="0fa0a-324">2</span><span class="sxs-lookup"><span data-stu-id="0fa0a-324">2</span></span> | <span data-ttu-id="0fa0a-325">LSRzhGS/aa/oqAXGLHJNBw==</span><span class="sxs-lookup"><span data-stu-id="0fa0a-325">LSRzhGS/aa/oqAXGLHJNBw==</span></span> |

<span data-ttu-id="0fa0a-326">**Tabulka 1**: ukázkové hodnoty pro pole související s hesly při ukládání MySecret heslo!</span><span class="sxs-lookup"><span data-stu-id="0fa0a-326">**Table 1**: Example Values for the Password-Related Fields When Storing the Password MySecret!</span></span>

> [!NOTE]
> <span data-ttu-id="0fa0a-327">Konkrétní šifrování nebo hashovacího algoritmu používaného `SqlMembershipProvider` je určena nastavením v `<machineKey>` elementu.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-327">The particular encryption or hashing algorithm used by the `SqlMembershipProvider` is determined by the settings in the `<machineKey>` element.</span></span> <span data-ttu-id="0fa0a-328">Jsme probírali tento prvek konfigurace v kroku 3 <a id="Tutorial3"> </a> [ *konfigurace ověřování formulářů a témata pokročilé* ](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) kurzu.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-328">We discussed this configuration element in Step 3 of the <a id="Tutorial3"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) tutorial.</span></span>

### <a name="storing-roles-and-role-associations"></a><span data-ttu-id="0fa0a-329">Ukládání role a přiřazení Role</span><span class="sxs-lookup"><span data-stu-id="0fa0a-329">Storing Roles and Role Associations</span></span>

<span data-ttu-id="0fa0a-330">Role rozhraní framework umožňuje vývojářům definovat sadu rolí a určit, co uživatelé patří do rolích.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-330">The Roles framework allows developers to define a set of roles and specify what users belong to what roles.</span></span> <span data-ttu-id="0fa0a-331">Tyto informace je zachycena v databázi pomocí dvou tabulkách: `aspnet_Roles` a `aspnet_UsersInRoles`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-331">This information is captured in the database through two tables: `aspnet_Roles` and `aspnet_UsersInRoles`.</span></span> <span data-ttu-id="0fa0a-332">Každý záznam v `aspnet_Roles` tabulka představuje roli pro konkrétní aplikaci.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-332">Each record in the `aspnet_Roles` table represents a role for a particular application.</span></span> <span data-ttu-id="0fa0a-333">Podobně jako `aspnet_Users` tabulky, `aspnet_Roles` tabulka obsahuje tři sloupce, které jsou relevantní pro naše diskuse:</span><span class="sxs-lookup"><span data-stu-id="0fa0a-333">Much like the `aspnet_Users` table, the `aspnet_Roles` table has three columns pertinent to our discussion:</span></span>

- `RoleId`
- `RoleName`
- `ApplicationId`

<span data-ttu-id="0fa0a-334">`RoleId` představuje primární klíč (a typu `uniqueidentifier`).</span><span class="sxs-lookup"><span data-stu-id="0fa0a-334">`RoleId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="0fa0a-335">`RoleName` je typu `nvarchar(256)`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-335">`RoleName` is of type `nvarchar(256)`.</span></span> <span data-ttu-id="0fa0a-336">A `ApplicationId` propojí účet uživatele ke konkrétní aplikaci v `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-336">And `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="0fa0a-337">Je složeného `UNIQUE` omezení `RoleName` a `ApplicationId` sloupců, zajištění, že v dané aplikace je jedinečný název každé role.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-337">There is a composite `UNIQUE` constraint on the `RoleName` and `ApplicationId` columns, ensuring that in a given application each role name is unique.</span></span>

<span data-ttu-id="0fa0a-338">`aspnet_UsersInRoles` Tabulka slouží jako mapování mezi uživateli a role.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-338">The `aspnet_UsersInRoles` table serves as a mapping between users and roles.</span></span> <span data-ttu-id="0fa0a-339">Existují jenom dva sloupce - `UserId` a `RoleId` – a společně tvoří složený primární klíč.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-339">There are only two columns - `UserId` and `RoleId` - and together they make up a composite primary key.</span></span>

## <a name="step-4-specifying-the-provider-and-customizing-its-settings"></a><span data-ttu-id="0fa0a-340">Krok 4: Určení poskytovatele a přizpůsobení nastavení</span><span class="sxs-lookup"><span data-stu-id="0fa0a-340">Step 4: Specifying the Provider and Customizing Its Settings</span></span>

<span data-ttu-id="0fa0a-341">Všechna rozhraní, které podporují podle modelu poskytovatele – například členství a rolí rozhraní – podrobnosti implementace samy nemají a místo toho delegování zodpovědnosti na třídu poskytovatele.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-341">All of the frameworks that support the provider model - such as the Membership and Roles frameworks - lack implementation details themselves and instead delegate that responsibility to a provider class.</span></span> <span data-ttu-id="0fa0a-342">V případě rozhraní členství `Membership` třída definuje rozhraní API pro správu uživatelských účtů, ale nekomunikuje přímo s všechny uživatele v úložišti.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-342">In the case of the Membership framework, the `Membership` class defines the API for managing user accounts, but it does not interact directly with any user store.</span></span> <span data-ttu-id="0fa0a-343">Místo toho `Membership` metody třídy můžete předat požadavek na nakonfigurované poskytovateli - použijeme `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-343">Rather, the `Membership` class's methods hand off the request to the configured provider - we will be using the `SqlMembershipProvider`.</span></span> <span data-ttu-id="0fa0a-344">Když jsme jedné z metod v vyvolat `Membership` třídy, jak členství v rámci vědět o delegování volání `SqlMembershipProvider`?</span><span class="sxs-lookup"><span data-stu-id="0fa0a-344">When we invoke one of the methods in the `Membership` class, how does the Membership framework know to delegate the call to the `SqlMembershipProvider`?</span></span>

<span data-ttu-id="0fa0a-345">`Membership` Třída nemá [ `Providers` vlastnost](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) , který obsahuje odkaz na všechny třídy registrovaného zprostředkovatele k dispozici pro použití v rámci rozhraní členství.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-345">The `Membership` class has a [`Providers` property](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) that contains a reference to all of the registered provider classes available for use by the Membership framework.</span></span> <span data-ttu-id="0fa0a-346">Každý registrovaný poskytovatel má odpovídající název a typ.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-346">Each registered provider has an associated name and type.</span></span> <span data-ttu-id="0fa0a-347">Název nabízí lidských přívětivá způsob, jak odkazovat na konkrétní zprostředkovatele v `Providers` kolekce, zatímco identifikuje typ třída zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-347">The name offers a human-friendly way to reference a particular provider in the `Providers` collection, while the type identifies the provider class.</span></span> <span data-ttu-id="0fa0a-348">Navíc může každý registrovaný poskytovatel zahrnují nastavení konfigurace.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-348">Moreover, each registered provider may include configuration settings.</span></span> <span data-ttu-id="0fa0a-349">Zahrnují nastavení konfigurace pro členství v rámci `PasswordFormat` a `requiresUniqueEmail`, mezi mnoha dalších.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-349">Configuration settings for the Membership framework include `PasswordFormat` and `requiresUniqueEmail`, among many others.</span></span> <span data-ttu-id="0fa0a-350">Viz tabulka 2 pro úplný seznam nastavení konfigurace používané `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-350">See Table 2 for a complete list of configuration settings used by the `SqlMembershipProvider`.</span></span>

<span data-ttu-id="0fa0a-351">`Providers` Obsah vlastnosti jsou určeny pomocí nastavení konfigurace webové aplikace.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-351">The `Providers` property's contents are specified through the web application's configuration settings.</span></span> <span data-ttu-id="0fa0a-352">Ve výchozím nastavení, mají všechny webové aplikace s názvem zprostředkovatele `AspNetSqlMembershipProvider` typu `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-352">By default, all web applications have a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span> <span data-ttu-id="0fa0a-353">Tento výchozí zprostředkovatel členství je registrován v `machine.config` (umístěný ve `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG`):</span><span class="sxs-lookup"><span data-stu-id="0fa0a-353">This default Membership provider is registered in `machine.config` (located at `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG`):</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample1.xml)]

<span data-ttu-id="0fa0a-354">Jako značka výše ukazuje [ `<membership>` element](https://msdn.microsoft.com/library/1b9hw62f.aspx) definuje nastavení konfigurace pro členství v rámci při [ `<providers>` podřízený element](https://msdn.microsoft.com/library/6d4936ht.aspx) určuje zaregistrovanou poskytovatelé.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-354">As the markup above shows, the [`<membership>` element](https://msdn.microsoft.com/library/1b9hw62f.aspx) defines the configuration settings for the Membership framework while the [`<providers>` child element](https://msdn.microsoft.com/library/6d4936ht.aspx) specifies the registered providers.</span></span> <span data-ttu-id="0fa0a-355">Poskytovatelé mohou být přidány nebo odebrány [ `<add>` ](https://msdn.microsoft.com/library/whae3t94.aspx) nebo [ `<remove>` ](https://msdn.microsoft.com/library/aykw9a6d.aspx) elementy; použijte [ `<clear>` ](https://msdn.microsoft.com/library/t062y6yc.aspx) odebrat všechny aktuálně – element registrovaných zprostředkovatelů.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-355">Providers may be added or removed using the [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) or [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) elements; use the [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) element to remove all currently registered providers.</span></span> <span data-ttu-id="0fa0a-356">Jako značka výše znázorňuje `machine.config` přidá poskytovatele s názvem `AspNetSqlMembershipProvider` typu `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-356">As the markup above shows, `machine.config` adds a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span>

<span data-ttu-id="0fa0a-357">Kromě `name` a `type` atributy, `<add>` element obsahuje atributy, které určují hodnoty pro různá nastavení konfigurace.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-357">In addition to the `name` and `type` attributes, the `<add>` element contains attributes that define the values for various configuring settings.</span></span> <span data-ttu-id="0fa0a-358">Tabulka 2 uvádí dostupné `SqlMembershipProvider`-konkrétních nastavení konfigurace, spolu s jejich popis.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-358">Table 2 lists the available `SqlMembershipProvider`-specific configuration settings, along with a description of each.</span></span>

> [!NOTE]
> <span data-ttu-id="0fa0a-359">Všechny výchozí hodnoty, které jste si poznamenali v tabulce 2 odkazují na výchozí hodnoty podle `SqlMembershipProvider` třídy.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-359">Any default values noted in Table 2 refer to the default values defined in the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="0fa0a-360">Všimněte si, že ne všechna nastavení konfigurace v `AspNetSqlMembershipProvider` odpovídají výchozí hodnoty `SqlMembershipProvider` třídy.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-360">Note that not all of the configuration settings in `AspNetSqlMembershipProvider` correspond to the default values of the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="0fa0a-361">Například, pokud není zadán ve zprostředkovateli členství `requiresUniqueEmail` výchozí nastavení na hodnotu true.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-361">For example, if not specified in a Membership provider, the `requiresUniqueEmail` setting defaults to true.</span></span> <span data-ttu-id="0fa0a-362">Ale `AspNetSqlMembershipProvider` přepisuje tuto výchozí hodnotu tak, že explicitně zadáte hodnotu `false`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-362">However, the `AspNetSqlMembershipProvider` overrides this default value by explicitly specifying a value of `false`.</span></span>

| <span data-ttu-id="0fa0a-363">**Nastavení&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="0fa0a-363">**Setting&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="0fa0a-364">**Popis&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="0fa0a-364">**Description&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- |
| `ApplicationName` | <span data-ttu-id="0fa0a-365">Připomínáme, že členství v rámci umožňuje pro jednoho uživatele úložiště k rozdělení na oddíly napříč více aplikacemi.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-365">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="0fa0a-366">Toto nastavení označuje název oddílu aplikace používá zprostředkovatele členství.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-366">This setting indicates the name of the application partition used by the Membership provider.</span></span> <span data-ttu-id="0fa0a-367">Pokud tato hodnota není zadaná explicitně, nastavte v době běhu k hodnotě virtuální kořenová cesta aplikace.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-367">If this value is not explicitly specified, it is set, at runtime, to the value of the application's virtual root path.</span></span> |
| `commandTimeout` | <span data-ttu-id="0fa0a-368">Určuje hodnotu časového limitu příkazu SQL (v sekundách).</span><span class="sxs-lookup"><span data-stu-id="0fa0a-368">Specifies the SQL command timeout value (in seconds).</span></span> <span data-ttu-id="0fa0a-369">Výchozí hodnota je 30.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-369">The default value is 30.</span></span> |
| `connectionStringName` | <span data-ttu-id="0fa0a-370">Název připojovacího řetězce v `<connectionStrings>` prvek, který chcete použít pro připojení k uživatelské databázi úložiště.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-370">The name of the connection string in the `<connectionStrings>` element to use to connect to the user store database.</span></span> <span data-ttu-id="0fa0a-371">Tato hodnota je povinná.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-371">This value is required.</span></span> |
| `description` | <span data-ttu-id="0fa0a-372">Obsahuje popis lidských vhodných registrovaných zprostředkovatelů.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-372">Provides a human-friendly description of the registered provider.</span></span> |
| `enablePasswordRetrieval` | <span data-ttu-id="0fa0a-373">Určuje, zda uživatelé mohou načítat zapomenuté heslo.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-373">Specifies whether users may retrieve their forgotten password.</span></span> <span data-ttu-id="0fa0a-374">Výchozí hodnota je `false`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-374">The default value is `false`.</span></span> |
| `enablePasswordReset` | <span data-ttu-id="0fa0a-375">Určuje, jestli uživatelé můžou obnovit své heslo.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-375">Indicates whether users are allowed to reset their password.</span></span> <span data-ttu-id="0fa0a-376">Výchozí hodnota je `true`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-376">Defaults to `true`.</span></span> |
| `maxInvalidPasswordAttempts` | <span data-ttu-id="0fa0a-377">Maximální počet neúspěšných pokusů o přihlášení, které mohou nastat pro daného uživatele během stanovených `passwordAttemptWindow` před zablokováním uživatele. Výchozí hodnota je 5.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-377">The maximum number of unsuccessful login attempts that may occur for a given user during the specified `passwordAttemptWindow` before the user is locked out. The default value is 5.</span></span> |
| `minRequiredNonalphanumericCharacters` | <span data-ttu-id="0fa0a-378">Minimální počet jiných než alfanumerických znaků, které musí být uvedena v hesla uživatele.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-378">The minimum number of non-alphanumeric characters that must appear in a user's password.</span></span> <span data-ttu-id="0fa0a-379">Tato hodnota musí být mezi 0 a 128. Výchozí hodnota je 1.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-379">This value must be between 0 and 128; the default is 1.</span></span> |
| `minRequiredPasswordLength` | <span data-ttu-id="0fa0a-380">Minimální počet znaků v heslu.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-380">The minimum number of characters required in a password.</span></span> <span data-ttu-id="0fa0a-381">Tato hodnota musí být mezi 0 a 128. Výchozí hodnota je 7.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-381">This value must be between 0 and 128; the default is 7.</span></span> |
| `name` | <span data-ttu-id="0fa0a-382">Název registrovaného zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-382">The name of the registered provider.</span></span> <span data-ttu-id="0fa0a-383">Tato hodnota je povinná.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-383">This value is required.</span></span> |
| `passwordAttemptWindow` | <span data-ttu-id="0fa0a-384">Počet minut, během které se nepodařilo přihlašovací jméno, které jsou sledovány pokusy.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-384">The number of minutes during which failed login attempts are tracked.</span></span> <span data-ttu-id="0fa0a-385">Pokud uživatel zadává neplatným přihlašovacím údajům `maxInvalidPasswordAttempts` čas v rámci této zadaný okna, jsou uzamčen. Výchozí hodnota je 10.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-385">If a user supplies invalid login credentials `maxInvalidPasswordAttempts` times within this specified window, they are locked out. The default value is 10.</span></span> |
| `PasswordFormat` | <span data-ttu-id="0fa0a-386">Formát ukládání hesel: `Clear`, `Hashed`, nebo `Encrypted`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-386">The password storage format: `Clear`, `Hashed`, or `Encrypted`.</span></span> <span data-ttu-id="0fa0a-387">Výchozí hodnota je `Hashed`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-387">The default is `Hashed`.</span></span> |
| `passwordStrengthRegularExpression` | <span data-ttu-id="0fa0a-388">Pokud je zadán, tento regulární výraz se používá k vyhodnocení sílu vybrané heslo uživatele při vytváření nového účtu nebo při změně hesla.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-388">If provided, this regular expression is used to evaluate the strength of the user's selected password when creating a new account or when changing their password.</span></span> <span data-ttu-id="0fa0a-389">Výchozí hodnota je prázdný řetězec.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-389">The default value is an empty string.</span></span> |
| `requiresQuestionAndAnswer` | <span data-ttu-id="0fa0a-390">Určuje, jestli musí uživatel odpovědět, jeho bezpečnostní otázku při načítání nebo kdo resetuje jeho heslo.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-390">Specifies whether a user must answer his security question when retrieving or resetting his password.</span></span> <span data-ttu-id="0fa0a-391">Výchozí hodnota je `true`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-391">The default value is `true`.</span></span> |
| `requiresUniqueEmail` | <span data-ttu-id="0fa0a-392">Určuje, zda všechny uživatelské účty v oddílu dané aplikace musí mít jedinečnou e-mailovou adresu.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-392">Indicates whether all user accounts in a given application partition must have a unique email address.</span></span> <span data-ttu-id="0fa0a-393">Výchozí hodnota je `true`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-393">The default value is `true`.</span></span> |
| `type` | <span data-ttu-id="0fa0a-394">Určuje typ zprostředkovatele.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-394">Specifies the type of the provider.</span></span> <span data-ttu-id="0fa0a-395">Tato hodnota je povinná.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-395">This value is required.</span></span> |

<span data-ttu-id="0fa0a-396">**Tabulka 2**: členství a `SqlMembershipProvider` nastavení konfigurace</span><span class="sxs-lookup"><span data-stu-id="0fa0a-396">**Table 2**: Membership and `SqlMembershipProvider` Configuration Settings</span></span>

<span data-ttu-id="0fa0a-397">Kromě `AspNetSqlMembershipProvider`, dalších zprostředkovatelů členství se může zaregistrovat na základě aplikace aplikace tak, že přidáte podobné značky `Web.config` souboru.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-397">In addition to `AspNetSqlMembershipProvider`, other Membership providers may be registered on an application-by-application basis by adding similar markup to the `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="0fa0a-398">Rozhraní role funguje prakticky stejně jako: je výchozí zprostředkovatel registrované rolí v `machine.config` a lze jej přizpůsobit registrovaných zprostředkovatelů pro jednotlivé aplikace pomocí aplikace v `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-398">The Roles framework works in much the same way: there is a default registered role provider in `machine.config` and the registered providers may be customized on an application-by-application basis in `Web.config`.</span></span> <span data-ttu-id="0fa0a-399">Prozkoumáme role framework a jeho konfigurace značky podrobně v budoucích kurzech.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-399">We will examine the Roles framework and its configuration markup in detail in a future tutorial.</span></span>

### <a name="customizing-thesqlmembershipprovidersettings"></a><span data-ttu-id="0fa0a-400">Přizpůsobení`SqlMembershipProvider`nastavení</span><span class="sxs-lookup"><span data-stu-id="0fa0a-400">Customizing the`SqlMembershipProvider`Settings</span></span>

<span data-ttu-id="0fa0a-401">Výchozí hodnota `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) má jeho `connectionStringName` atribut nastaven na `LocalSqlServer`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-401">The default `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) has its `connectionStringName` attribute set to `LocalSqlServer`.</span></span> <span data-ttu-id="0fa0a-402">Podobně jako `AspNetSqlMembershipProvider` zprostředkovatele, název připojovacího řetězce `LocalSqlServer` je definována v `machine.config`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-402">Like the `AspNetSqlMembershipProvider` provider, the connection string name `LocalSqlServer` is defined in `machine.config`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample2.xml)]

<span data-ttu-id="0fa0a-403">Jak je vidět, definuje tento připojovací řetězec SQL 2005 Express Edition databáze umístěna na | DataDirectory|aspnetdb.mdf.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-403">As you can see, this connection string defines a SQL 2005 Express Edition database located at |DataDirectory|aspnetdb.mdf.</span></span> <span data-ttu-id="0fa0a-404">Řetězec | DataDirectory | přeložit za běhu, přejděte `~/App_Data/` adresáře, proto cesta k databázi | DataDirectory|aspnetdb.mdf se přeloží na `~/App_Data` / `aspnet.mdf`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-404">The string |DataDirectory| is translated at runtime to point to the `~/App_Data/` directory, so the database path |DataDirectory|aspnetdb.mdf translates to `~/App_Data`/`aspnet.mdf`.</span></span>

<span data-ttu-id="0fa0a-405">Pokud jsme nezadali žádné informace o poskytovateli členství v naší aplikaci `Web.config` soubor, aplikace používá výchozí zaregistrovaný zprostředkovatel členství, `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-405">If we did not specify any Membership provider information in our application's `Web.config` file, the application uses the default registered Membership provider, `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="0fa0a-406">Pokud `~/App_Data/aspnet.mdf` databáze buď neexistuje, automaticky ji vytvoříte a přidáte schématu aplikací služby modulu runtime ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-406">If the `~/App_Data/aspnet.mdf` database does not exist, the ASP.NET runtime will automatically create it and add the application services schema.</span></span> <span data-ttu-id="0fa0a-407">Nechceme však použít `aspnet.mdf` databáze; místo toho chceme použít `SecurityTutorials.mdf` databázi jsme vytvořili v kroku 2.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-407">However, we don't want to use the `aspnet.mdf` database; rather, we want to use the `SecurityTutorials.mdf` database we created in Step 2.</span></span> <span data-ttu-id="0fa0a-408">Tato změna lze provést jedním ze dvou způsobů:</span><span class="sxs-lookup"><span data-stu-id="0fa0a-408">This modification can be accomplished in one of two ways:</span></span>

- <span data-ttu-id="0fa0a-409"><strong>Zadejte hodnotu</strong><strong>`LocalSqlServer`</strong><strong>název připojovacího řetězce v</strong><strong>`Web.config`</strong><strong>.</strong></span><span class="sxs-lookup"><span data-stu-id="0fa0a-409"><strong>Specify a value for the</strong><strong>`LocalSqlServer`</strong><strong>connection string name in</strong><strong>`Web.config`</strong><strong>.</strong></span></span> <span data-ttu-id="0fa0a-410">Přepsáním `LocalSqlServer` hodnotu název připojovacího řetězce v `Web.config`, můžeme použít výchozí zaregistrovaný zprostředkovatel členství (`AspNetSqlMembershipProvider`) a jeho správně pracovat `SecurityTutorials.mdf` databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-410">By overwriting the `LocalSqlServer` connection string name value in `Web.config`, we can use the default registered Membership provider (`AspNetSqlMembershipProvider`) and have it correctly work with the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="0fa0a-411">Tento přístup je v pořádku, pokud jste s nastavením konfigurace určené obsahu `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-411">This approach is fine if you are content with the configuration settings specified by `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="0fa0a-412">Další informace o této techniky najdete v tématu [Scott Guthrie](https://weblogs.asp.net/scottgu/)pro blogový příspěvek [konfigurace technologie ASP.NET 2.0 aplikačními službami, abyste pomocí SQL Server 2000 nebo SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span><span class="sxs-lookup"><span data-stu-id="0fa0a-412">For more information on this technique, see [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog post, [Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span></span>
- <span data-ttu-id="0fa0a-413"><strong>Přidat nového poskytovatele registrovaného typu</strong><strong>`SqlMembershipProvider`</strong><strong>a nakonfigurovat jeho</strong><strong>`connectionStringName`</strong><strong>nastavení tak, aby odkazoval</strong> <strong>`SecurityTutorials.mdf`</strong> <strong>databáze.</strong></span><span class="sxs-lookup"><span data-stu-id="0fa0a-413"><strong>Add a new registered provider of type</strong><strong>`SqlMembershipProvider`</strong><strong>and configure its</strong><strong>`connectionStringName`</strong><strong>setting to point to the</strong><strong>`SecurityTutorials.mdf`</strong><strong>database.</strong></span></span> <span data-ttu-id="0fa0a-414">Tento přístup je užitečné v situacích, ve které chcete přizpůsobit další vlastnosti konfigurace kromě připojovací řetězec databáze.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-414">This approach is useful in scenarios where you want to customize other configuration properties in addition to the database connection string.</span></span> <span data-ttu-id="0fa0a-415">V projektech pro vlastní používám vždy tento přístup z důvodu jeho flexibilitu a lepší čitelnost.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-415">In my own projects I always use this approach because of its flexibility and readability.</span></span>

<span data-ttu-id="0fa0a-416">Před přidáním nového registrovaného poskytovatele, který odkazuje `SecurityTutorials.mdf` databáze, musíme nejprve přidejte hodnotu řetězce odpovídající připojení v `<connectionStrings>` tématu `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-416">Before we can add a new registered provider that references the `SecurityTutorials.mdf` database, we first need to add an appropriate connection string value in the `<connectionStrings>` section in `Web.config`.</span></span> <span data-ttu-id="0fa0a-417">Následující kód přidá nový připojovací řetězec s názvem `SecurityTutorialsConnectionString` , která odkazuje na SQL Server 2005 Express Edition `SecurityTutorials.mdf` databáze v `App_Data` složky.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-417">The following markup adds a new connection string named `SecurityTutorialsConnectionString` that references the SQL Server 2005 Express Edition `SecurityTutorials.mdf` database in the `App_Data` folder.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="0fa0a-418">Pokud používáte soubor alternativní databáze, podle potřeby aktualizujte připojovací řetězec.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-418">If you are using an alternate database file, update the connection string as needed.</span></span> <span data-ttu-id="0fa0a-419">Další informace o tvořící správný připojovací řetězec, najdete [ConnectionStrings.com](http://www.connectionstrings.com/).</span><span class="sxs-lookup"><span data-stu-id="0fa0a-419">For more information on forming the correct connection string, refer to [ConnectionStrings.com](http://www.connectionstrings.com/).</span></span>

<span data-ttu-id="0fa0a-420">V dalším kroku přidejte následující kód konfigurace členství pro `Web.config` souboru.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-420">Next, add the following Membership configuration markup to the `Web.config` file.</span></span> <span data-ttu-id="0fa0a-421">Tento kód zaregistruje nový zprostředkovatel s názvem `SecurityTutorialsSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-421">This markup registers a new provider named `SecurityTutorialsSqlMembershipProvider`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample4.xml)]

<span data-ttu-id="0fa0a-422">Kromě registrace `SecurityTutorialsSqlMembershipProvider` poskytovatele, výše uvedené značky definují `SecurityTutorialsSqlMembershipProvider` jako výchozího zprostředkovatele (prostřednictvím `defaultProvider` atribut `<membership>` element).</span><span class="sxs-lookup"><span data-stu-id="0fa0a-422">In addition to registering the `SecurityTutorialsSqlMembershipProvider` provider, the above markup defines the `SecurityTutorialsSqlMembershipProvider` as the default provider (via the `defaultProvider` attribute in the `<membership>` element).</span></span> <span data-ttu-id="0fa0a-423">Připomínáme, že rozhraní členství může mít víc registrovaných zprostředkovatelů.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-423">Recall that the Membership framework can have multiple registered providers.</span></span> <span data-ttu-id="0fa0a-424">Protože `AspNetSqlMembershipProvider` je zaregistrovaný jako první poskytovatel v `machine.config`, slouží jako výchozí zprostředkovatel není-li Udáváme jinak.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-424">Since `AspNetSqlMembershipProvider` is registered as the first provider in `machine.config`, it serves as the default provider unless we indicate otherwise.</span></span>

<span data-ttu-id="0fa0a-425">V současné době aplikace má dva registrovaného zprostředkovatele: `AspNetSqlMembershipProvider` a `SecurityTutorialsSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-425">Currently, our application has two registered providers: `AspNetSqlMembershipProvider` and `SecurityTutorialsSqlMembershipProvider`.</span></span> <span data-ttu-id="0fa0a-426">Ale před registrací `SecurityTutorialsSqlMembershipProvider` poskytovatele jsme mohli bylo zrušeno zaškrtnutí všeho dříve registrovaných zprostředkovatelů tak, že přidáte [ `<clear />` element](https://msdn.microsoft.com/library/t062y6yc.aspx) bezprostředně před naše `<add>` element.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-426">However, before registering the `SecurityTutorialsSqlMembershipProvider` provider we could have cleared out all previously registered providers by adding a [`<clear />` element](https://msdn.microsoft.com/library/t062y6yc.aspx) immediately before our `<add>` element.</span></span> <span data-ttu-id="0fa0a-427">To by smažte `AspNetSqlMembershipProvider` ze seznamu registrovaných zprostředkovatelů, to znamená, že `SecurityTutorialsSqlMembershipProvider` bude pouze registrovaného zprostředkovatele členství.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-427">This would clear out the `AspNetSqlMembershipProvider` from the list of registered providers, meaning that the `SecurityTutorialsSqlMembershipProvider` would be the only registered Membership provider.</span></span> <span data-ttu-id="0fa0a-428">Pokud jsme použili tento postup, pak by potřebujeme k označení `SecurityTutorialsSqlMembershipProvider` jako výchozího zprostředkovatele, protože by bylo pouze registrovaného zprostředkovatele členství.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-428">If we used this approach, then we would not need to mark the `SecurityTutorialsSqlMembershipProvider` as the default provider, since it would be the only registered Membership provider.</span></span> <span data-ttu-id="0fa0a-429">Další informace o používání `<clear />`, naleznete v tématu [použití `<clear />` při přidání poskytovatelů](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span><span class="sxs-lookup"><span data-stu-id="0fa0a-429">For more information on using `<clear />`, see [Using `<clear />` When Adding providers](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span></span>

<span data-ttu-id="0fa0a-430">Všimněte si, že `SecurityTutorialsSqlMembershipProvider`společnosti `connectionStringName` nastavení odkazy právě přidané `SecurityTutorialsConnectionString` název připojovacího řetězce a že jeho `applicationName` bylo nastaveno na hodnotu SecurityTutorials.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-430">Note that the `SecurityTutorialsSqlMembershipProvider`'s `connectionStringName` setting references the just-added `SecurityTutorialsConnectionString` connection string name, and that its `applicationName` setting has been set to a value of SecurityTutorials.</span></span> <span data-ttu-id="0fa0a-431">Kromě toho `requiresUniqueEmail` nastavení je nastavená na `true`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-431">Additionally, the `requiresUniqueEmail` setting has been set to `true`.</span></span> <span data-ttu-id="0fa0a-432">Všechny ostatní možnosti konfigurace jsou identické s hodnotami v `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-432">All other configuration options are identical to the values in `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="0fa0a-433">Nebojte se provádět žádné změny konfigurace, pokud chcete.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-433">Feel free to make any configuration modifications here, if you wish.</span></span> <span data-ttu-id="0fa0a-434">Tím, že vyžaduje dva jiné než alfanumerické znaky, místo jednoho nebo zvýšení délky hesla na osm znaků místo sedmidílné série, například může zkracují síly hesla.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-434">For example, you could tighten the password strength by requiring two non-alphanumeric characters instead of one, or by increasing the password length to eight characters instead of seven.</span></span>

> [!NOTE]
> <span data-ttu-id="0fa0a-435">Připomínáme, že členství v rámci umožňuje pro jednoho uživatele úložiště k rozdělení na oddíly napříč více aplikacemi.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-435">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="0fa0a-436">Zprostředkovatel členství `applicationName` nastavení určuje, jaké aplikace, poskytovatel použije při práci s úložišti uživatele.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-436">The Membership provider's `applicationName` setting indicates what application the provider uses when working with the user store.</span></span> <span data-ttu-id="0fa0a-437">Je důležité, explicitně nastavit hodnotu `applicationName` nastavení konfigurace, protože pokud `applicationName` není explicitně nastaven, je přiřazená virtuální kořenová cesta webové aplikace za běhu.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-437">It is important that you explicitly set a value for the `applicationName` configuration setting because if the `applicationName` is not explicitly set, it is assigned to the web application's virtual root path at runtime.</span></span> <span data-ttu-id="0fa0a-438">To funguje dobře tak dlouho, dokud nedojde ke změně virtuální kořenová cesta aplikace, ale pokud přesouváte aplikace do jiného umístění, `applicationName` příliš změní nastavení.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-438">This works fine as long as the application's virtual root path doesn't change, but if you move the application to a different path, the `applicationName` setting will change too.</span></span> <span data-ttu-id="0fa0a-439">Pokud k tomu dojde, bude zprostředkovatel členství začít pracovat s oddíl různé aplikace, než se využívala.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-439">When this happens, the Membership provider will start working with a different application partition than was previously used.</span></span> <span data-ttu-id="0fa0a-440">Uživatelské účty vytvořené před přesunutí se bude nacházet v jiné aplikaci oddílu a tyto uživatelé už nebudou moct přihlásit k webu.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-440">User accounts created prior to the move will reside in a different application partition and those users will no longer be able to log into the site.</span></span> <span data-ttu-id="0fa0a-441">V této věci se podrobněji probírají, naleznete v tématu [vždycky nastavený `applicationName` vlastnost při konfiguraci členství technologie ASP.NET 2.0 a dalších poskytovatelů](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="0fa0a-441">For a more in-depth discussion on this matter, see [Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other providers](https://weblogs.asp.net/scottgu/443634).</span></span>

## <a name="summary"></a><span data-ttu-id="0fa0a-442">Souhrn</span><span class="sxs-lookup"><span data-stu-id="0fa0a-442">Summary</span></span>

<span data-ttu-id="0fa0a-443">V tuto chvíli máme databáze s nakonfigurovanou aplikační služby (`SecurityTutorials.mdf`) a nakonfigurovali naši webovou aplikaci tak, aby používala rozhraní členství `SecurityTutorialsSqlMembershipProvider` jsme registrovaný poskytovatel.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-443">At this point we have a database with the configured application services (`SecurityTutorials.mdf`) and have configured our web application so that the Membership framework uses the `SecurityTutorialsSqlMembershipProvider` provider we just registered.</span></span> <span data-ttu-id="0fa0a-444">Je tento registrovaný poskytovatel typu `SqlMembershipProvider` a má jeho `connectionStringName` nastavte příslušný připojovací řetězec (`SecurityTutorialsConnectionString`) a jeho `applicationName` explicitně nastavena hodnota.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-444">This registered provider is of type `SqlMembershipProvider` and has its `connectionStringName` set to the appropriate connection string (`SecurityTutorialsConnectionString`) and its `applicationName` value explicitly set.</span></span>

<span data-ttu-id="0fa0a-445">Nyní jsme připraveni použít rozhraní členství z naší aplikace.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-445">We are now ready to use the Membership framework from our application.</span></span> <span data-ttu-id="0fa0a-446">V dalším kurzu prozkoumáme vytvoření nové uživatelské účty.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-446">In the next tutorial we will examine how to create new user accounts.</span></span> <span data-ttu-id="0fa0a-447">Následující, že se podíváme na ověřování uživatelů, autorizaci založené na uživatelích a ukládá Další informace související s uživatelem v databázi.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-447">Following that we will explore authenticating users, performing user-based authorization, and storing additional user-related information in the database.</span></span>

<span data-ttu-id="0fa0a-448">Všechno nejlepší programování!</span><span class="sxs-lookup"><span data-stu-id="0fa0a-448">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="0fa0a-449">Další čtení</span><span class="sxs-lookup"><span data-stu-id="0fa0a-449">Further Reading</span></span>

<span data-ttu-id="0fa0a-450">Další informace o tématech, které jsou popsané v tomto kurzu najdete na následujících odkazech:</span><span class="sxs-lookup"><span data-stu-id="0fa0a-450">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="0fa0a-451">Vždycky nastavený `applicationName` vlastnost při konfiguraci členství technologie ASP.NET 2.0 a dalších poskytovatelů</span><span class="sxs-lookup"><span data-stu-id="0fa0a-451">Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other providers</span></span>](https://weblogs.asp.net/scottgu/443634)
- [<span data-ttu-id="0fa0a-452">Konfigurace technologie ASP.NET 2.0 služeb aplikací použít SQL Server 2000 nebo SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="0fa0a-452">Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005</span></span>](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)
- [<span data-ttu-id="0fa0a-453">Stáhněte si SQL Server Management Studio Express Edition</span><span class="sxs-lookup"><span data-stu-id="0fa0a-453">Download SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)
- [<span data-ttu-id="0fa0a-454">Zkoumání ASP.NET 2.0 s členství, role a profilu</span><span class="sxs-lookup"><span data-stu-id="0fa0a-454">Examining ASP.NET 2.0�s Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="0fa0a-455">`<add>` – Element pro zprostředkovatele pro členství</span><span class="sxs-lookup"><span data-stu-id="0fa0a-455">The `<add>` Element for providers for Membership</span></span>](https://msdn.microsoft.com/library/whae3t94.aspx)
- [<span data-ttu-id="0fa0a-456">`<membership>` – Element</span><span class="sxs-lookup"><span data-stu-id="0fa0a-456">The `<membership>` Element</span></span>](https://msdn.microsoft.com/library/1b9hw62f.aspx)
- [<span data-ttu-id="0fa0a-457">`<providers>` – Element pro členství</span><span class="sxs-lookup"><span data-stu-id="0fa0a-457">The `<providers>` Element for Membership</span></span>](https://msdn.microsoft.com/library/6d4936ht.aspx)
- [<span data-ttu-id="0fa0a-458">Pomocí `<clear />` při přidání poskytovatele</span><span class="sxs-lookup"><span data-stu-id="0fa0a-458">Using `<clear />` When Adding providers</span></span>](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)
- [<span data-ttu-id="0fa0a-459">Práce přímo se `SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="0fa0a-459">Working Directly with the `SqlMembershipProvider`</span></span>](http://aspnet.4guysfromrolla.com/articles/091207-1.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="0fa0a-460">Video od Pluralsightu na témata, které jsou obsažené v tomto kurzu</span><span class="sxs-lookup"><span data-stu-id="0fa0a-460">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="0fa0a-461">Principy členství v ASP.NET</span><span class="sxs-lookup"><span data-stu-id="0fa0a-461">Understanding ASP.NET Memberships</span></span>](../../../videos/authentication/understanding-aspnet-memberships.md)
- [<span data-ttu-id="0fa0a-462">Konfigurace SQL kvůli spolupráci se schématy členství</span><span class="sxs-lookup"><span data-stu-id="0fa0a-462">Configuring SQL To Work with Membership Schemas</span></span>](../../../videos/authentication/configuring-sql-to-work-with-membership-schemas.md)
- [<span data-ttu-id="0fa0a-463">Změna nastavení členství ve výchozím schématu členství</span><span class="sxs-lookup"><span data-stu-id="0fa0a-463">Changing Membership Settings in the Default Membership Schema</span></span>](../../../videos/authentication/changing-membership-settings-in-the-default-membership-schema.md)

### <a name="about-the-author"></a><span data-ttu-id="0fa0a-464">O autorovi</span><span class="sxs-lookup"><span data-stu-id="0fa0a-464">About the Author</span></span>

<span data-ttu-id="0fa0a-465">Scott Meisnerová, Autor více ASP/ASP.NET knih a zakladatelem 4GuysFromRolla.com, má pracovali Microsoft webových technologiích od roku 1998.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-465">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="0fa0a-466">Scott funguje jako nezávislý konzultant, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-466">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="0fa0a-467">Jeho nejnovější knihy  *[Edice nakladatelství Sams naučit sami ASP.NET 2.0 za 24 hodin](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-467">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="0fa0a-468">Scott může být dostupný na adrese [ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com) nebo prostřednictvím na svém blogu [ http://ScottOnWriting.NET ](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="0fa0a-468">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="0fa0a-469">Speciální k</span><span class="sxs-lookup"><span data-stu-id="0fa0a-469">Special Thanks To</span></span>

<span data-ttu-id="0fa0a-470">V této sérii kurzů byl recenzován uživatelem mnoho užitečných revidující.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-470">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="0fa0a-471">Vedoucí kontrolor pro účely tohoto kurzu byla Alicja Maziarz.</span><span class="sxs-lookup"><span data-stu-id="0fa0a-471">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="0fa0a-472">Zajímat téma Moje nadcházejících článcích MSDN?</span><span class="sxs-lookup"><span data-stu-id="0fa0a-472">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="0fa0a-473">Pokud ano, vyřaďte mě řádek na [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com).</span><span class="sxs-lookup"><span data-stu-id="0fa0a-473">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="0fa0a-474">[Předchozí](storing-additional-user-information-cs.md)
> [další](creating-user-accounts-vb.md)</span><span class="sxs-lookup"><span data-stu-id="0fa0a-474">[Previous](storing-additional-user-information-cs.md)
[Next](creating-user-accounts-vb.md)</span></span>
