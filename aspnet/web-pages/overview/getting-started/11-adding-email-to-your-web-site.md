---
uid: web-pages/overview/getting-started/11-adding-email-to-your-web-site
title: Odesílání e-mailu z webového rozhraní ASP.NET stránek webu (Razor) | Dokumentace Microsoftu
author: tfitzmac
description: Tato kapitola vysvětluje postup odesílání automatizovaných e-mailovou zprávu na webové stránce.
ms.author: riande
ms.date: 02/20/2014
ms.assetid: fc49bcb9-f1a9-4048-8c3f-b60951853200
msc.legacyurl: /web-pages/overview/getting-started/11-adding-email-to-your-web-site
msc.type: authoredcontent
ms.openlocfilehash: 4429b9df0a6bc689eb3549c13aee598353c438af
ms.sourcegitcommit: 45ac74e400f9f2b7dbded66297730f6f14a4eb25
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/16/2018
ms.locfileid: "41753041"
---
<a name="sending-email-from-an-aspnet-web-pages-razor-site"></a><span data-ttu-id="c9745-103">Odesílání e-mailů z webu rozhraní ASP.NET Web Pages (Razor)</span><span class="sxs-lookup"><span data-stu-id="c9745-103">Sending Email from an ASP.NET Web Pages (Razor) Site</span></span>
====================
<span data-ttu-id="c9745-104">podle [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="c9745-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="c9745-105">Tento článek vysvětluje, jak odeslat e-mailovou zprávu na webové stránce při použití webových stránek ASP.NET (Razor).</span><span class="sxs-lookup"><span data-stu-id="c9745-105">This article explains how to send an email message from a website when you use ASP.NET Web Pages (Razor).</span></span>
> 
> <span data-ttu-id="c9745-106">Co se dozvíte:</span><span class="sxs-lookup"><span data-stu-id="c9745-106">What you'll learn:</span></span>
> 
> - <span data-ttu-id="c9745-107">Postup odesílání e-mailovou zprávu ze svého webu.</span><span class="sxs-lookup"><span data-stu-id="c9745-107">How to send an email message from your website.</span></span>
> - <span data-ttu-id="c9745-108">Jak připojit soubor e-mailové zprávě.</span><span class="sxs-lookup"><span data-stu-id="c9745-108">How to attach a file to an email message.</span></span>
> 
> <span data-ttu-id="c9745-109">Toto je funkce technologie ASP.NET zavedené v následujícím článku:</span><span class="sxs-lookup"><span data-stu-id="c9745-109">This is the ASP.NET feature introduced in the article:</span></span>
> 
> - <span data-ttu-id="c9745-110">`WebMail` Pomocné rutiny.</span><span class="sxs-lookup"><span data-stu-id="c9745-110">The `WebMail` helper.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="c9745-111">V tomto kurzu použili verze softwaru</span><span class="sxs-lookup"><span data-stu-id="c9745-111">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="c9745-112">Webové stránky ASP.NET (Razor) 3</span><span class="sxs-lookup"><span data-stu-id="c9745-112">ASP.NET Web Pages (Razor) 3</span></span>
>   
> 
> <span data-ttu-id="c9745-113">V tomto kurzu se také pracuje s ASP.NET Web Pages 2.</span><span class="sxs-lookup"><span data-stu-id="c9745-113">This tutorial also works with ASP.NET Web Pages 2.</span></span>


<a id="Sending_Email_Messages"></a>
## <a name="sending-email-messages-from-your-website"></a><span data-ttu-id="c9745-114">Odesílání e-mailové zprávy z webu</span><span class="sxs-lookup"><span data-stu-id="c9745-114">Sending Email Messages from Your Website</span></span>

<span data-ttu-id="c9745-115">Existuje spousta důvodů, proč potřebujete odesílat e-maily z vašeho webu.</span><span class="sxs-lookup"><span data-stu-id="c9745-115">There are all sorts of reasons why you might need to send email from your website.</span></span> <span data-ttu-id="c9745-116">Může odesílat zprávy potvrzení pro uživatele, nebo můžete odeslat oznámení sami sebe (například, který je zaregistrován nového uživatele.) `WebMail` Pomocné rutiny usnadňuje odeslání e-mailu.</span><span class="sxs-lookup"><span data-stu-id="c9745-116">You might send confirmation messages to users, or you might send notifications to yourself (for example, that a new user has registered.) The `WebMail` helper makes it easy for you to send email.</span></span>

<span data-ttu-id="c9745-117">Použít `WebMail` pomocné rutiny, je nutné mít přístup k serveru SMTP.</span><span class="sxs-lookup"><span data-stu-id="c9745-117">To use the `WebMail` helper, you have to have access to an SMTP server.</span></span> <span data-ttu-id="c9745-118">(SMTP jsou zahrnovaného *Simple Mail Transfer Protocol*.) SMTP server je e-mailový server, který pouze předává zprávy na server příjemce &#8212; je straně odchozích e-mailu.</span><span class="sxs-lookup"><span data-stu-id="c9745-118">(SMTP stands for *Simple Mail Transfer Protocol*.) An SMTP server is an email server that only forwards messages to the recipient's server &#8212; it's the outbound side of email.</span></span> <span data-ttu-id="c9745-119">Pokud používáte pro svůj web prostřednictvím poskytovatele hostitelských služeb, pravděpodobně nastavené můžete pomocí e-mailu a jejich se dozvíte, co je název vašeho serveru SMTP.</span><span class="sxs-lookup"><span data-stu-id="c9745-119">If you use a hosting provider for your website, they probably set you up with email and they can tell you what your SMTP server name is.</span></span> <span data-ttu-id="c9745-120">Pokud pracujete v podnikové síti, správce nebo oddělení IT může obvykle poskytují informace o serveru SMTP, který vám pomůže.</span><span class="sxs-lookup"><span data-stu-id="c9745-120">If you're working inside a corporate network, an administrator or your IT department can usually give you the information about an SMTP server that you can use.</span></span> <span data-ttu-id="c9745-121">Pokud pracujete v domácnostech, dokonce je možné otestovat pomocí poskytovatele běžné e-mailu, který lze zjistit název serveru SMTP.</span><span class="sxs-lookup"><span data-stu-id="c9745-121">If you're working at home, you might even be able to test using your ordinary email provider, who can tell you the name of their SMTP server.</span></span> <span data-ttu-id="c9745-122">Obvykle potřebujete:</span><span class="sxs-lookup"><span data-stu-id="c9745-122">You typically need:</span></span>

- <span data-ttu-id="c9745-123">Název serveru SMTP.</span><span class="sxs-lookup"><span data-stu-id="c9745-123">The name of the SMTP server.</span></span>
- <span data-ttu-id="c9745-124">Číslo portu.</span><span class="sxs-lookup"><span data-stu-id="c9745-124">The port number.</span></span> <span data-ttu-id="c9745-125">Toto je téměř vždy 25.</span><span class="sxs-lookup"><span data-stu-id="c9745-125">This is almost always 25.</span></span> <span data-ttu-id="c9745-126">Však může vyžadovat svého poskytovatele internetových služeb, abyste použili port 587.</span><span class="sxs-lookup"><span data-stu-id="c9745-126">However, your ISP may require you to use port 587.</span></span> <span data-ttu-id="c9745-127">Pokud používáte e-mailu vrstvu secure Sockets Layer (SSL), můžete potřebovat jiný port.</span><span class="sxs-lookup"><span data-stu-id="c9745-127">If you are using secure sockets layer (SSL) for email, you might need a different port.</span></span> <span data-ttu-id="c9745-128">Zeptejte se svého poskytovatele e-mailu.</span><span class="sxs-lookup"><span data-stu-id="c9745-128">Check with your email provider.</span></span>
- <span data-ttu-id="c9745-129">Přihlašovací údaje (uživatelské jméno a heslo).</span><span class="sxs-lookup"><span data-stu-id="c9745-129">Credentials (user name, password).</span></span>

<span data-ttu-id="c9745-130">V tomto postupu vytvoříte dvě stránky.</span><span class="sxs-lookup"><span data-stu-id="c9745-130">In this procedure, you create two pages.</span></span> <span data-ttu-id="c9745-131">První stránka má formulář, který umožňuje uživatelům zadat popis, jako kdyby byly vyplněním formuláře technické podpory.</span><span class="sxs-lookup"><span data-stu-id="c9745-131">The first page has a form that lets users enter a description, as if they were filling in a technical-support form.</span></span> <span data-ttu-id="c9745-132">První stránka odešle její informace na druhé stránce.</span><span class="sxs-lookup"><span data-stu-id="c9745-132">The first page submits its information to a second page.</span></span> <span data-ttu-id="c9745-133">Na druhé stránce kód extrahuje informace o uživateli a odešle e-mailovou zprávu.</span><span class="sxs-lookup"><span data-stu-id="c9745-133">In the second page, code extracts the user's information and sends an email message.</span></span> <span data-ttu-id="c9745-134">Také zobrazí se zpráva s potvrzením, že byla přijata hlášení o problému.</span><span class="sxs-lookup"><span data-stu-id="c9745-134">It also displays a message confirming that the problem report has been received.</span></span>

![[image]](11-adding-email-to-your-web-site/_static/image1.jpg)

> [!NOTE]
> <span data-ttu-id="c9745-136">Pro zjednodušení tento příklad kódu inicializuje `WebMail` pomocné rutiny přímo na stránku, kde používáte.</span><span class="sxs-lookup"><span data-stu-id="c9745-136">To keep this example simple, the code initializes the `WebMail` helper right in the page where you use it.</span></span> <span data-ttu-id="c9745-137">Pro skutečné weby, je však lepší představu vložit soubor globální inicializační kód tímto způsobem tak, aby je inicializovat `WebMail` pomocné rutiny pro všechny soubory ve vašem webu.</span><span class="sxs-lookup"><span data-stu-id="c9745-137">However, for real websites, it's a better idea to put initialization code like this in a global file, so that you initialize the `WebMail` helper for all files in your website.</span></span> <span data-ttu-id="c9745-138">Další informace najdete v tématu [přizpůsobení chování v celém webu pro webové stránky ASP.NET](https://go.microsoft.com/fwlink/?LinkId=202906#Setting_Values_For_Helpers).</span><span class="sxs-lookup"><span data-stu-id="c9745-138">For more information, see [Customizing Site-Wide Behavior for ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=202906#Setting_Values_For_Helpers).</span></span>


1. <span data-ttu-id="c9745-139">Vytvoření nového webu.</span><span class="sxs-lookup"><span data-stu-id="c9745-139">Create a new website.</span></span>
2. <span data-ttu-id="c9745-140">Přidejte novou stránku s názvem *EmailRequest.cshtml* a přidejte následující kód:</span><span class="sxs-lookup"><span data-stu-id="c9745-140">Add a new page named *EmailRequest.cshtml* and add the following markup:</span></span> 

    [!code-html[Main](11-adding-email-to-your-web-site/samples/sample1.html)]

    <span data-ttu-id="c9745-141">Všimněte si, `action` atribut prvku formuláře je nastavená na *ProcessRequest.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="c9745-141">Notice that the `action` attribute of the form element has been set to *ProcessRequest.cshtml*.</span></span> <span data-ttu-id="c9745-142">To znamená, že se odešle formulář na tuto stránku místo zpět na aktuální stránce.</span><span class="sxs-lookup"><span data-stu-id="c9745-142">This means that the form will be submitted to that page instead of back to the current page.</span></span>
3. <span data-ttu-id="c9745-143">Přidejte novou stránku s názvem *ProcessRequest.cshtml* na web a přidejte následující kód a značky:</span><span class="sxs-lookup"><span data-stu-id="c9745-143">Add a new page named *ProcessRequest.cshtml* to the website and add the following code and markup:</span></span>   

    [!code-cshtml[Main](11-adding-email-to-your-web-site/samples/sample2.cshtml)]

    <span data-ttu-id="c9745-144">V kódu získáte hodnoty polí formuláře, které byly odeslány na stránku.</span><span class="sxs-lookup"><span data-stu-id="c9745-144">In the code, you get the values of the form fields that were submitted to the page.</span></span> <span data-ttu-id="c9745-145">Poté je zapotřebí zavolat `WebMail` pomocné rutiny `Send` metodu pro vytvoření a odeslání e-mailové zprávy.</span><span class="sxs-lookup"><span data-stu-id="c9745-145">You then call the `WebMail` helper's `Send` method to create and send the email message.</span></span> <span data-ttu-id="c9745-146">Hodnoty pro použití jsou v tomto případě tvořené text, který zřetězí s hodnotami, které byly odeslány z formuláře.</span><span class="sxs-lookup"><span data-stu-id="c9745-146">In this case, the values to use are made up of text that you concatenate with the values that were submitted from the form.</span></span>

    <span data-ttu-id="c9745-147">Kód pro tuto stránku se nachází uvnitř `try/catch` bloku.</span><span class="sxs-lookup"><span data-stu-id="c9745-147">The code for this page is inside a `try/catch` block.</span></span> <span data-ttu-id="c9745-148">Pokud pro některou z důvodu pokus o odeslání e-mailu nefunguje (například, nejsou správné nastavení) kódu v `catch` bloku běží a nastaví `errorMessage` proměnné pro chyby, ke které došlo k chybě.</span><span class="sxs-lookup"><span data-stu-id="c9745-148">If for any reason the attempt to send an email doesn't work (for example, the settings aren't right), the code in the `catch` block runs and sets the `errorMessage` variable to the error that has occurred.</span></span> <span data-ttu-id="c9745-149">(Další informace o `try/catch` bloků nebo `<text>` značku, přečtěte si téma [Úvod do ASP.NET Web Pages programování pomocí syntaxe Razor](https://go.microsoft.com/fwlink/?LinkID=251587#ID_HandlingErrors).)</span><span class="sxs-lookup"><span data-stu-id="c9745-149">(For more information about `try/catch` blocks or the `<text>` tag, see [Introduction to ASP.NET Web Pages Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkID=251587#ID_HandlingErrors).)</span></span>

    <span data-ttu-id="c9745-150">V těle stránky Pokud `errorMessage` proměnné je prázdný (výchozí), uživateli se zobrazí zpráva, že byl odeslán e-mailové zprávy.</span><span class="sxs-lookup"><span data-stu-id="c9745-150">In the body of the page, if the `errorMessage` variable is empty (the default), the user sees a message that the email message has been sent.</span></span> <span data-ttu-id="c9745-151">Pokud `errorMessage` proměnná je nastavená na hodnotu true, který uživatel vidí a zpráva, že došlo k potížím, odeslání zprávy.</span><span class="sxs-lookup"><span data-stu-id="c9745-151">If the `errorMessage` variable is set to true, the user sees a message that there's been a problem sending the message.</span></span>

    <span data-ttu-id="c9745-152">Všimněte si, že v části stránky, která zobrazí chybovou zprávu, je další test: `if(debuggingFlag)`.</span><span class="sxs-lookup"><span data-stu-id="c9745-152">Notice that in the portion of the page that displays an error message, there's an additional test: `if(debuggingFlag)`.</span></span> <span data-ttu-id="c9745-153">To je proměnná, která můžete nastavit na hodnotu true, pokud máte potíže, pošle se e-mail.</span><span class="sxs-lookup"><span data-stu-id="c9745-153">This is a variable that you can set to true if you're having trouble sending email.</span></span> <span data-ttu-id="c9745-154">Když `debuggingFlag` má hodnotu true, a pokud je nějaký problém, pošle se e-mail, další chybová zpráva se zobrazí, který zobrazuje cokoli, co ASP.NET ohlásil při pokusu o odeslání e-mailové zprávy.</span><span class="sxs-lookup"><span data-stu-id="c9745-154">When `debuggingFlag` is true, and if there's a problem sending email, an additional error message is displayed that shows whatever ASP.NET has reported when it tried to send the email message.</span></span> <span data-ttu-id="c9745-155">Veletrh upozornění, když: chybové zprávy, které hlásí technologie ASP.NET, pokud ho nelze odeslat e-mailovou zprávu, může být obecný.</span><span class="sxs-lookup"><span data-stu-id="c9745-155">Fair warning, though: the error messages that ASP.NET reports when it can't send an email message can be generic.</span></span> <span data-ttu-id="c9745-156">Například pokud technologie ASP.NET nemůže připojit k serveru SMTP (například, protože jste udělali chybu v názvu serveru), chyba `Failure sending mail`.</span><span class="sxs-lookup"><span data-stu-id="c9745-156">For example, if ASP.NET can't contact the SMTP server (for example, because you made an error in the server name), the error is `Failure sending mail`.</span></span>

    > [!NOTE] 
    > 
    > <span data-ttu-id="c9745-157">**Důležité** když se zobrazí chybová zpráva z objektu výjimky (`ex` v kódu), proveďte *není* pravidelně předat prostřednictvím této zprávy pro uživatele.</span><span class="sxs-lookup"><span data-stu-id="c9745-157">**Important** When you get an error message from an exception object (`ex` in the code), do *not* routinely pass that message through to users.</span></span> <span data-ttu-id="c9745-158">Objekty výjimky často zahrnují informace, které uživatelé neměli vidět a, která můžou být ohrožení zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="c9745-158">Exception objects often include information that users should not see and that can even be a security vulnerability.</span></span> <span data-ttu-id="c9745-159">To je důvod, proč tento kód obsahuje proměnnou `debuggingFlag` jako přepínač, který se používá k zobrazení chybové zprávy a proč proměnná ve výchozím nastavení je nastavena na hodnotu false.</span><span class="sxs-lookup"><span data-stu-id="c9745-159">That's why this code includes the variable `debuggingFlag` that's used as a switch to display the error message, and why the variable by default is set to false.</span></span> <span data-ttu-id="c9745-160">Měli byste nastavit tuto proměnnou na hodnotu true (a tedy zobrazí chybová zpráva) *pouze* Pokud máte potíže s odesláním e-mailu a je třeba ladit.</span><span class="sxs-lookup"><span data-stu-id="c9745-160">You should set that variable to true (and therefore display the error message) *only* if you're having a problem with sending email and you need to debug.</span></span> <span data-ttu-id="c9745-161">Po opravě potíží nastavit `debuggingFlag` zpět na hodnotu false.</span><span class="sxs-lookup"><span data-stu-id="c9745-161">Once you have fixed any problems, set `debuggingFlag` back to false.</span></span>

    <span data-ttu-id="c9745-162">Upravte následující související nastavení v kódu e-mailu:</span><span class="sxs-lookup"><span data-stu-id="c9745-162">Modify the following email related settings in the code:</span></span>

   - <span data-ttu-id="c9745-163">Nastavte `your-SMTP-host` na název serveru SMTP, který máte přístup.</span><span class="sxs-lookup"><span data-stu-id="c9745-163">Set `your-SMTP-host` to the name of the SMTP server that you have access to.</span></span>
   - <span data-ttu-id="c9745-164">Nastavte `your-user-name-here` na uživatelské jméno pro účet serveru SMTP.</span><span class="sxs-lookup"><span data-stu-id="c9745-164">Set `your-user-name-here` to the user name for your SMTP server account.</span></span>
   - <span data-ttu-id="c9745-165">Nastavte `your-account-password` heslo pro účet serveru SMTP.</span><span class="sxs-lookup"><span data-stu-id="c9745-165">Set `your-account-password` to the password for your SMTP server account.</span></span>
   - <span data-ttu-id="c9745-166">Nastavte `your-email-address-here` vlastní e-mailovou adresu.</span><span class="sxs-lookup"><span data-stu-id="c9745-166">Set `your-email-address-here` to your own email address.</span></span> <span data-ttu-id="c9745-167">Toto je e-mailovou adresu, které se zpráva poslala.</span><span class="sxs-lookup"><span data-stu-id="c9745-167">This is the email address that the message is sent from.</span></span> <span data-ttu-id="c9745-168">(Některé poskytovateli e-mailu není vám umožní zadat jiný `From` adresy a používat vaše uživatelské jméno jako `From` adresu.)</span><span class="sxs-lookup"><span data-stu-id="c9745-168">(Some email providers don't let you specify a different `From` address and will use your user name as the `From` address.)</span></span>

     > [!TIP] 
     > 
     > <a id="configuring_email_settings"></a>
     > ### <a name="configuring-email-settings"></a><span data-ttu-id="c9745-169">Konfigurace nastavení e-mailu</span><span class="sxs-lookup"><span data-stu-id="c9745-169">Configuring Email Settings</span></span>
     > 
     > <span data-ttu-id="c9745-170">Může být někdy obtížné Ujistěte se, že máte správné nastavení pro server SMTP, číslo portu a tak dále.</span><span class="sxs-lookup"><span data-stu-id="c9745-170">It can be a challenge sometimes to make sure you have the right settings for the SMTP server, port number, and so on.</span></span> <span data-ttu-id="c9745-171">Tady je několik tipů:</span><span class="sxs-lookup"><span data-stu-id="c9745-171">Here are a few tips:</span></span>
     > 
     > - <span data-ttu-id="c9745-172">Název serveru SMTP je často něco jako `smtp.provider.com` nebo `smtp.provider.net`.</span><span class="sxs-lookup"><span data-stu-id="c9745-172">The SMTP server name is often something like `smtp.provider.com` or `smtp.provider.net`.</span></span> <span data-ttu-id="c9745-173">Nicméně pokud publikování webu k poskytovateli hostingu, název serveru SMTP v tomto okamžiku může být `localhost`.</span><span class="sxs-lookup"><span data-stu-id="c9745-173">However, if you publish your site to a hosting provider, the SMTP server name at that point might be `localhost`.</span></span> <span data-ttu-id="c9745-174">Je to proto, že po publikování a vaše lokalita běží na serveru zprostředkovatele, e-mailový server může být místní z hlediska vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="c9745-174">This is because after you've published and your site is running on the provider's server, the email server might be local from the perspective of your application.</span></span> <span data-ttu-id="c9745-175">Tato změna názvů serverů může znamenat, že budete muset změnit název serveru SMTP jako součást procesu publikování.</span><span class="sxs-lookup"><span data-stu-id="c9745-175">This change in server names might mean you have to change the SMTP server name as part of your publishing process.</span></span>
     > - <span data-ttu-id="c9745-176">Číslo portu je obvykle 25.</span><span class="sxs-lookup"><span data-stu-id="c9745-176">The port number is usually 25.</span></span> <span data-ttu-id="c9745-177">Ale někteří poskytovatelé vyžadovat použití port 587 nebo některé další porty.</span><span class="sxs-lookup"><span data-stu-id="c9745-177">However, some providers require you to use port 587 or some other port.</span></span>
     > - <span data-ttu-id="c9745-178">Ujistěte se, že používáte správné přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="c9745-178">Make sure that you use the right credentials.</span></span> <span data-ttu-id="c9745-179">Pokud k poskytovateli hostingu, které jste publikovali vašeho webu, použijte přihlašovací údaje, které zprostředkovatel má výslovně uvedeno, jsou určené pro e-mailu.</span><span class="sxs-lookup"><span data-stu-id="c9745-179">If you've published your site to a hosting provider, use the credentials that the provider has specifically indicated are for email.</span></span> <span data-ttu-id="c9745-180">To může být liší od přihlašovacích údajů, které můžete použít k publikování.</span><span class="sxs-lookup"><span data-stu-id="c9745-180">These might be different from the credentials you use to publish.</span></span>
     > - <span data-ttu-id="c9745-181">Někdy není nutné přihlašovací údaje vůbec.</span><span class="sxs-lookup"><span data-stu-id="c9745-181">Sometimes you don't need credentials at all.</span></span> <span data-ttu-id="c9745-182">Pokud chcete odeslat e-mailu pomocí svého osobního poskytovatele internetových služeb, může být vašeho poskytovatele e-mailu už znáte svoje přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="c9745-182">If you're sending email using your personal ISP, your email provider might already know your credentials.</span></span> <span data-ttu-id="c9745-183">Po publikování, možná budete muset použít jiná pověření než při testování v místním počítači.</span><span class="sxs-lookup"><span data-stu-id="c9745-183">After you publish, you might need to use different credentials than when you test on your local computer.</span></span>
     > - <span data-ttu-id="c9745-184">Pokud vašeho poskytovatele e-mailu používá šifrování, je nutné nastavit `WebMail.EnableSsl` k `true`.</span><span class="sxs-lookup"><span data-stu-id="c9745-184">If your email provider uses encryption, you have to set `WebMail.EnableSsl` to `true`.</span></span>
4. <span data-ttu-id="c9745-185">Spustit *EmailRequest.cshtml* stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="c9745-185">Run the *EmailRequest.cshtml* page in a browser.</span></span> <span data-ttu-id="c9745-186">(Ujistěte se, že je vybrána na stránce v **soubory** pracovního prostoru před jeho spuštěním.)</span><span class="sxs-lookup"><span data-stu-id="c9745-186">(Make sure the page is selected in the **Files** workspace before you run it.)</span></span>
5. <span data-ttu-id="c9745-187">Zadejte název a popis problému a klikněte **odeslat** tlačítko.</span><span class="sxs-lookup"><span data-stu-id="c9745-187">Enter your name and a problem description, and then click the **Submit** button.</span></span> <span data-ttu-id="c9745-188">Budete přesměrováni na *ProcessRequest.cshtml* stránky, který potvrdí vaši zprávu a které vám pošle e-mailovou zprávu.</span><span class="sxs-lookup"><span data-stu-id="c9745-188">You're redirected to the *ProcessRequest.cshtml* page, which confirms your message and which sends you an email message.</span></span> 

    ![[image]](11-adding-email-to-your-web-site/_static/image2.jpg)

<a id="Sending_a_File"></a>
## <a name="sending-a-file-using-email"></a><span data-ttu-id="c9745-190">Odeslání e-mailem</span><span class="sxs-lookup"><span data-stu-id="c9745-190">Sending a File Using Email</span></span>

<span data-ttu-id="c9745-191">Můžete také odeslat soubory, které jsou připojené k e-mailové zprávy.</span><span class="sxs-lookup"><span data-stu-id="c9745-191">You can also send files that are attached to email messages.</span></span> <span data-ttu-id="c9745-192">V tomto postupu vytvořte textový soubor a dvě stránky HTML.</span><span class="sxs-lookup"><span data-stu-id="c9745-192">In this procedure, you create a text file and two HTML pages.</span></span> <span data-ttu-id="c9745-193">Použijete textový soubor jako přílohu e-mailu.</span><span class="sxs-lookup"><span data-stu-id="c9745-193">You'll use the text file as an email attachment.</span></span>

1. <span data-ttu-id="c9745-194">Na webu, přidejte nový textový soubor a pojmenujte ho *MyFile.txt*.</span><span class="sxs-lookup"><span data-stu-id="c9745-194">In the website, add a new text file and name it *MyFile.txt*.</span></span>
2. <span data-ttu-id="c9745-195">Zkopírujte následující text a vložte ho do souboru:</span><span class="sxs-lookup"><span data-stu-id="c9745-195">Copy the following text and paste it in the file:</span></span> 

    `Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.`
3. <span data-ttu-id="c9745-196">Vytvoření stránky s názvem *SendFile.cshtml* a přidejte následující kód:</span><span class="sxs-lookup"><span data-stu-id="c9745-196">Create a page named *SendFile.cshtml* and add the following markup:</span></span> 

    [!code-html[Main](11-adding-email-to-your-web-site/samples/sample3.html)]
4. <span data-ttu-id="c9745-197">Vytvoření stránky s názvem *ProcessFile.cshtml* a přidejte následující kód:</span><span class="sxs-lookup"><span data-stu-id="c9745-197">Create a page named *ProcessFile.cshtml* and add the following markup:</span></span> 

    [!code-cshtml[Main](11-adding-email-to-your-web-site/samples/sample4.cshtml)]
5. <span data-ttu-id="c9745-198">Upravte následující související nastavení v kódu z příkladu e-mailu:</span><span class="sxs-lookup"><span data-stu-id="c9745-198">Modify the following email related settings in the code from the example:</span></span>

    - <span data-ttu-id="c9745-199">Nastavte `your-SMTP-host` na název serveru SMTP, ke kterým máte přístup.</span><span class="sxs-lookup"><span data-stu-id="c9745-199">Set `your-SMTP-host` to the name of an SMTP server that you have access to.</span></span>
    - <span data-ttu-id="c9745-200">Nastavte `your-user-name-here` na uživatelské jméno pro účet serveru SMTP.</span><span class="sxs-lookup"><span data-stu-id="c9745-200">Set `your-user-name-here` to the user name for your SMTP server account.</span></span>
    - <span data-ttu-id="c9745-201">Nastavte `your-email-address-here` vlastní e-mailovou adresu.</span><span class="sxs-lookup"><span data-stu-id="c9745-201">Set `your-email-address-here` to your own email address.</span></span> <span data-ttu-id="c9745-202">Toto je e-mailovou adresu, které se zpráva poslala.</span><span class="sxs-lookup"><span data-stu-id="c9745-202">This is the email address that the message is sent from.</span></span>
    - <span data-ttu-id="c9745-203">Nastavte `your-account-password` heslo pro účet serveru SMTP.</span><span class="sxs-lookup"><span data-stu-id="c9745-203">Set `your-account-password` to the password for your SMTP server account.</span></span>
    - <span data-ttu-id="c9745-204">Nastavte `target-email-address-here` vlastní e-mailovou adresu.</span><span class="sxs-lookup"><span data-stu-id="c9745-204">Set `target-email-address-here` to your own email address.</span></span> <span data-ttu-id="c9745-205">(Jako předtím by normálně posíláte e-mail někomu jinému, ale pro účely testování, můžete ho odeslat na vás.)</span><span class="sxs-lookup"><span data-stu-id="c9745-205">(As before, you'd normally send an email to someone else, but for testing, you can send it to yourself.)</span></span>
6. <span data-ttu-id="c9745-206">Spustit *SendFile.cshtml* stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="c9745-206">Run the *SendFile.cshtml* page in a browser.</span></span>
7. <span data-ttu-id="c9745-207">Zadejte své jméno, řádek předmětu a název textového souboru, připojit (*MyFile.txt*).</span><span class="sxs-lookup"><span data-stu-id="c9745-207">Enter your name, a subject line, and the name of the text file to attach (*MyFile.txt*).</span></span>
8. <span data-ttu-id="c9745-208">Klikněte na tlačítko `Submit` tlačítko.</span><span class="sxs-lookup"><span data-stu-id="c9745-208">Click the `Submit` button.</span></span> <span data-ttu-id="c9745-209">Jako dříve, budete přesměrováni na *ProcessFile.cshtml* stránky, který potvrdí vaši zprávu a které vám pošle e-mailovou zprávu s připojený soubor.</span><span class="sxs-lookup"><span data-stu-id="c9745-209">As before, you're redirected to the *ProcessFile.cshtml* page, which confirms your message and which sends you an email message with the attached file.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="c9745-210">Další prostředky</span><span class="sxs-lookup"><span data-stu-id="c9745-210">Additional Resources</span></span>


- [<span data-ttu-id="c9745-211">Webové stránky ASP.NET (Razor) – průvodce řešením potíží</span><span class="sxs-lookup"><span data-stu-id="c9745-211">ASP.NET Web Pages (Razor) Troubleshooting Guide</span></span>](https://go.microsoft.com/fwlink/?LinkId=253001)
- [<span data-ttu-id="c9745-212">Simple Mail Transfer Protocol</span><span class="sxs-lookup"><span data-stu-id="c9745-212">Simple Mail Transfer Protocol</span></span>](https://msdn.microsoft.com/library/aa480435.aspx)
- [<span data-ttu-id="c9745-213">Přizpůsobení chování v celém webu pro webové stránky ASP.NET</span><span class="sxs-lookup"><span data-stu-id="c9745-213">Customizing Site-Wide Behavior for ASP.NET Web Pages</span></span>](https://go.microsoft.com/fwlink/?LinkId=202906)
