---
title: Vazby modelu v ASP.NET Core
author: tdykstra
description: Zjistěte, jak vazby modelu v ASP.NET Core MVC mapují data požadavků HTTP na parametry metod akce.
ms.assetid: 0be164aa-1d72-4192-bd6b-192c9c301164
ms.author: tdykstra
ms.date: 08/14/2018
uid: mvc/models/model-binding
ms.openlocfilehash: 0ce20a8040c6b19da1f57e1c053a7ef81d8bcb23
ms.sourcegitcommit: d53e0cc71542b92de867bcce51575b054886f529
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 08/16/2018
ms.locfileid: "41753541"
---
# <a name="model-binding-in-aspnet-core"></a><span data-ttu-id="3def1-103">Vazby modelu v ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="3def1-103">Model Binding in ASP.NET Core</span></span>

<span data-ttu-id="3def1-104">Podle [Rachel Appel](https://github.com/rachelappel)</span><span class="sxs-lookup"><span data-stu-id="3def1-104">By [Rachel Appel](https://github.com/rachelappel)</span></span>

## <a name="introduction-to-model-binding"></a><span data-ttu-id="3def1-105">Úvod do vazby modelu</span><span class="sxs-lookup"><span data-stu-id="3def1-105">Introduction to model binding</span></span>

<span data-ttu-id="3def1-106">Vazby modelu v ASP.NET Core MVC mapují data požadavků HTTP na parametry metod akce.</span><span class="sxs-lookup"><span data-stu-id="3def1-106">Model binding in ASP.NET Core MVC maps data from HTTP requests to action method parameters.</span></span> <span data-ttu-id="3def1-107">Parametry mohou být jednoduché typy, jako jsou řetězce, celá čísla nebo float, nebo mohou být komplexní typy.</span><span class="sxs-lookup"><span data-stu-id="3def1-107">The parameters may be simple types such as strings, integers, or floats, or they may be complex types.</span></span> <span data-ttu-id="3def1-108">Totiž skvělou funkcí služby MVC mapování příchozích dat protějšek je často opakovaných scénář, bez ohledu na velikost a složitost dat.</span><span class="sxs-lookup"><span data-stu-id="3def1-108">This is a great feature of MVC because mapping incoming data to a counterpart is an often repeated scenario, regardless of size or complexity of the data.</span></span> <span data-ttu-id="3def1-109">MVC tento problém řeší tím abstrahovat vazby hned, aby vývojáři nemuseli kvůli zachovat přepisování trochu odlišná verze tohoto stejného kódu v každé aplikaci.</span><span class="sxs-lookup"><span data-stu-id="3def1-109">MVC solves this problem by abstracting binding away so developers don't have to keep rewriting a slightly different version of that same code in every app.</span></span> <span data-ttu-id="3def1-110">Zápis vlastní text, který má typ převaděče kód je únavné a náchylné k chybám.</span><span class="sxs-lookup"><span data-stu-id="3def1-110">Writing your own text to type converter code is tedious, and error prone.</span></span>

## <a name="how-model-binding-works"></a><span data-ttu-id="3def1-111">Princip vazby modelu</span><span class="sxs-lookup"><span data-stu-id="3def1-111">How model binding works</span></span>

<span data-ttu-id="3def1-112">Když MVC obdrží požadavek HTTP, nasměruje ho do metody konkrétní akce kontroleru.</span><span class="sxs-lookup"><span data-stu-id="3def1-112">When MVC receives an HTTP request, it routes it to a specific action method of a controller.</span></span> <span data-ttu-id="3def1-113">Určuje, jakou metodu akce spouštět až na to, co je v datech trasy a potom naváže hodnoty z požadavku HTTP na parametry této metodě akce.</span><span class="sxs-lookup"><span data-stu-id="3def1-113">It determines which action method to run based on what is in the route data, then it binds values from the HTTP request to that action method's parameters.</span></span> <span data-ttu-id="3def1-114">Představte si třeba následující adresu URL:</span><span class="sxs-lookup"><span data-stu-id="3def1-114">For example, consider the following URL:</span></span>

`http://contoso.com/movies/edit/2`

<span data-ttu-id="3def1-115">Vzhledem k tomu, že šablona trasy vypadá takto, `{controller=Home}/{action=Index}/{id?}`, `movies/edit/2` směruje `Movies` řadič a jeho `Edit` metody akce.</span><span class="sxs-lookup"><span data-stu-id="3def1-115">Since the route template looks like this, `{controller=Home}/{action=Index}/{id?}`, `movies/edit/2` routes to the `Movies` controller, and its `Edit` action method.</span></span> <span data-ttu-id="3def1-116">Také přijímá volitelný parametr s názvem `id`.</span><span class="sxs-lookup"><span data-stu-id="3def1-116">It also accepts an optional parameter called `id`.</span></span> <span data-ttu-id="3def1-117">Kód pro metodu akce by měl vypadat přibližně takto:</span><span class="sxs-lookup"><span data-stu-id="3def1-117">The code for the action method should look something like this:</span></span>

```csharp
public IActionResult Edit(int? id)
   ```

<span data-ttu-id="3def1-118">Poznámka: Řetězce v trasu adresy URL nejsou velká a malá písmena.</span><span class="sxs-lookup"><span data-stu-id="3def1-118">Note: The strings in the URL route are not case sensitive.</span></span>

<span data-ttu-id="3def1-119">MVC se pokusí vytvořit vazbu data požadavku na parametry akce podle názvu.</span><span class="sxs-lookup"><span data-stu-id="3def1-119">MVC will try to bind request data to the action parameters by name.</span></span> <span data-ttu-id="3def1-120">MVC bude hledat hodnoty pro každý parametr pomocí názvu parametru a názvy jeho veřejné nastavitelné vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="3def1-120">MVC will look for values for each parameter using the parameter name and the names of its public settable properties.</span></span> <span data-ttu-id="3def1-121">V předchozím příkladu je parametr jedinou akcí s názvem `id`, který MVC váže hodnotu s názvem v hodnoty trasy.</span><span class="sxs-lookup"><span data-stu-id="3def1-121">In the above example, the only action parameter is named `id`, which MVC binds to the value with the same name in the route values.</span></span> <span data-ttu-id="3def1-122">Kromě hodnoty trasy MVC vytvoří vazbu mezi data z různých částí žádosti a provádí se v určitém pořadí.</span><span class="sxs-lookup"><span data-stu-id="3def1-122">In addition to route values MVC will bind data from various parts of the request and it does so in a set order.</span></span> <span data-ttu-id="3def1-123">Níže je seznam zdrojů dat v pořadí, ve kterém vazby modelu vypadá přes ně:</span><span class="sxs-lookup"><span data-stu-id="3def1-123">Below is a list of the data sources in the order that model binding looks through them:</span></span>

1. <span data-ttu-id="3def1-124">`Form values`: Toto jsou hodnot formuláře, které najdete v požadavku HTTP pomocí metody POST.</span><span class="sxs-lookup"><span data-stu-id="3def1-124">`Form values`: These are form values that go in the HTTP request using the POST method.</span></span> <span data-ttu-id="3def1-125">(včetně požadavků jQuery POST).</span><span class="sxs-lookup"><span data-stu-id="3def1-125">(including jQuery POST requests).</span></span>

2. <span data-ttu-id="3def1-126">`Route values`: Sadu hodnot trasy poskytované [směrování](xref:fundamentals/routing)</span><span class="sxs-lookup"><span data-stu-id="3def1-126">`Route values`: The set of route values provided by [Routing](xref:fundamentals/routing)</span></span>

3. <span data-ttu-id="3def1-127">`Query strings`: Řetězec část dotazu identifikátoru URI.</span><span class="sxs-lookup"><span data-stu-id="3def1-127">`Query strings`: The query string part of the URI.</span></span>

<!-- DocFX BUG
The link works but generates an error when building with DocFX
@fundamentals/routing
[Routing](xref:fundamentals/routing)
-->

<span data-ttu-id="3def1-128">Poznámka: Tvoří hodnoty, data směrování a dotazů řetězce se ukládají jako dvojice název hodnota.</span><span class="sxs-lookup"><span data-stu-id="3def1-128">Note: Form values, route data, and query strings are all stored as name-value pairs.</span></span>

<span data-ttu-id="3def1-129">Vzhledem k tomu vyzváni vazby modelu pro klíč s názvem `id` a nic s názvem `id` hodnoty formulář přesune do hodnoty trasy pro daný klíč hledání.</span><span class="sxs-lookup"><span data-stu-id="3def1-129">Since model binding asked for a key named `id` and there's nothing named `id` in the form values, it moved on to the route values looking for that key.</span></span> <span data-ttu-id="3def1-130">V našem příkladu je shoda.</span><span class="sxs-lookup"><span data-stu-id="3def1-130">In our example, it's a match.</span></span> <span data-ttu-id="3def1-131">Vázání a hodnota je převedena na celé číslo. 2.</span><span class="sxs-lookup"><span data-stu-id="3def1-131">Binding happens, and the value is converted to the integer 2.</span></span> <span data-ttu-id="3def1-132">Stejný požadavek pomocí úpravy (id řetězce) by převést na řetězec "2".</span><span class="sxs-lookup"><span data-stu-id="3def1-132">The same request using Edit(string id) would convert to the string "2".</span></span>

<span data-ttu-id="3def1-133">Pokud v příkladu jednoduché typy.</span><span class="sxs-lookup"><span data-stu-id="3def1-133">So far the example uses simple types.</span></span> <span data-ttu-id="3def1-134">V aplikaci MVC jednoduché typy jsou všechny primitivní typ formátu .NET nebo typ s konvertor typu řetězec.</span><span class="sxs-lookup"><span data-stu-id="3def1-134">In MVC simple types are any .NET primitive type or type with a string type converter.</span></span> <span data-ttu-id="3def1-135">Parametr metody akce, jako byly třídu `Movie` typ, který obsahuje jednoduché a komplexní typy jako krásně vlastnosti, MVC model vazby budou nadále ji zpracovat.</span><span class="sxs-lookup"><span data-stu-id="3def1-135">If the action method's parameter were a class such as the `Movie` type, which contains both simple and complex types as properties, MVC's model binding will still handle it nicely.</span></span> <span data-ttu-id="3def1-136">Reflexe a rekurze používá k procházení vlastnosti komplexní typy hledání shody.</span><span class="sxs-lookup"><span data-stu-id="3def1-136">It uses reflection and recursion to traverse the properties of complex types looking for matches.</span></span> <span data-ttu-id="3def1-137">Vazby modelu hledá vzor *parameter_name.property_name* k vázání hodnot vlastností.</span><span class="sxs-lookup"><span data-stu-id="3def1-137">Model binding looks for the pattern *parameter_name.property_name* to bind values to properties.</span></span> <span data-ttu-id="3def1-138">Pokud se nenajde odpovídající hodnoty tohoto formuláře, pokusí se vytvořit vazbu pomocí názvu vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="3def1-138">If it doesn't find matching values of this form, it will attempt to bind using just the property name.</span></span> <span data-ttu-id="3def1-139">Pro tyto typy, jako `Collection` typy vazby modelu hledá odpovídající *parameter_name [index]* nebo jen *[index]*.</span><span class="sxs-lookup"><span data-stu-id="3def1-139">For those types such as `Collection` types, model binding looks for matches to *parameter_name[index]* or just *[index]*.</span></span> <span data-ttu-id="3def1-140">Model vazba zpracuje `Dictionary` typy podobně s žádostí o *parameter_name [klíč]* nebo jen *[klíč]*, jako jsou klíče jednoduché typy.</span><span class="sxs-lookup"><span data-stu-id="3def1-140">Model binding treats  `Dictionary` types similarly, asking for *parameter_name[key]* or just *[key]*, as long as the keys are simple types.</span></span> <span data-ttu-id="3def1-141">Klíče, které jsou podporovány odpovídat názvům pole HTML a pomocných rutin značek, které jsou generovány pro stejný typ modelu.</span><span class="sxs-lookup"><span data-stu-id="3def1-141">Keys that are supported match the field names HTML and tag helpers generated for the same model type.</span></span> <span data-ttu-id="3def1-142">To umožňuje verzemi hodnoty tak, aby pole formuláře vyplněné se vstupem uživatele pro jejich pohodlí, například při zůstat vázaných dat od vytvoření nebo úprava úspěšně ověření.</span><span class="sxs-lookup"><span data-stu-id="3def1-142">This enables round-tripping values so that the form fields remain filled with the user's input for their convenience, for example, when bound data from a create or edit didn't pass validation.</span></span>

<span data-ttu-id="3def1-143">Pro vazbu, která se provede třídy musí mít veřejný výchozí konstruktor a člen vázat musí být zapisovatelný veřejné vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="3def1-143">In order for binding to happen the class must have a public default constructor and member to be bound must be public writable properties.</span></span> <span data-ttu-id="3def1-144">Pokud vazba modelu se stane, že třída bude vytvořen pouze pomocí veřejný výchozí konstruktor, můžete nastavit vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="3def1-144">When model binding happens the class will only be instantiated using the public default constructor, then the properties can be set.</span></span>

<span data-ttu-id="3def1-145">Při vazbu parametru vazby modelu zastaví hledání pro hodnoty s tímto názvem a se přejde k další parametr vazby.</span><span class="sxs-lookup"><span data-stu-id="3def1-145">When a parameter is bound, model binding stops looking for values with that name and it moves on to bind the next parameter.</span></span> <span data-ttu-id="3def1-146">V opačném případě výchozí chování vazby modelu nastaví na výchozí hodnoty v závislosti na jejich typu parametry:</span><span class="sxs-lookup"><span data-stu-id="3def1-146">Otherwise, the default model binding behavior sets parameters to their default values depending on their type:</span></span>

* <span data-ttu-id="3def1-147">`T[]`: S výjimkou produktů pole typu `byte[]`, vazba nastaví parametry typu `T[]` k `Array.Empty<T>()`.</span><span class="sxs-lookup"><span data-stu-id="3def1-147">`T[]`: With the exception of arrays of type `byte[]`, binding sets parameters of type `T[]` to `Array.Empty<T>()`.</span></span> <span data-ttu-id="3def1-148">Pole typu `byte[]` jsou nastaveny na `null`.</span><span class="sxs-lookup"><span data-stu-id="3def1-148">Arrays of type `byte[]` are set to `null`.</span></span>

* <span data-ttu-id="3def1-149">Typy odkazu: Vazby vytvoří instanci třídy s výchozím konstruktorem bez nastavování vlastností.</span><span class="sxs-lookup"><span data-stu-id="3def1-149">Reference Types: Binding creates an instance of a class with the default constructor without setting properties.</span></span> <span data-ttu-id="3def1-150">Model však vazba sady `string` parametry `null`.</span><span class="sxs-lookup"><span data-stu-id="3def1-150">However, model binding sets `string` parameters to `null`.</span></span>

* <span data-ttu-id="3def1-151">Typy připouštějící hodnotu NULL: Typy s možnou hodnotou Null jsou nastaveny na `null`.</span><span class="sxs-lookup"><span data-stu-id="3def1-151">Nullable Types: Nullable types are set to `null`.</span></span> <span data-ttu-id="3def1-152">V příkladu výše, model vazby sady `id` k `null` vzhledem k tomu, že je typu `int?`.</span><span class="sxs-lookup"><span data-stu-id="3def1-152">In the above example, model binding sets `id` to `null` since it's of type `int?`.</span></span>

* <span data-ttu-id="3def1-153">Typy hodnot: Typy neumožňující hodnotu typu `T` jsou nastaveny na `default(T)`.</span><span class="sxs-lookup"><span data-stu-id="3def1-153">Value Types: Non-nullable value types of type `T` are set to `default(T)`.</span></span> <span data-ttu-id="3def1-154">Vazby modelu bude třeba nastavit parametr `int id` na hodnotu 0.</span><span class="sxs-lookup"><span data-stu-id="3def1-154">For example, model binding will set a parameter `int id` to 0.</span></span> <span data-ttu-id="3def1-155">Zvažte použití ověření modelu nebo typů s povolenou hodnotou Null, spíše než spoléhání se na výchozí hodnoty.</span><span class="sxs-lookup"><span data-stu-id="3def1-155">Consider using model validation or nullable types rather than relying on default values.</span></span>

<span data-ttu-id="3def1-156">Pokud se vazba se nezdaří, MVC nevyvolá chybu.</span><span class="sxs-lookup"><span data-stu-id="3def1-156">If binding fails, MVC doesn't throw an error.</span></span> <span data-ttu-id="3def1-157">Zkontrolujte všechny akce, která přijímá vstup uživatele `ModelState.IsValid` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="3def1-157">Every action which accepts user input should check the `ModelState.IsValid` property.</span></span>

<span data-ttu-id="3def1-158">Poznámka: Každá položka v kontroleru `ModelState` je vlastnost `ModelStateEntry` obsahující `Errors` vlastnost.</span><span class="sxs-lookup"><span data-stu-id="3def1-158">Note: Each entry in the controller's `ModelState` property is a `ModelStateEntry` containing an `Errors` property.</span></span> <span data-ttu-id="3def1-159">Je zřídka nezbytné k této kolekci dotazování sami.</span><span class="sxs-lookup"><span data-stu-id="3def1-159">It's rarely necessary to query this collection yourself.</span></span> <span data-ttu-id="3def1-160">Místo nich se používá `ModelState.IsValid`.</span><span class="sxs-lookup"><span data-stu-id="3def1-160">Use `ModelState.IsValid` instead.</span></span>

<span data-ttu-id="3def1-161">Kromě toho jsou některé speciální datové typy, které MVC nutné vzít v úvahu při provádění vazby modelu:</span><span class="sxs-lookup"><span data-stu-id="3def1-161">Additionally, there are some special data types that MVC must consider when performing model binding:</span></span>

* <span data-ttu-id="3def1-162">`IFormFile`, `IEnumerable<IFormFile>`: Jeden nebo více nahraných souborů, které jsou součástí požadavku HTTP.</span><span class="sxs-lookup"><span data-stu-id="3def1-162">`IFormFile`, `IEnumerable<IFormFile>`: One or more uploaded files that are part of the HTTP request.</span></span>

* <span data-ttu-id="3def1-163">`CancellationToken`: Používá se pro zrušení aktivity v asynchronní řadiče.</span><span class="sxs-lookup"><span data-stu-id="3def1-163">`CancellationToken`: Used to cancel activity in asynchronous controllers.</span></span>

<span data-ttu-id="3def1-164">Tyto typy mohou být vázány na parametry akce nebo vlastností typu třídy.</span><span class="sxs-lookup"><span data-stu-id="3def1-164">These types can be bound to action parameters or to properties on a class type.</span></span>

<span data-ttu-id="3def1-165">Po dokončení, vazby modelu [ověření](validation.md) vyvolá.</span><span class="sxs-lookup"><span data-stu-id="3def1-165">Once model binding is complete, [Validation](validation.md) occurs.</span></span> <span data-ttu-id="3def1-166">Vazby modelu výchozí dobře funguje pro většinu scénářů vývoje.</span><span class="sxs-lookup"><span data-stu-id="3def1-166">Default model binding works great for the vast majority of development scenarios.</span></span> <span data-ttu-id="3def1-167">Je také rozšiřitelný, pokud máte jedinečné požadavky můžete přizpůsobit předdefinované chování.</span><span class="sxs-lookup"><span data-stu-id="3def1-167">It's also extensible so if you have unique needs you can customize the built-in behavior.</span></span>

## <a name="customize-model-binding-behavior-with-attributes"></a><span data-ttu-id="3def1-168">Přizpůsobení chování vazby modelu s atributy</span><span class="sxs-lookup"><span data-stu-id="3def1-168">Customize model binding behavior with attributes</span></span>

<span data-ttu-id="3def1-169">MVC obsahuje několik atributů, které vám umožní směrovat její výchozí chování vazby modelu do jiného zdroje.</span><span class="sxs-lookup"><span data-stu-id="3def1-169">MVC contains several attributes that you can use to direct its default model binding behavior to a different source.</span></span> <span data-ttu-id="3def1-170">Například můžete určit, jestli se vyžaduje pro vlastnost vazby, nebo pokud jej by nemělo nikdy dojít vůbec pomocí `[BindRequired]` nebo `[BindNever]` atributy.</span><span class="sxs-lookup"><span data-stu-id="3def1-170">For example, you can specify whether binding is required for a property, or if it should never happen at all by using the `[BindRequired]` or `[BindNever]` attributes.</span></span> <span data-ttu-id="3def1-171">Alternativně můžete přepsat výchozí zdroj dat a určete zdroj dat vazače modelu.</span><span class="sxs-lookup"><span data-stu-id="3def1-171">Alternatively, you can override the default data source, and specify the model binder's data source.</span></span> <span data-ttu-id="3def1-172">Tady je seznam atributů vazby modelu:</span><span class="sxs-lookup"><span data-stu-id="3def1-172">Below is a list of model binding attributes:</span></span>

* <span data-ttu-id="3def1-173">`[BindRequired]`: Tento atribut přidá chyby stavu modelu, pokud vazba nebyla vytvořena.</span><span class="sxs-lookup"><span data-stu-id="3def1-173">`[BindRequired]`: This attribute adds a model state error if binding cannot occur.</span></span>

* <span data-ttu-id="3def1-174">`[BindNever]`: Přikáže vazač modelu pro nikdy vazbu pro tento parametr.</span><span class="sxs-lookup"><span data-stu-id="3def1-174">`[BindNever]`: Tells the model binder to never bind to this parameter.</span></span>

* <span data-ttu-id="3def1-175">`[FromHeader]`, `[FromQuery]`, `[FromRoute]`, `[FromForm]`: Tyto slouží k určení zdroje připojení přesně chcete použít.</span><span class="sxs-lookup"><span data-stu-id="3def1-175">`[FromHeader]`, `[FromQuery]`, `[FromRoute]`, `[FromForm]`: Use these to specify the exact binding source you want to apply.</span></span>

* <span data-ttu-id="3def1-176">`[FromServices]`: Tento atribut používá [injektáž závislostí](../../fundamentals/dependency-injection.md) pro svázání parametrů ze služby.</span><span class="sxs-lookup"><span data-stu-id="3def1-176">`[FromServices]`: This attribute uses [dependency injection](../../fundamentals/dependency-injection.md) to bind parameters from services.</span></span>

* <span data-ttu-id="3def1-177">`[FromBody]`: Použijte nakonfigurované formátovacích modulů k vytvoření vazby dat z textu požadavku.</span><span class="sxs-lookup"><span data-stu-id="3def1-177">`[FromBody]`: Use the configured formatters to bind data from the request body.</span></span> <span data-ttu-id="3def1-178">Formátovací modul se určí typ obsahu požadavku.</span><span class="sxs-lookup"><span data-stu-id="3def1-178">The formatter is selected based on content type of the request.</span></span>

* <span data-ttu-id="3def1-179">`[ModelBinder]`: Používá se k přepsání výchozí vazač modelu, zdroj vazby a název.</span><span class="sxs-lookup"><span data-stu-id="3def1-179">`[ModelBinder]`: Used to override the default model binder, binding source and name.</span></span>

<span data-ttu-id="3def1-180">Atributy jsou velmi užitečné nástroje při budete muset změnit výchozí chování vazby modelu.</span><span class="sxs-lookup"><span data-stu-id="3def1-180">Attributes are very helpful tools when you need to override the default behavior of model binding.</span></span>

## <a name="customize-model-binding-and-validation-globally"></a><span data-ttu-id="3def1-181">Upravit vazby modelu a ověření globálně</span><span class="sxs-lookup"><span data-stu-id="3def1-181">Customize model binding and validation globally</span></span>

<span data-ttu-id="3def1-182">Model vazby a ověřování systému chování doprovází [ModelMetadata](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.modelmetadata) , který popisuje:</span><span class="sxs-lookup"><span data-stu-id="3def1-182">The model binding and validation system's behavior is driven by [ModelMetadata](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.modelmetadata) that describes:</span></span>

* <span data-ttu-id="3def1-183">Jak modelu má být vázána.</span><span class="sxs-lookup"><span data-stu-id="3def1-183">How a model is to be bound.</span></span>
* <span data-ttu-id="3def1-184">Jak ověřování dochází na typu a jeho vlastnosti.</span><span class="sxs-lookup"><span data-stu-id="3def1-184">How validation occurs on the type and its properties.</span></span>

<span data-ttu-id="3def1-185">Aspekty chování systému je globálně nakonfigurovat tak, že přidáte podrobnosti zprostředkovatele, aby [MvcOptions.ModelMetadataDetailsProviders](/dotnet/api/microsoft.aspnetcore.mvc.mvcoptions.modelmetadatadetailsproviders#Microsoft_AspNetCore_Mvc_MvcOptions_ModelMetadataDetailsProviders).</span><span class="sxs-lookup"><span data-stu-id="3def1-185">Aspects of the system's behavior can be configured globally by adding a details provider to [MvcOptions.ModelMetadataDetailsProviders](/dotnet/api/microsoft.aspnetcore.mvc.mvcoptions.modelmetadatadetailsproviders#Microsoft_AspNetCore_Mvc_MvcOptions_ModelMetadataDetailsProviders).</span></span> <span data-ttu-id="3def1-186">MVC má několik poskytovatelů integrované podrobnosti, které umožňují že konfigurace chování těchto jako zakázání ověření nebo vazby modelu pro určité typy.</span><span class="sxs-lookup"><span data-stu-id="3def1-186">MVC has a few built-in details providers that allow configuring behavior such as disabling model binding or validation for certain types.</span></span>

<span data-ttu-id="3def1-187">Chcete-li zakázat vazby modelu všech modelů určitého typu, přidejte [ExcludeBindingMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.excludebindingmetadataprovider) v `Startup.ConfigureServices`.</span><span class="sxs-lookup"><span data-stu-id="3def1-187">To disable model binding on all models of a certain type, add an [ExcludeBindingMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.excludebindingmetadataprovider) in `Startup.ConfigureServices`.</span></span> <span data-ttu-id="3def1-188">Například s vazbou modelu zakázat na všech modelů typu `System.Version`:</span><span class="sxs-lookup"><span data-stu-id="3def1-188">For example, to disable model binding on all models of type `System.Version`:</span></span>

```csharp
services.AddMvc().AddMvcOptions(options =>
    options.ModelMetadataDetailsProviders.Add(
        new ExcludeBindingMetadataProvider(typeof(System.Version))));
```

<span data-ttu-id="3def1-189">Chcete-li zakázat ověřování na vlastnosti určitého typu, přidejte [SuppressChildValidationMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.suppresschildvalidationmetadataprovider) v `Startup.ConfigureServices`.</span><span class="sxs-lookup"><span data-stu-id="3def1-189">To disable validation on properties of a certain type, add a [SuppressChildValidationMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.suppresschildvalidationmetadataprovider) in `Startup.ConfigureServices`.</span></span> <span data-ttu-id="3def1-190">Například chcete-li zakázat ověřování na vlastnosti typu `System.Guid`:</span><span class="sxs-lookup"><span data-stu-id="3def1-190">For example, to disable validation on properties of type `System.Guid`:</span></span>

```csharp
services.AddMvc().AddMvcOptions(options =>
    options.ModelMetadataDetailsProviders.Add(
        new SuppressChildValidationMetadataProvider(typeof(System.Guid))));
```

## <a name="bind-formatted-data-from-the-request-body"></a><span data-ttu-id="3def1-191">Vytvoření vazby formátovaných dat z textu požadavku</span><span class="sxs-lookup"><span data-stu-id="3def1-191">Bind formatted data from the request body</span></span>

<span data-ttu-id="3def1-192">Data žádosti můžou mít širokou škálu formátů, včetně JSON, XML a mnohé další.</span><span class="sxs-lookup"><span data-stu-id="3def1-192">Request data can come in a variety of formats including JSON, XML and many others.</span></span> <span data-ttu-id="3def1-193">Při použití atributu [FromBody] k označení, že chcete svázat parametr s daty v textu požadavku aplikace MVC používá nakonfigurovanou sadu formátovacích modulů pro zpracování žádosti o data na základě jeho typu obsahu.</span><span class="sxs-lookup"><span data-stu-id="3def1-193">When you use the [FromBody] attribute to indicate that you want to bind a parameter to data in the request body, MVC uses a configured set of formatters to handle the request data based on its content type.</span></span> <span data-ttu-id="3def1-194">Ve výchozím nastavení obsahuje MVC `JsonInputFormatter` třídy pro zpracování dat JSON, ale můžete přidat další formátovacích modulů pro zpracování XML a dalších vlastních formátů.</span><span class="sxs-lookup"><span data-stu-id="3def1-194">By default MVC includes a `JsonInputFormatter` class for handling JSON data, but you can add additional formatters for handling XML and other custom formats.</span></span>

> [!NOTE]
> <span data-ttu-id="3def1-195">Může existovat maximálně jeden parametr na akce, které jsou vybaveny `[FromBody]`.</span><span class="sxs-lookup"><span data-stu-id="3def1-195">There can be at most one parameter per action decorated with `[FromBody]`.</span></span> <span data-ttu-id="3def1-196">Runtime ASP.NET Core MVC deleguje na starost datový proud požadavku pro čtení k formátování.</span><span class="sxs-lookup"><span data-stu-id="3def1-196">The ASP.NET Core MVC run-time delegates the responsibility of reading the request stream to the formatter.</span></span> <span data-ttu-id="3def1-197">Jakmile datový proud požadavku je pro čtení pro parametr, není obecně možné číst datový proud požadavku znovu pro vazbu druhé `[FromBody]` parametry.</span><span class="sxs-lookup"><span data-stu-id="3def1-197">Once the request stream is read for a parameter, it's generally not possible to read the request stream again for binding other `[FromBody]` parameters.</span></span>

> [!NOTE]
> <span data-ttu-id="3def1-198">`JsonInputFormatter` Je výchozí formátování a je založena na [Json.NET](https://www.newtonsoft.com/json).</span><span class="sxs-lookup"><span data-stu-id="3def1-198">The `JsonInputFormatter` is the default formatter and is based on [Json.NET](https://www.newtonsoft.com/json).</span></span>

<span data-ttu-id="3def1-199">ASP.NET Core vybere vstupní formátovacích modulů na základě [Content-Type](https://www.w3.org/Protocols/rfc1341/4_Content-Type.html) záhlaví a typ parametru, pokud neexistuje atribut použitý k jeho zadání jinak.</span><span class="sxs-lookup"><span data-stu-id="3def1-199">ASP.NET Core selects input formatters based on the [Content-Type](https://www.w3.org/Protocols/rfc1341/4_Content-Type.html) header and the type of the parameter, unless there's an attribute applied to it specifying otherwise.</span></span> <span data-ttu-id="3def1-200">Pokud chcete použít XML nebo jiný formát je nutné ji nakonfigurovat v *Startup.cs* soubor, ale nejdřív muset získat odkaz na `Microsoft.AspNetCore.Mvc.Formatters.Xml` pomocí nástroje NuGet.</span><span class="sxs-lookup"><span data-stu-id="3def1-200">If you'd like to use XML or another format you must configure it in the *Startup.cs* file, but you may first have to obtain a reference to `Microsoft.AspNetCore.Mvc.Formatters.Xml` using NuGet.</span></span> <span data-ttu-id="3def1-201">Spouštěcí kód by měl vypadat přibližně takto:</span><span class="sxs-lookup"><span data-stu-id="3def1-201">Your startup code should look something like this:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddXmlSerializerFormatters();
   }
```

<span data-ttu-id="3def1-202">Kód v *Startup.cs* obsahuje soubor `ConfigureServices` metodu s `services` argument můžete použít k vytvoření služby pro aplikaci ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="3def1-202">Code in the *Startup.cs* file contains a `ConfigureServices` method with a `services` argument you can use to build up services for your ASP.NET Core app.</span></span> <span data-ttu-id="3def1-203">V příkladu přidáváme formátovací modul XML jako služba, která bude poskytovat MVC pro tuto aplikaci.</span><span class="sxs-lookup"><span data-stu-id="3def1-203">In the sample, we are adding an XML formatter as a service that MVC will provide for this app.</span></span> <span data-ttu-id="3def1-204">`options` Argument předaný `AddMvc` metoda umožňuje přidávat a spravovat filtry, formátování a další možnosti systému z MVC po spuštění aplikace.</span><span class="sxs-lookup"><span data-stu-id="3def1-204">The `options` argument passed into the `AddMvc` method allows you to add and manage filters, formatters, and other system options from MVC upon app startup.</span></span> <span data-ttu-id="3def1-205">Následně použít `Consumes` atribut třídy kontroler nebo akce metody pro práci s formátem chcete.</span><span class="sxs-lookup"><span data-stu-id="3def1-205">Then apply the `Consumes` attribute to controller classes or action methods to work with the format you want.</span></span>

### <a name="custom-model-binding"></a><span data-ttu-id="3def1-206">Vlastní vazba modelu</span><span class="sxs-lookup"><span data-stu-id="3def1-206">Custom Model Binding</span></span>

<span data-ttu-id="3def1-207">Psaní vlastních vazače vlastního modelu, můžete rozšířit vazby modelu.</span><span class="sxs-lookup"><span data-stu-id="3def1-207">You can extend model binding by writing your own custom model binders.</span></span> <span data-ttu-id="3def1-208">Další informace o [vlastní vazba modelu](../advanced/custom-model-binding.md).</span><span class="sxs-lookup"><span data-stu-id="3def1-208">Learn more about [custom model binding](../advanced/custom-model-binding.md).</span></span>
