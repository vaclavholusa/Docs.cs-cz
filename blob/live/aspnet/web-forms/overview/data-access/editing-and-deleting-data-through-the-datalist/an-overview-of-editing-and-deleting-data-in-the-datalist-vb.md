---
uid: web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-vb
title: "Přehled úpravy a odstraňování dat v DataList (VB) | Microsoft Docs"
author: rick-anderson
description: "Při prvku DataList chybí předdefinované úpravy a odstraňování možnosti, v tomto kurzu ukážeme, jak vytvořit DataList, který podporuje úpravy a odstraňování o..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/30/2006
ms.topic: article
ms.assetid: 9410a23c-9697-4f07-bd71-e62b0ceac655
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-vb
msc.type: authoredcontent
ms.openlocfilehash: 3f43001b1980452e95187096cf884778c2970eb5
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 11/10/2017
---
<a name="an-overview-of-editing-and-deleting-data-in-the-datalist-vb"></a><span data-ttu-id="832d6-103">Přehled úpravy a odstraňování dat v DataList (VB)</span><span class="sxs-lookup"><span data-stu-id="832d6-103">An Overview of Editing and Deleting Data in the DataList (VB)</span></span>
====================
<span data-ttu-id="832d6-104">podle [Scott Meisnerová](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="832d6-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="832d6-105">[Stáhněte si ukázkovou aplikaci](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_36_VB.exe) nebo [stáhnout PDF](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/datatutorial36vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="832d6-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_36_VB.exe) or [Download PDF](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/datatutorial36vb1.pdf)</span></span>

> <span data-ttu-id="832d6-106">Při prvku DataList chybí předdefinované úpravy a odstraňování možnosti, v tomto kurzu jsme zobrazí postup vytvoření DataList, který podporuje úpravy a odstraňování jeho základní data.</span><span class="sxs-lookup"><span data-stu-id="832d6-106">While the DataList lacks built-in editing and deleting capabilities, in this tutorial we'll see how to create a DataList that supports editing and deleting of its underlying data.</span></span>


## <a name="introduction"></a><span data-ttu-id="832d6-107">Úvod</span><span class="sxs-lookup"><span data-stu-id="832d6-107">Introduction</span></span>

<span data-ttu-id="832d6-108">V [přehled o vložení, aktualizace a odstranění dat](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) kurzu jsme se podívali na tom, jak vložit, aktualizovat a odstranit data pomocí architektury aplikace, ObjectDataSource a rutina GridView DetailsView a FormView ovládací prvky.</span><span class="sxs-lookup"><span data-stu-id="832d6-108">In the [An Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial we looked at how to insert, update, and delete data using the application architecture, an ObjectDataSource, and the GridView, DetailsView, and FormView controls.</span></span> <span data-ttu-id="832d6-109">ObjectDataSource a ovládací prvky webového tyto tři datové implementace rozhraní úpravy jednoduché datové byla modulu snap a zahrnuta pouze tikání zaškrtávací políčko ze inteligentní značky.</span><span class="sxs-lookup"><span data-stu-id="832d6-109">With the ObjectDataSource and these three data Web controls, implementing simple data modification interfaces was a snap and involved merely ticking a checkbox from a smart tag.</span></span> <span data-ttu-id="832d6-110">Žádný kód potřebný k zapsání.</span><span class="sxs-lookup"><span data-stu-id="832d6-110">No code needed to be written.</span></span>

<span data-ttu-id="832d6-111">Bohužel DataList chybí předdefinované úpravy a odstraňování možnosti vyplývajících v ovládacím prvku GridView.</span><span class="sxs-lookup"><span data-stu-id="832d6-111">Unfortunately, the DataList lacks the built-in editing and deleting capabilities inherent in the GridView control.</span></span> <span data-ttu-id="832d6-112">Tato funkce chybí je kvůli částečně skutečnost, že je DataList relic z předchozí verze technologie ASP.NET, pokud byla k dispozici ovládací prvky zdroje deklarativní data a data kód bez úprav stránky.</span><span class="sxs-lookup"><span data-stu-id="832d6-112">This missing functionality is due in part to the fact that the DataList is a relic from the previous version of ASP.NET, when declarative data source controls and code-free data modification pages were unavailable.</span></span> <span data-ttu-id="832d6-113">Při DataList v technologii ASP.NET 2.0 nenabízí stejné ihned funkce úpravy dat jako GridView, jsme vám pomůže ASP.NET 1.x techniky patří takové funkce.</span><span class="sxs-lookup"><span data-stu-id="832d6-113">While the DataList in ASP.NET 2.0 does not offer the same out of the box data modification capabilities as the GridView, we can use ASP.NET 1.x techniques to include such functionality.</span></span> <span data-ttu-id="832d6-114">Tento přístup vyžaduje malou část kódu, ale, jak jsme zobrazí v tomto kurzu, DataList má některé události a vlastnosti na místě a usnadňuje tento proces.</span><span class="sxs-lookup"><span data-stu-id="832d6-114">This approach requires a bit of code but, as we'll see in this tutorial, the DataList has some events and properties in place to aid in this process.</span></span>

<span data-ttu-id="832d6-115">V tomto kurzu vidíte vytvoření DataList, který podporuje úpravy a odstraňování jeho základní data.</span><span class="sxs-lookup"><span data-stu-id="832d6-115">In this tutorial we'll see how to create a DataList that supports editing and deleting of its underlying data.</span></span> <span data-ttu-id="832d6-116">Budoucí kurzy prozkoumá pokročilejší úpravy a odstraňování scénáře, včetně ověření vstupní pole, pohodlné zpracování výjimek vyvolaných z přístupu k datům nebo vrstvy obchodní logiky a tak dále.</span><span class="sxs-lookup"><span data-stu-id="832d6-116">Future tutorials will examine more advanced editing and deleting scenarios, including input field validation, gracefully handling exceptions raised from the Data Access or Business Logic Layers, and so on.</span></span>

> [!NOTE]
> <span data-ttu-id="832d6-117">Jako DataList nemá ovládacím prvku Repeater mimo funkci pole pro vložení, aktualizaci nebo odstranění.</span><span class="sxs-lookup"><span data-stu-id="832d6-117">Like the DataList, the Repeater control lacks the out of the box functionality for inserting, updating, or deleting.</span></span> <span data-ttu-id="832d6-118">Při přidávání těchto funkcí, zahrnuje prvku DataList vlastností a událostí nebyl nalezen v Opakovači, které zjednodušují přidání například tyto funkce.</span><span class="sxs-lookup"><span data-stu-id="832d6-118">While such functionality can be added, the DataList includes properties and events not found in the Repeater that simplify adding such capabilities.</span></span> <span data-ttu-id="832d6-119">Proto tento kurz a budoucí ty, které podívejte se na úpravy a odstranění se soustředí výhradně na prvku DataList.</span><span class="sxs-lookup"><span data-stu-id="832d6-119">Therefore, this tutorial and future ones that look at editing and deleting will focus strictly on the DataList.</span></span>


## <a name="step-1-creating-the-editing-and-deleting-tutorials-web-pages"></a><span data-ttu-id="832d6-120">Krok 1: Vytváření, úpravy a odstraňování kurzy webové stránky</span><span class="sxs-lookup"><span data-stu-id="832d6-120">Step 1: Creating the Editing and Deleting Tutorials Web Pages</span></span>

<span data-ttu-id="832d6-121">Než začneme zkoumat aktualizaci a odstranění dat z DataList, umožní s nejprve pozorně vytváření stránek ASP.NET v našem webu projekt, který budeme potřebovat pro tento kurz a další několik podsítí.</span><span class="sxs-lookup"><span data-stu-id="832d6-121">Before we start exploring how to update and delete data from a DataList, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next several ones.</span></span> <span data-ttu-id="832d6-122">Nejprve přidejte novou složku s názvem `EditDeleteDataList`.</span><span class="sxs-lookup"><span data-stu-id="832d6-122">Start by adding a new folder named `EditDeleteDataList`.</span></span> <span data-ttu-id="832d6-123">Dál přidejte následující stránky ASP.NET do této složky, a zkontrolujte, zda přidružit každou stránku s `Site.master` hlavní stránky:</span><span class="sxs-lookup"><span data-stu-id="832d6-123">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `Basics.aspx`
- `BatchUpdate.aspx`
- `ErrorHandling.aspx`
- `UIValidation.aspx`
- `CustomizedUI.aspx`
- `OptimisticConcurrency.aspx`
- `ConfirmationOnDelete.aspx`
- `UserLevelAccess.aspx`


![Přidání stránky ASP.NET pro kurzů k](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image1.png)

<span data-ttu-id="832d6-125">**Obrázek 1**: Přidání stránky ASP.NET pro kurzů k</span><span class="sxs-lookup"><span data-stu-id="832d6-125">**Figure 1**: Add the ASP.NET Pages for the Tutorials</span></span>


<span data-ttu-id="832d6-126">V jiných složkách, jako `Default.aspx` v `EditDeleteDataList` složka obsahuje seznam kurzů k v jeho části.</span><span class="sxs-lookup"><span data-stu-id="832d6-126">Like in the other folders, `Default.aspx` in the `EditDeleteDataList` folder lists the tutorials in its section.</span></span> <span data-ttu-id="832d6-127">Odvolat, který `SectionLevelTutorialListing.ascx` tuto funkci zajišťuje uživatelský ovládací prvek.</span><span class="sxs-lookup"><span data-stu-id="832d6-127">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="832d6-128">Proto přidat tento uživatelský ovládací prvek pro `Default.aspx` přetažením z Průzkumníka řešení na stránku s zobrazení návrhu.</span><span class="sxs-lookup"><span data-stu-id="832d6-128">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>


<span data-ttu-id="832d6-129">[![Přidání SectionLevelTutorialListing.ascx uživatelského ovládacího prvku do Default.aspx](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image3.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="832d6-129">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image3.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image2.png)</span></span>

<span data-ttu-id="832d6-130">**Obrázek 2**: Přidat `SectionLevelTutorialListing.ascx` uživatelského ovládacího prvku na `Default.aspx` ([Kliknutím zobrazit obrázek v plné velikosti](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="832d6-130">**Figure 2**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image4.png))</span></span>


<span data-ttu-id="832d6-131">Nakonec přidejte stránky jako položky na `Web.sitemap` souboru.</span><span class="sxs-lookup"><span data-stu-id="832d6-131">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="832d6-132">Konkrétně, přidejte následující kód po sestavy a podrobností s DataList a opakovače `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="832d6-132">Specifically, add the following markup after the Master/Detail Reports with the DataList and Repeater `<siteMapNode>`:</span></span>


[!code-xml[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample1.xml)]

<span data-ttu-id="832d6-133">Po aktualizaci `Web.sitemap`, pozorně Zobrazit kurzy web prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="832d6-133">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="832d6-134">V nabídce na levé straně teď obsahuje položky pro DataList úpravy a odstraňování kurzy.</span><span class="sxs-lookup"><span data-stu-id="832d6-134">The menu on the left now includes items for the DataList editing and deleting tutorials.</span></span>


![Mapy webu nyní obsahuje položky pro DataList úpravy a odstraňování kurzy](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image5.png)

<span data-ttu-id="832d6-136">**Obrázek 3**: mapy webu nyní obsahuje položky pro DataList úpravy a odstraňování kurzy</span><span class="sxs-lookup"><span data-stu-id="832d6-136">**Figure 3**: The Site Map Now Includes Entries for the DataList Editing and Deleting Tutorials</span></span>


## <a name="step-2-examining-techniques-for-updating-and-deleting-data"></a><span data-ttu-id="832d6-137">Krok 2: Prozkoumání techniky pro aktualizaci a odstraňování dat</span><span class="sxs-lookup"><span data-stu-id="832d6-137">Step 2: Examining Techniques for Updating and Deleting Data</span></span>

<span data-ttu-id="832d6-138">Úpravy a odstraňování dat s GridView je tak snadno, protože pod zahrnuje, rutina GridView a ObjectDataSource fungovat ve vzájemné součinnosti.</span><span class="sxs-lookup"><span data-stu-id="832d6-138">Editing and deleting data with the GridView is so easy because, underneath the covers, the GridView and ObjectDataSource work in concert.</span></span> <span data-ttu-id="832d6-139">Jak je popsáno v [zkoumání události spojené s vložení, aktualizace a odstranění](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) kurzu při kliknutí na tlačítko Aktualizovat řádek s GridView automaticky přiřadí jeho pole, která používá obousměrný datové vazby k `UpdateParameters` kolekce jeho ObjectDataSource a potom se vyvolá tento ObjectDataSource s `Update()` metoda.</span><span class="sxs-lookup"><span data-stu-id="832d6-139">As discussed in the [Examining the Events Associated with Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial, when a row s Update button is clicked, the GridView automatically assigns its fields that used two-way databinding to the `UpdateParameters` collection of its ObjectDataSource and then invokes that ObjectDataSource s `Update()` method.</span></span>

<span data-ttu-id="832d6-140">Bohužel DataList neposkytuje žádné této integrované funkce.</span><span class="sxs-lookup"><span data-stu-id="832d6-140">Sadly, the DataList does not provide any of this built-in functionality.</span></span> <span data-ttu-id="832d6-141">Je naše odpovědností zajistit přiřazení hodnoty uživatele s parametry s ObjectDataSource a že jeho `Update()` metoda je volána.</span><span class="sxs-lookup"><span data-stu-id="832d6-141">It is our responsibility to ensure that the user s values are assigned to the ObjectDataSource s parameters and that its `Update()` method is called.</span></span> <span data-ttu-id="832d6-142">Pokud chcete nám pomoci při této omezené úsilí, prvku DataList poskytuje následující vlastnosti a události:</span><span class="sxs-lookup"><span data-stu-id="832d6-142">To aid us in this endeavor, the DataList provides the following properties and events:</span></span>

- <span data-ttu-id="832d6-143">**[ `DataKeyField` Vlastnost](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basedatalist.datakeyfield.aspx)**  při aktualizaci nebo odstranění, potřebujeme, abyste mohli jednoznačně identifikovat každou položku v prvku DataList.</span><span class="sxs-lookup"><span data-stu-id="832d6-143">**The [`DataKeyField` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basedatalist.datakeyfield.aspx)** when updating or deleting, we need to be able to uniquely identify each item in the DataList.</span></span> <span data-ttu-id="832d6-144">Nastavte tuto vlastnost na primární klíče pole zobrazená data.</span><span class="sxs-lookup"><span data-stu-id="832d6-144">Set this property to the primary key field of the displayed data.</span></span> <span data-ttu-id="832d6-145">Díky tomu bude naplnit DataList s [ `DataKeys` kolekce](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basedatalist.datakeys.aspx) se zadaným `DataKeyField` hodnota pro každou položku DataList.</span><span class="sxs-lookup"><span data-stu-id="832d6-145">Doing so will populate the DataList s [`DataKeys` collection](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basedatalist.datakeys.aspx) with the specified `DataKeyField` value for each DataList item.</span></span>
- <span data-ttu-id="832d6-146">**[ `EditCommand` Událostí](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.editcommand.aspx)**  aktivuje se v případě tlačítka, LinkButton nebo ImageButton jehož `CommandName` je nastavena na kliknutí na Upravit.</span><span class="sxs-lookup"><span data-stu-id="832d6-146">**The [`EditCommand` event](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.editcommand.aspx)** fires when a Button, LinkButton, or ImageButton whose `CommandName` property is set to Edit is clicked.</span></span>
- <span data-ttu-id="832d6-147">**[ `CancelCommand` Událostí](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.cancelcommand.aspx)**  aktivuje se v případě tlačítka, LinkButton nebo ImageButton jehož `CommandName` je nastavena na kliknutí na Storno.</span><span class="sxs-lookup"><span data-stu-id="832d6-147">**The [`CancelCommand` event](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.cancelcommand.aspx)** fires when a Button, LinkButton, or ImageButton whose `CommandName` property is set to Cancel is clicked.</span></span>
- <span data-ttu-id="832d6-148">**[ `UpdateCommand` Událostí](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.updatecommand.aspx)**  aktivuje se v případě tlačítka, LinkButton nebo ImageButton jehož `CommandName` je nastavena na po kliknutí na aktualizace.</span><span class="sxs-lookup"><span data-stu-id="832d6-148">**The [`UpdateCommand` event](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.updatecommand.aspx)** fires when a Button, LinkButton, or ImageButton whose `CommandName` property is set to Update is clicked.</span></span>
- <span data-ttu-id="832d6-149">**[ `DeleteCommand` Událostí](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.deletecommand.aspx)**  aktivuje se v případě tlačítka, LinkButton nebo ImageButton jehož `CommandName` je nastavena na po kliknutí na odstranění.</span><span class="sxs-lookup"><span data-stu-id="832d6-149">**The [`DeleteCommand` event](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.deletecommand.aspx)** fires when a Button, LinkButton, or ImageButton whose `CommandName` property is set to Delete is clicked.</span></span>

<span data-ttu-id="832d6-150">Pomocí těchto vlastností a událostí, existují čtyři přístupy, které jsme můžete použít k aktualizaci a odstranění dat z prvku DataList:</span><span class="sxs-lookup"><span data-stu-id="832d6-150">Using these properties and events, there are four approaches we can use to update and delete data from the DataList:</span></span>

1. <span data-ttu-id="832d6-151">**Pomocí technologie ASP.NET 1.x techniky** prvku DataList existovaly před technologii ASP.NET 2.0 a ObjectDataSources a bylo možné aktualizovat a odstraňovat data programové způsoby.</span><span class="sxs-lookup"><span data-stu-id="832d6-151">**Using ASP.NET 1.x Techniques** the DataList existed prior to ASP.NET 2.0 and ObjectDataSources and was able to update and delete data entirely through programmatic means.</span></span> <span data-ttu-id="832d6-152">Tento postup ObjectDataSource zcela kanálů a vyžaduje jsme vazby dat k prvku DataList přímo z vrstvy obchodní logiky, jak získat data k zobrazení a při aktualizaci nebo odstranění záznamu.</span><span class="sxs-lookup"><span data-stu-id="832d6-152">This technique ditches the ObjectDataSource altogether and requires that we bind the data to the DataList directly from the Business Logic Layer, both in retrieving the data to display and when updating or deleting a record.</span></span>
2. <span data-ttu-id="832d6-153">**Pomocí jednoho prvku ObjectDataSource na stránce pro výběr, aktualizace a odstranění** při prvku DataList chybí GridView s vyplývajících úpravy a odstraňování možnosti, že s žádný důvod můžeme t je přidejte v označována.</span><span class="sxs-lookup"><span data-stu-id="832d6-153">**Using a Single ObjectDataSource Control on the Page for Selecting, Updating, and Deleting** while the DataList lacks the GridView s inherent editing and deleting capabilities, there s no reason we can t add them in ourselves.</span></span> <span data-ttu-id="832d6-154">S tímto přístupem můžeme používat ObjectDataSource podobně jako příklady GridView, ale musíte vytvořit obslužnou rutinu události pro DataList s `UpdateCommand` událostí, kde jsme nastavit ObjectDataSource s parametry a volání jeho `Update()` metoda.</span><span class="sxs-lookup"><span data-stu-id="832d6-154">With this approach, we use an ObjectDataSource just like in the GridView examples, but must create an event handler for the DataList s `UpdateCommand` event where we set the ObjectDataSource s parameters and call its `Update()` method.</span></span>
3. <span data-ttu-id="832d6-155">**Použití ovládacího prvku ObjectDataSource zvolíte, ale aktualizace a odstranění přímo proti the BLL** při použití volby 2 musíme zápisu bit kódu `UpdateCommand` událostí, přiřazení hodnoty parametrů a tak dále.</span><span class="sxs-lookup"><span data-stu-id="832d6-155">**Using an ObjectDataSource Control for Selecting, but Updating and Deleting Directly Against the BLL** when using option 2, we need to write a bit of code in the `UpdateCommand` event, assigning parameter values and so on.</span></span> <span data-ttu-id="832d6-156">Místo toho jsme přilepit s použitím ObjectDataSource pro výběr ale volání aktualizaci a odstraňování přímo na BLL (jako jsou s možnost 1).</span><span class="sxs-lookup"><span data-stu-id="832d6-156">Instead, we can stick with using the ObjectDataSource for selecting, but make the updating and deleting calls directly against the BLL (like with option 1).</span></span> <span data-ttu-id="832d6-157">Moje názoru aktualizace dat pomocí rozhraní přímo k BLL vede k srozumitelnější kódu než přiřazení ObjectDataSource s `UpdateParameters` a volání jeho `Update()` metoda.</span><span class="sxs-lookup"><span data-stu-id="832d6-157">In my opinion, updating data by interfacing directly with the BLL leads to more readable code than assigning the ObjectDataSource s `UpdateParameters` and calling its `Update()` method.</span></span>
4. <span data-ttu-id="832d6-158">**Pomocí deklarativní znamená prostřednictvím více ObjectDataSources** předchozí všechny tři přístupy vyžadují bit kódu.</span><span class="sxs-lookup"><span data-stu-id="832d6-158">**Using Declarative Means through Multiple ObjectDataSources** the previous three approaches all require a bit of code.</span></span> <span data-ttu-id="832d6-159">Pokud jste d místo dál používat jako mnohem deklarativní syntaxe nejdříve, je poslední možnost zahrnují více ObjectDataSources na stránce.</span><span class="sxs-lookup"><span data-stu-id="832d6-159">If you d rather keep using as much declarative syntax as possible, a final option is to include multiple ObjectDataSources on the page.</span></span> <span data-ttu-id="832d6-160">První ObjectDataSource načítá data z BLL a váže k prvku DataList.</span><span class="sxs-lookup"><span data-stu-id="832d6-160">The first ObjectDataSource retrieves the data from the BLL and binds it to the DataList.</span></span> <span data-ttu-id="832d6-161">Pro aktualizaci, je jiná ObjectDataSource přidán, ale přidat přímo v rámci DataList s `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="832d6-161">For updating, another ObjectDataSource is added, but added directly within the DataList s `EditItemTemplate`.</span></span> <span data-ttu-id="832d6-162">Zahrnout odstraňování podpory, ještě jiné ObjectDataSource by potřeba v `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="832d6-162">To include deleting support, yet another ObjectDataSource would be needed in the `ItemTemplate`.</span></span> <span data-ttu-id="832d6-163">S tímto přístupem tyto ObjectDataSource s použití vložených `ControlParameters` deklarativně vytvořit vazbu s parametry ObjectDataSource uživatelské vstupní ovládací prvky (místo nutnosti zadávat prostřednictvím kódu programu v DataList s `UpdateCommand` obslužné rutiny události).</span><span class="sxs-lookup"><span data-stu-id="832d6-163">With this approach, these embedded ObjectDataSource s use `ControlParameters` to declaratively bind the ObjectDataSource s parameters to the user input controls (rather than having to specify them programmatically in the DataList s `UpdateCommand` event handler).</span></span> <span data-ttu-id="832d6-164">Tento přístup stále vyžaduje bit kódu musíme volání embedded ObjectDataSource s `Update()` nebo `Delete()` příkaz ale vyžaduje mnohem menší než k ostatním tři blíží.</span><span class="sxs-lookup"><span data-stu-id="832d6-164">This approach still requires a bit of code we need to call the embedded ObjectDataSource s `Update()` or `Delete()` command but requires far less than with the other three approaches.</span></span> <span data-ttu-id="832d6-165">Zde nevýhodou je, že více ObjectDataSources zbytečných souborů stránku, zasahoval celkové čitelnost.</span><span class="sxs-lookup"><span data-stu-id="832d6-165">The downside here is that the multiple ObjectDataSources do clutter up the page, detracting from the overall readability.</span></span>

<span data-ttu-id="832d6-166">Pokud vynutilo vždy jen použijte jednu z těchto přístupů, I d zvolte možnost 1, protože poskytuje největší flexibilitu a protože prvku DataList byla původně navržena pro uložení tohoto vzoru.</span><span class="sxs-lookup"><span data-stu-id="832d6-166">If forced to only ever use one of these approaches, I d choose option 1 because it provides the most flexibility and because the DataList was originally designed to accommodate this pattern.</span></span> <span data-ttu-id="832d6-167">Když DataList byl rozšířené pro práci s ovládacími prvky zdroje dat ASP.NET 2.0, nemá všechny body rozšiřitelnosti nebo funkce oficiální data technologie ASP.NET 2.0 ovládací prvky webového (GridView, DetailsView a FormView).</span><span class="sxs-lookup"><span data-stu-id="832d6-167">While the DataList was extended to work with the ASP.NET 2.0 data source controls, it does not have all of the extensibility points or features of the official ASP.NET 2.0 data Web controls (the GridView, DetailsView, and FormView).</span></span> <span data-ttu-id="832d6-168">Možnosti 2 až 4 nejsou bez hodnotě, ale.</span><span class="sxs-lookup"><span data-stu-id="832d6-168">Options 2 through 4 are not without merit, though.</span></span>

<span data-ttu-id="832d6-169">To budoucí úpravy a odstraňování kurzy použije ObjectDataSource pro načítání dat k zobrazení a přímé volání BLL k aktualizaci a odstranění dat (možnost 3).</span><span class="sxs-lookup"><span data-stu-id="832d6-169">This and the future editing and deleting tutorials will use an ObjectDataSource for retrieving the data to display and direct calls to the BLL to update and delete data (option 3).</span></span>

## <a name="step-3-adding-the-datalist-and-configuring-its-objectdatasource"></a><span data-ttu-id="832d6-170">Krok 3: Přidání prvku DataList a konfigurace jeho ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="832d6-170">Step 3: Adding the DataList and Configuring its ObjectDataSource</span></span>

<span data-ttu-id="832d6-171">V tomto kurzu vytvoříme DataList, který zobrazuje informace o produktu a pro každý produkt obsahuje uživatele umožňuje upravit název a ceny a úplně odstranit produktu.</span><span class="sxs-lookup"><span data-stu-id="832d6-171">In this tutorial we will create a DataList that lists product information and, for each product, provides the user the ability to edit the name and price and to delete the product altogether.</span></span> <span data-ttu-id="832d6-172">Konkrétně jsme načíst záznamy, které chcete zobrazit pomocí ObjectDataSource, ale provede aktualizace a odstranění akcí pomocí rozhraní přímo k BLL.</span><span class="sxs-lookup"><span data-stu-id="832d6-172">In particular, we will retrieve the records to display using an ObjectDataSource, but perform the update and delete actions by interfacing directly with the BLL.</span></span> <span data-ttu-id="832d6-173">Před jsme starat o implementaci úpravy a odstraňování funkce pro prvku DataList, umožní s nejdřív získat na stránce zobrazit produkty v rozhraní, které je jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="832d6-173">Before we worry about implementing the editing and deleting capabilities to the DataList, let s first get the page to display the products in a read-only interface.</span></span> <span data-ttu-id="832d6-174">Protože jsme sunout zkontrolován tyto kroky v předchozí kurzech I budete pokračujte je rychle.</span><span class="sxs-lookup"><span data-stu-id="832d6-174">Since we ve examined these steps in previous tutorials, I'll proceed through them quickly.</span></span>

<span data-ttu-id="832d6-175">Začněte otevřením `Basics.aspx` stránku `EditDeleteDataList` složku a ze zobrazení návrhu, přidejte na stránku DataList.</span><span class="sxs-lookup"><span data-stu-id="832d6-175">Start by opening the `Basics.aspx` page in the `EditDeleteDataList` folder and, from the Design view, add a DataList to the page.</span></span> <span data-ttu-id="832d6-176">Dále ze s DataList inteligentní značky, vytvořte nový ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="832d6-176">Next, from the DataList s smart tag, create a new ObjectDataSource.</span></span> <span data-ttu-id="832d6-177">Vzhledem k tomu, že jsme pracují s daty produktu, nakonfigurujte ho na používání `ProductsBLL` třídy.</span><span class="sxs-lookup"><span data-stu-id="832d6-177">Since we are working with product data, configure it to use the `ProductsBLL` class.</span></span> <span data-ttu-id="832d6-178">Načtení *všechny* vyberte produkty, `GetProducts()` metoda na kartě vyberte.</span><span class="sxs-lookup"><span data-stu-id="832d6-178">To retrieve *all* products, choose the `GetProducts()` method in the SELECT tab.</span></span>


<span data-ttu-id="832d6-179">[![Konfigurace ObjectDataSource použití třídy ProductsBLL](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image7.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="832d6-179">[![Configure the ObjectDataSource to Use the ProductsBLL Class](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image7.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image6.png)</span></span>

<span data-ttu-id="832d6-180">**Obrázek 4**: Konfigurace ObjectDataSource pro použití `ProductsBLL` – třída ([Kliknutím zobrazit obrázek v plné velikosti](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="832d6-180">**Figure 4**: Configure the ObjectDataSource to Use the `ProductsBLL` Class ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image8.png))</span></span>


<span data-ttu-id="832d6-181">[![Vrátí informace o produktu pomocí metody GetProducts()](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image10.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="832d6-181">[![Return the Product Information Using the GetProducts() Method](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image10.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image9.png)</span></span>

<span data-ttu-id="832d6-182">**Obrázek 5**: vrátit na informace o produktu pomocí `GetProducts()` – metoda ([Kliknutím zobrazit obrázek v plné velikosti](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="832d6-182">**Figure 5**: Return the Product Information Using the `GetProducts()` Method ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image11.png))</span></span>


<span data-ttu-id="832d6-183">DataList, jako je GridView, není určené pro vložení nová data; proto vyberte (None) možnost v rozevíracím seznamu v kartě Vložení. Také (None) zvolte pro karty aktualizace a odstranění od aktualizace a odstranění bude prostřednictvím BLL provést prostřednictvím kódu programu.</span><span class="sxs-lookup"><span data-stu-id="832d6-183">The DataList, like the GridView, is not designed for inserting new data; therefore, select the (None) option from the drop-down list in the INSERT tab. Also choose (None) for the UPDATE and DELETE tabs since the updates and deletes will be performed programmatically through the BLL.</span></span>


<span data-ttu-id="832d6-184">[![Potvrďte nastavení rozevíracího seznamu jsou uvedeny v ObjectDataSource s příkazy INSERT, UPDATE a odstranit karty na (žádný)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image13.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="832d6-184">[![Confirm that the Drop-Down Lists in the ObjectDataSource s INSERT, UPDATE, and DELETE Tabs are Set to (None)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image13.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image12.png)</span></span>

<span data-ttu-id="832d6-185">**Obrázek 6**: zkontrolovali, jestli rozevíracího seznamu, jsou uvedeny ve ObjectDataSource s příkazy INSERT, UPDATE a odstranit karty jsou nastavené na (žádný) ([Kliknutím zobrazit obrázek v plné velikosti](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="832d6-185">**Figure 6**: Confirm that the Drop-Down Lists in the ObjectDataSource s INSERT, UPDATE, and DELETE Tabs are Set to (None) ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image14.png))</span></span>


<span data-ttu-id="832d6-186">Po dokončení konfigurace ObjectDataSource, klikněte na tlačítko Dokončit, vrácením návrháře.</span><span class="sxs-lookup"><span data-stu-id="832d6-186">After configuring the ObjectDataSource, click Finish, returning to the Designer.</span></span> <span data-ttu-id="832d6-187">Jako jsme jste viděli v posledních příklady po dokončení konfigurace ObjectDataSource, Visual Studio automaticky vytvoří `ItemTemplate` pro rozevírací seznam, zobrazení každé pole data.</span><span class="sxs-lookup"><span data-stu-id="832d6-187">As we ve seen in past examples, when completing the ObjectDataSource configuration, Visual Studio automatically creates an `ItemTemplate` for the DropDownList, displaying each of the data fields.</span></span> <span data-ttu-id="832d6-188">Nahraďte ho `ItemTemplate` s jedním, který zobrazí název produktu s a ceny.</span><span class="sxs-lookup"><span data-stu-id="832d6-188">Replace this `ItemTemplate` with one that displays only the product s name and price.</span></span> <span data-ttu-id="832d6-189">Také nastavena `RepeatColumns` vlastnost na hodnotu 2.</span><span class="sxs-lookup"><span data-stu-id="832d6-189">Also, set the `RepeatColumns` property to 2.</span></span>

> [!NOTE]
> <span data-ttu-id="832d6-190">Jak je popsáno v *Přehled vložení, aktualizace a odstranění dat* kurzu při změně dat pomocí ObjectDataSource Naše architektura vyžaduje, že jsme odebrat `OldValuesParameterFormatString` vlastnost z ObjectDataSource s deklarativní (nebo ho resetovat na výchozí hodnotu, `{0}`).</span><span class="sxs-lookup"><span data-stu-id="832d6-190">As discussed in the *Overview of Inserting, Updating, and Deleting Data* tutorial, when modifying data using the ObjectDataSource our architecture requires that we remove the `OldValuesParameterFormatString` property from the ObjectDataSource s declarative markup (or reset it to its default value, `{0}`).</span></span> <span data-ttu-id="832d6-191">V tomto kurzu ale používáme ObjectDataSource pouze pro načítání dat.</span><span class="sxs-lookup"><span data-stu-id="832d6-191">In this tutorial, however, we are using the ObjectDataSource only for retrieving data.</span></span> <span data-ttu-id="832d6-192">Proto jsme nemusíte upravit ObjectDataSource s `OldValuesParameterFormatString` hodnota vlastnosti (i když ho nemá t narušit Uděláte to tak).</span><span class="sxs-lookup"><span data-stu-id="832d6-192">Therefore, we do not need to modify the ObjectDataSource s `OldValuesParameterFormatString` property value (although it doesn t hurt to do so).</span></span>


<span data-ttu-id="832d6-193">Po nahrazení výchozí DataList `ItemTemplate` s vlastní jeden, deklarativní na stránku by mělo vypadat jako následující:</span><span class="sxs-lookup"><span data-stu-id="832d6-193">After replacing the default DataList `ItemTemplate` with a customized one, the declarative markup on your page should look similar to the following:</span></span>


[!code-aspx[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample2.aspx)]

<span data-ttu-id="832d6-194">Chcete-li zobrazit naše průběh prostřednictvím prohlížeče chvíli trvat.</span><span class="sxs-lookup"><span data-stu-id="832d6-194">Take a moment to view our progress through a browser.</span></span> <span data-ttu-id="832d6-195">Jak je vidět na obrázku 7, zobrazí DataList product name a jednotka ceny pro každý produkt v dva sloupce.</span><span class="sxs-lookup"><span data-stu-id="832d6-195">As Figure 7 shows, the DataList displays the product name and unit price for each product in two columns.</span></span>


<span data-ttu-id="832d6-196">[![Názvy produktů a ceny se zobrazují v DataList dva sloupce](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image16.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="832d6-196">[![The Products Names and Prices are Displayed in a Two-Column DataList](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image16.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image15.png)</span></span>

<span data-ttu-id="832d6-197">**Obrázek 7**: názvy produktů a ceny se zobrazují v DataList dvou sloupců ([Kliknutím zobrazit obrázek v plné velikosti](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="832d6-197">**Figure 7**: The Products Names and Prices are Displayed in a Two-Column DataList ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image17.png))</span></span>


> [!NOTE]
> <span data-ttu-id="832d6-198">DataList má několik vlastností, které jsou požadovány pro proces aktualizace a odstraňování a tyto hodnoty se uloží v zobrazení stavu.</span><span class="sxs-lookup"><span data-stu-id="832d6-198">The DataList has a number of properties that are required for the updating and deleting process, and these values are stored in view state.</span></span> <span data-ttu-id="832d6-199">Proto při vytváření DataList, který podporuje úpravy nebo odstranění dat, je nezbytné, aby byl povolen stav zobrazení s DataList.</span><span class="sxs-lookup"><span data-stu-id="832d6-199">Therefore, when building a DataList that supports editing or deleting data, it is essential that the DataList s view state be enabled.</span></span>  
>   
>  <span data-ttu-id="832d6-200">Astute čtečky si pamatovat, že jsme byli schopni zakázat stav zobrazení, při vytváření upravitelné GridViews, DetailsViews a FormViews.</span><span class="sxs-lookup"><span data-stu-id="832d6-200">The astute reader may recall that we were able to disable view state when creating editable GridViews, DetailsViews, and FormViews.</span></span> <span data-ttu-id="832d6-201">Důvodem je, že může zahrnovat ovládacích prvků technologie ASP.NET 2.0 *řízení stavu*, což je stav ukládaný napříč postback jako stav zobrazení, ale domnělého nezbytné.</span><span class="sxs-lookup"><span data-stu-id="832d6-201">This is because ASP.NET 2.0 Web controls can include *control state*, which is state persisted across postbacks like view state, but deemed essential.</span></span>


<span data-ttu-id="832d6-202">Zakazuje zobrazení stavu v GridView jenom vynechá trivial stavové informace, ale zachová stav ovládacího prvku (které zahrnuje stav potřebné pro úpravy a odstranění).</span><span class="sxs-lookup"><span data-stu-id="832d6-202">Disabling view state in the GridView merely omits trivial state information, but maintains the control state (which includes the state necessary for editing and deleting).</span></span> <span data-ttu-id="832d6-203">DataList, s byla vytvořena v určeném časovém rozmezí ASP.NET 1.x nevyužívá ovládací prvek stavu a proto musí mít stav zobrazení, které jsou povolené.</span><span class="sxs-lookup"><span data-stu-id="832d6-203">The DataList, having been created in the ASP.NET 1.x timeframe, does not utilize control state and therefore must have view state enabled.</span></span> <span data-ttu-id="832d6-204">V tématu [řízení stavu vs. Zobrazení stavu](https://msdn.microsoft.com/en-us/library/1whwt1k7.aspx) Další informace o účelu řízení stavu a jak se liší od stav zobrazení.</span><span class="sxs-lookup"><span data-stu-id="832d6-204">See [Control State vs. View State](https://msdn.microsoft.com/en-us/library/1whwt1k7.aspx) for more information on the purpose of control state and how it differs from view state.</span></span>

## <a name="step-4-adding-an-editing-user-interface"></a><span data-ttu-id="832d6-205">Krok 4: Přidání úpravy uživatelského rozhraní</span><span class="sxs-lookup"><span data-stu-id="832d6-205">Step 4: Adding an Editing User Interface</span></span>

<span data-ttu-id="832d6-206">Ovládací prvek GridView se skládá z kolekce polí (BoundFields, CheckBoxFields, TemplateFields a tak dále).</span><span class="sxs-lookup"><span data-stu-id="832d6-206">The GridView control is composed of a collection of fields (BoundFields, CheckBoxFields, TemplateFields, and so on).</span></span> <span data-ttu-id="832d6-207">Tato pole můžete upravit své vykreslené značky v závislosti na jejich režimu.</span><span class="sxs-lookup"><span data-stu-id="832d6-207">These fields can adjust their rendered markup depending on their mode.</span></span> <span data-ttu-id="832d6-208">V režimu jen pro čtení, BoundField zobrazí jeho data pole hodnotu jako text; Když v režimu úprav, vykreslí TextBox webového řídit, jehož `Text` vlastnost je přiřazena hodnota pole data.</span><span class="sxs-lookup"><span data-stu-id="832d6-208">For example, when in read-only mode, a BoundField displays its data field value as text; when in edit mode, it renders a TextBox Web control whose `Text` property is assigned the data field value.</span></span>

<span data-ttu-id="832d6-209">DataList, vykreslí na druhé straně jeho položek pomocí šablony.</span><span class="sxs-lookup"><span data-stu-id="832d6-209">The DataList, on the other hand, renders its items using templates.</span></span> <span data-ttu-id="832d6-210">Jen pro čtení položky jsou vykreslovány pomocí `ItemTemplate` zatímco položky v režimu úprav jsou vykreslovány pomocí `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="832d6-210">Read-only items are rendered using the `ItemTemplate` whereas items in edit mode are rendered via the `EditItemTemplate`.</span></span> <span data-ttu-id="832d6-211">V tomto okamžiku je naše DataList pouze `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="832d6-211">At this point, our DataList has only an `ItemTemplate`.</span></span> <span data-ttu-id="832d6-212">Pro podporu funkcí úpravy úrovni položek je potřeba přidat `EditItemTemplate` obsahující kód, který se má zobrazit pro položku upravovat.</span><span class="sxs-lookup"><span data-stu-id="832d6-212">To support item-level editing functionality we need to add an `EditItemTemplate` that contains the markup to be displayed for the editable item.</span></span> <span data-ttu-id="832d6-213">V tomto kurzu používáme ovládací prvky webového textové pole pro úpravy produktu s názvem a jednotka cenu.</span><span class="sxs-lookup"><span data-stu-id="832d6-213">For this tutorial, we'll use TextBox Web controls for editing the product s name and unit price.</span></span>

<span data-ttu-id="832d6-214">`EditItemTemplate` Lze vytvořit deklarativně nebo prostřednictvím návrháře (tak, že vyberete možnost Upravit šablony ze inteligentní značky DataList s).</span><span class="sxs-lookup"><span data-stu-id="832d6-214">The `EditItemTemplate` can be created either declaratively or through the Designer (by selecting the Edit Templates option from the DataList s smart tag).</span></span> <span data-ttu-id="832d6-215">Chcete-li použít možnost Upravit šablony, nejprve klikněte na odkaz Upravit šablony v inteligentní značky a pak vyberte `EditItemTemplate` položku z rozevíracího seznamu.</span><span class="sxs-lookup"><span data-stu-id="832d6-215">To use the Edit Templates option, first click the Edit Templates link in the smart tag and then select the `EditItemTemplate` item from the drop-down list.</span></span>


<span data-ttu-id="832d6-216">[![OPT práce se sadami DataList s EditItemTemplate](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image19.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="832d6-216">[![Opt to Work with the DataList s EditItemTemplate](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image19.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image18.png)</span></span>

<span data-ttu-id="832d6-217">**Obrázek 8**: Opt práce se sadami DataList s `EditItemTemplate` ([Kliknutím zobrazit obrázek v plné velikosti](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="832d6-217">**Figure 8**: Opt to Work with the DataList s `EditItemTemplate` ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image20.png))</span></span>


<span data-ttu-id="832d6-218">Potom zadejte název produktu: a cena: a poté přetáhněte z panelu nástrojů do dvou ovládacích prvků textového pole `EditItemTemplate` rozhraní v designeru.</span><span class="sxs-lookup"><span data-stu-id="832d6-218">Next, type in Product name: and Price: and then drag two TextBox controls from the Toolbox into the `EditItemTemplate` interface on the Designer.</span></span> <span data-ttu-id="832d6-219">Nastavení textových polí `ID` vlastnosti, které chcete `ProductName` a `UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="832d6-219">Set the TextBoxes `ID` properties to `ProductName` and `UnitPrice`.</span></span>


<span data-ttu-id="832d6-220">[![Přidat textové pole s názvem produktu a ceny](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image22.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="832d6-220">[![Add a TextBox for the Product s Name and Price](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image22.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image21.png)</span></span>

<span data-ttu-id="832d6-221">**Obrázek 9**: přidat textové pole s názvem produktu a ceny ([Kliknutím zobrazit obrázek v plné velikosti](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="832d6-221">**Figure 9**: Add a TextBox for the Product s Name and Price ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image23.png))</span></span>


<span data-ttu-id="832d6-222">Je potřeba vytvořit vazbu odpovídající hodnoty polí data produktu na `Text` vlastnosti dvou textových polí.</span><span class="sxs-lookup"><span data-stu-id="832d6-222">We need to bind the corresponding product data field values to the `Text` properties of the two TextBoxes.</span></span> <span data-ttu-id="832d6-223">Inteligentní značky textová pole, klikněte na odkaz Upravit datové vazby a pak přidružit pole příslušná data s `Text` vlastnost, jak je znázorněno na obrázku 10.</span><span class="sxs-lookup"><span data-stu-id="832d6-223">From the TextBoxes smart tags, click on the Edit DataBindings link and then associate the appropriate data field with the `Text` property, as shown in Figure 10.</span></span>

> [!NOTE]
> <span data-ttu-id="832d6-224">Při vytváření vazby `UnitPrice` datové pole na cenu textové pole s `Text` pole, je může formátovat jako hodnotu měny (`{0:C}`), Obecné číslo (`{0:N}`), nebo nechte neformátovaný tvar.</span><span class="sxs-lookup"><span data-stu-id="832d6-224">When binding the `UnitPrice` data field to the price TextBox s `Text` field, you may format it as a currency value (`{0:C}`), a general number (`{0:N}`), or leave it unformatted.</span></span>


![Vytvořit vazbu ProductName a pole UnitPrice dat vlastnosti textu textových polí](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image24.png)

<span data-ttu-id="832d6-226">**Obrázek 10**: vytvoření vazby `ProductName` a `UnitPrice` Data polí k `Text` vlastnosti textových</span><span class="sxs-lookup"><span data-stu-id="832d6-226">**Figure 10**: Bind the `ProductName` and `UnitPrice` Data Fields to the `Text` Properties of the TextBoxes</span></span>


<span data-ttu-id="832d6-227">Všimněte si, jak funguje dialogové okno Upravit datové vazby na obrázku 10 *není* zahrnují políčka obousměrné vazby dat, která je k dispozici při úpravě TemplateField GridView nebo DetailsView nebo šablonu FormView.</span><span class="sxs-lookup"><span data-stu-id="832d6-227">Notice how the Edit DataBindings dialog box in Figure 10 does *not* include the Two-way databinding checkbox that is present when editing a TemplateField in the GridView or DetailsView, or a template in the FormView.</span></span> <span data-ttu-id="832d6-228">Funkci obousměrné vazby dat povolená hodnota zadaná do vstupní ovládací prvek webu automaticky přiřazení odpovídající ObjectDataSource s `InsertParameters` nebo `UpdateParameters` při vložení nebo aktualizaci data.</span><span class="sxs-lookup"><span data-stu-id="832d6-228">The two-way databinding feature allowed the value entered into the input Web control to be automatically assigned to the corresponding ObjectDataSource s `InsertParameters` or `UpdateParameters` when inserting or updating data.</span></span> <span data-ttu-id="832d6-229">DataList nepodporuje obousměrné vazby dat, jako ukážeme později v tomto kurzu po uživatel provede jí změny a je připravena aktualizovat data, budeme muset programový přístup tyto textových polí `Text` vlastnosti a předejte jí jejich hodnoty do odpovídající `UpdateProduct` metoda v `ProductsBLL` třídy.</span><span class="sxs-lookup"><span data-stu-id="832d6-229">The DataList does not support two-way databinding as we'll see later on in this tutorial, after the user makes her changes and is ready to update the data, we will need to programmatically access these TextBoxes `Text` properties and pass in their values to the appropriate `UpdateProduct` method in the `ProductsBLL` class.</span></span>

<span data-ttu-id="832d6-230">Nakonec je potřeba přidat aktualizace tlačítka a Storno `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="832d6-230">Finally, we need to add Update and Cancel buttons to the `EditItemTemplate`.</span></span> <span data-ttu-id="832d6-231">Jak jsme viděli v [hlavní/podrobností s odrážkami seznamu v hlavní záznamů pomocí DataList podrobnosti](../filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md) kurzu, pokud tlačítko, LinkButton nebo ImageButton jehož `CommandName` je nastavena po kliknutí na z určitého opakovače nebo DataList, Opakovače nebo DataList s `ItemCommand` událost se vyvolá.</span><span class="sxs-lookup"><span data-stu-id="832d6-231">As we saw in the [Master/Detail Using a Bulleted List of Master Records with a Details DataList](../filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md) tutorial, when a Button, LinkButton, or ImageButton whose `CommandName` property is set is clicked from within a Repeater or DataList, the Repeater or DataList s `ItemCommand` event is raised.</span></span> <span data-ttu-id="832d6-232">Pro DataList Pokud `CommandName` je nastavena na určitou hodnotu, může také zvýšit další událost.</span><span class="sxs-lookup"><span data-stu-id="832d6-232">For the DataList, if the `CommandName` property is set to a certain value, an additional event may be raised as well.</span></span> <span data-ttu-id="832d6-233">Speciální `CommandName` hodnoty vlastností, patří mimo jiné:</span><span class="sxs-lookup"><span data-stu-id="832d6-233">The special `CommandName` property values include, among others:</span></span>

- <span data-ttu-id="832d6-234">Zrušit vyvolá `CancelCommand` událostí</span><span class="sxs-lookup"><span data-stu-id="832d6-234">Cancel raises the `CancelCommand` event</span></span>
- <span data-ttu-id="832d6-235">Upravit vyvolá `EditCommand` událostí</span><span class="sxs-lookup"><span data-stu-id="832d6-235">Edit raises the `EditCommand` event</span></span>
- <span data-ttu-id="832d6-236">Aktualizovat vyvolá `UpdateCommand` událostí</span><span class="sxs-lookup"><span data-stu-id="832d6-236">Update raises the `UpdateCommand` event</span></span>

<span data-ttu-id="832d6-237">Mějte na paměti, že tyto události jsou vyvolány *kromě* `ItemCommand` událostí.</span><span class="sxs-lookup"><span data-stu-id="832d6-237">Keep in mind that these events are raised *in addition to* the `ItemCommand` event.</span></span>

<span data-ttu-id="832d6-238">Přidejte do `EditItemTemplate` dvou tlačítko webových ovládacích prvků, jeden jehož `CommandName` je nastavena na aktualizace a další prostředky nastavena na Storno.</span><span class="sxs-lookup"><span data-stu-id="832d6-238">Add to the `EditItemTemplate` two Button Web controls, one whose `CommandName` is set to Update and the other s set to Cancel.</span></span> <span data-ttu-id="832d6-239">Po přidání těchto dvou ovládacích prvků tlačítko webové návrháře by měl vypadat takto:</span><span class="sxs-lookup"><span data-stu-id="832d6-239">After adding these two Button Web controls the Designer should look similar to the following:</span></span>


<span data-ttu-id="832d6-240">[![Přidat aktualizace tlačítka EditItemTemplate a Storno](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image26.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="832d6-240">[![Add Update and Cancel Buttons to the EditItemTemplate](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image26.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image25.png)</span></span>

<span data-ttu-id="832d6-241">**Obrázek 11**: zrušit tlačítek a přidat aktualizovat `EditItemTemplate` ([Kliknutím zobrazit obrázek v plné velikosti](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="832d6-241">**Figure 11**: Add Update and Cancel Buttons to the `EditItemTemplate` ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image27.png))</span></span>


<span data-ttu-id="832d6-242">Pomocí `EditItemTemplate` dokončení DataList s deklarativní by měl vypadat podobně jako následující:</span><span class="sxs-lookup"><span data-stu-id="832d6-242">With the `EditItemTemplate` complete your DataList s declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample3.aspx)]

## <a name="step-5-adding-the-plumbing-to-enter-edit-mode"></a><span data-ttu-id="832d6-243">Krok 5: Přidání vložení do režimu úprav</span><span class="sxs-lookup"><span data-stu-id="832d6-243">Step 5: Adding the Plumbing to Enter Edit Mode</span></span>

<span data-ttu-id="832d6-244">V tomto okamžiku naše DataList má úpravy rozhraní definované pomocí jeho `EditItemTemplate`, nicméně zde s aktuálně nijak pro uživatele, kteří navštěvují naší stránce s znamenat, že chce upravit informace o produktu s.</span><span class="sxs-lookup"><span data-stu-id="832d6-244">At this point our DataList has an editing interface defined via its `EditItemTemplate`; however, there s currently no way for a user visiting our page to indicate that he wants to edit a product s information.</span></span> <span data-ttu-id="832d6-245">Je potřeba přidat tlačítko pro každý produkt, že při kliknutí na, vykreslí této DataList položky v režimu úprav.</span><span class="sxs-lookup"><span data-stu-id="832d6-245">We need to add an Edit button to each product that, when clicked, renders that DataList item in edit mode.</span></span> <span data-ttu-id="832d6-246">Začněte přidáním tlačítko pro úpravy k `ItemTemplate`, prostřednictvím návrháře nebo deklarativně.</span><span class="sxs-lookup"><span data-stu-id="832d6-246">Start by adding an Edit button to the `ItemTemplate`, either through the Designer or declaratively.</span></span> <span data-ttu-id="832d6-247">Být určitých nastavení na tlačítko Upravit s `CommandName` vlastnost pro úpravy.</span><span class="sxs-lookup"><span data-stu-id="832d6-247">Be certain to set the Edit button s `CommandName` property to Edit .</span></span>

<span data-ttu-id="832d6-248">Jakmile přidáte toto tlačítko Upravit pozorně zobrazíte stránku prostřednictvím prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="832d6-248">After you have added this Edit button, take a moment to view the page through a browser.</span></span> <span data-ttu-id="832d6-249">Pomocí tohoto přidání by měla obsahovat každého produktu seznamu tlačítko pro úpravy.</span><span class="sxs-lookup"><span data-stu-id="832d6-249">With this addition, each product listing should include an Edit button.</span></span>


<span data-ttu-id="832d6-250">[![Přidat aktualizace tlačítka EditItemTemplate a Storno](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image29.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="832d6-250">[![Add Update and Cancel Buttons to the EditItemTemplate](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image29.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image28.png)</span></span>

<span data-ttu-id="832d6-251">**Obrázek 12**: zrušit tlačítek a přidat aktualizovat `EditItemTemplate` ([Kliknutím zobrazit obrázek v plné velikosti](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="832d6-251">**Figure 12**: Add Update and Cancel Buttons to the `EditItemTemplate` ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image30.png))</span></span>


<span data-ttu-id="832d6-252">Kliknutím na tlačítko způsobí, že zpětné volání, ale nemá *není* uvést do režimu úprav dílčího produktu.</span><span class="sxs-lookup"><span data-stu-id="832d6-252">Clicking the button causes a postback, but does *not* bring the product listing into edit mode.</span></span> <span data-ttu-id="832d6-253">Chcete-li produkt upravovat, je potřeba:</span><span class="sxs-lookup"><span data-stu-id="832d6-253">To make the product editable, we need to:</span></span>

1. <span data-ttu-id="832d6-254">Nastavit DataList s [ `EditItemIndex` vlastnost](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.edititemindex.aspx) na index `DataListItem` právě označeného jehož tlačítko Upravit.</span><span class="sxs-lookup"><span data-stu-id="832d6-254">Set the DataList s [`EditItemIndex` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.edititemindex.aspx) to the index of the `DataListItem` whose Edit button was just clicked.</span></span>
2. <span data-ttu-id="832d6-255">Rebind data, která mají DataList.</span><span class="sxs-lookup"><span data-stu-id="832d6-255">Rebind the data to the DataList.</span></span> <span data-ttu-id="832d6-256">Po znovu vykreslené DataList `DataListItem` jejichž `ItemIndex` odpovídá DataList s `EditItemIndex` bude vykreslit pomocí jeho `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="832d6-256">When the DataList is re-rendered, the `DataListItem` whose `ItemIndex` corresponds with the DataList s `EditItemIndex` will render using its `EditItemTemplate`.</span></span>

<span data-ttu-id="832d6-257">Od DataList s `EditCommand` událost je aktivována, jestliže po kliknutí na tlačítko Upravit, vytvořte `EditCommand` obslužné rutiny události s následujícím kódem:</span><span class="sxs-lookup"><span data-stu-id="832d6-257">Since the DataList s `EditCommand` event is fired when the Edit button is clicked, create an `EditCommand` event handler with the following code:</span></span>


[!code-vb[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample4.vb)]

<span data-ttu-id="832d6-258">`EditCommand` Obslužné rutiny události, je předaná objekt typu `DataListCommandEventArgs` jako druhý vstupní parametr, který obsahuje odkaz na `DataListItem` označeného jehož tlačítko Upravit (`e.Item`).</span><span class="sxs-lookup"><span data-stu-id="832d6-258">The `EditCommand` event handler is passed in an object of type `DataListCommandEventArgs` as its second input parameter, which includes a reference to the `DataListItem` whose Edit button was clicked (`e.Item`).</span></span> <span data-ttu-id="832d6-259">Obslužné rutiny události nejprve nastaví DataList s `EditItemIndex` k `ItemIndex` z upravitelné `DataListItem` a pak znovu připojí data k prvku DataList voláním DataList s `DataBind()` metoda.</span><span class="sxs-lookup"><span data-stu-id="832d6-259">The event handler first sets the DataList s `EditItemIndex` to the `ItemIndex` of the editable `DataListItem` and then rebinds the data to the DataList by calling the DataList s `DataBind()` method.</span></span>

<span data-ttu-id="832d6-260">Po přidání této obslužné rutiny události, otevírat stránku v prohlížeči.</span><span class="sxs-lookup"><span data-stu-id="832d6-260">After adding this event handler, revisit the page in a browser.</span></span> <span data-ttu-id="832d6-261">Kliknutím na tlačítko Upravit teď umožňuje na kliknutelnou produktu upravovat (viz obrázek 13).</span><span class="sxs-lookup"><span data-stu-id="832d6-261">Clicking the Edit button now makes the clicked product editable (see Figure 13).</span></span>


<span data-ttu-id="832d6-262">[![Kliknutím na tlačítko díky upravit upravitelné produktu](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image32.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="832d6-262">[![Clicking the Edit Button Makes the Product Editable](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image32.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image31.png)</span></span>

<span data-ttu-id="832d6-263">**Obrázek 13**: Kliknutím na tlačítko Upravit umožňuje upravovat produktu ([Kliknutím zobrazit obrázek v plné velikosti](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="832d6-263">**Figure 13**: Clicking the Edit Button Makes the Product Editable ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image33.png))</span></span>


## <a name="step-6-saving-the-user-s-changes"></a><span data-ttu-id="832d6-264">Krok 6: Uložení změn s uživatele</span><span class="sxs-lookup"><span data-stu-id="832d6-264">Step 6: Saving the User s Changes</span></span>

<span data-ttu-id="832d6-265">Kliknutím na tlačítko s upravená produktu aktualizaci nebo Storno tlačítka se nic nestane. v tomto okamžiku; Chcete-li přidat tuto funkci, musíme vytváření obslužných rutin událostí pro DataList s `UpdateCommand` a `CancelCommand` události.</span><span class="sxs-lookup"><span data-stu-id="832d6-265">Clicking the edited product s Update or Cancel buttons does nothing at this point; to add this functionality we need to create event handlers for the DataList s `UpdateCommand` and `CancelCommand` events.</span></span> <span data-ttu-id="832d6-266">Začněte vytvořením `CancelCommand` obslužná rutina události, která se spustí, když po kliknutí na tlačítko Storno upravená produktu s a jeho musí s vrácením prvku DataList stavu předem úpravy.</span><span class="sxs-lookup"><span data-stu-id="832d6-266">Start by creating the `CancelCommand` event handler, which will execute when the edited product s Cancel button is clicked and it tasked with returning the DataList to its pre-editing state.</span></span>

<span data-ttu-id="832d6-267">Chcete-li DataList vykreslení všechny jeho položky v režimu jen pro čtení, je potřeba:</span><span class="sxs-lookup"><span data-stu-id="832d6-267">To have the DataList render all of its items in the read-only mode, we need to:</span></span>

1. <span data-ttu-id="832d6-268">Nastavit DataList s [ `EditItemIndex` vlastnost](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.edititemindex.aspx) do indexu neexistující `DataListItem` index.</span><span class="sxs-lookup"><span data-stu-id="832d6-268">Set the DataList s [`EditItemIndex` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.edititemindex.aspx) to the index of a non-existent `DataListItem` index.</span></span> <span data-ttu-id="832d6-269">`-1`je bezpečné volbou, protože `DataListItem` indexy začínají `0`.</span><span class="sxs-lookup"><span data-stu-id="832d6-269">`-1` is a safe choice, since the `DataListItem` indexes start at `0`.</span></span>
2. <span data-ttu-id="832d6-270">Rebind data, která mají DataList.</span><span class="sxs-lookup"><span data-stu-id="832d6-270">Rebind the data to the DataList.</span></span> <span data-ttu-id="832d6-271">Od ne `DataListItem` `ItemIndex` es odpovídají DataList s `EditItemIndex`, budou k dispozici celý DataList v režimu jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="832d6-271">Since no `DataListItem` `ItemIndex` es correspond to the DataList s `EditItemIndex`, the entire DataList will be rendered in a read-only mode.</span></span>

<span data-ttu-id="832d6-272">Následující kód obslužné rutiny událostí se dá udělat tyto kroky:</span><span class="sxs-lookup"><span data-stu-id="832d6-272">These steps can be accomplished with the following event handler code:</span></span>


[!code-vb[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample5.vb)]

<span data-ttu-id="832d6-273">Pomocí tohoto přidání kliknutím na tlačítko Storno tlačítko vrátí prvku DataList předem úpravy stav.</span><span class="sxs-lookup"><span data-stu-id="832d6-273">With this addition, clicking the Cancel button returns the DataList to its pre-editing state.</span></span>

<span data-ttu-id="832d6-274">Je poslední obslužné rutiny události je potřeba dokončit `UpdateCommand` obslužné rutiny události.</span><span class="sxs-lookup"><span data-stu-id="832d6-274">The last event handler we need to complete is the `UpdateCommand` event handler.</span></span> <span data-ttu-id="832d6-275">Této obslužné rutiny události musí:</span><span class="sxs-lookup"><span data-stu-id="832d6-275">This event handler needs to:</span></span>

1. <span data-ttu-id="832d6-276">Programový přístup název zadaný uživatelem produktu a ceny, jakož i upravená produktu s `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="832d6-276">Programmatically access the user-entered product name and price as well as the edited product s `ProductID`.</span></span>
2. <span data-ttu-id="832d6-277">Zahájit proces aktualizace voláním odpovídající `UpdateProduct` přetížení v `ProductsBLL` třídy.</span><span class="sxs-lookup"><span data-stu-id="832d6-277">Initiate the update process by calling the appropriate `UpdateProduct` overload in the `ProductsBLL` class.</span></span>
3. <span data-ttu-id="832d6-278">Nastavit DataList s [ `EditItemIndex` vlastnost](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.edititemindex.aspx) do indexu neexistující `DataListItem` index.</span><span class="sxs-lookup"><span data-stu-id="832d6-278">Set the DataList s [`EditItemIndex` property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.edititemindex.aspx) to the index of a non-existent `DataListItem` index.</span></span> <span data-ttu-id="832d6-279">`-1`je bezpečné volbou, protože `DataListItem` indexy začínají `0`.</span><span class="sxs-lookup"><span data-stu-id="832d6-279">`-1` is a safe choice, since the `DataListItem` indexes start at `0`.</span></span>
4. <span data-ttu-id="832d6-280">Rebind data, která mají DataList.</span><span class="sxs-lookup"><span data-stu-id="832d6-280">Rebind the data to the DataList.</span></span> <span data-ttu-id="832d6-281">Od ne `DataListItem` `ItemIndex` es odpovídají DataList s `EditItemIndex`, budou k dispozici celý DataList v režimu jen pro čtení.</span><span class="sxs-lookup"><span data-stu-id="832d6-281">Since no `DataListItem` `ItemIndex` es correspond to the DataList s `EditItemIndex`, the entire DataList will be rendered in a read-only mode.</span></span>

<span data-ttu-id="832d6-282">Provedení kroků 1 a 2 zodpovídají za uložení uživatele s změn; kroky 3 a 4 DataList vrátit do předem úpravy stavu po změny byly uloženy a se shoduje s postupem prováděla `CancelCommand` obslužné rutiny události.</span><span class="sxs-lookup"><span data-stu-id="832d6-282">Steps 1 and 2 are responsible for saving the user s changes; steps 3 and 4 return the DataList to its pre-editing state after the changes have been saved and are identical to the steps performed in the `CancelCommand` event handler.</span></span>

<span data-ttu-id="832d6-283">Získat název aktualizované produktu a ceny, je potřeba použít `FindControl` metodu prostřednictvím kódu programu odkaz TextBox webové ovládací prvky v rámci `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="832d6-283">To get the updated product name and price, we need to use the `FindControl` method to programmatically reference the TextBox Web controls within the `EditItemTemplate`.</span></span> <span data-ttu-id="832d6-284">Také je potřeba získat upravená produktu s `ProductID` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="832d6-284">We also need to get the edited product s `ProductID` value.</span></span> <span data-ttu-id="832d6-285">Pokud jsme původně vázána ObjectDataSource prvku DataList, Visual Studio přiřazen DataList s `DataKeyField` vlastnost na hodnotu primárního klíče ze zdroje dat (`ProductID`).</span><span class="sxs-lookup"><span data-stu-id="832d6-285">When we initially bound the ObjectDataSource to the DataList, Visual Studio assigned the DataList s `DataKeyField` property to the primary key value from the data source (`ProductID`).</span></span> <span data-ttu-id="832d6-286">Tato hodnota může být pak načtena z DataList s `DataKeys` kolekce.</span><span class="sxs-lookup"><span data-stu-id="832d6-286">This value can then be retrieved from the DataList s `DataKeys` collection.</span></span> <span data-ttu-id="832d6-287">Ujistěte se, že za chvíli `DataKeyField` skutečně je vlastnost nastavena na `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="832d6-287">Take a moment to ensure that the `DataKeyField` property is indeed set to `ProductID`.</span></span>

<span data-ttu-id="832d6-288">Následující kód implementuje čtyři kroky:</span><span class="sxs-lookup"><span data-stu-id="832d6-288">The following code implements the four steps:</span></span>


[!code-vb[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample6.vb)]

<span data-ttu-id="832d6-289">Obslužné rutiny události začne čtení v upravená produktu s `ProductID` z `DataKeys` kolekce.</span><span class="sxs-lookup"><span data-stu-id="832d6-289">The event handler starts by reading in the edited product s `ProductID` from the `DataKeys` collection.</span></span> <span data-ttu-id="832d6-290">Další, dvou textových polí v `EditItemTemplate` odkazují a jejich `Text` vlastností uložených v místní proměnné `productNameValue` a `unitPriceValue`.</span><span class="sxs-lookup"><span data-stu-id="832d6-290">Next, the two TextBoxes in the `EditItemTemplate` are referenced and their `Text` properties stored in local variables, `productNameValue` and `unitPriceValue`.</span></span> <span data-ttu-id="832d6-291">Používáme `Decimal.Parse()` metoda čtení hodnoty z `UnitPrice` textové pole tak, že pokud zadaná hodnota má symbolu měny, ho můžete stále správně převést na `Decimal` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="832d6-291">We use the `Decimal.Parse()` method to read the value from the `UnitPrice` TextBox so that if the value entered has a currency symbol, it can still be correctly converted into a `Decimal` value.</span></span>

> [!NOTE]
> <span data-ttu-id="832d6-292">Hodnoty z `ProductName` a `UnitPrice` textová pole mají přiřazenou pouze k proměnné productNameValue a unitPriceValue, pokud má hodnotu vlastnosti Text textových polí.</span><span class="sxs-lookup"><span data-stu-id="832d6-292">The values from the `ProductName` and `UnitPrice` TextBoxes are only assigned to the productNameValue and unitPriceValue variables if the TextBoxes Text properties have a value specified.</span></span> <span data-ttu-id="832d6-293">Jinak hodnota `Nothing` se používá pro proměnné, která má za následek aktualizace dat s databází `NULL` hodnotu.</span><span class="sxs-lookup"><span data-stu-id="832d6-293">Otherwise, a value of `Nothing` is used for the variables, which has the effect of updating the data with a database `NULL` value.</span></span> <span data-ttu-id="832d6-294">To znamená, že naše kódu považuje převede prázdné řetězce k databázi `NULL` hodnoty, které je výchozí chování úpravy rozhraní v ovládacích prvcích GridView DetailsView a FormView.</span><span class="sxs-lookup"><span data-stu-id="832d6-294">That is, our code treats converts empty strings to database `NULL` values, which is the default behavior of the editing interface in the GridView, DetailsView, and FormView controls.</span></span>


<span data-ttu-id="832d6-295">Po přečtení hodnoty, `ProductsBLL` třídu s `UpdateProduct` metoda je volána, předávání v názvu produktu s, cena, a `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="832d6-295">After reading the values, the `ProductsBLL` class s `UpdateProduct` method is called, passing in the product s name, price, and `ProductID`.</span></span> <span data-ttu-id="832d6-296">Obslužné rutiny události dokončení vraťte se na stav předem úpravy pomocí přesně stejné logiky, jako v prvku DataList `CancelCommand` obslužné rutiny události.</span><span class="sxs-lookup"><span data-stu-id="832d6-296">The event handler completes by returning the DataList to its pre-editing state using the exact same logic as in the `CancelCommand` event handler.</span></span>

<span data-ttu-id="832d6-297">Pomocí `EditCommand`, `CancelCommand`, a `UpdateCommand` dokončit obslužné rutiny událostí, návštěvníka můžete upravit název a cena produktu.</span><span class="sxs-lookup"><span data-stu-id="832d6-297">With the `EditCommand`, `CancelCommand`, and `UpdateCommand` event handlers complete, a visitor can edit the name and price of a product.</span></span> <span data-ttu-id="832d6-298">Následující obrázky 14 až 16 zobrazit tento pracovní postup úpravy v akci.</span><span class="sxs-lookup"><span data-stu-id="832d6-298">Figures 14-16 show this editing workflow in action.</span></span>


<span data-ttu-id="832d6-299">[![Při první návštěvě stránky, všechny produkty, které jsou v režimu jen pro čtení](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image35.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="832d6-299">[![When First Visiting the Page, All Products are in Read-Only Mode](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image35.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image34.png)</span></span>

<span data-ttu-id="832d6-300">**Obrázek 14**: při první návštěvě stránky, všechny produkty, které jsou v režimu jen pro čtení ([Kliknutím zobrazit obrázek v plné velikosti](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="832d6-300">**Figure 14**: When First Visiting the Page, All Products are in Read-Only Mode ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image36.png))</span></span>


<span data-ttu-id="832d6-301">[![K aktualizaci produktu s název nebo cena, klikněte na tlačítko Upravit](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image38.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="832d6-301">[![To Update a Product s Name or Price, Click the Edit Button](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image38.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image37.png)</span></span>

<span data-ttu-id="832d6-302">**Obrázek 15**: Chcete-li aktualizovat produkt s názvem nebo ceny, klikněte na tlačítko Upravit ([Kliknutím zobrazit obrázek v plné velikosti](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="832d6-302">**Figure 15**: To Update a Product s Name or Price, Click the Edit Button ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image39.png))</span></span>


<span data-ttu-id="832d6-303">[![Po změně hodnoty, kliknutím na tlačítko Aktualizovat vraťte se do režimu jen pro čtení](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image41.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="832d6-303">[![After Changing the Value, Click Update to Return to the Read-Only Mode](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image41.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image40.png)</span></span>

<span data-ttu-id="832d6-304">**Obrázek 16**: po změně hodnoty, klikněte na Aktualizovat vraťte se do režimu jen pro čtení ([Kliknutím zobrazit obrázek v plné velikosti](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="832d6-304">**Figure 16**: After Changing the Value, Click Update to Return to the Read-Only Mode ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image42.png))</span></span>


## <a name="step-7-adding-delete-capabilities"></a><span data-ttu-id="832d6-305">Krok 7: Přidání schopností odstranění</span><span class="sxs-lookup"><span data-stu-id="832d6-305">Step 7: Adding Delete Capabilities</span></span>

<span data-ttu-id="832d6-306">Kroky pro přidání funkcí odstranění do DataList jsou podobná těm pro přidání možností úprav.</span><span class="sxs-lookup"><span data-stu-id="832d6-306">The steps for adding delete capabilities to a DataList are similar to those for adding editing capabilities.</span></span> <span data-ttu-id="832d6-307">Stručně řečeno, je potřeba přidat tlačítko Odstranit `ItemTemplate` , při kliknutí na:</span><span class="sxs-lookup"><span data-stu-id="832d6-307">In short, we need to add a Delete button to the `ItemTemplate` that, when clicked:</span></span>

1. <span data-ttu-id="832d6-308">Přečte v odpovídající produktu s `ProductID` prostřednictvím `DataKeys` kolekce.</span><span class="sxs-lookup"><span data-stu-id="832d6-308">Reads in the corresponding product s `ProductID` via the `DataKeys` collection.</span></span>
2. <span data-ttu-id="832d6-309">Provede odstranění voláním `ProductsBLL` třídu s `DeleteProduct` metoda.</span><span class="sxs-lookup"><span data-stu-id="832d6-309">Performs the delete by calling the `ProductsBLL` class s `DeleteProduct` method.</span></span>
3. <span data-ttu-id="832d6-310">Znovu připojí data k prvku DataList.</span><span class="sxs-lookup"><span data-stu-id="832d6-310">Rebinds the data to the DataList.</span></span>

<span data-ttu-id="832d6-311">Umožní s Začněte přidáním tlačítko Odstranit `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="832d6-311">Let s start by adding a Delete button to the `ItemTemplate`.</span></span>

<span data-ttu-id="832d6-312">Při kliknutí na tlačítko jejichž `CommandName` je upravit, aktualizaci nebo Storno vyvolá DataList s `ItemCommand` událostí společně s další událost (například při použití úprav `EditCommand` událost se vyvolá také).</span><span class="sxs-lookup"><span data-stu-id="832d6-312">When clicked, a Button whose `CommandName` is Edit, Update, or Cancel raises the DataList s `ItemCommand` event along with an additional event (for example, when using Edit the `EditCommand` event is raised as well).</span></span> <span data-ttu-id="832d6-313">Podobně žádné tlačítko, LinkButton nebo ImageButton v prvku DataList jejichž `CommandName` je nastavena na odstranění příčin `DeleteCommand` na aktivaci události (spolu s `ItemCommand`).</span><span class="sxs-lookup"><span data-stu-id="832d6-313">Similarly, any Button, LinkButton, or ImageButton in the DataList whose `CommandName` property is set to Delete causes the `DeleteCommand` event to fire (along with `ItemCommand`).</span></span>

<span data-ttu-id="832d6-314">Přidání tlačítka Odstranit u tlačítka Upravit v `ItemTemplate`, nastavení jeho `CommandName` vlastnost k odstranění.</span><span class="sxs-lookup"><span data-stu-id="832d6-314">Add a Delete button next to the Edit button in the `ItemTemplate`, setting its `CommandName` property to Delete.</span></span> <span data-ttu-id="832d6-315">Po přidání toto tlačítko řízení vaší DataList s `ItemTemplate` deklarativní syntaxe by měl vypadat jako:</span><span class="sxs-lookup"><span data-stu-id="832d6-315">After adding this Button control your DataList s `ItemTemplate` declarative syntax should look like:</span></span>


[!code-aspx[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample7.aspx)]

<span data-ttu-id="832d6-316">Dále vytvořte obslužnou rutinu události pro DataList s `DeleteCommand` událostí, pomocí následujícího kódu:</span><span class="sxs-lookup"><span data-stu-id="832d6-316">Next, create an event handler for the DataList s `DeleteCommand` event, using the following code:</span></span>


[!code-vb[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample8.vb)]

<span data-ttu-id="832d6-317">Kliknutím na tlačítko Odstranit způsobí, že zpětné volání a aktivuje DataList s `DeleteCommand` událostí.</span><span class="sxs-lookup"><span data-stu-id="832d6-317">Clicking the Delete button causes a postback and fires the DataList s `DeleteCommand` event.</span></span> <span data-ttu-id="832d6-318">V obslužné rutině události kliknutelnou produktu s `ProductID` hodnota je k němu přistupovat z `DataKeys` kolekce.</span><span class="sxs-lookup"><span data-stu-id="832d6-318">In the event handler, the clicked product s `ProductID` value is accessed from the `DataKeys` collection.</span></span> <span data-ttu-id="832d6-319">Dále je produkt odstraněno voláním `ProductsBLL` třídu s `DeleteProduct` metoda.</span><span class="sxs-lookup"><span data-stu-id="832d6-319">Next, the product is deleted by calling the `ProductsBLL` class s `DeleteProduct` method.</span></span>

<span data-ttu-id="832d6-320">Po odstranění produktu, je důležité, že jsme rebind data, která mají DataList s (`DataList1.DataBind()`), jinak bude pokračovat DataList zobrazíte produkt, který byl právě odstraněn.</span><span class="sxs-lookup"><span data-stu-id="832d6-320">After deleting the product, it s important that we rebind the data to the DataList (`DataList1.DataBind()`), otherwise the DataList will continue to show the product that was just deleted.</span></span>

## <a name="summary"></a><span data-ttu-id="832d6-321">Souhrn</span><span class="sxs-lookup"><span data-stu-id="832d6-321">Summary</span></span>

<span data-ttu-id="832d6-322">Při prvku DataList chybí bodem a klikněte na tlačítko úpravy a odstraňování podporu líbilo podle GridView, s krátkou bit kódu ji můžete vylepšit zahrnout tyto funkce.</span><span class="sxs-lookup"><span data-stu-id="832d6-322">While the DataList lacks the point and click editing and deleting support enjoyed by the GridView, with a short bit of code it can be enhanced to include these features.</span></span> <span data-ttu-id="832d6-323">V tomto kurzu jsme viděli, jak vytvořit dva sloupce seznam produktů Nepodařilo se odstranit a jejichž název a cena může jej upravit.</span><span class="sxs-lookup"><span data-stu-id="832d6-323">In this tutorial we saw how to create a two-column listing of products that could be deleted and whose name and price could be edited.</span></span> <span data-ttu-id="832d6-324">Přidání, úpravy a odstraňování podporu je řádu včetně odpovídající ovládací prvky webového v `ItemTemplate` a `EditItemTemplate`, odpovídající obslužné rutiny událostí vytváření, čtení hodnoty klíče uživatel zadal a primární a propojování s firmy Vrstva logiky.</span><span class="sxs-lookup"><span data-stu-id="832d6-324">Adding editing and deleting support is a matter of including the appropriate Web controls in the `ItemTemplate` and `EditItemTemplate`, creating the corresponding event handlers, reading the user-entered and primary key values, and interfacing with the Business Logic Layer.</span></span>

<span data-ttu-id="832d6-325">Když jsme přidali základní úpravy a odstraňování funkcí, které DataList, nemá pokročilejší funkce.</span><span class="sxs-lookup"><span data-stu-id="832d6-325">While we have added basic editing and deleting capabilities to the DataList, it lacks more advanced features.</span></span> <span data-ttu-id="832d6-326">Například neexistuje žádné vstupní pole ověření – Pokud uživatel zadá cena příliš nákladné, bude vyvolána výjimka podle `Decimal.Parse` při pokusu o převod příliš nákladné do `Decimal`.</span><span class="sxs-lookup"><span data-stu-id="832d6-326">For example, there is no input field validation - if a user enters a price of Too expensive, an exception will be thrown by `Decimal.Parse` when attempting to convert Too expensive into a `Decimal`.</span></span> <span data-ttu-id="832d6-327">Podobně pokud došlo k potížím při aktualizaci data na obchodní logiku nebo datové vrstvy přístup uživatele zobrazí standardní chyba obrazovku.</span><span class="sxs-lookup"><span data-stu-id="832d6-327">Similarly, if there is a problem in updating the data at the Business Logic or Data Access Layers the user will be presented with the standard error screen.</span></span> <span data-ttu-id="832d6-328">Bez jakéhokoli druhu potvrzení na tlačítko Odstranit je všechny moc pravděpodobné nechtěnému odstranění produktu.</span><span class="sxs-lookup"><span data-stu-id="832d6-328">Without any sort of confirmation on the Delete button, accidentally deleting a product is all too likely.</span></span>

<span data-ttu-id="832d6-329">V budoucích kurzy ukážeme, jak ke zlepšení úpravy uživatelské prostředí.</span><span class="sxs-lookup"><span data-stu-id="832d6-329">In future tutorials we'll see how to improve the editing user experience.</span></span>

<span data-ttu-id="832d6-330">Radostí programování!</span><span class="sxs-lookup"><span data-stu-id="832d6-330">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="832d6-331">O autorovi</span><span class="sxs-lookup"><span data-stu-id="832d6-331">About the Author</span></span>

<span data-ttu-id="832d6-332">[Scott Meisnerová](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor sedm ASP/ASP.NET knih a zakladatele z [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracuje s technologií Microsoft Web od 1998.</span><span class="sxs-lookup"><span data-stu-id="832d6-332">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="832d6-333">Scott funguje jako nezávislé poradce, trainer a zapisovače.</span><span class="sxs-lookup"><span data-stu-id="832d6-333">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="832d6-334">Jeho nejnovější seznam k [ *Edice nakladatelství Sams naučit sami technologii ASP.NET 2.0 za 24 hodin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="832d6-334">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="832d6-335">Dosažitelný v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) nebo prostřednictvím svého blogu, který najdete na [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="832d6-335">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="832d6-336">Zvláštní poděkování</span><span class="sxs-lookup"><span data-stu-id="832d6-336">Special Thanks To</span></span>

<span data-ttu-id="832d6-337">Tento kurz řady byla zkontrolovány uživatelem mnoho užitečné kontrolorů.</span><span class="sxs-lookup"><span data-stu-id="832d6-337">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="832d6-338">Vést kontroloři pro účely tohoto kurzu byly Zack Petr, Ken Pespisa a Randy Schmidt.</span><span class="sxs-lookup"><span data-stu-id="832d6-338">Lead reviewers for this tutorial were Zack Jones, Ken Pespisa, and Randy Schmidt.</span></span> <span data-ttu-id="832d6-339">Kontrola Moje nadcházející články MSDN máte zájem?</span><span class="sxs-lookup"><span data-stu-id="832d6-339">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="832d6-340">Pokud ano, vyřaďte mi řádek v [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="832d6-340">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="832d6-341">[Předchozí](customizing-the-datalist-s-editing-interface-cs.md)
[další](performing-batch-updates-vb.md)</span><span class="sxs-lookup"><span data-stu-id="832d6-341">[Previous](customizing-the-datalist-s-editing-interface-cs.md)
[Next](performing-batch-updates-vb.md)</span></span>
